<!DOCTYPE html>
<html lang="en-US">
<head>
    <script>function OptanonWrapper(){document.dispatchEvent(new CustomEvent('OneTrustGroupsUpdated'))}var targetGlobalSettings={bodyHidingEnabled:false}</script><script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" crossorigin="anonymous" data-document-language="true" data-domain-script="6392b1b8-ab71-454a-a8a0-d49a88a3ab6c"></script><script src="//assets.adobedtm.com/launch-EN6060853e90c64641977caeb8933ac1c7.min.js" type="text/plain" class="optanon-category-C006"></script>    <script>
        var startTime = new Date().getTime();
    </script>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1;text/html;" />
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0" />
    <meta property="twitter:account_id" content="552257090" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@Priceless">
    <meta name="twitter:creator" content="@Priceless">
    <meta name="twitter:title" content="Priceless - search">
    <meta name="twitter:description" content="">
    <link rel="icon" type="image/png" href="https://d5xydlzdo08s0.cloudfront.net/images/mc/mc_favicon.ico" />
    <link rel="alternate" hreflang="x-default" href="https://www.priceless.com/m/filter/options/location/8910?country=us" />            <link rel="apple-touch-icon"                 href="https://d5xydlzdo08s0.cloudfront.net/images/mc/touch-icon-57.png">
            <link rel="apple-touch-icon" sizes="72x72"   href="https://d5xydlzdo08s0.cloudfront.net/images/mc/touch-icon-72.png">
            <link rel="apple-touch-icon" sizes="114x114" href="https://d5xydlzdo08s0.cloudfront.net/images/mc/touch-icon-114.png">
            <meta property="fb:app_id" content="511485969188215" >
<meta property="og:site_name" content="Priceless" >
<meta property="og:title" content="Priceless - search" >
<meta property="og:url" content="https://www.priceless.com/m/filter/options/location/8910" >
<meta property="og:type" content="product" >
<meta property="og:description" content=". " >
<script>
    /* for www.priceless.com */

    var g_appVersion             = "12.01";
    var g_thisHost               = 'www';
    var g_controller_id          = 'search';
    var g_controller_action_id   = 'filterpage';
    var g_page                   = 'search.filterpage';
    var g_is_mobile              = true; // app
    var g_is_tablet              = false; // device
    var g_siteUrlPrefix          = 'https://www.priceless.com';
    var g_staticFileBasePath     = 'https://d5xydlzdo08s0.cloudfront.net';
    var g_sessionAccessCode      = '';
    var g_forVendorSignUp        = false;
    var g_is_pickonePromo        = false;
    var g_requiresOrderApproval  = false;
    var g_disableCustomerDetails = false;
    var g_showDayOfContactInfo   = 0;
    var g_instantAccessCode = '';
    var g_vendorPortalLayout = '';
    var g_concierge = '';
    var g_is_amex   = '';       // used in checkout.js
    var g_is_guest  = true;
    var g_tempUser  = false;
    var g_guestOrderUser = false;
    var g_uuidCheckout       = true;
    var g_needCompleteSignup = false;
    var g_forceGuestCheckout = false;
    var g_disableGuestCheckout = false;
    var g_seriesGuestCheckOut = '';
    var g_redemption_code = '';
    var g_guest_productId = '';
    var g_guest_eventTime = '';
    var g_guest_clicked_btn = '';
    var g_guest_parent_productId = '';  // used for adding guest sweepstakes entry product into cart
    var g_catId           = '0';
    var g_googleClientKey = '443423912242-jbo6g2ga0jhj46ashn2m3f1mlt8ugfr1.apps.googleusercontent.com';
    var g_linkedInId      = '75az42qj3a92uq';
    var g_showCallOut = false;
    var g_popupId = '';
    var g_active_popup = '';
    var g_readyFor_cart = false;
    var g_productId = '';
    var g_bespoke = '';
    var g_vendorProfile = '';
    var g_vendorSignUp  = '';
    var g_cat_featured_products = false;
    var g_localRadiusMiles     = ''; // used in vendorPortal
    var g_regionalRadiusMiles  = ''; // used in vendorPortal
    var g_vendorLocation       = ''; // used in vendorPortal
    var g_inCoversationPage    = false; // used in vendorPortal
    var g_password_length      = '8';
    var g_signup_timer = 2000;
    var g_login_timer  = 1000;
    var g_pay_load_start_time = 0;
    var g_siteId       = 5; // should be number
    var g_languageId   = 1;
    var g_sourceId  = 0;
    var g_sourceWelcomeString = "";
    var g_user_lvl  = 1;  // should be number
    var g_userId    = '0';
    var g_emailAddress = "";
    var g_vendorId  = '';
    var g_currency_localeId = '1';
    var g_forceLogin           = false; // see _autoPopup_js
    var g_stream_lined_sign_up =  true;
    var g_loggedInManually     = false;
    var g_showNewMobileCat = true;
    var g_isMobileApp = 0;
    var g_uaType = 1; // should be number
    var autoPopupTimer = '';

    var wishlistProducts = '';
    var activatedProducts = '';
    var g_filter_only_type = '';
    var g_is_responsive = true;
    var g_chrome_iOS = false;
    var g_thisDomain = 'www.priceless.com';
    var g_nodeServer = 'origin-us.priceless.com:3000';
    var g_enable_websocket = true;
    var g_dashboard_page = '';
    var g_comingSoonTimeoutSet = false; //coming soon auctions. Used in product/_auction_new

    var g_show_how_it_works = false;
    var g_discovery_type = {
        desktopNav:"DESKTOP-NAV",
        desktopWidget:"DESKTOP-WIDGET",
        mobileWidget:"MOBILE-WIDGET"
    };
    var g_followingCelebIds = [];
    var g_infobox_modes = {
        edit: 'EDIT',
        exe:  'EXE',
        display: 'DISPLAY'
    };

    var g_signup_recaptcha_id = null;
    var g_login_recaptcha_id  = null;

    var g_is_local_host = false;
    var g_welcomeString = "";    // see /common/_loginAndRegistrationDialogs
    var g_accesscodeTitle = "";  // see /common/_loginAndRegistrationDialogs
    
    var g_isDesktop = true;
    var g_isTablet  = false;
    var g_link = window.location.pathname;
    var g_searchTerm = "";
    var g_agent_type = 1;
    var g_agent_type_options = {'ios':4};
    var g_homepage_catId = 67;
    var g_autoAddAvaEveryWhere = true; // used in filter
    var g_filter_from_date = "";
    var g_filter_to_date   = "";
    var g_filter_from_mobile_menu = false; // gets set to true when mobile menu or discovery widget is opened
    var g_filter_get_products_ajax = "";
    var g_filter_get_products_ajax_data = {};
    var g_filter_min_slide_value = 1;
    var g_filter_max_slide_value = 33;
    var g_filter_stay_in_page = true;
    var g_filter_slider_exchange_rate_factor = '1';
    var g_price_converter_string       = 'US$%replace_with_price%';
    var g_price_converter_place_holder = '%replace_with_price%';
    var g_manuallyScroll   = true;
    var g_list_type        = {category:'category', filter:'filter', productization:'productization'};
    var g_currentListType  = undefined;  // can be (1) category, (2) filter (3) productization
    var g_category_products_and_collections = [];
    var g_special_offer_products            = [];
    var g_cat_pro_col_index                 = 0;
    var g_no_lazysize_img_cnt               = 5;
    var g_block_pCnt = '8';
    var g_downloading_new_tiles = false;
    var g_localStorage_available = true;
    var g_google_user_map = '';
    var g_google_user_map_params = '';
    var g_section_percentage     = 0;
    var g_section_submitted      = 0;
    var g_section_do_not_submit  = false;
    var g_user_carted_items_cnt  = 0;
    var g_baidu_ac; // baidu auto complete

    var g_headerVersion = '';

    var g_renderedTileIndex  = 0;   // used to store g_cat_pro_col_index value from localStorage for back btn usage purpose

    var g_changeRequestOii = 0;

    var g_allowFacebookTracking = false;

    var g_duringAddressSave = false;

    var g_ApplePayAvailable;
            g_ApplePayAvailable = !!(
            window.ApplePaySession &&
            ApplePaySession.canMakePayments() &&
            ApplePaySession.canMakePaymentsWithActiveCard('merchant.com.priceless.applepay')
        );
    
    var g_GooglePayAvailable = true;

    var g_SamsungPayAvailable = false; // will it ever be?

    var g_SRC_Available = false; // will be overridden in _checkout_js_def

    var g_extendAllowedCCNetworks = false;

    //
            var g_getVar = "{\"location\":\"8910\"}";
        

    // *****************************  map settings **************************************
    var g_grayScale = [
        {"featureType":"landscape","stylers":[{"saturation":-100},{"lightness":65},{"visibility":"on"}]},
        {"featureType":"poi","elementType": "geometry","stylers":[{"saturation":-100},{"lightness":51},{"visibility":"simplified"}]},
        {"featureType":"poi","elementType": "labels","stylers":[{"visibility":"off"}]},
        {"featureType":"road.highway","stylers":[{"saturation":-100},{"visibility":"simplified"}]},
        {"featureType":"road.arterial","stylers":[{"saturation":-100},{"lightness":30},{"visibility":"on"}]},
        {"featureType":"road.local","stylers":[{"saturation":-100},{"lightness":40},{"visibility":"on"}]},
        {"featureType":"transit","stylers":[{"saturation":-100},{"visibility":"simplified"}]},
        {"featureType":"administrative.province","stylers":[{"visibility":"off"}]},
        {"featureType":"water","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":-25},{"saturation":-100}]},
        {"featureType":"water","elementType":"geometry","stylers":[{"hue":"#ffff00"},{"lightness":-25},{"saturation":-97}]}
    ];

    var g_ifonly_socket = '';
    var g_latitude  = '';
    var g_longitude = '';

    function getJsText(index, replace) {
        var strings =   {
            'January'   : "January",
            'February'  : "February",
            'March'     : "March",
            'April'     : "April",
            'May'       : "May",
            'June'      : "June",
            'July'      : "July",
            'August'    : "August",
            'September' : "September",
            'October'   : "October",
            'November'  : "November",
            'December'  : "December",
            'Sun'       : "Sun",
            'Mon'       : "Mon",
            'Tue'       : "Tue",
            'Wed'       : "Wed",
            'Thu'       : "Thu",
            'Fri'       : "Fri",
            'Sat'       : "Sat",
            'Su'        : "Su",
            'Mo'        : "Mo",
            'Tu'        : "Tu",
            'We'        : "We",
            'Th'        : "Th",
            'Fr'        : "Fr",
            'Sa'        : "Sa",
            'Yes'       : "Yes",
            'No'        : "NO",
            'Now'       : "now",      //jquery-ui-timepicker-addon.js
            'Done'      : "Done",
            'Close'     : "Close",
            'people'    : "people",
            'person'    : "person",
            'hour'      : "hour",
            '1_hour'    : "1 hour",
            'many_hours': "%numberOfHours% hours",
            'italics'   : "italics",  // VP todo timeline
            'vp_todo_guest_expect'  : "What can your guest expect at this time?",
            'Describe in detail'    : "Describe in detail (optional)",
            'add a step'            : "add a step",
            'View All Results'      : "View All Results",
            'No changes detected'   : "No changes detected", //infobox.js
            'Details Needed'        : "Details Needed",
            'checkout_willBeSent'   : "Will be sent %emailDate%",
            'infobox_describe_request_for'  : "Describe your custom request for  %vendorName%",
            'infobox_schedule_past_warning' : "The scheduled date you are trying to confirm is in the past. Are you sure you want to proceed?",
            'Confirm Past Event Date'       : "Confirm Past Event Date",
            'Request More'                  : "Request more",
            'vp_details_need_suggest'       : "We suggest you submit <span class=\"fo-15-n-s4\">both Date\/Time<\/span> and <span class=\"fo-15-n-s4\">Location<\/span>. Your experience will not be officially booked until both Date\/Time and Location are agreed upon. ",
            'vp_details_proceed'            : "Are you sure you would like to proceed?",
            'exception_request_people_index_start' : " additional people (as exception)",
            'exception_request_people_index_end'   : " (as exception)",
            'exception_request_person_index'       : " additional person (as exception)",
            'Additional'                           : "Additional",
            'exception_request_admin_warning'      : "This is an exception request that you need to set the price for. Are you sure you want to proceed?",
            'refresh_try_again'                    : "Please refresh and try again.",
            'inventory_warning_not_available'      : "The %productName% is not available.",
            'thanks_for_sharing'                   : "Thanks for sharing.",
            'please_enter_message'                 : "Please enter message",
            'please_enter_subject_and_messasge'    : "Please enter subject and message",
            'g_checkout_hyatt_points'              : "%points% Points",
            'remove_from_watchlist'                : "REMOVE FROM WATCHLIST",
            'remove_from_wishlist'                 : "Remove from wishlist",
            'add_to_watchlist'                     : "Add to watchlist",
            'add_to_wishlist'                      : "Add to wishlist",
            'item_added_to_watchlist'              : "Item has been added to your watchlist",
            'view'                                 : "View",
            'view_here'                            : "View Here",
            'new_message'                          : "You have a new message",
            'new_conversation'                     : "You have a new conversation",
            'new_order'                            : "Congratulations! You have a new order #%orderId%",
            'new_order_requires_attention'         : "Congratulations! You have a new order #%orderId% that requires your attention",
            'order_status_notif_shipped'           : "Items in Order #%orderId% have shipped",
            'order_status_notif_pending_log'       : "Order #%orderId% details have been confirmed",
            'order_status_notif_pending_schedule'  : "Order #%orderId% requires action",
            'order_status_notif_cancelled'         : "Order #%orderId% has been cancelled",
            'order_status_notif_default'           : "Order #%orderId% has been changed",
            'unit_many'               : "%num% units",
            'unit_one'                : "1 unit",
            '1_unit'                  : "1 unit",
            'number_includes_product' : "%num_units% included products(s)",
            'number_includes_product_one'  : "1 included product",
            'number_includes_product_many' : "%num_units% included products"        };

        if (typeof strings[index] === 'undefined') {
            return index;
        } else {
            var str = strings[index];
            if (typeof replace === 'object') {
                for (var key in replace) {
                    str = str.replace(key, replace[key]);
                }
            }
            return str;
        }
    }
</script>
<script type='text/javascript'>
        (function (funcName, baseObj) {
        "use strict";
                funcName = funcName || "docReady";
        baseObj = baseObj || window;
        var readyList = [];
        var readyFired = false;
        var readyEventHandlersInstalled = false;

        // call this when the document is ready
        // this function protects itself against being called more than once
        function ready() {
            if (!readyFired) {
                                readyFired = true;
                for (var i = 0; i < readyList.length; i++) {
                                        readyList[i].fn.call(window, readyList[i].ctx);
                }
                                readyList = [];
            }
        }

        function readyStateChange() {
            if (document.readyState === "complete") {
                ready();
            }
        }
                baseObj[funcName] = function (callback, context) {
            // if ready has already fired, then just schedule the callback
            // to fire asynchronously, but right away
            if (readyFired) {
                setTimeout(function () {
                    callback(context);
                }, 1);
                return;
            } else {
                // add the function and context to the list
                readyList.push({fn: callback, ctx: context});
            }
                        if (document.readyState === "complete" || (!document.attachEvent && document.readyState === "interactive")) {
                setTimeout(ready, 1);
            } else if (!readyEventHandlersInstalled) {
                // otherwise if we don't have event handlers installed, install them
                if (document.addEventListener) {
                    // first choice is DOMContentLoaded event
                    document.addEventListener("DOMContentLoaded", ready, false);
                    // backup is window load event
                    window.addEventListener("load", ready, false);
                } else {
                    // must be IE
                    document.attachEvent("onreadystatechange", readyStateChange);
                    window.attachEvent("onload", ready);
                }
                readyEventHandlersInstalled = true;
            }
        };
    })("docReady", window);

    //******************** Ifonly Event emitter

    // ifOnly ready custom event
    var g_eventHandlers = [];

        if (document.createEvent) {
        var g_ioReadyEvent = document.createEvent('Event');
        g_ioReadyEvent.initEvent('ioReady', true, true);
    } else {
        var g_ioReadyEvent = document.createEventObject();
        g_ioReadyEvent.eventType = 'ioReady';
    }

    (function (funcName, baseObj) {
        "use strict";

        funcName = funcName || "ioReady";
        baseObj = baseObj || window;

        baseObj[funcName] = function (callback) {
            g_eventHandlers.push(callback);
            document.addEventListener("ioReady", callback);
        };
    })("ioReady", window);

    function destroyIfonlyReadyEvent() {
        if (g_eventHandlers.length > 0) {
            for (var key in g_eventHandlers) {
                document.removeEventListener("ioReady", g_eventHandlers[key]);
            }
            // empty the array
            // garbage collector take care of the memory thing
            g_eventHandlers = [];
        }
    }

    // helper function to handle customed events
    function ioTriggerEvent(el, eventName, event) {
        if (el.dispatchEvent) {
            el.dispatchEvent(event);
        } else if (el.fireEvent) {// IE < 9
            el.fireEvent('on' + eventName, event);// can trigger only real event (e.g. 'click')
        }
    }

    // trigger ioReadyEvent
    function triggerIOReadyEvent() {
        docReady(function () {
            ioTriggerEvent(document, "ioReady", g_ioReadyEvent);
            //console.log("triggered io ready event");
            // destry listden events
            destroyIfonlyReadyEvent();
            //console.log("destroy io ready event");
        });

    }

    // The follow codes add the
    // addEventListener, removeEventListener, Event.preventDefault and Event.stopPropagation  which are not being supported by IE 8
    (function () {
        if (!Event.prototype.preventDefault) {
            Event.prototype.preventDefault = function () {
                this.returnValue = false;
            };
        }
        if (!Event.prototype.stopPropagation) {
            Event.prototype.stopPropagation = function () {
                this.cancelBubble = true;
            };
        }
        if (!Element.prototype.addEventListener) {
            var eventListeners = [];
            var addEventListener = function (type, listener /*, useCapture (will be ignored) */) {
                var self = this;
                var wrapper = function (e) {
                    e.target = e.srcElement;
                    e.currentTarget = self;
                    if (typeof listener.handleEvent !== 'undefined') {
                        listener.handleEvent(e);
                    } else {
                        listener.call(self, e);
                    }
                };
                if (type === "DOMContentLoaded") {
                    var wrapper2 = function (e) {
                        if (document.readyState === "complete") {
                            wrapper(e);
                        }
                    };
                    document.attachEvent("onreadystatechange", wrapper2);
                    eventListeners.push({object: this, type: type, listener: listener, wrapper: wrapper2});

                    if (document.readyState === "complete") {
                        var e = new Event();
                        e.srcElement = window;
                        wrapper2(e);
                    }
                } else {
                    this.attachEvent("on" + type, wrapper);
                    eventListeners.push({object: this, type: type, listener: listener, wrapper: wrapper});
                }
            };
            var removeEventListener = function (type, listener /*, useCapture (will be ignored) */) {
                var counter = 0;
                while (counter < eventListeners.length) {
                    var eventListener = eventListeners[counter];
                    if (eventListener.object == this && eventListener.type == type && eventListener.listener == listener) {
                        if (type === "DOMContentLoaded") {
                            this.detachEvent("onreadystatechange", eventListener.wrapper);
                        } else {
                            this.detachEvent("on" + type, eventListener.wrapper);
                        }
                        eventListeners.splice(counter, 1);
                        break;
                    }
                    ++counter;
                }
            };
            Element.prototype.addEventListener = addEventListener;
            Element.prototype.removeEventListener = removeEventListener;
            if (HTMLDocument) {
                HTMLDocument.prototype.addEventListener = addEventListener;
                HTMLDocument.prototype.removeEventListener = removeEventListener;
            }
            if (Window) {
                Window.prototype.addEventListener = addEventListener;
                Window.prototype.removeEventListener = removeEventListener;
            }
        }
    })();
    //*************** Ifonly Event emitter End
</script>

    <link rel="stylesheet" type="text/css" href="/scripts/mobile/mobile.all.5.min.css?1680279298" />
<link rel="stylesheet" type="text/css" href="/scripts/iostyleguide/io_sg_s5.css?1680279298" />
<link rel="stylesheet" type="text/css" href="/scripts/iostyleguide/io_sg_s5_l1.css?1680279298" />
<link rel="stylesheet" type="text/css" href="/scripts/bootstrap-grid.css" />
<link rel="stylesheet" type="text/css" href="/scripts/node_modules/slick-carousel/slick/slick.css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC0maY5si28S9FM1Wna4eK9xoyHLdJs6ik&amp;libraries=places&amp;language=en"></script>
<title>Priceless - search</title>
    <link rel='canonical' href='https://www.priceless.com/filter/options/location/8910' >
<style>
        .order_item_title_field.totalPrice_field.noprice {display:none;}    
    .order_details_link.noprice {display:none;} 
    
            
        
            
        
            
        
            
     
        
    
</style>    

</head>
<body id="body" class=" mobile "  >
    <script>var di = {"pageName":"search.filterpage","pageURL":"https:\/\/www.priceless.com\/m\/filter\/options\/location\/8910","siteName":"Priceless","region":"North America","country":"US","language":"en-us","loginType":"Logged Out","deviceType":"Mobile","pageType":"B2C","contentCity":""}</script>    <div id="body-overlay"></div>
    <div class="ifonly-templates" style="display:none;">
        <input type="hidden" id="loadedACnt" value="0" />
        <input type="hidden" id="loadedPCnt" value="0" />
        <input type="hidden" id="loadedSCnt" value="0" />
        <input type="hidden" id="needMoreTiles" value="1" />
        <input type="hidden" id="loadedBCnt" value="0" />
        <div id='product_template' style="display:none;">
            <div class="productTile product default">
                
<div class="tile_inner_box" style="position: relative; display: block">
<a  class="tile_product tile js-product-title    desktop"
    href="/m"
    target="_self"
    pid=""  displayOrderPoints="" ori_displayOrderPoints="" displayOrder=""
        di-type="basic" di-class="Body Click" di-id="Product Tile" >
    <div class="product_img_container sg-c-3">
        <div class="buy_type   sg-inline-middle" style="direction:ltr; display:none; ">
            <div class="buy_type_text sg-text-transform sg-f-bdy-s sg-inline-middle" style='background-color:#141413;' >
                <span>
                                    </span>
            </div>
            <svg style="margin-left: -1px;" width="1em" height="2em">
                <polygon points="0,0 12,0 0,25" style="fill:#141413"></polygon>
            </svg>
        </div>
        <div class="auction_type" style="display:none; " >
            <div class="auction_text sg-text-transform sg-inline-middle" style="" >
                <span>
                                    </span>
            </div>
        </div>

        <div class="bottom_banner " style="display:none; " >
            <div class="bottom_banner_text sg-text-transform sg-inline-middle" style="" >
                <span>
                                    </span>
            </div>
        </div>

        <div class="product_image_wrapper">
            <div class="product_image_viewport">
                <img class="product_img js-lazyload" src="data:," data-src="" alt="" role="presentation"/>
            </div>
        </div>
        <img class="celeb_img js-lazyload  sg-bg-3" src="data:," data-src="" alt="" style="display:none; "  />
        <div class="occasion_banner_container ">
                    </div>

            </div>

            <div class='product_text_container sg-f-bdy sg-c-2 '>
            <div class="details_div">
                <div class="product_celeb_name" style="visibility: hidden"> 
                                    </div>
                <div class="product_stars" data-celebAverageRating=""  >
                                    </div>
            </div>

                        <div class="product_location" style=""></div>

                            <div class="product_title sg-c-1">
                    <h3 class="sg-f-bdy"></h3>
                </div>
            
                                <div class="product_price" ></div>
                            
                    </div>
    </a>
    <button class="heart_img wishlist  " tabindex="0" pid="" aria-label="Add to wishlist" alt="Add to wishlist" title="Add to wishlist"
         style="visibility: hidden; border-width: 0px;"
         lvl="1" di-type="basic" di-class="Body Click" di-id="Add To Wishlist"  >
    </button>
    
<div class="wishlist-main-con" style="z-index:1; position: absolute; right: 5px; text-align: right; top: 30px;">
    <img class="wishlist-carrot" src="https://d5xydlzdo08s0.cloudfront.net/images/io/arrow_up_white_border.png" alt="wishlist carrot"/>
    <div class="wishlist-text-con sg-bg-3 sg-bd-2 ">
        <p class="wishlist-text sg-f-bdy sg-c-primary sg-text-transform" style='text-align:center'>
            Add to wishlist        </p>
    </div>
</div></div>
            </div>
        </div>

        <div id='collection_template' style="display:none;">
            
<a class="tile_collection tile  mobile" 
   style=''
   href="" 
   target="_self"
   di-type="basic" di-class="Body Click" di-id="Collection Tile" >
    <div class="collection_img_container js-cat-gradient">
        <img class="collection_img js-lazyload " src="data:," data-src="" alt="" />
        <div class="collection-text-wrapper" style="">
            <div class="collection-text-content sg-inline-middle">
                <div class="io-row">
                    <div class="collection_title sg-f-dspl-m2 sg-c-3 sg-text-transform"></div>
                    <div class="collection_description sg-f-dspl-s sg-c-3" style="text-align:center;"></div>
                </div>
            </div>
        </div>
        <div class="gradient-con" style="display: none;">
            <div class='gradient '></div>
        </div>
    </div>
    
    </a>


<style>
    .collection-text-content td { vertical-align: top; padding-top: 16px; }
    .collection_title { text-align: left; padding: 0 22px !important; margin-bottom: 56%;}
    .rtl .collection_title { text-align: right; padding: 0 22px !important; }    
</style>
        </div>

        <div id='ad_template' style="display:none;">
            
<a class="tile_ad tile mobile "
    target="_self"
    href="javascript:;"
    di-type="basic" di-class="Body Click" di-id="Ad Tile" >
    <div class="ad_img_container">
        <img class="tile_img js-lazyload" src="data:," data-src="" alt="ad tile" />
    </div>
</a>        </div>

        <div id="productization_product_template" style="display:none;">
            

<div class="productization_product discovery" pid="">

    <div class="luminary_img_div productization_info_div">

        <div class="luminary_img_box_wrapper">
            <a class="luminary_img_box" target="_blank" href="/m" data-celebId=''>
                <img class="luminary_img js-lazyload" src="data:," alt="celebrity image"  />
            </a>    
        </div>   
        
        <!-- for mobile -->
        <div class="luminary_title_wrapper mobile_only">
            <div class="luminary_info_row">
                <div class="luminary_name sg-f-dspl-m2" data-celebId=''></div>
                <div style="clear:both;"></div>
            </div>    
            
            <div class="charity_name" data-charityId=""></div>
            
        </div>  
        
        <div style="clear:both;"></div>

    </div>


    <div class="product_description_div productization_info_div">

        <!-- for desktop -->
        <div class="header_row" style="width: 100%; ">
            <div class="luminary_name sg-f-dspl-m2" data-celebId=''></div>
            <div class="charity_name" data-charityId=""></div>
        </div>  

        <div class="bio_row sg-f-bdy"></div>

        <div class="quote_row sg-c-primary sg-f-ttl fs-1"></div>
        
        <div class="attr_table sg-inline-middle">
            <div class='location_td sg-inline-flex-grow' style='display:none'><img src='https://d5xydlzdo08s0.cloudfront.net/images/mc/mc_icons_people_blk_Addresses.png' alt='Location icon' /><span></span></div><div class='guests_td sg-inline-flex-grow' style='display:none'><img src='https://d5xydlzdo08s0.cloudfront.net/images/mc/mc_icons_people_blk_Group.png' alt='People Icon' /><span></span></div><div class='duration_td sg-inline-flex-grow' style='display:none'><img src='https://d5xydlzdo08s0.cloudfront.net/images/mc/mc_icons_experiences_blk_Clock.png' alt='Clock Icon' /><span></span></div>        </div>
    </div>    

    <div class="product_price_div productization_info_div">
        <div class="price_text sg-f-ttl txt-align-rlt-r"></div>
        
        
                <form class="js-productization-add-to-bag add_to_bag_form" action="/m/product/addProductizedProductToBag" method="POST">
<input type="hidden" value="YXpzX3lvejRfYUpEZmFxbUJQcnE0NnVaYWtjYjBrM0qsoF2dqjOACHqI7jaBT7068nBO46NM9wJVXOVmdfm8eQ==" name="stk" />            <button  di-type="basic" di-class="Body Click" di-id="Follow" lvl="2" data-id="" data-name="" on-text="Following" off-text="Follow" style="" class="follow following  wide  primaryButton button " aria-label="Follow" alt="Follow" title="Get notified of new items from this merchant." tabIndex="0" role="button" type="button"><span class="title-container"><span class="title"><img class='greenCheck' src='https://d5xydlzdo08s0.cloudfront.net/images/mc/mc_icons_experiences_blk_check.png' alt='Follow checkmark' style='height:14px; vertical-align:bottom; position:relative; top:2px; display: none;'/><span class='title following-text sg-text-transform' style='vertical-align:middle; display:inline-block; line-height:14px;  width:auto;'>Follow</span></span></span></button><div  class="add_to_bag_btn primaryButton button " style="" pid="" onclick="add_productized_product_to_cart(this)" tabIndex="0" role="button"><span class="title-container"><span class="title">ADD TO CART</span></span></div><div  class="waitlist-button js-waitlist-button primaryButton button " pid="" style="display:none;" tabIndex="0" role="button"><span class="title-container"><span class="title">Waitlist</span></span></div>            <input type="hidden" class="js-productId-to-add" name="productId" value="" />
            <input type="hidden" class="" name="pageId" value="0" />
            
        </form>    </div>   
</div>   
    
    
    

        </div>
    </div>

    <div id="header-m" dir="ltr" class="sg-bg-nav">
        <style>
    #top-logo .logo img, #top .logo img{ max-height: 40px; }
    #top.rtl.mobile {flex-direction: row-reverse;}
    #top.rtl.mobile .logo {flex-direction: row-reverse;}
</style>
    <div id="top" class="sg-inline-middle  mobile">
        
            <div class='icon trigger menu' style='text-align:center'>
                <img class='hamburger_img sg-color-invert' alt="Main menu" src='https://d5xydlzdo08s0.cloudfront.net/m/images/icon_hamburger_FFF.png' tabindex='0' />
            </div>
                <div class="logo sg-inline-middle  mobile" style="height:100%; flex:50; margin-left: 5px; max-width: 320px"><a href="/" class="sg-inline-middle" style="height:100%"><img srcset="/media/frames/94/priceless_lockup_1x__L.png 240w,
            /media/frames/94/priceless_lockup_2x__L.png 480w,
           /media/frames/94/priceless_lockup_3x__L.png 720w"
     sizes="(max-width: 640px) 240px,
            (max-width: 980px) 480px,
            720px"
     src="/media/frames/94/priceless_lockup_1x__L.png" alt="Priceless" style="max-width:100%;"></a></div>

        <div class="sg-inline-flex-grow"> </div>

        
                            <div class="icon search" style="text-align:center; " di-type="basic" di-class="Header Click" di-id="Search" >
                        <img class='sg-color-invert' src="https://d5xydlzdo08s0.cloudfront.net/images/mc/search_white.png" alt="Search" tabindex="0" />
                    </div>
                                        <div class="icon bag sg-inline-middle " style="height: 100%; text-align:center; border-left: 1px solid white; ">
                        <a class="js-bag-link"  href="/m/cart" di-type="basic" di-class="Header Click" di-id="Cart" >
                            <img class="js-bag-img sg-color-invert" alt="Shopping cart" src="https://d5xydlzdo08s0.cloudfront.net/images/io/icon_cart_FFF-mbpng.png" />
                            <div class="bag-item sg-bg-3"><p class="text-center sg-c-1" id="js-cart-item-cnt">0</p></div>
                        </a>
                    </div>
                     
        <div class='icon trigger ' id='X-icon' style='filter:invert(100%); text-align:center; width:50px; display:none;'>
            <img class='X_img sg-color-invert'src='https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png'/>
        </div>
            </div>
        <div id="wish-popup-wrapper-m" style="display: none;">
        <img class="close js-close" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" />
        <div class="popup-content"></div>
    </div>

        </div>
    <div id="container" class="mobile">
            <div id="fb-root"></div>
    <script>
        function getFbSdkDirByLanguageId(languageId){
            var dir = 'en_US';
            switch(languageId){
                case  2: dir = 'es_ES'; break;
                case  3: dir = 'ru_RU'; break;
                case  4: dir = 'zh_CN'; break;
                case  5: dir = 'fr_CA'; break;
                case  6: dir = 'pt_BR'; break;
                case  7: dir = 'ja_JP'; break;
                case  8: dir = 'ar_AR'; break;
                case  9: dir = 'zh_HK'; break;
                case 10: dir = 'cs_CZ'; break;
                case 11: dir = 'fr_FR'; break;
                case 12: dir = 'de_DE'; break;
                case 13: dir = 'it_IT'; break;
                case 14: dir = 'es_ES'; break;
                case 15: dir = 'sv_SE'; break;
                case 16: dir = 'tr_TR'; break;
                case 17: dir = 'ko_KR'; break;
                case 19: dir = 'pl_PL'; break;
            }
            return dir;
        }

        window.fbAsyncInit = function() {
          FB.init({
            appId      : '511485969188215',
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true, // parse XFBML
            version    : 'v2.8'
          });
        };
        (function(d, s, id){
             var js, fjs = d.getElementsByTagName(s)[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement(s); js.id = id;
             var sdkDir = getFbSdkDirByLanguageId(g_languageId);
             js.src = "//connect.facebook.net/" + sdkDir + "/sdk.js";
             fjs.parentNode.insertBefore(js, fjs);
           }(document, 'script', 'facebook-jssdk'));
    </script>
    <!-- Pinterest Pixel Base Code -->
    <script type="text/javascript">
        function pintrk() {
            // do nothing
        };
    </script>
    
<div class="ifonly_sticky_msg discovery sg-f-bdy "  style=""
     onclick="ifonly_sticky_msg_clicked(this)" 
></div>
<script>
    //var headTime04 = new Date().getTime();
    //console.log("headTime04 "+ (headTime04 - startTime)/1000 +" seconds");
</script>

    <script type='text/javascript'  src='/scripts/node_modules/jquery/dist/jquery.min.js?12.01'></script>
<script type='text/javascript' src='/scripts/global.js?12.01'></script>

<script>
    function getPopupLeftToCenter(popupId) {
        var popupWidth = $("#"+popupId).width();
        if(g_is_mobile && popupWidth > $(window).width()) {
            popupWidth = .95 * $(window).width();
        }
        var left = ($(window).width() - popupWidth)/2;
        if (left < 0) {
            left = 10;
        }

        return left;
        //return 'calc(50% - ' + (popupWidth/2) + 'px)';
    }

    function getPopupLeftToCenterResponsive(popupId) {
        var popupWidth = $("#"+popupId).width();
        if(g_is_mobile && popupWidth > $(window).width()) {
            popupWidth = .95 * $(window).width();
        }
        return 'calc(50% - ' + (popupWidth/2) + 'px)';
    }

    function getPopupTopToCenter(popupId) {
        var top = ($(window).height() - $("#"+popupId).height())/2;

        if(g_is_mobile) {
            top += $(document).scrollTop();
        }

        if (top < 0) {
            top = 0;
        }

        if (g_thisHost !== 'www') {
            //console.log('TOP Popup: ' + popupId + '.  Window Height: ' + $(window).height() + '.  Popup Height: ' + $("#"+popupId).height() + '.  Top: ' + top);
        }

        //if the popup is inside #content div, it is relative to #content.
        //need to count the header height.
        if( $("#"+popupId).parents('#content').length>0 && !g_is_mobile){
            if($('#header-fixed:visible').length>0){
                top = top - $('#header-fixed:visible').height();
            }
            else if($('#header-m').length>0){
                top = top - $('#header-m:visible').height();
            }
        }

        return top ;
    }

    function isHandheld() {
        return /(iphone|ipod|android)/i.test(navigator.userAgent);
    }

    // save activeEle in to $obj's data attr: focused_ele
    function saveFocusedEle($obj, activeEle) {
        activeEle = activeEle || document.activeElement;
        $($obj).data('focused_ele', activeEle);
    }

    //load saved focus form $obj's data attr: focused_ele, and focus on it
    function loadFocusedEle($obj) {
        $obj = $($obj);
        if ($obj.data('focused_ele')) {
            var $focus = $($obj.data('focused_ele'));
            if ($obj.attr('id') != '') {
                $focus.attr('data-focus-set-from-id', $obj.attr('id'));
            }
            $focus.focus();
            $obj.data('focused_ele', null);
        }
    }

    //if focus moved out of container(say by hitting tab key,  set focus to $focus)
    // should be used in a key action event handler
    function trap_focus($container, focus, e){
        if ( typeof(e) === "undefined"){
            e = event || window.event;
        }

        $container = $($container);
        if (! $container.length){
            return;
        }

        var shifted = e.shiftKey;
        var $focusable = $container.find(':focusable');

        if (typeof(focus) === "undefined"){
            focus = (shifted ? $focusable.last() : $focusable.first())
        }
        var $focus = $(focus);
        if (! $focusable.length) {
            $container.focus();
        }
        else if ($focusable.length === 1) {
            $focus.focus();
        }
        else {
            var el = (shifted ? $focusable.first() : $focusable.last()).get(0); 
            if (el === document.activeElement) {
                $focus.focus();
                e.preventDefault();
            }
        }
    }
</script>
<script>

    var g_ajax_list = [];

    $.ajaxSetup({
        cache: false
    });

    $.ajaxPrefilter(function(options, originalOptions, jqXHR) {
        //console.log('ajaxPrefilter');
        //console.log(options);
        g_ajax_list[options.url] = {execTime: 0, started: Date.now(), completed: 0, elapsed: 0};

        if (typeof options.contentType === 'undefined' || options.contentType === false) {
            return;
        }
        var ifonlycsrftoken_name = 'stk';
        var ifonlycsrftoken = "YXpzX3lvejRfYUpEZmFxbUJQcnE0NnVaYWtjYjBrM0qsoF2dqjOACHqI7jaBT7068nBO46NM9wJVXOVmdfm8eQ==";
        var content = '';

        if (options.contentType.indexOf('json') !== -1){
            content = 'json';
        }
        else if (options.contentType.indexOf('x-www-form-urlencoded') !== -1 ||
                 options.contentType.indexOf('text') !== -1
        ) {
            content = 'string';
        }
        else {
            // unsupported types. do nothing
        }

        if (content === 'json') {
            // json post
            var params = JSON.parse(options.data);
            params[ifonlycsrftoken_name] = ifonlycsrftoken;
            options.data = JSON.stringify(params);
        } else if (content === 'string') {
            //form post
            if (options.data === undefined) {
                options.data = '';
            }
            if (options.data.indexOf(ifonlycsrftoken_name + '=') === 0) {
                // has it
            } else if (options.data.indexOf('&' + ifonlycsrftoken_name + '=') > 0) {
                // has it
            } else {
                // add
                options.data += (options.data === '' ? '' : '&') + ifonlycsrftoken_name + '=' + ifonlycsrftoken;     // encodeURIComponent()
            }
        }
    });

    $(document).ajaxComplete(function(event, xhr, settings) {
        var url = settings.url.split("?")[0].split("#")[0];
        var execTime = 0;
        if (typeof xhr.responseJSON === 'undefined') {
            return;
        }
        if (xhr.responseJSON._exetm) {
            execTime = xhr.responseJSON._exetm;
        }
        var found = false;
        for (var key in g_ajax_list) {
            if (url === key) {
                g_ajax_list[key].completed = Date.now();
                g_ajax_list[key].elapsed   = (Date.now() - g_ajax_list[url].started) / 1000;
                g_ajax_list[key].execTime  = execTime;
                found = true;
                break;
            }
        }
        if (! found) {
            g_ajax_list[url] = {execTime: execTime, started: 0, completed: Date.now(), elapsed: 0};
        }

        var ajaxTime = 0;
        for (var key in g_ajax_list) {
            ajaxTime += parseFloat(g_ajax_list[key].execTime);
        }

        var page  = parseFloat($("#hidden-info p.info span.exec").html());
        var ajax  = Math.round(ajaxTime * 1000) / 1000;
        var total = Math.round((page + ajax) * 1000) / 1000;

        $("#debug-info p.info span.ajax").html(ajax);
        $("#debug-info p.info span.total").html(total);
        $("#hidden-info p.info span.ajax").html(ajax);
        $("#hidden-info p.info span.total").html(total);
    });

// ********************************   Assets Loading Prioritizing  Codes   ********************************** //
var g_CoreJSLibs = {
    jqueryUI: false,
    jqueryWidget: false,
    jqueryTouchPunch: false,
    //jqueryTOOL: false,
    jqueryCookie: false,
    // globalJs: false,
    //commonJs: false,
    //mainJs: false,
    timepicker: ! ['product', 'cart'].includes(g_controller_id)
};

// ******* config of lazySizes ******************
// This object must be defined before the lazysizes script. (https://ifonly.atlassian.net/browse/VP-25371)
window.lazySizesConfig = window.lazySizesConfig || {};
window.lazySizesConfig.lazyClass = 'js-lazyload';
window.lazySizesConfig.loadMode = 1; // only load visible elements when page loaded
// **********************************************

var secondPriorityJs = {
    lazysizes: {
        defer: false,
        loaded: false,
        url: "/scripts/node_modules/lazysizes/lazysizes.min.js?"+g_appVersion
    },
    socketIo: {
        loaded: false,
        url: "/scripts/socket.io-1.4.5.min.js"
    }
};


if(g_is_mobile){

}else{
    secondPriorityJs.mousewheel = {
        loaded: false,
        url: "/scripts/node_modules/jquery-mousewheel/jquery.mousewheel.js?"+g_appVersion
    };
    secondPriorityJs.mCustomScrollbar = {
        loaded: false,
        //defer: false,
        url: "/scripts/node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.js?"+g_appVersion
    };
}


function secondPriorityJSLibLoading(){
    for (var key in secondPriorityJs) {
        if (! secondPriorityJs[key].loaded) {
            var script = document.createElement('script');
            script.src = secondPriorityJs[key].url;
            script.onload = secondPriorityJSHandling(key);
            if (secondPriorityJs[key].block === undefined){
                if (secondPriorityJs[key].async !== undefined && ! secondPriorityJs[key].async){
                    // need sync
                } else if (secondPriorityJs[key].defer !== undefined && ! secondPriorityJs[key].defer){
                    script.async = true;
                } else {
                    script.defer = true;
                }
            }
            document.head.appendChild(script);
        }
    }
}

function coreJSLoadingHandling(keyName){

    //console.log(keyName+" loaded!");
    g_CoreJSLibs[keyName] = true;

    var allLoaded = true;
    for(var key in g_CoreJSLibs){
        if(!g_CoreJSLibs[key]){
            allLoaded = false;
            break;
        }
    }

    // all depend JS Lib is loaded
    // do the UI things NOW :)
    if(allLoaded){
        //console.log("all dependant JS loaded!");
        //var allLoadedTime = new Date().getTime();
        //console.log("js loaded "+ (allLoadedTime - startTime)/1000 +" seconds");
        coreJSAllLoaded();
    }
}


function coreJSAllLoaded(){

    // less priority JS loading
    secondPriorityJSLibLoading();

    // less priority CSS loading
    lessPriorityCSSHandling();

    docReady(function() {

        // before docuument is ready, the whole page is cover by #body-overlay
        // to make sure no button is clicked before document is ready
        if($("#body-overlay").length > 0){
            $("#body-overlay").hide();
        }
    });

    // trigger the ioReadyEvent
    triggerIOReadyEvent();

}

function secondPriorityJSHandling(currentKey){
    secondPriorityJs[currentKey].loaded = true;

    var allLoaded = true;
    for (var key in secondPriorityJs) {
        if (! secondPriorityJs[key].loaded){
            allLoaded = false;
            break;
        }
    }
    if (allLoaded) {
        //console.log("all secondPriorityJS loaded!");
        // var allLoaded = new Date().getTime();
        //console.log("all secondPriorityJS "+ (allLoaded - startTime)/1000 +" seconds");
        secondPriorityJSAllLoaded();
    }
}

function secondPriorityJSAllLoaded(){
    var thirdPriorityJS = {
        iframeTransport:       (false)? "/scripts/node_modules/blueimp-file-upload/js/jquery.iframe-transport.js?"+g_appVersion : "",
        fileupload:            (false)? "/scripts/node_modules/blueimp-file-upload/js/jquery.fileupload.js?"      +g_appVersion : "",
        Jcrop:                 (false)? "/scripts/node_modules/jquery-jcrop/js/jquery.Jcrop.min.js?"   +g_appVersion : "",
        qtipJS:                (false)? "/scripts/node_modules/qtip2/dist/jquery.qtip.min.js?"         +g_appVersion : "",
        customFormImageUpload: (false)? "/scripts/customForm_imageUpload.js?" +g_appVersion : "",
        customFormMediaUpload: (false)? "/scripts/customForm_mediaUpload.js?" +g_appVersion : "",
        customFormFileUpload:  (false)? "/scripts/customForm_fileUpload.js?"  +g_appVersion : "",
        fullcalendar:          (false)? "/scripts/node_modules/fullcalendar/dist/fullcalendar.min.js?" +g_appVersion : ""
    };

        if (g_controller_id === "product" || (g_controller_id === "cart" && g_controller_action_id !== "checkout") || g_controller_id === "vendorportal") {
        thirdPriorityJS.googleMapInitiation = "/scripts/googleMapInitiation.js?" +g_appVersion;
        thirdPriorityJS.infobubble          = "/scripts/node_modules/js-info-bubble/src/infobubble-compiled.js?"+g_appVersion;
    }
    
    //console.log("loading thirdPriorityJS");
    for(var key in thirdPriorityJS){
        if (thirdPriorityJS[key] !== "") {
            if (key === "googleMapInitiation"){
                if (typeof google === 'undefined') {
                    //console.log("load "+key+" in 4 seconds");
                    var src = thirdPriorityJS[key];
                    setTimeout(function(){
                        loadJS(src, true);
                    }, 4000);
                } else {
                    loadJS(thirdPriorityJS[key], true);
                }
            } else {
                loadJS(thirdPriorityJS[key], true);
            }
        }
    }
}

function loadJS(src, defer){
    var script = document.createElement('script');
    if (defer) {
        script.defer = true;
    } else {
        script.async = true;
    }
    script.src = src;
    document.body.appendChild(script);
}


function lessPriorityCSSHandling(){
    // learned from https://developers.google.com/speed/docs/insights/OptimizeCSSDelivery#example
    /*
    var raf = requestAnimationFrame || mozRequestAnimationFrame ||
          webkitRequestAnimationFrame || msRequestAnimationFrame;
    */
    var raf = (function(){
        return  window.requestAnimationFrame       ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame    ||
                window.oRequestAnimationFrame      ||
                window.msRequestAnimationFrame     ||
                function(/* function */ callback, /* DOMElement */ element){
                    window.setTimeout(callback, 1000 / 60);
                };
      })();

    if (raf) {
        //console.log("in raf");
        raf(loadLessPriorityCSS);
    } else {
        //console.log("no raf");
        window.addEventListener('load', loadLessPriorityCSS);
    }

}

function loadLessPriorityCSS(){
    var lessPriorityCSS = {
        jqueryUiCSS:  "/scripts/node_modules/jquery-ui-dist/jquery-ui.min.css",
        widgetsCSS: "/scripts/widgets.css",
        JcropCSS:        (g_controller_id === "vendorportal")?"/scripts/node_modules/jquery-jcrop/css/jquery.Jcrop.min.css":"",
        timelineCSS:     (g_controller_id === "vendorportal")?"/scripts/reacttimeline.css?12.01":"",
        qtipCSS:         (g_controller_id === "vendorportal")?"/scripts/node_modules/qtip2/dist/jquery.qtip.min.css":"",
        fullcalendarCSS: (g_controller_id === "vendorportal")?"/scripts/node_modules/fullcalendar/dist/fullcalendar.min.css":""
    };

    if(g_is_mobile){

    }else{
        lessPriorityCSS.mCustomScrollbarCSS = "/scripts/node_modules/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css";
    }
    //console.log("ready to load less priority CSS");
    $(document).ready(function(){
        //console.log("download less priority CSS");
        loadCSS(lessPriorityCSS);
    });

}

function loadCSS(href){
    if(typeof href === "string"){
        if(href !== ""){
            var l = document.createElement('link');
            l.rel = 'stylesheet';
            l.href = href;
            document.head.appendChild(l);
        }
    }else{
        for(var key in href){
            if(href[key] !== ""){
                var l = document.createElement('link');
                l.rel = 'stylesheet';
                l.href = href[key];
                document.head.appendChild(l);
            }
        }
    }
}

// ********************************   Assets Loading Prioritizing  Codes   ********************************** //


// ********************************  some help functions and variables **********************************/

// JS keyboard event key codes.
var g_keycodes = {
    tab: 9,
    enter: 13,
    esc: 27,
    space: 32
};

var g_service_prefix = g_is_mobile ? '/m/services/' : '/services/';

var g_url_test = g_service_prefix + 'communications/Echopost'; // Echopost

var g_url_get_category_products_and_collections = g_service_prefix + 'category/GetCategoryProductsAndCollections';
var g_url_get_category_celebrities_html = g_service_prefix + 'category/GetCategoryCelebritiesHtml';

var g_url_get_mobile_home_experiences = g_service_prefix + 'common/GetMobileHomeExperiences';

// all the urls for the web services
var g_url_get_communication_list = g_service_prefix + 'communications/GetVendorCommunicationsList';
var g_url_get_payout_list = g_service_prefix + 'payout/GetPayout';
var g_url_get_vendor_users = '/vendorportal/getVendorUsers';
var g_url_get_vendor_user_types = '/vendorPortal/getVendorUserTypes';
var g_url_submit_vendor_user = '/vendorPortal/submitVendorUser';
var g_url_resend_vendor_invite = '/vendorPortal/sendVendorAdminUserInviteEmail';
var g_url_get_conversation_details = g_service_prefix + 'communications/GetConversationDetails';
var g_url_reply_conversation = g_service_prefix + 'communications/ReplyConversation';
var g_url_start_conversation = g_service_prefix + 'communications/startConversation';
var g_url_fulfillment_user_data_save = '/vendorportal/fulfillmentUserDataSave';
var g_url_send_negotiation_notifications = g_service_prefix + 'communications/SendNegotiationNotifications';



var g_url_get_order_list_page = get_mobile_url_prefix() +'vendorportal/orderlistpage';
var g_url_order_list_submit_details = g_service_prefix + 'order/orderListSubmitDetails';
var g_url_get_order_search_page = get_mobile_url_prefix() +'vendorportal/ordersearchpage';


var g_url_get_redemption_info_html = get_mobile_url_prefix() + 'redemption/GetRedemptionInfoHtml';
var g_url_get_pickone_info_html = get_mobile_url_prefix() + 'redemption/getPickoneInfoHtml';

var g_url_infobox_edit_mode_submit = g_service_prefix + 'infobox/EditModeSubmit';
var g_url_infobox_exe_mode_submit = g_service_prefix + 'infobox/ConfirmRequests';

var g_url_infobox_get_request_history_html = g_service_prefix + 'infobox/GetRequestHistoryHtml';

var g_url_infobox_update_contact_info = g_service_prefix + 'infobox/UpdateDayOfContactInfo';

var g_url_crowd_buy_data_save = g_service_prefix + 'vendorportal/CrowdBuyDataSave';

var g_url_bwf_setup = g_service_prefix + 'invitecampaign/crowdBuyCampaignDataHandling';
var g_url_bwf_get_price_text = g_service_prefix + 'invitecampaign/GetPriceTextForCampaign';
var g_url_bwf_get_deadlines = g_service_prefix + 'invitecampaign/GetGrouByDateInfoForCampaign';
var g_url_bwf_add_invitees = g_service_prefix + 'invitecampaign/AddInvitees';
var g_url_bwf_send_reminders = g_service_prefix + 'invitecampaign/SendReminderEmails';
var g_url_bwf_update_invitee_status = g_service_prefix + 'invitecampaign/UpdateInviteeStatus';
var g_url_bwf_create_campaign_message = g_service_prefix + 'invitecampaign/CreateInviteCampaignMessage';



// service result flag
var g_result_sucess = 1;
var g_result_err    = 0;

// error_code
var g_err_not_logged_in       = 1;
var g_err_not_authorized      = 2;
var g_err_resource_not_found  = 3;
var g_err_wrong_input         = 4;

// terms reagreement
var g_signUpContext = false;
var g_newUserTerms  = [];

var partnerCategoryId = 0;

var talkShopJsAdded = false;
function addTalkshopJsIfNecessary(){
    if ($('.tsl-container').attr('data-dnt', '1').length && ! talkShopJsAdded) {
        var s = document.createElement('script');
        s.async = true;
        s.crossOrigin = 'anonymous';
        s.src = 'https://embed.talkshop.live/embed.js';
        document.body.appendChild(s);
        talkShopJsAdded = true;
    }
}

//************* changes tracking ************************************

// *** sample ussage 1.***

//// this is optinal g_changes_tracking.addValueFunction('#UserEx_lastName', function(selector){return $(selector).attr('data-f'); }, 'user_form');
// g_changes_tracking.ini(['#UserEx_firstName', '#UserEx_lastName', 'UserEx_emailAddress'], 'user_form');
// g_changes_tracking.logChanges('user_form', 'pmt_account_update')

// ***  sample usage 2 ***
// g_changes_tracking.ini(g_changes_tracking.getIdSelectors('.passwords_container input'), 'password_form');
// g_changes_tracking.logChanges('password_form', 'pmt_password_update');


g_changes_tracking = {

    _form_elements:     {},
    _form_ori_values:   {},
    _valueFunctions:    {},

    _default_form_name: 'default_form',
    _default_changes_key: 'changes',


    _getInputValue: function (selector, form_name) {

        if (this._valueFunctions[form_name] != undefined && this._valueFunctions[form_name][selector] != undefined) {
            return this._valueFunctions[form_name][selector](selector);
        }
        else {
            return $(selector).val();
        }

    },

    // a helper to get an array of id selectors like ['#input1', '#input2', ...]
    // by looping through $obj
    getIdSelectors: function ($obj){
        var $obj = ($obj instanceof jQuery)? $obj : $($obj);

        var idSelectors = [];
        $obj.each(function(){
            var id = $.trim(this.id);
            if(id!='' && id!=undefined){
                idSelectors.push('#' + id);
            }
        });
        return idSelectors;
    },

    // most time we do not need to use it.
    // only for input whose value is not just .val()
    // f:  selector as input, input value as return
    addValueFunction: function (selector, f, form_name) {

        if (this._valueFunctions[form_name] == undefined) {
            this._valueFunctions[form_name] = {};
        }
        this._valueFunctions[form_name][selector] = f;
    },

    //
    // form_name is just a string to group/identify your inputs. Feel free to make ur won form_name. Better be a unique name..
    ini:  function (input_selectors, form_name) {


        if (!$.isArray(input_selectors)) {
            return;
        }

        this._form_elements[form_name] = input_selectors;

        if (this._form_ori_values[form_name] == undefined) {
            this._form_ori_values[form_name] = {};
        }
        else {
            alert (form_name + ' has already been used');
            return;
        }

        for (var i=0; i < this._form_elements[form_name].length; i++) {
            var selector = this._form_elements[form_name][i];
            this._form_ori_values[form_name][selector] = this._getInputValue(selector, form_name)
            //var $input = $(selector);
            //this._form_ori_values[form_name][selector] = $input.val();

        };
    },

    // used to reload the original values. (Happens when current changes have seen saved)
    reload: function (form_name) {
        if (typeof this._form_elements[form_name] == 'undefined' ) {
            alert (form_name + ' has not been initiated.');
            return;
        }

        this._form_ori_values[form_name] = {};

        for (var i=0; i < this._form_elements[form_name].length; i++) {
            var selector = this._form_elements[form_name][i];
            this._form_ori_values[form_name][selector] = this._getInputValue(selector, form_name)
        };
    },

    getChanges: function (form_name){

        var changes = [];

        if (typeof this._form_elements[form_name] == 'undefined' || !$.isArray(this._form_elements[form_name])) {
            return [];
        }

        for (var i = 0; i < this._form_elements[form_name].length; i++) {
            var selector = this._form_elements[form_name][i];
            //var $input = $(selector);
            var ori_value =  this._form_ori_values[form_name][selector];
            var new_value = this._getInputValue(selector, form_name); // $input.val();

            if (ori_value != new_value) {
                changes.push( {input:selector, old:ori_value, new :new_value});
            }
        };

        return changes;
    },


    // only form_name, changeDescription are required
    _logChanges: function(form_name, changeDescription, changes, comment, url){

        if (!$.isArray(changes) || changes.length == 0 ){
            return;
        }

        url = url || window.location.href;
        var me = this;

        $.ajax({
            type: "POST",
            url: "/website/logChanges",
            data: {
                changeDescription: changeDescription,
                changes: changes,
                url: url,
                comment: comment
            },
            dataType: 'json',
            cache: false,
            timeout: 30000,
            success: function (data) {
                me.reload(form_name);
            },
            error: function (xhr, status, err) {
                alert('Error in logging changes');
            }
        });

    },


    // only form_name, changeDescription are required
    logChanges: function(form_name, changeDescription, comment, url){
        var changes = this.getChanges(form_name);
        this._logChanges(form_name, changeDescription, changes, comment, url);

    }

}


//************* locales ************************************

var g_rtl = 0;

var g_user_locale = {"localeId":"1","localeName":"English_UnitedStates","localeString":"en_US","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"imperial","languageId":"1","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"};
var g_session_locale = {"localeId":"1","localeName":"English_UnitedStates","localeString":"en_US","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"imperial","languageId":"1","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"};
var g_currency_locale = {"localeId":"1","localeName":"English_UnitedStates","localeString":"en_US","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"imperial","languageId":"1","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"};
var g_datatime_locale = {"localeId":"1","localeName":"English_UnitedStates","localeString":"en_US","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"imperial","languageId":"1","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"};
var g_isDaylightSavings = 1;
var g_timezoneOffset =  -4;

var g_all_locales = {"1":{"localeId":"1","localeName":"English_UnitedStates","localeString":"en_US","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"imperial","languageId":"1","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"2":{"localeId":"2","localeName":"Spanish_LAC_Mexico","localeString":"es_MX","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Mex$","defaultUnits":"metric","languageId":"2","currencyId":"2","countryId":"143","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Mexican Peso","currencyCode":"MXN","digitsRightOfDecimal":"2","currencyNumber":"484","currencyCharacter":"$","usdExchangeRate":"18.252347","countryName":"Mexico","countryShortCode":"MX","country3DigitCode":"MEX","displayPricesIncludingTax":"1","vatRate":"16.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"3":{"localeId":"3","localeName":"Russian_Russia","localeString":"ru_RU","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20bd","defaultUnits":"metric","languageId":"3","currencyId":"3","countryId":"181","stateId":null,"active":"0","activeOnContent":"0","currencyName":"Russia Ruble","currencyCode":"RUB","digitsRightOfDecimal":"2","currencyNumber":"643","currencyCharacter":"\u20bd","usdExchangeRate":"81.66","countryName":"Russia","countryShortCode":"RU","country3DigitCode":"RUS","displayPricesIncludingTax":"1","vatRate":"16.670000","languageName":"Russian","tag":"ru-RU","textLeft2Right":"1"},"4":{"localeId":"4","localeName":"Chinese_Simplified_China","localeString":"zh_CN","dateFormat":"Y-m-d","timeFormat":"G:i","dateTimeFormat":"Y-m-d G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a5","defaultUnits":"metric","languageId":"4","currencyId":"4","countryId":"46","stateId":null,"active":"1","activeOnContent":"1","currencyName":"China Yuan Renminbi","currencyCode":"CNY","digitsRightOfDecimal":"2","currencyNumber":"156","currencyCharacter":"\u00a5","usdExchangeRate":"6.8811","countryName":"China","countryShortCode":"CN","country3DigitCode":"CHN","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"Chinese (Simplified)","tag":"zh-CN","textLeft2Right":"1"},"5":{"localeId":"5","localeName":"French_Canada","localeString":"fr_CA","dateFormat":"Y-m-d","timeFormat":"G:i","dateTimeFormat":"Y-m-d G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"Can$","defaultUnits":"metric","languageId":"5","currencyId":"5","countryId":"2","stateId":"63","active":"1","activeOnContent":"1","currencyName":"Canada Dollar","currencyCode":"CAD","digitsRightOfDecimal":"2","currencyNumber":"124","currencyCharacter":"$","usdExchangeRate":"1.35508","countryName":"Canada","countryShortCode":"CA","country3DigitCode":"CAN","displayPricesIncludingTax":"0","vatRate":null,"languageName":"French (Canada)","tag":"fr-CA","textLeft2Right":"1"},"6":{"localeId":"6","localeName":"Portuguese_Brazil","localeString":"pt_BR","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"R$","defaultUnits":"metric","languageId":"6","currencyId":"6","countryId":"33","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Brazilian Real","currencyCode":"BRL","digitsRightOfDecimal":"2","currencyNumber":"986","currencyCharacter":"R$","usdExchangeRate":"5.0848","countryName":"Brazil","countryShortCode":"BR","country3DigitCode":"BRA","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Portuguese (Brazil)","tag":"pt-BR","textLeft2Right":"1"},"7":{"localeId":"7","localeName":"Japanese_Japan","localeString":"ja_JP","dateFormat":"Y-m-d","timeFormat":"g:i a","dateTimeFormat":"Y-m-d g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a5","defaultUnits":"metric","languageId":"7","currencyId":"7","countryId":"112","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Japan Yen","currencyCode":"JPY","digitsRightOfDecimal":"0","currencyNumber":"392","currencyCharacter":"\u00a5","usdExchangeRate":"133.53283333","countryName":"Japan","countryShortCode":"JP","country3DigitCode":"JPN","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"Japanese","tag":"ja-JP","textLeft2Right":"1"},"8":{"localeId":"8","localeName":"Arabic_UnitedArabEmirates","localeString":"ar_AE","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.","defaultUnits":"metric","languageId":"8","currencyId":"8","countryId":"228","stateId":null,"active":"1","activeOnContent":"1","currencyName":"United Arab Emirates dirham","currencyCode":"AED","digitsRightOfDecimal":"2","currencyNumber":"784","currencyCharacter":"\u062f.","usdExchangeRate":"3.672485","countryName":"United Arab Emirates","countryShortCode":"AE","country3DigitCode":"ARE","displayPricesIncludingTax":"1","vatRate":"5.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"9":{"localeId":"9","localeName":"Chinese_Traditional_HongKong","localeString":"zh_HK","dateFormat":"d-m-Y","timeFormat":"G:i","dateTimeFormat":"d-m-Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"HK$","defaultUnits":"metric","languageId":"9","currencyId":"9","countryId":"101","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Hong Kong Dollar","currencyCode":"HKD","digitsRightOfDecimal":"2","currencyNumber":"344","currencyCharacter":"$","usdExchangeRate":"7.849965","countryName":"Hong Kong","countryShortCode":"HK","country3DigitCode":"HKG","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"Chinese (Traditional)","tag":"zh-HK","textLeft2Right":"1"},"10":{"localeId":"10","localeName":"Czech_CzechRepublic","localeString":"cs_CZ","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"K\u010d","defaultUnits":"metric","languageId":"10","currencyId":"10","countryId":"58","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Czech Republic Koruna","currencyCode":"CZK","digitsRightOfDecimal":"2","currencyNumber":"203","currencyCharacter":"K\u010d","usdExchangeRate":"21.547549","countryName":"Czech Republic","countryShortCode":"CZ","country3DigitCode":"CZE","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"Czech","tag":"cs-CZ","textLeft2Right":"1"},"11":{"localeId":"11","localeName":"French_France","localeString":"fr_FR","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"11","currencyId":"11","countryId":"77","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"France","countryShortCode":"FR","country3DigitCode":"FRA","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"12":{"localeId":"12","localeName":"German_Germany","localeString":"de_DE","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"12","currencyId":"11","countryId":"85","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Germany","countryShortCode":"DE","country3DigitCode":"DEU","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"German","tag":"de-DE","textLeft2Right":"1"},"13":{"localeId":"13","localeName":"Italian_Italy","localeString":"it_IT","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"13","currencyId":"11","countryId":"110","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Italy","countryShortCode":"IT","country3DigitCode":"ITA","displayPricesIncludingTax":"1","vatRate":"22.000000","languageName":"Italian","tag":"it-IT","textLeft2Right":"1"},"14":{"localeId":"14","localeName":"Spanish_Spain","localeString":"es_ES","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"14","currencyId":"11","countryId":"203","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Spain","countryShortCode":"ES","country3DigitCode":"ESP","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"Spanish (Spain)","tag":"es-ES","textLeft2Right":"1"},"15":{"localeId":"15","localeName":"Swedish_Sweden","localeString":"sv_SE","dateFormat":"Y-m-d","timeFormat":"H:i","dateTimeFormat":"Y-m-d H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"SEK","defaultUnits":"metric","languageId":"15","currencyId":"12","countryId":"209","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Swedish Krona","currencyCode":"SEK","digitsRightOfDecimal":"2","currencyNumber":"752","currencyCharacter":"SEK","usdExchangeRate":"10.549414","countryName":"Sweden","countryShortCode":"SE","country3DigitCode":"SWE","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"Swedish ","tag":"sv-SE","textLeft2Right":"1"},"16":{"localeId":"16","localeName":"Turkish_Turkey","localeString":"tr_TR","dateFormat":"d-m-Y","timeFormat":"H:i","dateTimeFormat":"d-m-Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ba","defaultUnits":"metric","languageId":"16","currencyId":"13","countryId":"222","stateId":null,"active":"1","activeOnContent":"1","currencyName":"New Turkey Lira","currencyCode":"TRY","digitsRightOfDecimal":"2","currencyNumber":"949","currencyCharacter":"\u20ba","usdExchangeRate":"19.27527","countryName":"Turkey","countryShortCode":"TR","country3DigitCode":"TUR","displayPricesIncludingTax":"1","vatRate":"18.000000","languageName":"Turkish ","tag":"tr-TR","textLeft2Right":"1"},"17":{"localeId":"17","localeName":"Korean_Korea","localeString":"ko_KR","dateFormat":"Y-m-d","timeFormat":"g:i a","dateTimeFormat":"Y-m-d g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20a9","defaultUnits":"metric","languageId":"17","currencyId":"14","countryId":"118","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Korea (South) Won","currencyCode":"KRW","digitsRightOfDecimal":"0","currencyNumber":"410","currencyCharacter":"\u20a9","usdExchangeRate":"1322.787886","countryName":"South Korea","countryShortCode":"KR","country3DigitCode":"KOR","displayPricesIncludingTax":"1","vatRate":"10.000000","languageName":"Korean","tag":"ko-KR","textLeft2Right":"1"},"18":{"localeId":"18","localeName":"Spanish_LAC_Argentina","localeString":"es_AR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"Ars","defaultUnits":"metric","languageId":"2","currencyId":"15","countryId":"13","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Argentina Peso","currencyCode":"ARS","digitsRightOfDecimal":"2","currencyNumber":"32","currencyCharacter":"$","usdExchangeRate":"212.4568","countryName":"Argentina","countryShortCode":"AR","country3DigitCode":"ARG","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"19":{"localeId":"19","localeName":"English_Aruba","localeString":"en_AW","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i ","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Awg","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"15","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Aruba","countryShortCode":"AW","country3DigitCode":"ABW","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"20":{"localeId":"20","localeName":"English_Australia","localeString":"en_AU","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"A$","defaultUnits":"metric","languageId":"1","currencyId":"17","countryId":"16","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Australian dollar","currencyCode":"AUD","digitsRightOfDecimal":"2","currencyNumber":"36","currencyCharacter":"$","usdExchangeRate":"1.509775","countryName":"Australia","countryShortCode":"AU","country3DigitCode":"AUS","displayPricesIncludingTax":"1","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"21":{"localeId":"21","localeName":"English_Austria","localeString":"en_AT","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"17","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Austria","countryShortCode":"AT","country3DigitCode":"AUT","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"22":{"localeId":"22","localeName":"English_Bahamas","localeString":"en_BS","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"B$","defaultUnits":"metric","languageId":"1","currencyId":"19","countryId":"19","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Bahraini dinar","currencyCode":"BHD","digitsRightOfDecimal":"3","currencyNumber":"48","currencyCharacter":"BD","usdExchangeRate":"0.37699","countryName":"Bahamas","countryShortCode":"BS","country3DigitCode":"BHS","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"23":{"localeId":"23","localeName":"Arabic_Bahrain","localeString":"ar_BH","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"BD","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"20","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Bahrain","countryShortCode":"BH","country3DigitCode":"BHR","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"24":{"localeId":"24","localeName":"English_Belgium","localeString":"en_BE","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"24","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Belgium","countryShortCode":"BE","country3DigitCode":"BEL","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"25":{"localeId":"25","localeName":"Spanish_LAC_Bolivia","localeString":"es_BO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$b","defaultUnits":"metric","languageId":"2","currencyId":"20","countryId":"29","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Bolivia boliviano","currencyCode":"BOB","digitsRightOfDecimal":"2","currencyNumber":"68","currencyCharacter":"$b","usdExchangeRate":"6.918204","countryName":"Bolivia","countryShortCode":"BO","country3DigitCode":"BOL","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"26":{"localeId":"26","localeName":"English_Bulgaria","localeString":"en_BG","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u043b\u0432","defaultUnits":"metric","languageId":"1","currencyId":"21","countryId":"36","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Bulgarian lev","currencyCode":"BGN","digitsRightOfDecimal":"2","currencyNumber":"975","currencyCharacter":"\u043b\u0432","usdExchangeRate":"1.79081","countryName":"Bulgaria","countryShortCode":"BG","country3DigitCode":"BGR","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"27":{"localeId":"27","localeName":"English_Canada","localeString":"en_CA","dateFormat":"m\/d\/Y","timeFormat":"g:i a","dateTimeFormat":"m\/d\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Can$","defaultUnits":"metric","languageId":"1","currencyId":"5","countryId":"2","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Canada Dollar","currencyCode":"CAD","digitsRightOfDecimal":"2","currencyNumber":"124","currencyCharacter":"$","usdExchangeRate":"1.35508","countryName":"Canada","countryShortCode":"CA","country3DigitCode":"CAN","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"28":{"localeId":"28","localeName":"Spanish_LAC_Chile","localeString":"es_CL","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"Ch$","defaultUnits":"metric","languageId":"2","currencyId":"22","countryId":"45","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Chilean peso","currencyCode":"CLP","digitsRightOfDecimal":"0","currencyNumber":"152","currencyCharacter":"$","usdExchangeRate":"820.6","countryName":"Chile","countryShortCode":"CL","country3DigitCode":"CHL","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"29":{"localeId":"29","localeName":"Spanish_LAC_Colombia","localeString":"es_CO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"2","currencyId":"23","countryId":"49","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Colombian peso","currencyCode":"COP","digitsRightOfDecimal":"0","currencyNumber":"170","currencyCharacter":"$","usdExchangeRate":"4572.09","countryName":"Colombia","countryShortCode":"CO","country3DigitCode":"COL","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"30":{"localeId":"30","localeName":"Spanish_LAC_CostaRica","localeString":"es_CR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20a1","defaultUnits":"metric","languageId":"2","currencyId":"24","countryId":"53","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Costa Rican colon","currencyCode":"CRC","digitsRightOfDecimal":"2","currencyNumber":"188","currencyCharacter":"\u20a1","usdExchangeRate":"538.469552","countryName":"Costa Rica","countryShortCode":"CR","country3DigitCode":"CRI","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"31":{"localeId":"31","localeName":"English_Croatia","localeString":"en_HR","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"kn","defaultUnits":"metric","languageId":"1","currencyId":"25","countryId":"55","stateId":null,"active":"0","activeOnContent":"0","currencyName":"Croatian kuna","currencyCode":"HRK","digitsRightOfDecimal":"2","currencyNumber":"191","currencyCharacter":"kn","usdExchangeRate":"6.948874","countryName":"Croatia","countryShortCode":"HR","country3DigitCode":"HRV","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"32":{"localeId":"32","localeName":"English_Denmark","localeString":"en_DK","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"DKK","defaultUnits":"metric","languageId":"1","currencyId":"26","countryId":"60","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Danish krone","currencyCode":"DKK","digitsRightOfDecimal":"2","currencyNumber":"208","currencyCharacter":"DKK","usdExchangeRate":"6.875126","countryName":"Denmark","countryShortCode":"DK","country3DigitCode":"DNK","displayPricesIncludingTax":"0","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"33":{"localeId":"33","localeName":"Spanish_LAC_DominicanRepublic","localeString":"es_DO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Rd$","defaultUnits":"metric","languageId":"2","currencyId":"27","countryId":"63","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Dominican peso","currencyCode":"DOP","digitsRightOfDecimal":"2","currencyNumber":"214","currencyCharacter":"Rd$","usdExchangeRate":"54.992807","countryName":"Dominican Republic","countryShortCode":"DO","country3DigitCode":"DOM","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"34":{"localeId":"34","localeName":"Spanish_LAC_Ecuador","localeString":"es_EC","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"US$","defaultUnits":"metric","languageId":"2","currencyId":"1","countryId":"65","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Ecuador","countryShortCode":"EC","country3DigitCode":"ECU","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"35":{"localeId":"35","localeName":"Arabic_Egypt","localeString":"ar_EG","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a3","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"66","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Egypt","countryShortCode":"EG","country3DigitCode":"EGY","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"36":{"localeId":"36","localeName":"Spanish_LAC_ElSalvador","localeString":"es_SV","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"metric","languageId":"2","currencyId":null,"countryId":"67","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"El Salvador","countryShortCode":"SV","country3DigitCode":"SLV","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"37":{"localeId":"37","localeName":"English_Estonia","localeString":"en_EE","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"70","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Estonia","countryShortCode":"EE","country3DigitCode":"EST","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"38":{"localeId":"38","localeName":"English_Finland","localeString":"en_FI","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i ","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"76","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Finland","countryShortCode":"FI","country3DigitCode":"FIN","displayPricesIncludingTax":"0","vatRate":"24.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"39":{"localeId":"39","localeName":"English_Greece","localeString":"en_GR","dateFormat":"d\/m\/Y","timeFormat":"g:i a","dateTimeFormat":"d\/m\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"89","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Greece","countryShortCode":"GR","country3DigitCode":"GRC","displayPricesIncludingTax":"1","vatRate":"24.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"40":{"localeId":"40","localeName":"Spanish_LAC_Guatemala","localeString":"es_GT","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Q","defaultUnits":"metric","languageId":"2","currencyId":null,"countryId":"94","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Guatemala","countryShortCode":"GT","country3DigitCode":"GTM","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"41":{"localeId":"41","localeName":"Spanish_LAC_Honduras","localeString":"es_HN","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"L","defaultUnits":"metric","languageId":"2","currencyId":null,"countryId":"100","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Honduras","countryShortCode":"HN","country3DigitCode":"HND","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"42":{"localeId":"42","localeName":"English_Hungary","localeString":"en_HU","dateFormat":"Y.m.d","timeFormat":"G:i","dateTimeFormat":"Y.m.d G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"Ft","defaultUnits":"metric","languageId":"1","currencyId":"32","countryId":"102","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Hungarian forint","currencyCode":"HUF","digitsRightOfDecimal":"2","currencyNumber":"348","currencyCharacter":"Ft","usdExchangeRate":"347.054689","countryName":"Hungary","countryShortCode":"HU","country3DigitCode":"HUN","displayPricesIncludingTax":"1","vatRate":"27.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"43":{"localeId":"43","localeName":"English_India","localeString":"en_IN","dateFormat":"d-m-Y","timeFormat":"g:i A","dateTimeFormat":"d-m-Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20b9","defaultUnits":"metric","languageId":"1","currencyId":"33","countryId":"104","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Indian rupee","currencyCode":"INR","digitsRightOfDecimal":"2","currencyNumber":"356","currencyCharacter":"\u20b9","usdExchangeRate":"82.019612","countryName":"India","countryShortCode":"IN","country3DigitCode":"IND","displayPricesIncludingTax":"1","vatRate":"13.500000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"44":{"localeId":"44","localeName":"English_Indonesia","localeString":"en_ID","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Rp.","defaultUnits":"metric","languageId":"1","currencyId":"34","countryId":"105","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Indonesian rupiah","currencyCode":"IDR","digitsRightOfDecimal":"2","currencyNumber":"360","currencyCharacter":"Rp","usdExchangeRate":"14943.609392","countryName":"Indonesia","countryShortCode":"ID","country3DigitCode":"IDN","displayPricesIncludingTax":"1","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"45":{"localeId":"45","localeName":"English_Ireland","localeString":"en_IE","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"108","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Ireland","countryShortCode":"IE","country3DigitCode":"IRL","displayPricesIncludingTax":"1","vatRate":"23.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"46":{"localeId":"46","localeName":"English_Israel","localeString":"en_IL","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20aa\u200e","defaultUnits":"metric","languageId":"1","currencyId":"35","countryId":"109","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Israeli new shekel","currencyCode":"ILS","digitsRightOfDecimal":"3","currencyNumber":"376","currencyCharacter":"\u20aa\u200e","usdExchangeRate":"3.631913","countryName":"Israel","countryShortCode":"IL","country3DigitCode":"ISR","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"47":{"localeId":"47","localeName":"English_Jamaica","localeString":"en_JM","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"J$","defaultUnits":"metric","languageId":"1","currencyId":"36","countryId":"111","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Jamaican dollar","currencyCode":"JMD","digitsRightOfDecimal":"2","currencyNumber":"388","currencyCharacter":"J$","usdExchangeRate":"152.236322","countryName":"Jamaica","countryShortCode":"JM","country3DigitCode":"JAM","displayPricesIncludingTax":"0","vatRate":"16.500000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"48":{"localeId":"48","localeName":"Arabic_Jordan","localeString":"ar_JO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.\u0627","defaultUnits":"metric","languageId":"8","currencyId":"37","countryId":"113","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Jordanian dinar","currencyCode":"JOD","digitsRightOfDecimal":"3","currencyNumber":"400","currencyCharacter":"\u062f.\u0627","usdExchangeRate":"0.7094","countryName":"Jordan","countryShortCode":"JO","country3DigitCode":"JOR","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"49":{"localeId":"49","localeName":"English_Kenya","localeString":"en_KE","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"38","countryId":"115","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Kenyan shilling","currencyCode":"KES","digitsRightOfDecimal":"2","currencyNumber":"404","currencyCharacter":"\tKSh","usdExchangeRate":"133.6","countryName":"Kenya","countryShortCode":"KE","country3DigitCode":"KEN","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"50":{"localeId":"50","localeName":"English_SouthKorea","localeString":"en_KR","dateFormat":"Y.m.d","timeFormat":"g:i a","dateTimeFormat":"Y.m.d g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20a9","defaultUnits":"metric","languageId":"1","currencyId":"14","countryId":"118","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Korea (South) Won","currencyCode":"KRW","digitsRightOfDecimal":"0","currencyNumber":"410","currencyCharacter":"\u20a9","usdExchangeRate":"1322.787886","countryName":"South Korea","countryShortCode":"KR","country3DigitCode":"KOR","displayPricesIncludingTax":"1","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"51":{"localeId":"51","localeName":"Arabic_Kuwait","localeString":"ar_KW","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.\u0643","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"119","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Kuwait","countryShortCode":"KW","country3DigitCode":"KWT","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"52":{"localeId":"52","localeName":"English_Latvia","localeString":"en_LV","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"122","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Latvia","countryShortCode":"LV","country3DigitCode":"LVA","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"53":{"localeId":"53","localeName":"Arabic_Lebanon","localeString":"ar_LB","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u0644.\u0644.","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"123","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Lebanon","countryShortCode":"LB","country3DigitCode":"LBN","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"54":{"localeId":"54","localeName":"English_Lithuania","localeString":"en_LT","dateFormat":"Y-m-d","timeFormat":"H:i","dateTimeFormat":"Y-m-d H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"128","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Lithuania","countryShortCode":"LT","country3DigitCode":"LTU","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"55":{"localeId":"55","localeName":"English_Luxembourg","localeString":"en_LU","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"129","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Luxembourg","countryShortCode":"LU","country3DigitCode":"LUX","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"56":{"localeId":"56","localeName":"English_Malaysia","localeString":"en_MY","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"MYR","defaultUnits":"metric","languageId":"1","currencyId":"41","countryId":"134","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Malaysian ringgit","currencyCode":"MYR","digitsRightOfDecimal":"2","currencyNumber":"458","currencyCharacter":"MYR","usdExchangeRate":"4.4105","countryName":"Malaysia","countryShortCode":"MY","country3DigitCode":"MYS","displayPricesIncludingTax":"0","vatRate":"6.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"57":{"localeId":"57","localeName":"English_Mauritius","localeString":"en_MU","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20a8","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"141","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Mauritius","countryShortCode":"MU","country3DigitCode":"MUS","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"58":{"localeId":"58","localeName":"Arabic_Morocco","localeString":"ar_MA","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":".\u062f.","defaultUnits":"metric","languageId":"8","currencyId":"43","countryId":"148","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Moroccan dirham","currencyCode":"MAD","digitsRightOfDecimal":"2","currencyNumber":"504","currencyCharacter":"MAD","usdExchangeRate":"10.189662","countryName":"Morocco","countryShortCode":"MA","country3DigitCode":"MAR","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"59":{"localeId":"59","localeName":"English_Netherlands","localeString":"en_NL","dateFormat":"d-m-Y","timeFormat":"G:i","dateTimeFormat":"d-m-Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"154","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Netherlands","countryShortCode":"NL","country3DigitCode":"NLD","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"60":{"localeId":"60","localeName":"English_NewZealand","localeString":"en_NZ","dateFormat":"d\/m\/Y","timeFormat":"g:i a","dateTimeFormat":"d\/m\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"NZ$","defaultUnits":"metric","languageId":"1","currencyId":"44","countryId":"157","stateId":null,"active":"1","activeOnContent":"1","currencyName":"New Zealand dollar","currencyCode":"NZD","digitsRightOfDecimal":"2","currencyNumber":"554","currencyCharacter":"$","usdExchangeRate":"1.613136","countryName":"New Zealand","countryShortCode":"NZ","country3DigitCode":"NZL","displayPricesIncludingTax":"1","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"61":{"localeId":"61","localeName":"Spanish_LAC_Nicaragua","localeString":"es_NI","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"C$","defaultUnits":"metric","languageId":"2","currencyId":null,"countryId":"158","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Nicaragua","countryShortCode":"NI","country3DigitCode":"NIC","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"62":{"localeId":"62","localeName":"English_Nigeria","localeString":"en_NG","dateFormat":"d\/m\/Y","timeFormat":"g:i a","dateTimeFormat":"d\/m\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20a6","defaultUnits":"metric","languageId":"1","currencyId":"46","countryId":"160","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Nigerian naira","currencyCode":"NGN","digitsRightOfDecimal":"2","currencyNumber":"566","currencyCharacter":"\u20a6","usdExchangeRate":"460.33","countryName":"Nigeria","countryShortCode":"NG","country3DigitCode":"NGA","displayPricesIncludingTax":"0","vatRate":"5.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"63":{"localeId":"63","localeName":"English_Norway","localeString":"en_NO","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"kr","defaultUnits":"metric","languageId":"1","currencyId":"47","countryId":"164","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Norwegian krone","currencyCode":"NOK","digitsRightOfDecimal":"2","currencyNumber":"578","currencyCharacter":"kr","usdExchangeRate":"10.55557","countryName":"Norway","countryShortCode":"NO","country3DigitCode":"NOR","displayPricesIncludingTax":"0","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"64":{"localeId":"64","localeName":"Arabic_Oman","localeString":"ar_OM","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\ufdfc","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"165","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Oman","countryShortCode":"OM","country3DigitCode":"OMN","displayPricesIncludingTax":"0","vatRate":"25.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"65":{"localeId":"65","localeName":"Spanish_LAC_Panama","localeString":"es_PA","dateFormat":"m\/d\/Y","timeFormat":"h:i a","dateTimeFormat":"m\/d\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"B\/.","defaultUnits":"metric","languageId":"2","currencyId":"49","countryId":"169","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Panamanian balboa","currencyCode":"PAB","digitsRightOfDecimal":"2","currencyNumber":"590","currencyCharacter":"B\/.","usdExchangeRate":"1","countryName":"Panama","countryShortCode":"PA","country3DigitCode":"PAN","displayPricesIncludingTax":"0","vatRate":"7.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"66":{"localeId":"66","localeName":"Spanish_LAC_Paraguay","localeString":"es_PY","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"Gs","defaultUnits":"metric","languageId":"2","currencyId":null,"countryId":"171","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Paraguay","countryShortCode":"PY","country3DigitCode":"PRY","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"67":{"localeId":"67","localeName":"Spanish_LAC_Peru","localeString":"es_PE","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"S\/.","defaultUnits":"metric","languageId":"2","currencyId":"51","countryId":"172","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Peruvian Nuevo Sol","currencyCode":"PEN","digitsRightOfDecimal":"2","currencyNumber":"604","currencyCharacter":"S\/.","usdExchangeRate":"3.768425","countryName":"Peru","countryShortCode":"PE","country3DigitCode":"PER","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"68":{"localeId":"68","localeName":"English_Philippines","localeString":"en_PH","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"\u20b1","defaultUnits":"metric","languageId":"1","currencyId":"52","countryId":"173","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Philippine peso","currencyCode":"PHP","digitsRightOfDecimal":"2","currencyNumber":"608","currencyCharacter":"\u20b1","usdExchangeRate":"54.736998","countryName":"Philippines","countryShortCode":"PH","country3DigitCode":"PHL","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"69":{"localeId":"69","localeName":"English_Poland","localeString":"en_PL","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"z\u0142","defaultUnits":"metric","languageId":"1","currencyId":"53","countryId":"175","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Polish z\u0142oty","currencyCode":"PLN","digitsRightOfDecimal":"2","currencyNumber":"985","currencyCharacter":"z\u0142","usdExchangeRate":"4.327014","countryName":"Poland","countryShortCode":"PL","country3DigitCode":"POL","displayPricesIncludingTax":"0","vatRate":"23.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"70":{"localeId":"70","localeName":"English_Portugal","localeString":"en_PT","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i ","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"176","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Portugal","countryShortCode":"PT","country3DigitCode":"PRT","displayPricesIncludingTax":"0","vatRate":"23.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"71":{"localeId":"71","localeName":"Spanish_LAC_PuertoRico","localeString":"es_PR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"metric","languageId":"2","currencyId":"1","countryId":"177","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Puerto Rico","countryShortCode":"PR","country3DigitCode":"PRI","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"72":{"localeId":"72","localeName":"Arabic_Qatar","localeString":"ar_QA","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\ufdfc","defaultUnits":"metric","languageId":"8","currencyId":"54","countryId":"178","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Qatari riyal","currencyCode":"QAR","digitsRightOfDecimal":"2","currencyNumber":"634","currencyCharacter":"\ufdfc","usdExchangeRate":"3.676906","countryName":"Qatar","countryShortCode":"QA","country3DigitCode":"QAT","displayPricesIncludingTax":"0","vatRate":null,"languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"73":{"localeId":"73","localeName":"English_Romania","localeString":"en_RO","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"lei","defaultUnits":"metric","languageId":"1","currencyId":"55","countryId":"180","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Romanian leu","currencyCode":"RON","digitsRightOfDecimal":"2","currencyNumber":"946","currencyCharacter":"lei","usdExchangeRate":"4.547775","countryName":"Romania","countryShortCode":"RO","country3DigitCode":"ROU","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"74":{"localeId":"74","localeName":"Arabic_SaudiArabia","localeString":"ar_SA","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\ufdfc","defaultUnits":"metric","languageId":"8","currencyId":"56","countryId":"192","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Saudi riyal","currencyCode":"SAR","digitsRightOfDecimal":"2","currencyNumber":"682","currencyCharacter":"SR","usdExchangeRate":"3.7519","countryName":"Saudi Arabia","countryShortCode":"SA","country3DigitCode":"SAU","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"75":{"localeId":"75","localeName":"English_Seychelles","localeString":"en_SC","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20a8","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"195","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Seychelles","countryShortCode":"SC","country3DigitCode":"SYC","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"76":{"localeId":"76","localeName":"English_Singapore","localeString":"en_SG","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"S$","defaultUnits":"metric","languageId":"1","currencyId":"58","countryId":"197","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Singapore dollar","currencyCode":"SGD","digitsRightOfDecimal":"2","currencyNumber":"702","currencyCharacter":"$","usdExchangeRate":"1.333466","countryName":"Singapore","countryShortCode":"SG","country3DigitCode":"SGP","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"77":{"localeId":"77","localeName":"English_Slovenia","localeString":"en_SI","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"199","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Slovenia","countryShortCode":"SI","country3DigitCode":"SVN","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"78":{"localeId":"78","localeName":"English_SouthAfrica","localeString":"en_ZA","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"R","defaultUnits":"metric","languageId":"1","currencyId":"59","countryId":"202","stateId":null,"active":"1","activeOnContent":"1","currencyName":"South African rand","currencyCode":"ZAR","digitsRightOfDecimal":"2","currencyNumber":"710","currencyCharacter":"R","usdExchangeRate":"18.508051","countryName":"South Africa","countryShortCode":"ZA","country3DigitCode":"ZAF","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"79":{"localeId":"79","localeName":"English_Switzerland","localeString":"en_CH","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"Fr.","defaultUnits":"metric","languageId":"1","currencyId":"60","countryId":"210","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Swiss franc","currencyCode":"CHF","digitsRightOfDecimal":"2","currencyNumber":"756","currencyCharacter":"CHF","usdExchangeRate":"0.910866","countryName":"Switzerland","countryShortCode":"CH","country3DigitCode":"CHE","displayPricesIncludingTax":"0","vatRate":"8.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"80":{"localeId":"80","localeName":"English_Taiwan","localeString":"en_TW","dateFormat":"Y\/m\/d","timeFormat":"h:i a","dateTimeFormat":"Y\/m\/d h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"NT$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"212","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Taiwan","countryShortCode":"TW","country3DigitCode":"TWN","displayPricesIncludingTax":"0","vatRate":"5.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"81":{"localeId":"81","localeName":"English_Tanzania","localeString":"en_TZ","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"x\/y","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"214","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Tanzania","countryShortCode":"TZ","country3DigitCode":"TZA","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"82":{"localeId":"82","localeName":"English_Thailand","localeString":"en_TH","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u0e3f","defaultUnits":"metric","languageId":"1","currencyId":"63","countryId":"215","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Thai baht","currencyCode":"THB","digitsRightOfDecimal":"2","currencyNumber":"764","currencyCharacter":"\u0e3f","usdExchangeRate":"34.399001","countryName":"Thailand","countryShortCode":"TH","country3DigitCode":"THA","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"83":{"localeId":"83","localeName":"English_UnitedKingdom","localeString":"en_GB","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a3","defaultUnits":"metric","languageId":"1","currencyId":"64","countryId":"229","stateId":null,"active":"1","activeOnContent":"1","currencyName":"British pound","currencyCode":"GBP","digitsRightOfDecimal":"2","currencyNumber":"826","currencyCharacter":"\u00a3","usdExchangeRate":"0.80935","countryName":"United Kingdom","countryShortCode":"GB","country3DigitCode":"GBR","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"84":{"localeId":"84","localeName":"Spanish_LAC_Uruguay","localeString":"es_UY","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$U","defaultUnits":"metric","languageId":"2","currencyId":"65","countryId":"231","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Uruguayan peso","currencyCode":"UYU","digitsRightOfDecimal":"2","currencyNumber":"858","currencyCharacter":"$U","usdExchangeRate":"38.71369","countryName":"Uruguay","countryShortCode":"UY","country3DigitCode":"URY","displayPricesIncludingTax":"0","vatRate":"22.000000","languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"85":{"localeId":"85","localeName":"English_Vietnam","localeString":"en_VN","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u20ab","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"236","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Vietnam","countryShortCode":"VN","country3DigitCode":"VNM","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"86":{"localeId":"86","localeName":"English_Zambia","localeString":"en_ZM","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"ZK","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"242","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Zambia","countryShortCode":"ZM","country3DigitCode":"ZMB","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"87":{"localeId":"87","localeName":"German_Austria","localeString":"de_AT","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"12","currencyId":"11","countryId":"17","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Austria","countryShortCode":"AT","country3DigitCode":"AUT","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"German","tag":"de-DE","textLeft2Right":"1"},"88":{"localeId":"88","localeName":"Dutch_Belgium","localeString":"nl_BE","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"18","currencyId":"11","countryId":"24","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Belgium","countryShortCode":"BE","country3DigitCode":"BEL","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"Dutch","tag":"nl-NL","textLeft2Right":"1"},"89":{"localeId":"89","localeName":"French_Belgium","localeString":"fr_BE","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"11","currencyId":"11","countryId":"24","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Belgium","countryShortCode":"BE","country3DigitCode":"BEL","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"90":{"localeId":"90","localeName":"English_Sweden","localeString":"en_SE","dateFormat":"Y-m-d","timeFormat":"H:i","dateTimeFormat":"Y-m-d H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"SEK","defaultUnits":"metric","languageId":"1","currencyId":"12","countryId":"209","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Swedish Krona","currencyCode":"SEK","digitsRightOfDecimal":"2","currencyNumber":"752","currencyCharacter":"SEK","usdExchangeRate":"10.549414","countryName":"Sweden","countryShortCode":"SE","country3DigitCode":"SWE","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"91":{"localeId":"91","localeName":"English_UnitedArabEmirates","localeString":"en_AE","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.","defaultUnits":"metric","languageId":"1","currencyId":"8","countryId":"228","stateId":null,"active":"1","activeOnContent":"1","currencyName":"United Arab Emirates dirham","currencyCode":"AED","digitsRightOfDecimal":"2","currencyNumber":"784","currencyCharacter":"\u062f.","usdExchangeRate":"3.672485","countryName":"United Arab Emirates","countryShortCode":"AE","country3DigitCode":"ARE","displayPricesIncludingTax":"1","vatRate":"5.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"92":{"localeId":"92","localeName":"English_China","localeString":"en_CN","dateFormat":"Y-m-d","timeFormat":"G:i","dateTimeFormat":"Y-m-d G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a5","defaultUnits":"metric","languageId":"1","currencyId":"4","countryId":"46","stateId":null,"active":"1","activeOnContent":"1","currencyName":"China Yuan Renminbi","currencyCode":"CNY","digitsRightOfDecimal":"2","currencyNumber":"156","currencyCharacter":"\u00a5","usdExchangeRate":"6.8811","countryName":"China","countryShortCode":"CN","country3DigitCode":"CHN","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"93":{"localeId":"93","localeName":"English_HongKong","localeString":"en_HK","dateFormat":"d-m-Y","timeFormat":"G:i","dateTimeFormat":"d-m-Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"HK$","defaultUnits":"metric","languageId":"1","currencyId":"9","countryId":"101","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Hong Kong Dollar","currencyCode":"HKD","digitsRightOfDecimal":"2","currencyNumber":"344","currencyCharacter":"$","usdExchangeRate":"7.849965","countryName":"Hong Kong","countryShortCode":"HK","country3DigitCode":"HKG","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"94":{"localeId":"94","localeName":"English_Italy","localeString":"en_IT","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"110","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Italy","countryShortCode":"IT","country3DigitCode":"ITA","displayPricesIncludingTax":"1","vatRate":"22.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"95":{"localeId":"95","localeName":"English_Japan","localeString":"en_JP","dateFormat":"Y-m-d","timeFormat":"g:i a","dateTimeFormat":"Y-m-d g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a5","defaultUnits":"metric","languageId":"1","currencyId":"7","countryId":"112","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Japan Yen","currencyCode":"JPY","digitsRightOfDecimal":"0","currencyNumber":"392","currencyCharacter":"\u00a5","usdExchangeRate":"133.53283333","countryName":"Japan","countryShortCode":"JP","country3DigitCode":"JPN","displayPricesIncludingTax":"1","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"96":{"localeId":"96","localeName":"English_Russia","localeString":"en_RU","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20bd","defaultUnits":"metric","languageId":"1","currencyId":"3","countryId":"181","stateId":null,"active":"0","activeOnContent":"0","currencyName":"Russia Ruble","currencyCode":"RUB","digitsRightOfDecimal":"2","currencyNumber":"643","currencyCharacter":"\u20bd","usdExchangeRate":"81.66","countryName":"Russia","countryShortCode":"RU","country3DigitCode":"RUS","displayPricesIncludingTax":"1","vatRate":"16.670000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"97":{"localeId":"97","localeName":"English_Mexico","localeString":"en_MX","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Mex$","defaultUnits":"metric","languageId":"1","currencyId":"2","countryId":"143","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Mexican Peso","currencyCode":"MXN","digitsRightOfDecimal":"2","currencyNumber":"484","currencyCharacter":"$","usdExchangeRate":"18.252347","countryName":"Mexico","countryShortCode":"MX","country3DigitCode":"MEX","displayPricesIncludingTax":"1","vatRate":"16.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"98":{"localeId":"98","localeName":"English_Spain","localeString":"en_ES","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"203","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Spain","countryShortCode":"ES","country3DigitCode":"ESP","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"99":{"localeId":"99","localeName":"English_CzechRepublic","localeString":"en_CZ","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"K\u010d","defaultUnits":"metric","languageId":"1","currencyId":"10","countryId":"58","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Czech Republic Koruna","currencyCode":"CZK","digitsRightOfDecimal":"2","currencyNumber":"203","currencyCharacter":"K\u010d","usdExchangeRate":"21.547549","countryName":"Czech Republic","countryShortCode":"CZ","country3DigitCode":"CZE","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"100":{"localeId":"100","localeName":"English_Germany","localeString":"en_DE","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"85","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Germany","countryShortCode":"DE","country3DigitCode":"DEU","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"102":{"localeId":"102","localeName":"English_Turkey","localeString":"en_TR","dateFormat":"d-m-Y","timeFormat":"H:i","dateTimeFormat":"d-m-Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ba","defaultUnits":"metric","languageId":"1","currencyId":"13","countryId":"222","stateId":null,"active":"1","activeOnContent":"1","currencyName":"New Turkey Lira","currencyCode":"TRY","digitsRightOfDecimal":"2","currencyNumber":"949","currencyCharacter":"\u20ba","usdExchangeRate":"19.27527","countryName":"Turkey","countryShortCode":"TR","country3DigitCode":"TUR","displayPricesIncludingTax":"1","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"103":{"localeId":"103","localeName":"English_Argentina","localeString":"en_AR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"Ars","defaultUnits":"metric","languageId":"1","currencyId":"15","countryId":"13","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Argentina Peso","currencyCode":"ARS","digitsRightOfDecimal":"2","currencyNumber":"32","currencyCharacter":"$","usdExchangeRate":"212.4568","countryName":"Argentina","countryShortCode":"AR","country3DigitCode":"ARG","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"104":{"localeId":"104","localeName":"English_Qatar","localeString":"en_QA","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\ufdfc","defaultUnits":"metric","languageId":"1","currencyId":"54","countryId":"178","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Qatari riyal","currencyCode":"QAR","digitsRightOfDecimal":"2","currencyNumber":"634","currencyCharacter":"\ufdfc","usdExchangeRate":"3.676906","countryName":"Qatar","countryShortCode":"QA","country3DigitCode":"QAT","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"105":{"localeId":"105","localeName":"English_Bahrain","localeString":"en_BH","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"BD","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"20","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Bahrain","countryShortCode":"BH","country3DigitCode":"BHR","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"107":{"localeId":"107","localeName":"English_Bolivia","localeString":"en_BO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$b","defaultUnits":"metric","languageId":"1","currencyId":"20","countryId":"29","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Bolivia boliviano","currencyCode":"BOB","digitsRightOfDecimal":"2","currencyNumber":"68","currencyCharacter":"$b","usdExchangeRate":"6.918204","countryName":"Bolivia","countryShortCode":"BO","country3DigitCode":"BOL","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"108":{"localeId":"108","localeName":"English_Chile","localeString":"en_CL","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"Ch$","defaultUnits":"metric","languageId":"1","currencyId":"22","countryId":"45","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Chilean peso","currencyCode":"CLP","digitsRightOfDecimal":"0","currencyNumber":"152","currencyCharacter":"$","usdExchangeRate":"820.6","countryName":"Chile","countryShortCode":"CL","country3DigitCode":"CHL","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"109":{"localeId":"109","localeName":"English_Colombia","localeString":"en_CO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"23","countryId":"49","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Colombian peso","currencyCode":"COP","digitsRightOfDecimal":"0","currencyNumber":"170","currencyCharacter":"$","usdExchangeRate":"4572.09","countryName":"Colombia","countryShortCode":"CO","country3DigitCode":"COL","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"110":{"localeId":"110","localeName":"English_CostaRica","localeString":"en_CR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20a1","defaultUnits":"metric","languageId":"1","currencyId":"24","countryId":"53","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Costa Rican colon","currencyCode":"CRC","digitsRightOfDecimal":"2","currencyNumber":"188","currencyCharacter":"\u20a1","usdExchangeRate":"538.469552","countryName":"Costa Rica","countryShortCode":"CR","country3DigitCode":"CRI","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"111":{"localeId":"111","localeName":"English_DominicanRepublic","localeString":"en_DO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Rd$","defaultUnits":"metric","languageId":"1","currencyId":"27","countryId":"63","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Dominican peso","currencyCode":"DOP","digitsRightOfDecimal":"2","currencyNumber":"214","currencyCharacter":"Rd$","usdExchangeRate":"54.992807","countryName":"Dominican Republic","countryShortCode":"DO","country3DigitCode":"DOM","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"112":{"localeId":"112","localeName":"English_Ecuador","localeString":"en_EC","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"US$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"65","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Ecuador","countryShortCode":"EC","country3DigitCode":"ECU","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"113":{"localeId":"113","localeName":"English_ElSalvador","localeString":"en_SV","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"67","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"El Salvador","countryShortCode":"SV","country3DigitCode":"SLV","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"114":{"localeId":"114","localeName":"English_Egypt","localeString":"en_EG","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u00a3","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"66","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Egypt","countryShortCode":"EG","country3DigitCode":"EGY","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"115":{"localeId":"115","localeName":"English_Jordan","localeString":"en_JO","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.\u0627","defaultUnits":"metric","languageId":"1","currencyId":"37","countryId":"113","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Jordanian dinar","currencyCode":"JOD","digitsRightOfDecimal":"3","currencyNumber":"400","currencyCharacter":"\u062f.\u0627","usdExchangeRate":"0.7094","countryName":"Jordan","countryShortCode":"JO","country3DigitCode":"JOR","displayPricesIncludingTax":"0","vatRate":"16.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"116":{"localeId":"116","localeName":"English_Guatemala","localeString":"en_GT","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"Q","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"94","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Guatemala","countryShortCode":"GT","country3DigitCode":"GTM","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"117":{"localeId":"117","localeName":"English_Honduras","localeString":"en_HN","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"L","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"100","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Honduras","countryShortCode":"HN","country3DigitCode":"HND","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"118":{"localeId":"118","localeName":"English_Kuwait","localeString":"en_KW","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\u062f.\u0643","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"119","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Kuwait","countryShortCode":"KW","country3DigitCode":"KWT","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"119":{"localeId":"119","localeName":"English_Lebanon","localeString":"en_LB","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"123","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Lebanon","countryShortCode":"LB","country3DigitCode":"LBN","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"120":{"localeId":"120","localeName":"English_Morocco","localeString":"en_MA","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":".\u062f.","defaultUnits":"metric","languageId":"1","currencyId":"43","countryId":"148","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Moroccan dirham","currencyCode":"MAD","digitsRightOfDecimal":"2","currencyNumber":"504","currencyCharacter":"MAD","usdExchangeRate":"10.189662","countryName":"Morocco","countryShortCode":"MA","country3DigitCode":"MAR","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"121":{"localeId":"121","localeName":"English_Oman","localeString":"en_OM","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"\ufdfc","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"165","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Oman","countryShortCode":"OM","country3DigitCode":"OMN","displayPricesIncludingTax":"0","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"122":{"localeId":"122","localeName":"English_PuertoRico","localeString":"en_PR","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"US$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"177","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Puerto Rico","countryShortCode":"PR","country3DigitCode":"PRI","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"123":{"localeId":"123","localeName":"English_France","localeString":"en_FR","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"77","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"France","countryShortCode":"FR","country3DigitCode":"FRA","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"124":{"localeId":"124","localeName":"English_Botswana","localeString":"en_BW","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"R","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"31","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Botswana","countryShortCode":"BW","country3DigitCode":"BWA","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"125":{"localeId":"125","localeName":"Polish_Poland","localeString":"pl_PL","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"z\u0142","defaultUnits":"metric","languageId":"19","currencyId":"53","countryId":"175","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Polish z\u0142oty","currencyCode":"PLN","digitsRightOfDecimal":"2","currencyNumber":"985","currencyCharacter":"z\u0142","usdExchangeRate":"4.327014","countryName":"Poland","countryShortCode":"PL","country3DigitCode":"POL","displayPricesIncludingTax":"0","vatRate":"23.000000","languageName":"Polish","tag":"pl-PL","textLeft2Right":"1"},"126":{"localeId":"126","localeName":"English_Slovakia","localeString":"en_SK","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"10","countryId":"198","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Czech Republic Koruna","currencyCode":"CZK","digitsRightOfDecimal":"2","currencyNumber":"203","currencyCharacter":"K\u010d","usdExchangeRate":"21.547549","countryName":"Slovakia","countryShortCode":"SK","country3DigitCode":"SVK","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"127":{"localeId":"127","localeName":"English_Nepal","localeString":"en_NP","dateFormat":"m\/d\/Y","timeFormat":"g:i A","dateTimeFormat":"m\/d\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"153","stateId":null,"active":"0","activeOnContent":"0","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Nepal","countryShortCode":"NP","country3DigitCode":"NPL","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"128":{"localeId":"128","localeName":"English_Malta","localeString":"en_MT","dateFormat":"m\/d\/Y","timeFormat":"G:i","dateTimeFormat":"m\/d\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"137","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Malta","countryShortCode":"MT","country3DigitCode":"MLT","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"129":{"localeId":"129","localeName":"English_Serbia","localeString":"en_RS","dateFormat":"d.m.Y","timeFormat":"h:i a","dateTimeFormat":"d.m.Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"75","countryId":"194","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Serbian Dinar","currencyCode":"RSD","digitsRightOfDecimal":"2","currencyNumber":"941","currencyCharacter":"\u0420\u0421\u0414","usdExchangeRate":"108.143237","countryName":"Serbia","countryShortCode":"RS","country3DigitCode":"SRB","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"130":{"localeId":"130","localeName":"English_BosniaandHerzegovina","localeString":"en_BA","dateFormat":"d.m.Y","timeFormat":"h:i a","dateTimeFormat":"d.m.Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"75","countryId":"30","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Serbian Dinar","currencyCode":"RSD","digitsRightOfDecimal":"2","currencyNumber":"941","currencyCharacter":"\u0420\u0421\u0414","usdExchangeRate":"108.143237","countryName":"Bosnia and Herzegovina","countryShortCode":"BA","country3DigitCode":"BIH","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"131":{"localeId":"131","localeName":"English_Macedonia","localeString":"en_MK","dateFormat":"d.m.Y","timeFormat":"h:i A","dateTimeFormat":"d.m.Y h:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"131","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"North Macedonia","countryShortCode":"MK","country3DigitCode":"MKD","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"132":{"localeId":"132","localeName":"Vietnamese_Vietnam","localeString":"vi_VN","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"25","currencyId":null,"countryId":"236","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Vietnam","countryShortCode":"VN","country3DigitCode":"VNM","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"Vietnamese","tag":"vi-VN","textLeft2Right":"1"},"133":{"localeId":"133","localeName":"Indonesian_Indonesia","localeString":"id_ID","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"20","currencyId":"34","countryId":"105","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Indonesian rupiah","currencyCode":"IDR","digitsRightOfDecimal":"2","currencyNumber":"360","currencyCharacter":"Rp","usdExchangeRate":"14943.609392","countryName":"Indonesia","countryShortCode":"ID","country3DigitCode":"IDN","displayPricesIncludingTax":"1","vatRate":"10.000000","languageName":"Indonesian","tag":"id-ID","textLeft2Right":"1"},"134":{"localeId":"134","localeName":"Malay_Malaysia","localeString":"ms_MY","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"21","currencyId":null,"countryId":"134","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Malaysia","countryShortCode":"MY","country3DigitCode":"MYS","displayPricesIncludingTax":"0","vatRate":"6.000000","languageName":"Malay","tag":"ms-MY","textLeft2Right":"1"},"135":{"localeId":"135","localeName":"Slovenian_Slovenia","localeString":"sl_SI","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"22","currencyId":null,"countryId":"199","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Slovenia","countryShortCode":"SI","country3DigitCode":"SVN","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"Slovenian","tag":"sl-SI","textLeft2Right":"1"},"136":{"localeId":"136","localeName":"Serbian_Serbia","localeString":"sr_RS","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"23","currencyId":null,"countryId":"194","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Serbia","countryShortCode":"RS","country3DigitCode":"SRB","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"Serbian","tag":"sr-RS","textLeft2Right":"1"},"137":{"localeId":"137","localeName":"Montenegrin_Montenegro","localeString":"mt_ME","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"24","currencyId":null,"countryId":"244","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Montenegro","countryShortCode":"ME","country3DigitCode":"MNE","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"Montenegrin","tag":"sr-ME","textLeft2Right":"1"},"138":{"localeId":"138","localeName":"Hebrew_Israel","localeString":"he_IL","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"26","currencyId":"35","countryId":"109","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Israeli new shekel","currencyCode":"ILS","digitsRightOfDecimal":"3","currencyNumber":"376","currencyCharacter":"\u20aa\u200e","usdExchangeRate":"3.631913","countryName":"Israel","countryShortCode":"IL","country3DigitCode":"ISR","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"Hebrew","tag":"he-IL","textLeft2Right":"0"},"139":{"localeId":"139","localeName":"English_Cambodia","localeString":"en_KH","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"39","stateId":null,"active":"0","activeOnContent":"0","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Cambodia","countryShortCode":"KH","country3DigitCode":"KHM","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"140":{"localeId":"140","localeName":"English_Cyprus","localeString":"en_CY","dateFormat":"m\/d\/Y","timeFormat":"G:i","dateTimeFormat":"m\/d\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"57","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Cyprus","countryShortCode":"CY","country3DigitCode":"CYP","displayPricesIncludingTax":"0","vatRate":"19.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"141":{"localeId":"141","localeName":"English_Montenegro","localeString":"en_ME","dateFormat":"d.m.Y","timeFormat":"G:i","dateTimeFormat":"d.m.Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"244","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Montenegro","countryShortCode":"ME","country3DigitCode":"MNE","displayPricesIncludingTax":"0","vatRate":"21.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"142":{"localeId":"142","localeName":"English_Brazil","localeString":"en_BR","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"6","countryId":"33","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Brazilian Real","currencyCode":"BRL","digitsRightOfDecimal":"2","currencyNumber":"986","currencyCharacter":"R$","usdExchangeRate":"5.0848","countryName":"Brazil","countryShortCode":"BR","country3DigitCode":"BRA","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"144":{"localeId":"144","localeName":"English_Azerbaijan","localeString":"en_az","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"72","countryId":"18","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Azerbaijanian manat","currencyCode":"AZN","digitsRightOfDecimal":"2","currencyNumber":"31","currencyCharacter":"\u20bc","usdExchangeRate":"1.7","countryName":"Azerbaijan","countryShortCode":"AZ","country3DigitCode":"AZE","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"145":{"localeId":"145","localeName":"English_SriLanka","localeString":"en_lk","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"204","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Sri Lanka","countryShortCode":"LK","country3DigitCode":"LKA","displayPricesIncludingTax":"0","vatRate":"12.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"146":{"localeId":"146","localeName":"Croatian_Croatia","localeString":"hr_HR","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"27","currencyId":"25","countryId":"55","stateId":null,"active":"0","activeOnContent":"0","currencyName":"Croatian kuna","currencyCode":"HRK","digitsRightOfDecimal":"2","currencyNumber":"191","currencyCharacter":"kn","usdExchangeRate":"6.948874","countryName":"Croatia","countryShortCode":"HR","country3DigitCode":"HRV","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"Croatian","tag":"hr-HR","textLeft2Right":"1"},"147":{"localeId":"147","localeName":"Romanian_Romania","localeString":"ro_RO","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"28","currencyId":"55","countryId":"180","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Romanian leu","currencyCode":"RON","digitsRightOfDecimal":"2","currencyNumber":"946","currencyCharacter":"lei","usdExchangeRate":"4.547775","countryName":"Romania","countryShortCode":"RO","country3DigitCode":"ROU","displayPricesIncludingTax":"1","vatRate":"19.000000","languageName":"Romanian","tag":"ro-RO","textLeft2Right":"1"},"148":{"localeId":"148","localeName":"Hungarian_Hungary","localeString":"hu_HU","dateFormat":"Y.m.d","timeFormat":"G:i","dateTimeFormat":"Y.m.d G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"29","currencyId":"32","countryId":"102","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Hungarian forint","currencyCode":"HUF","digitsRightOfDecimal":"2","currencyNumber":"348","currencyCharacter":"Ft","usdExchangeRate":"347.054689","countryName":"Hungary","countryShortCode":"HU","country3DigitCode":"HUN","displayPricesIncludingTax":"1","vatRate":"27.000000","languageName":"Hungarian","tag":"hu-HU","textLeft2Right":"1"},"149":{"localeId":"149","localeName":"Greek_Greece","localeString":"el_GR","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"30","currencyId":"11","countryId":"89","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Greece","countryShortCode":"GR","country3DigitCode":"GRC","displayPricesIncludingTax":"1","vatRate":"24.000000","languageName":"Greek","tag":"el-GR","textLeft2Right":"1"},"150":{"localeId":"150","localeName":"Dutch_Netherlands","localeString":"nl_NL","dateFormat":"d-m-Y","timeFormat":"H:i","dateTimeFormat":"d-m-Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"18","currencyId":"11","countryId":"154","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Netherlands","countryShortCode":"NL","country3DigitCode":"NLD","displayPricesIncludingTax":"1","vatRate":"21.000000","languageName":"Dutch","tag":"nl-NL","textLeft2Right":"1"},"151":{"localeId":"151","localeName":"English_Pakistan","localeString":"en_pk","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"166","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Pakistan","countryShortCode":"PK","country3DigitCode":"PAK","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"152":{"localeId":"152","localeName":"Slovak_Slovakia","localeString":"sk_SK","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"31","currencyId":"11","countryId":"198","stateId":null,"active":"0","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Slovakia","countryShortCode":"SK","country3DigitCode":"SVK","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"Slovak","tag":"sk-SK","textLeft2Right":"1"},"153":{"localeId":"153","localeName":"Bulgarian_Bulgaria","localeString":"bg_BG","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"32","currencyId":"21","countryId":"36","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Bulgarian lev","currencyCode":"BGN","digitsRightOfDecimal":"2","currencyNumber":"975","currencyCharacter":"\u043b\u0432","usdExchangeRate":"1.79081","countryName":"Bulgaria","countryShortCode":"BG","country3DigitCode":"BGR","displayPricesIncludingTax":"1","vatRate":"20.000000","languageName":"Bulgarian","tag":"bg-BG","textLeft2Right":"1"},"154":{"localeId":"154","localeName":"English_Ghana","localeString":"en_gh","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"86","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Ghana","countryShortCode":"GH","country3DigitCode":"GHA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"155":{"localeId":"155","localeName":"English_Algeria","localeString":"en_dz","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"6","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Algeria","countryShortCode":"DZ","country3DigitCode":"DZA","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"156":{"localeId":"156","localeName":"French_Morocco","localeString":"fr_MA","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":"43","countryId":"148","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Moroccan dirham","currencyCode":"MAD","digitsRightOfDecimal":"2","currencyNumber":"504","currencyCharacter":"MAD","usdExchangeRate":"10.189662","countryName":"Morocco","countryShortCode":"MA","country3DigitCode":"MAR","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"157":{"localeId":"157","localeName":"Arabic_Iraq","localeString":"ar_IQ","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"107","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Iraq","countryShortCode":"IQ","country3DigitCode":"IRQ","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"158":{"localeId":"158","localeName":"Arabic_Palestine","localeString":"ar_PS","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"8","currencyId":"8","countryId":"168","stateId":null,"active":"1","activeOnContent":"1","currencyName":"United Arab Emirates dirham","currencyCode":"AED","digitsRightOfDecimal":"2","currencyNumber":"784","currencyCharacter":"\u062f.","usdExchangeRate":"3.672485","countryName":"Palestine","countryShortCode":"PS","country3DigitCode":"PSE","displayPricesIncludingTax":"0","vatRate":null,"languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"159":{"localeId":"159","localeName":"Arabic_Libya","localeString":"ar_LY","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"126","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Libya","countryShortCode":"LY","country3DigitCode":"LBY","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"160":{"localeId":"160","localeName":"Arabic_Mauritania","localeString":"ar_MR","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"140","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Mauritania","countryShortCode":"MR","country3DigitCode":"MRT","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"161":{"localeId":"161","localeName":"Arabic_Yemen","localeString":"ar_YE","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"8","currencyId":null,"countryId":"241","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Yemen","countryShortCode":"YE","country3DigitCode":"YEM","displayPricesIncludingTax":"0","vatRate":"2.000000","languageName":"Arabic","tag":"ar-AE","textLeft2Right":"0"},"162":{"localeId":"162","localeName":"English_Afghanistan","localeString":"en_AF","dateFormat":"Y\/m\/d","timeFormat":"g:i A","dateTimeFormat":"Y\/m\/d g:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"3","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Afghanistan","countryShortCode":"AF","country3DigitCode":"AFG","displayPricesIncludingTax":"0","vatRate":"5.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"163":{"localeId":"163","localeName":"English_Angola","localeString":"en_AO","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"9","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Angola","countryShortCode":"AO","country3DigitCode":"AGO","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"164":{"localeId":"164","localeName":"English_CapeVerde","localeString":"en_CV","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"41","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Cape Verde","countryShortCode":"CV","country3DigitCode":"CPV","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"165":{"localeId":"165","localeName":"English_Chad","localeString":"en_TD","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"44","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Chad","countryShortCode":"TD","country3DigitCode":"TCD","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"166":{"localeId":"166","localeName":"English_Djibouti","localeString":"en_DJ","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"61","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Djibouti","countryShortCode":"DJ","country3DigitCode":"DJI","displayPricesIncludingTax":"0","vatRate":"33.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"167":{"localeId":"167","localeName":"English_Ethiopia","localeString":"en_ET","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"71","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Ethiopia","countryShortCode":"ET","country3DigitCode":"ETH","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"168":{"localeId":"168","localeName":"English_Gambia","localeString":"en_GM","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"83","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Gambia","countryShortCode":"GM","country3DigitCode":"GMB","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"169":{"localeId":"169","localeName":"English_Lesotho","localeString":"en_LS","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"124","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Lesotho","countryShortCode":"LS","country3DigitCode":"LSO","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"170":{"localeId":"170","localeName":"English_Liberia","localeString":"en_LR","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"125","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Liberia","countryShortCode":"LR","country3DigitCode":"LBR","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"171":{"localeId":"171","localeName":"English_Malawi","localeString":"en_MW","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"133","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Malawi","countryShortCode":"MW","country3DigitCode":"MWI","displayPricesIncludingTax":"0","vatRate":"16.500000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"172":{"localeId":"172","localeName":"English_Mozambique","localeString":"en_MZ","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"149","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Mozambique","countryShortCode":"MZ","country3DigitCode":"MOZ","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"173":{"localeId":"173","localeName":"English_Namibia","localeString":"en_NA","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"151","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Namibia","countryShortCode":"NA","country3DigitCode":"NAM","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"174":{"localeId":"174","localeName":"English_Rwanda","localeString":"en_RW","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"182","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Rwanda","countryShortCode":"RW","country3DigitCode":"RWA","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"175":{"localeId":"175","localeName":"English_SierraLeone","localeString":"en_SL","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"196","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Sierra Leone","countryShortCode":"SL","country3DigitCode":"SLE","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"176":{"localeId":"176","localeName":"English_Somalia","localeString":"en_SO","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"201","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Somalia","countryShortCode":"SO","country3DigitCode":"SOM","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"177":{"localeId":"177","localeName":"English_Swaziland","localeString":"en_SZ","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"208","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Swaziland","countryShortCode":"SZ","country3DigitCode":"SWZ","displayPricesIncludingTax":"0","vatRate":"14.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"178":{"localeId":"178","localeName":"English_Uganda","localeString":"en_UG","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"226","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Uganda","countryShortCode":"UG","country3DigitCode":"UGA","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"179":{"localeId":"179","localeName":"English_Zimbabwe","localeString":"en_ZW","dateFormat":"d\/m\/Y","timeFormat":"g:i A","dateTimeFormat":"d\/m\/Y g:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":null,"countryId":"243","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Zimbabwe","countryShortCode":"ZW","country3DigitCode":"ZWE","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"180":{"localeId":"180","localeName":"French_Algeria","localeString":"fr_dz","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"6","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Algeria","countryShortCode":"DZ","country3DigitCode":"DZA","displayPricesIncludingTax":"0","vatRate":"17.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"181":{"localeId":"181","localeName":"French_Benin","localeString":"fr_BJ","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"26","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Benin","countryShortCode":"BJ","country3DigitCode":"BEN","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"182":{"localeId":"182","localeName":"French_BurkinaFaso","localeString":"fr_BF","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"37","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Burkina Faso","countryShortCode":"BF","country3DigitCode":"BFA","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"183":{"localeId":"183","localeName":"French_Burundi","localeString":"fr_BI","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"38","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Burundi","countryShortCode":"BI","country3DigitCode":"BDI","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"184":{"localeId":"184","localeName":"French_Cameroon","localeString":"fr_CM","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"40","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Cameroon","countryShortCode":"CM","country3DigitCode":"CMR","displayPricesIncludingTax":"0","vatRate":null,"languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"185":{"localeId":"185","localeName":"French_CentralAfricanRepublic","localeString":"fr_CF","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"43","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Central African Republic","countryShortCode":"CF","country3DigitCode":"CAF","displayPricesIncludingTax":"0","vatRate":"19.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"186":{"localeId":"186","localeName":"French_Comoros","localeString":"fr_KM","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"50","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Comoros","countryShortCode":"KM","country3DigitCode":"COM","displayPricesIncludingTax":"0","vatRate":"10.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"187":{"localeId":"187","localeName":"French_CoteDIvoire","localeString":"fr_CI","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"54","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Cote D'Ivoire (Ivory Coast)","countryShortCode":"CI","country3DigitCode":"CIV","displayPricesIncludingTax":"0","vatRate":null,"languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"188":{"localeId":"188","localeName":"French_DemocraticRepoftheCongo","localeString":"fr_CD","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"59","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Democratic Republic of the Congo","countryShortCode":"CD","country3DigitCode":"COD","displayPricesIncludingTax":"0","vatRate":"13.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"189":{"localeId":"189","localeName":"French_EquatorialGuinea","localeString":"fr_GQ","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"68","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Equatorial Guinea","countryShortCode":"GQ","country3DigitCode":"GNQ","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"190":{"localeId":"190","localeName":"French_Gabon","localeString":"fr_GA","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"82","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Gabon","countryShortCode":"GA","country3DigitCode":"GAB","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"191":{"localeId":"191","localeName":"French_Guinea","localeString":"fr_GN","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"95","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Guinea","countryShortCode":"GN","country3DigitCode":"GIN","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"192":{"localeId":"192","localeName":"French_GuineaBissau","localeString":"fr_GW","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"96","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Guinea-Bissau","countryShortCode":"GW","country3DigitCode":"GNB","displayPricesIncludingTax":"0","vatRate":null,"languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"193":{"localeId":"193","localeName":"French_Madagascar","localeString":"fr_MG","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"132","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Madagascar","countryShortCode":"MG","country3DigitCode":"MDG","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"194":{"localeId":"194","localeName":"French_Mali","localeString":"fr_ML","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"136","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Mali","countryShortCode":"ML","country3DigitCode":"MLI","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"195":{"localeId":"195","localeName":"French_Niger","localeString":"fr_NE","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"159","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Niger","countryShortCode":"NE","country3DigitCode":"NER","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"196":{"localeId":"196","localeName":"French_Senegal","localeString":"fr_SN","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"193","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Senegal","countryShortCode":"SN","country3DigitCode":"SEN","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"197":{"localeId":"197","localeName":"French_Togo","localeString":"fr_TG","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"217","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Togo","countryShortCode":"TG","country3DigitCode":"TGO","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"198":{"localeId":"198","localeName":"French_Tunisia","localeString":"fr_TN","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"221","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Tunisia","countryShortCode":"TN","country3DigitCode":"TUN","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"199":{"localeId":"199","localeName":"English_Macao","localeString":"en_mo","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"4","countryId":"130","stateId":null,"active":"1","activeOnContent":"1","currencyName":"China Yuan Renminbi","currencyCode":"CNY","digitsRightOfDecimal":"2","currencyNumber":"156","currencyCharacter":"\u00a5","usdExchangeRate":"6.8811","countryName":"Macao","countryShortCode":"MO","country3DigitCode":"MAC","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"200":{"localeId":"200","localeName":"French_RepublicoftheCongo","localeString":"fr_CG","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":null,"countryId":"51","stateId":null,"active":"1","activeOnContent":"1","currencyName":null,"currencyCode":null,"digitsRightOfDecimal":null,"currencyNumber":null,"currencyCharacter":null,"usdExchangeRate":"1","countryName":"Congo","countryShortCode":"CG","country3DigitCode":"COG","displayPricesIncludingTax":"0","vatRate":"18.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"201":{"localeId":"201","localeName":"English_SaudiArabia","localeString":"en_SA","dateFormat":"d\/m\/Y","timeFormat":"G:i","dateTimeFormat":"d\/m\/Y G:i","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"56","countryId":"192","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Saudi riyal","currencyCode":"SAR","digitsRightOfDecimal":"2","currencyNumber":"682","currencyCharacter":"SR","usdExchangeRate":"3.7519","countryName":"Saudi Arabia","countryShortCode":"SA","country3DigitCode":"SAU","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"202":{"localeId":"202","localeName":"English_Uruguay","localeString":"en_UY","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"65","countryId":"231","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Uruguayan peso","currencyCode":"UYU","digitsRightOfDecimal":"2","currencyNumber":"858","currencyCharacter":"$U","usdExchangeRate":"38.71369","countryName":"Uruguay","countryShortCode":"UY","country3DigitCode":"URY","displayPricesIncludingTax":"0","vatRate":"22.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"203":{"localeId":"203","localeName":"Spanish_LAC_UnitedStates","localeString":"es_US","dateFormat":"d\/m\/Y","timeFormat":"g:i a","dateTimeFormat":"d\/m\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"imperial","languageId":"2","currencyId":"1","countryId":"1","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"United States","countryShortCode":"US","country3DigitCode":"USA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"Spanish (LAC)","tag":"es-CO","textLeft2Right":"1"},"204":{"localeId":"204","localeName":"Chinese_Simplified_Taiwan","localeString":"zh_TW","dateFormat":"Y\/m\/d","timeFormat":"h:i a","dateTimeFormat":"Y\/m\/d h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"4","currencyId":"1","countryId":"212","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Taiwan","countryShortCode":"TW","country3DigitCode":"TWN","displayPricesIncludingTax":"0","vatRate":"5.000000","languageName":"Chinese (Simplified)","tag":"zh-CN","textLeft2Right":"1"},"205":{"localeId":"205","localeName":"English_Panama","localeString":"en_PA","dateFormat":"m\/d\/Y","timeFormat":"h:i a","dateTimeFormat":"m\/d\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"49","countryId":"169","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Panamanian balboa","currencyCode":"PAB","digitsRightOfDecimal":"2","currencyNumber":"590","currencyCharacter":"B\/.","usdExchangeRate":"1","countryName":"Panama","countryShortCode":"PA","country3DigitCode":"PAN","displayPricesIncludingTax":"0","vatRate":"7.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"206":{"localeId":"206","localeName":"English_Moldova","localeString":"en_md","dateFormat":"m\/d\/Y","timeFormat":"G:i","dateTimeFormat":"m\/d\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"55","countryId":"144","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Romanian leu","currencyCode":"RON","digitsRightOfDecimal":"2","currencyNumber":"946","currencyCharacter":"lei","usdExchangeRate":"4.547775","countryName":"Moldova","countryShortCode":"MD","country3DigitCode":"MDA","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"207":{"localeId":"207","localeName":"Romanian_Moldova","localeString":"ro_MD","dateFormat":"m\/d\/Y","timeFormat":"G:i","dateTimeFormat":"m\/d\/Y G:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"28","currencyId":"55","countryId":"144","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Romanian leu","currencyCode":"RON","digitsRightOfDecimal":"2","currencyNumber":"946","currencyCharacter":"lei","usdExchangeRate":"4.547775","countryName":"Moldova","countryShortCode":"MD","country3DigitCode":"MDA","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"Romanian","tag":"ro-RO","textLeft2Right":"1"},"208":{"localeId":"208","localeName":"English_Fiji","localeString":"en_FJ","dateFormat":"m\/d\/Y","timeFormat":"g:i a","dateTimeFormat":"m\/d\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"17","countryId":"75","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Australian dollar","currencyCode":"AUD","digitsRightOfDecimal":"2","currencyNumber":"36","currencyCharacter":"$","usdExchangeRate":"1.509775","countryName":"Fiji","countryShortCode":"FJ","country3DigitCode":"FJI","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"209":{"localeId":"209","localeName":"French_Luxembourg","localeString":"fr_LU","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"11","currencyId":"11","countryId":"129","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Luxembourg","countryShortCode":"LU","country3DigitCode":"LUX","displayPricesIncludingTax":"0","vatRate":"15.000000","languageName":"French (France)","tag":"fr-FR","textLeft2Right":"1"},"210":{"localeId":"210","localeName":"English_Ukraine","localeString":"en_UA","dateFormat":"d\/m\/Y","timeFormat":"H:i","dateTimeFormat":"d\/m\/Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"227","stateId":null,"active":"0","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Ukraine","countryShortCode":"UA","country3DigitCode":"UKR","displayPricesIncludingTax":"0","vatRate":"20.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"211":{"localeId":"211","localeName":"English_Iraq","localeString":"en_IQ","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"1","countryId":"107","stateId":null,"active":"1","activeOnContent":"1","currencyName":"US Dollar","currencyCode":"USD","digitsRightOfDecimal":"2","currencyNumber":"840","currencyCharacter":"$","usdExchangeRate":"1","countryName":"Iraq","countryShortCode":"IQ","country3DigitCode":"IRQ","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"212":{"localeId":"212","localeName":"Norwegian_Norway","localeString":"no_NO","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"$","defaultUnits":"metric","languageId":"33","currencyId":"47","countryId":"164","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Norwegian krone","currencyCode":"NOK","digitsRightOfDecimal":"2","currencyNumber":"578","currencyCharacter":"kr","usdExchangeRate":"10.55557","countryName":"Norway","countryShortCode":"NO","country3DigitCode":"NOR","displayPricesIncludingTax":"0","vatRate":"25.000000","languageName":"Norwegian","tag":"no-NO","textLeft2Right":"1"},"213":{"localeId":"213","localeName":"English_Maldives","localeString":"en_MV","dateFormat":"d\/m\/Y","timeFormat":"h:i A","dateTimeFormat":"d\/m\/Y h:i A","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"58","countryId":"135","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Singapore dollar","currencyCode":"SGD","digitsRightOfDecimal":"2","currencyNumber":"702","currencyCharacter":"$","usdExchangeRate":"1.333466","countryName":"Maldives","countryShortCode":"MV","country3DigitCode":"MDV","displayPricesIncludingTax":"0","vatRate":"6.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"214":{"localeId":"214","localeName":"English_SanMarino","localeString":"en_SM","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"190","stateId":null,"active":"0","activeOnContent":"0","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"San Marino","countryShortCode":"SM","country3DigitCode":"SMR","displayPricesIncludingTax":"0","vatRate":"0.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"215":{"localeId":"215","localeName":"English_CaymanIslands","localeString":"en_KY","dateFormat":"d-m-Y","timeFormat":"g:i a","dateTimeFormat":"d-m-Y g:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"36","countryId":"42","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Jamaican dollar","currencyCode":"JMD","digitsRightOfDecimal":"2","currencyNumber":"388","currencyCharacter":"J$","usdExchangeRate":"152.236322","countryName":"Cayman Islands","countryShortCode":"KY","country3DigitCode":"CYM","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"216":{"localeId":"216","localeName":"English_TurksandCaicos","localeString":"en_TC","dateFormat":"m\/d\/Y","timeFormat":"g:i a","dateTimeFormat":"m\/d\/Y g:i a","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"36","countryId":"224","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Jamaican dollar","currencyCode":"JMD","digitsRightOfDecimal":"2","currencyNumber":"388","currencyCharacter":"J$","usdExchangeRate":"152.236322","countryName":"Turks and Caicos Islands","countryShortCode":"TC","country3DigitCode":"TCA","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"217":{"localeId":"217","localeName":"English_Croatia_Euro","localeString":"en_HR","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":".","curChar":"\u20ac","defaultUnits":"metric","languageId":"1","currencyId":"11","countryId":"55","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Croatia","countryShortCode":"HR","country3DigitCode":"HRV","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"English (US)","tag":"en-US","textLeft2Right":"1"},"218":{"localeId":"218","localeName":"Croatian_Croatia_Euro","localeString":"hr_HR","dateFormat":"d.m.Y","timeFormat":"H:i","dateTimeFormat":"d.m.Y H:i","timeZone":null,"numberDecimalPointCharacter":",","numberThousandsSeperator":" ","curChar":"\u20ac","defaultUnits":"metric","languageId":"27","currencyId":"11","countryId":"55","stateId":null,"active":"1","activeOnContent":"1","currencyName":"Euro","currencyCode":"EUR","digitsRightOfDecimal":"2","currencyNumber":"978","currencyCharacter":"\u20ac","usdExchangeRate":"0.922684","countryName":"Croatia","countryShortCode":"HR","country3DigitCode":"HRV","displayPricesIncludingTax":"1","vatRate":"25.000000","languageName":"Croatian","tag":"hr-HR","textLeft2Right":"1"},"219":{"localeId":"219","localeName":"English_Palestine","localeString":"en_PS","dateFormat":"d\/m\/Y","timeFormat":"h:i a","dateTimeFormat":"d\/m\/Y h:i a","timeZone":null,"numberDecimalPointCharacter":".","numberThousandsSeperator":",","curChar":"$","defaultUnits":"metric","languageId":"1","currencyId":"8","countryId":"168","stateId":null,"active":"1","activeOnContent":"1","currencyName":"United Arab Emirates dirham","currencyCode":"AED","digitsRightOfDecimal":"2","currencyNumber":"784","currencyCharacter":"\u062f.","usdExchangeRate":"3.672485","countryName":"Palestine","countryShortCode":"PS","country3DigitCode":"PSE","displayPricesIncludingTax":"0","vatRate":null,"languageName":"English (US)","tag":"en-US","textLeft2Right":"1"}};

// url variable
var g_redirect_reason = "";

var g_wishlist_add = "Add to wishlist";
var g_wishlist_remove = "Remove from wishlist";

var g_follow_button_text = "Follow";
var g_unfollow_button_text = "UNFOLLOW";
var g_follow_button_hover_text = "Get notified of new items from this merchant.";

var g_locale = {
    DEFAULT_LOCALE_ID: 1,
    UNIT_IMPERIAL: 'imperial',
    UNIT_METRIC:   'metric',

    UNIT_TYPE_LENGTH: 'length',
    UNIT_TYPE_WEIGHT: 'weight',

    LENGTH_LEVEL_INCH: 1,
    LENGTH_LEVEL_FOOT: 2,
    LENGTH_LEVEL_MILE: 3,

    WEIGHT_LEVEL_LB: 1,

    DEFAULT_DECIMALS: 2,

    isValidNumber: function(n){
        return ( n!==null && n!==undefined && $.trim(n)!=='' );
    },

    getLocale: function(localeId, strict = false) {
        if (! +localeId) {
            localeId = this.DEFAULT_LOCALE_ID;
        }
        if (g_all_locales[localeId]) {
            return g_all_locales[localeId];
        }
        if (strict) {
            return false;
        }
        return g_all_locales[this.DEFAULT_LOCALE_ID];
    },

    findLocale: function(locale){
        if (! locale || locale === '0') {
            // XXX: Does not match PHP version...
            return g_currency_locale;
        }
        else if( $.isNumeric(locale)){
            return this.getLocale(locale);
        }
        else{
            return locale;
        }
    },

    getEffectiveDatetimeLocale: function(locale){

        if(! locale || locale === '0'){
            return g_datatime_locale;
        }

        return this.findLocale(locale);
    },

    addNumberSeperator: function(x, sep) {
        if (typeof(sep) === "undefined") { sep = ','; }
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, sep);
    },

    replaceAll: function(str, search, replacement) {
        return str.split(search).join(replacement);
    },

    pound2gram: function(pound){return pound*453.592;},

    gram2pound: function(gram){return gram/453.592; },

    pound2kg:   function(pound){return this.pound2gram(pound)/1000;},

    kg2pound:   function(kg){return this.gram2pound(1000*kg);},

    inch2cm:    function(inch){return inch*2.54;},

    cm2inch:    function(cm){return cm/2.54;},

    foot2meter: function(foot){return foot/3.28084;},

    meter2foot: function(meter){return meter*3.28084;},

    mile2km:    function(mile){return mile * 1.60934; },

    km2mile:    function(km){ return km / 1.60934;},


    getUserTimezoneOffset: function(){ return g_timezoneOffset; },

    isDaylightSavings:  function(){ return g_isDaylightSavings === 1;},

    // our server time is PST or PSD
    // user's timeZoneDifference from UTC is saved in session
    // TimeDifference is the difference between user time and server time
    getTimeDifferenceInSec: function(userTimezoneOffset){


        if(typeof(userTimezoneOffset)==="undefined" ||  userTimezoneOffset===''){
            return 0;                               //no timezone info,  do not change the time
        }


        if(isNaN(userTimezoneOffset*1)){
             return 0;
        }

        var serverTimezoneOffset = 8;                  //PST
        if (this.isDaylightSavings()) {
            serverTimezoneOffset = 7;              //PDT
        }

        var diff = (serverTimezoneOffset + userTimezoneOffset*1)*3600;
        return diff;


    },



    //******* format  functions **********


    //**** language *****/
    getLanguageId: function(locale) {
        return this.findLocale(locale).languageId;
    },


    //**** date / time *****/

    dateFormatPhpToMoment: function(format) {
        var replace = {
            A: 'A',
            a: 'a',
            B: '',
            c: 'YYYY-MM-DD[T]HH:mm:ssZ',
            D: 'ddd',
            d: 'DD',
            e: 'zz',
            F: 'MMMM',
            G: 'H',
            g: 'h',
            H: 'HH',
            h: 'hh',
            I: '',
            i: 'mm',
            j: 'D',
            L: '',
            l: 'dddd',
            M: 'MMM',
            m: 'MM',
            N: 'E',
            n: 'M',
            O: 'ZZ',
            o: 'YYYY',
            P: 'Z',
            r: 'ddd, DD MMM YYYY HH:mm:ss ZZ',
            S: 'o',
            s: 'ss',
            T: 'z',
            t: '',
            U: 'X',
            u: 'SSSSSS',
            v: 'SSS',
            W: 'W',
            w: 'e',
            Y: 'YYYY',
            y: 'YY',
            Z: '',
            z: 'DDD'
        };
        return format.replace(new RegExp('[' + Object.keys(replace) + ']', 'g'), function(c) {
            return replace[c];
        });
    },

    getDateFormat: function(locale) {
        return this.dateFormatPhpToMoment(this.getEffectiveDatetimeLocale(locale).dateFormat);
    },

    getTimeFormat: function(locale) {
        return this.dateFormatPhpToMoment(this.getEffectiveDatetimeLocale(locale).timeFormat);
    },

    getDateTimeFormat: function(locale) {
        return this.dateFormatPhpToMoment(this.getEffectiveDatetimeLocale(locale).dateTimeFormat);
    },

    // when formatting date time, to make the date time consistent across the whole site,
    // most time we do not need to pass the $locale parameter

    formatDate: function(date, locale, diffInSec) {
        if (typeof datetime === 'string' && (date === '' || date.indexOf('0000-00-00') !== -1)) {
            return '';
        }

        locale = this.getEffectiveDatetimeLocale(locale);            //this.findLocale(locale);

        if (typeof(diffInSec) === "undefined") { diffInSec = 0; }

        return moment(date).add(diffInSec).format(this.getDateFormat(locale));
    },

    formatTime: function(time, locale, diffInSec) {
        if (typeof datetime === 'string' && (time === '' || time.indexOf('0000-00-00') !== -1)){
            return '';
        }

        locale = this.getEffectiveDatetimeLocale(locale);            //this.findLocale(locale);

        if (typeof(diffInSec) === "undefined") { diffInSec = 0; }

        time = $.trim(time);
        var time_split = time.split(' ');
        if(time_split.length<=1){
            time = '2001-01-01 ' + $.trim(time);
        }

        return moment(time).add(diffInSec).format(this.getTimeFormat(locale));
    },

    formatDateTime: function(datetime, locale, diffInSec) {
        if (typeof datetime === 'string' && (datetime === '' || datetime.indexOf('0000-00-00') !== -1)){
            return '';
        }

        locale = this.getEffectiveDatetimeLocale(locale);            //this.findLocale(locale);

        if (typeof(diffInSec) === "undefined") { diffInSec = 0; }

        return moment(datetime).add(diffInSec).format(this.getDateTimeFormat(locale));
    },


    formatNumber: function(n, decimals = null, locale = null, showZeroDecimals = true) {
        decimals = decimals === null ? this.DEFAULT_DECIMALS : decimals;
        locale = this.findLocale(locale);

        var arr = (n*1).toFixed(decimals).split('.');
        var decPart = '';
        if (arr.length === 2) {
            decPart = arr[1];
        }

        var wholePart = this.addNumberSeperator(arr[0], locale.numberThousandsSeperator);

        var showDecSeparator = true;
        if (decimals === 0) {
            showDecSeparator = false; // if n is a whole number
        }

        if (! showZeroDecimals && parseInt(decPart) === 0) {
            showDecSeparator = false;
        }

        return wholePart + (showDecSeparator ? locale.numberDecimalPointCharacter + decPart : '');
    },

    numberToStandardForm: function(n, locale){
        locale = this.findLocale(locale);

        if(locale.numberThousandsSeperator !== ''){
            n = n.split(locale.numberThousandsSeperator).join('');
        }

        if(locale.numberDecimalPointCharacter !== '.'){
            n = n.split(locale.numberDecimalPointCharacter).join('.');
        }

        return n;
    },

    getDigitsRightOfDecimal: function(locale) {
        return this.findLocale(locale).digitsRightOfDecimal;
    },

    getCurrencySymbol: function(locale) {
        return this.findLocale(locale).currencyCharacter;
    },

    getAllCurrencyFormats: function() {
        return {"21":"%num%\u043b\u0432.","65":"$%num% UYU","61":"$%num% TWD","60":"%num% CHF","58":"S$%num%","53":"%num% z\u0142","47":"%num% kr NOK","45":"$%num% NIO","44":"$%num% NZD","36":"$%num% JMD","27":"$%num% DOP","26":"%num% kr DKK","25":"%num% kn","23":"$%num% COP","22":"$%num% CLP","1":"US$%num%","18":"$%num% BSD","2":"$%num% MXN","3":"%num% \u20bd","5":"$%num% CAD","9":"HK$%num%","10":"CZK %num%","12":"%num% SEK","13":"%num% TRY","15":"$%num% ARS","17":"$%num% AUD","20":"$%num% BOB","8":"AED %num%"};
    },

    getCurrencyFormat: function(currencyId) {
        return this.getAllCurrencyFormats()[currencyId] || '';
    },

    handlePriceDisplayManipulation: function(dispPrice, dispLocaleId) {
        if (! dispPrice || dispPrice == 0) {
            return dispPrice;
        }

        const num = dispPrice.replace(/^\D+/, '');
        if (! num) {
            return dispPrice;
        }

        const currencyInfo = this.getLocale(dispLocaleId);
        const currencyFormat = this.getCurrencyFormat(currencyInfo.currencyId);
        if (currencyFormat && currencyFormat != 0) {
            return currencyFormat.replace(/%num%/g, num);
        }
        return dispPrice;
    },

    getSessionCurrencyLocaleId: function() {
        return "1";
    },

    getExchangeRateFromLocaleId: function(localeId) {
        return this.getLocale(localeId).usdExchangeRate;
    },

    getExchangeRate: function(fromLocaleId, toLocaleId = '') {
        if (! +fromLocaleId) {
            return 1.0;
        }

        if (! +toLocaleId) {
            toLocaleId = this.getSessionCurrencyLocaleId();
            if (toLocaleId === null) {
                toLocaleId = fromLocaleId;
            }
        }
        if (fromLocaleId == toLocaleId) {
            return 1.0;
        }

        const fromRate = this.getExchangeRateFromLocaleId(fromLocaleId);
        const toRate = this.getExchangeRateFromLocaleId(toLocaleId);
        if (fromRate == toRate) {
            return 1.0;
        }
        return (1 / fromRate) * toRate;
    },

    roundPriceHandling: function(price) {
        price = +price || 0;
        if (price) {
            const ceil = Math.ceil(price);
            if (((ceil - price) / price) <= 0.02) {
                price = ceil;
            }
        }
        return price;
    },

    convertPrice: function(price, fromLocaleId, toLocaleId = '', round = false) {
        const exchangeRate = this.getExchangeRate(fromLocaleId, toLocaleId);
        if (exchangeRate == 1.0) {
            return round ? Math.ceil(price) : price;
        }
        if (round) {
            return this.roundPriceHandling(price * exchangeRate);
        }
        return price * exchangeRate;
    },

    parseCurrency: function(s, locale = null) {
        locale = (! locale || locale === '0') ? locale : this.getSessionCurrencyLocaleId();
        locale = this.findLocale(locale);
        const dpc = locale.numberDecimalPointCharacter;
        return parseFloat(s.replace(/\D/g, c => c === dpc ? '.' : '')) || 0;
    },

    formatCurrency: function(n, decimals = null, locale = null, showZeroDecimals = true, showCurrencySymbol = true) {
        locale = (! locale || locale === '0') ? locale : this.getSessionCurrencyLocaleId();
        locale = this.findLocale(locale);
        decimals = isNumeric(decimals) ? decimals : this.getDigitsRightOfDecimal(locale);
        return (
            (showCurrencySymbol ? this.getCurrencySymbol(locale) : '') +
            (this.formatNumber(n, decimals, locale, showZeroDecimals))
        );
    },

    /**
     * Format currency input for locale, trying to preserve cursor position.
     * Call this on both input and change events.
     *
     * @param {HTMLInputElement|HTMLTextAreaElement} input The element to format.
     * @param {number|null} [decimals] Override locale decimal count.
     * @param {number|string|null} [locale=null] Locale ID.
     * @param {number|null} [value=null] Replace value, trying to keep the cursor position.
     * @param {Event} [event=null] The non-jQuery change/input event, if available.
     * @return {number} The value after formatting.
     */
    formatCurrencyInput: function(input, decimals = null, locale = null, value = null, event = null) {
        locale = (! locale || locale === '0') ? locale : this.getSessionCurrencyLocaleId();
        locale = this.findLocale(locale);
        decimals = decimals === null ? this.getDigitsRightOfDecimal(locale) : decimals;

        const thousands = locale.numberThousandsSeperator;
        const decimal = locale.numberDecimalPointCharacter;
        let chars = input.value.split('');

        // Check if we need to track the cursor position.
        let ci = input === document.activeElement ? input.selectionStart : null;

        // Remove everything not a digit or first decimal.
        let di = chars.indexOf(decimal);
        for (let i = chars.length; i--;) {
            const c = chars[i];
            if (! (/\d/.test(c) || (c === decimal && i === di))) {
                if (ci !== null && i < ci) {
                    ci--;
                }
                chars.splice(i, 1);
            }
        }

        // Trim left 0 padding, keeping one before decimal.
        while (chars.length > 1 && chars[0] === '0' && chars[1] !== decimal) {
            if (ci) {
                ci--;
            }
            chars.shift();
        }

        // If cursor is not at in from of leading decimal, 0 pad.
        if (ci !== 0 && chars[0] === decimal) {
            chars.splice(0, 0, '0');
            if (ci) {
                ci++;
            }
        }

        // Format and limit decimals, only fill if not being edited.
        di = chars.indexOf(decimal);
        if (ci === null && di < 0) {
            if (! chars.length) {
                chars.push('0');
            }
            di = chars.length;
            chars.push(decimal);
        }
        if (decimals !== null && di >= 0) {
            if (decimals) {
                const p = ((chars.length - 1) - di) - decimals;
                if (p > 0) {
                    chars.splice(chars.length - p, p);
                    if (ci > chars.length) {
                        ci = chars.length;
                    }
                }
                else if (p < 0 && ci === null) {
                    for (let i = p; i++;) {
                        chars.push('0');
                    }
                }
            }
            else {
                chars.splice(di, chars.length - di);
                if (ci > chars.length) {
                    ci = chars.length;
                }
            }
        }

        // If changing the value, switch over, keeping position.
        let r;
        if (value !== null) {
            const newChars = (
                decimals !== null ?
                    value.toFixed(decimals) :
                    value.toString()
            ).replace('.', decimal).split('');
            if (ci === chars.length) {
                di = newChars.indexOf(decimal);
                ci = newChars.length;
            }
            else if (ci) {
                const d = di < 0 ? chars.length : di;
                di = newChars.indexOf(decimal);
                ci = Math.min(Math.max(di + (ci - d), 0), newChars.length);
            }
            else {
                di = newChars.indexOf(decimal);
            }
            chars = newChars;
            r = value;
        }
        else {
            r = parseFloat(chars.join('').replace(decimal, '.'));
        }

        // Insert thousand separators, allow forward delete to move over them.
        const o = event && event.inputType === 'deleteContentForward' ? 0 : -1;
        let c = 0;
        for (let i = di < 0 ? chars.length : di; i--;) {
            if (c >= 3) {
                c = 0;
                if (ci !== null && i < ci + o) {
                    ci++;
                }
                chars.splice(i + 1, 0, thousands);
            }
            c++;
        }

        // Set formatted value and cursor index.
        input.value = chars.join('');
        if (ci !== null) {
            input.selectionStart = input.selectionEnd = ci;
        }

        // Return the resulting value, not NaN.
        return r || 0;
    },

    getLengthUnit:  function(locale, level, longForm){
        //level 1,2,3 corresponding to imperial: in, ft, mile  / metric: cm, m, km
        locale = this.findLocale(locale);
        if (typeof(level)    === "undefined") { level    = this.LENGTH_LEVEL_INCH; }
        if (typeof(longForm) === "undefined") { longForm = true; }

        var imperial_long_form = {};
        imperial_long_form[this.LENGTH_LEVEL_INCH] = 'inch';
        imperial_long_form[this.LENGTH_LEVEL_FOOT] = 'foot';
        imperial_long_form[this.LENGTH_LEVEL_MILE] = 'mile';


        var imperial_short_form = { };
        imperial_short_form[this.LENGTH_LEVEL_INCH] = 'in';
        imperial_short_form[this.LENGTH_LEVEL_FOOT] = 'ft';
        imperial_short_form[this.LENGTH_LEVEL_MILE] = 'mi';


        var metric_long_form = { };
        metric_long_form[this.LENGTH_LEVEL_INCH] = 'centimeter';
        metric_long_form[this.LENGTH_LEVEL_FOOT] = 'meter';
        metric_long_form[this.LENGTH_LEVEL_MILE] = 'kilometer';

        var metric_short_form = {};
        metric_short_form[this.LENGTH_LEVEL_INCH] = 'cm';
        metric_short_form[this.LENGTH_LEVEL_FOOT] = 'm';
        metric_short_form[this.LENGTH_LEVEL_MILE] = 'km';

        var unit;


        if (locale.defaultUnits === this.UNIT_IMPERIAL) {
            var check = longForm ? imperial_long_form : imperial_short_form;
        }
        else {
            var check = longForm ? metric_long_form : metric_short_form;
        }

        if (check[level] !== undefined) {
            return check[level];
        }
        else{
            return '-';
        }

    },

    // the length stored in database is in imperial
    // locale is the original locale n is in
    convert2DbLength: function(n, level, locale){

        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.LENGTH_LEVEL_INCH; }
        locale = this.findLocale(locale);

        n = this.numberToStandardForm(n, locale);


        //if current unit is alreay the unit for database (imperial), no conversion required
        if (locale.defaultUnits !== this.UNIT_IMPERIAL){

            if (level === this.LENGTH_LEVEL_INCH){
                // cm to inch
                return this.cm2inch(n);
            }
            else if (level === this.LENGTH_LEVEL_FOOT){
                return this.meter2foot(n);
            }
            else if (level === this.LENGTH_LEVEL_MILE){
                return this.km2mile(n);
            }
            else {
                return n;
            }
        }

        return n;

    },


    format2DbLength: function(n, level, decimals, locale, showZeroDecimals){
        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.LENGTH_LEVEL_INCH; }
        if (typeof(decimals) === "undefined") { decimals = this.DEFAULT_DECIMALS; }
        locale = this.findLocale(locale);
        if (typeof(showZeroDecimals) === "undefined") { showZeroDecimals = true; }

        return this.formatNumber( this.convert2DbLength(n, level, locale), decimals, locale, showZeroDecimals);

    },


    // the length stored in database is in imperial
    // // locale is the target locale
    convertFromDbLength: function(n, level, locale){
        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.LENGTH_LEVEL_INCH; }
        locale = this.findLocale(locale);


        // db locale is 1.
        n = this.numberToStandardForm(n, 1);


        //if current unit is alreay the unit for database (imperial), no conversion required
        if (locale.defaultUnits !== this.UNIT_IMPERIAL){

            if (level === this.LENGTH_LEVEL_INCH){
                // inch to cm
                return this.inch2cm(n);
            }
            else if (level === this.LENGTH_LEVEL_FOOT){
                return this.foot2meter(n);
            }
            else if (level === this.LENGTH_LEVEL_MILE){
                return this.mile2km(n);
            }
            else {
                return n;
            }
        }

        return n;


    },


    formatFromDbLength: function(n, level, decimals, locale, showZeroDecimals){

        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.LENGTH_LEVEL_INCH; }
        if (typeof(decimals) === "undefined") { decimals = this.DEFAULT_DECIMALS; }
        locale = this.findLocale(locale);
        if (typeof(showZeroDecimals) === "undefined") { showZeroDecimals = true; }

        return this.formatNumber( this.convertFromDbLength(n, level, locale), decimals, locale, showZeroDecimals);

    },



    //***** weight ****
    getWeightUnit:  function(locale, level, longForm){

        locale = this.findLocale(locale);

        if (typeof(level) === "undefined") { level = this.WEIGHT_LEVEL_LB; }
        if (typeof(longForm) === "undefined") { longForm = true; }

        var imperial_long_form = {};
        imperial_long_form[this.WEIGHT_LEVEL_LB] = 'pound';

        var imperial_short_form = {};
        imperial_short_form[this.WEIGHT_LEVEL_LB] = 'lbs';

        var metric_long_form = {};
        metric_long_form[this.WEIGHT_LEVEL_LB] = 'kilogram';

        var metric_short_form = {};
        metric_short_form[this.WEIGHT_LEVEL_LB] = 'kg';


        var unit;

        if(locale.defaultUnits === this.UNIT_IMPERIAL){
            var check = longForm?imperial_long_form:imperial_short_form;

        }
        else {
            var check = longForm?metric_long_form:metric_short_form;

        }


        if (check[level] !== undefined) {
            return check[level];
        }
        else{
            return '-';
        }



    },

    // the length stored in database is in imperial
    // local is the original locale n is in
    convert2DbWeight: function(n, level, locale){
        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.WEIGHT_LEVEL_LB; }
        locale = this.findLocale(locale);

        n = this.numberToStandardForm(n, locale);


        //if current unit is alreay the unit for database (imperial), no conversion required
        if (locale.defaultUnits !== this.UNIT_IMPERIAL) {

            if (level === this.WEIGHT_LEVEL_LB){
                // kg to lb
                return this.kg2pound(n);
            }
            else{
                return n;
            }
        }

        return n;

    },


    format2DbWeight: function(n, level, decimals, locale, showZeroDecimals){
        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level)    === "undefined") { level    = this.WEIGHT_LEVEL_LB; }
        if (typeof(decimals) === "undefined") { decimals = this.DEFAULT_DECIMALS; }
        locale = this.findLocale(locale);
        if (typeof(showZeroDecimals) === "undefined") { showZeroDecimals = true; }

        return this.formatNumber( this.convert2DbWeight(n, level, locale), decimals, locale, showZeroDecimals);

    },


    // the length stored in database is in imperial
    // locale is the target locale
    convertFromDbWeight: function(n, level, locale){



        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.WEIGHT_LEVEL_LB; }

        locale = this.findLocale(locale);


        // db locale is 1.
        n = this.numberToStandardForm(n, 1);


        //if current unit is alreay the unit for database (imperial), no conversion required
        if (locale.defaultUnits !== this.UNIT_IMPERIAL){

            if (level === this.WEIGHT_LEVEL_LB){
                // lb to kg
                return this.pound2kg(n);
            }
            else{
                return n;
            }
        }

        return n;

    },


    formatFromDbWeight: function(n, level, decimals, locale, showZeroDecimals){
        if(!this.isValidNumber(n)){
            return n;
        }

        if (typeof(level) === "undefined") { level = this.WEIGHT_LEVEL_LB; }
        if (typeof(decimals) === "undefined") { decimals = this.DEFAULT_DECIMALS; }
        locale = this.findLocale(locale);
        if (typeof(showZeroDecimals) === "undefined") { showZeroDecimals = true; }

        return this.formatNumber( this.convertFromDbWeight(n, level, locale), decimals, locale, showZeroDecimals);
    },

    getPrice: function(
        price,
        fromLocaleId,
        toLocaleId = '',
        showZeroDecimals = false,
        round = true
    ) {
        if (! +toLocaleId) {
            toLocaleId = this.getSessionCurrencyLocaleId();
            if (toLocaleId === null) {
                toLocaleId = fromLocaleId;
            }
        }

        const fromInfo = this.getLocale(fromLocaleId);
        const toInfo = this.getLocale(toLocaleId);

        if (true && fromInfo.currencyId == toInfo.currencyId) {
            round = false;
        }

        price = +price || 0;

        let convertedPrice = this.convertPrice(price, fromLocaleId, toLocaleId);
        if (round) {
            convertedPrice = this.roundPriceHandling(convertedPrice);
        }

        let dispPrice = this.formatCurrency(convertedPrice, (round ? 0 : null), toLocaleId, showZeroDecimals);
        dispPrice = this.handlePriceDisplayManipulation(dispPrice, toLocaleId);

        return dispPrice;
    },

    getPriceTypesForRegularCheckout: function() {
        return {"points":false,"currency":true};
    },

    getPriceTypesForAuctionCheckout: function() {
        return {"points":false,"currency":true};
    },

    getPrices: function(
        types,
        price,
        fromLocaleId,
        toLocaleId = '',
        showZeroDecimals = false,
        round = true
    ) {
        return {
            points: types.points ?
                g_loyalty_rewards.getPoints(
                    price,
                    fromLocaleId
                ) :
                null,
            currency: types.currency ?
                this.getPrice(
                    price,
                    fromLocaleId,
                    toLocaleId,
                    showZeroDecimals,
                    round
                ) :
                null,
        };
    },

    formatPricesHtml: function(prices) {
        const parts = [];
        let value;
        if ((value = prices.points)) {
            parts.push(value);
        }
        if ((value = prices.currency)) {
            if (parts.length) {
                value = '<span class="price-alt">' + "or" + ' ' + value + '</span>';
            }
            parts.push(value);
        }
        return parts.join(' ');
    },

    getPricesHtml: function(
        types,
        price,
        fromLocaleId,
        toLocaleId = '',
        showZeroDecimals = false,
        round = true
    ) {
        return this.formatPricesHtml(
            this.getPrices(
                types,
                price,
                fromLocaleId,
                toLocaleId,
                showZeroDecimals,
                round
            )
        );
    },

    getDisplayPrice: function(
        price,
        fromLocaleId,
        toLocaleId = '',
        showZeroDecimals = false,
        round = true
    ) {
        let r = price;
        $.ajax({
            type: 'POST',
            url: '/common/getDisplayPrice',
            dataType: 'json',
            async: false,
            data: {
                price: price,
                sLocaleId: fromLocaleId,
                cLocaleId: toLocaleId,
                showZeroDecimals: showZeroDecimals ? 1 : 0,
                round: round ? 1 : 0
            }
        })
        .done(function(data) {
            if (data.price !== undefined) {
                r = data.price;
            }
        });
        return r;
    },

    getDisplayPricesHtml: function(
        priceTypes,
        price,
        fromLocaleId,
        toLocaleId = '',
        showZeroDecimals = false,
        round = true
    ) {
        let r = price;
        $.ajax({
            type: 'POST',
            url: '/common/getDisplayPricesHtml',
            dataType: 'json',
            async: false,
            data: {
                priceTypes: Object.keys(priceTypes).filter(p => priceTypes[p]),
                price: price,
                sLocaleId: fromLocaleId,
                cLocaleId: toLocaleId,
                showZeroDecimals: showZeroDecimals ? 1 : 0,
                round: round ? 1 : 0
            }
        })
        .done(function(data) {
            if (data.price !== undefined) {
                r = data.price;
            }
        });
        return r;
    },

    // ****  UI elements ******/
    // elemement in the form: {obj:jqueryQbject, type:g_locale.UNIT_TYPE_LENGTH, level: g_locale.LENGTH_LEVEL_INCH }
    updateLocaleLengthWeightUnits: function (locale, elements){
        for(var i=0; i<elements.length; i++){
            var element = elements[i];

            var unit = '';
            if(element.type === this.UNIT_TYPE_LENGTH){
                unit = this.getLengthUnit(locale, element.level);

            }
            else if(element.type === this.UNIT_TYPE_WEIGHT){
                unit = this.getWeightUnit(locale, element.level);
            }
            else{

            }

            element.obj.html(unit);

        }

    },

    // elemement in the form: {obj:jqueryQbject, type:g_locale.UNIT_TYPE_LENGTH, level: g_locale.LENGTH_LEVEL_INCH }
    updateLocaleLengthWeightValues: function(ori_locale, new_locale, elements, decimals){

        if (typeof(decimals) === "undefined") { decimals = this.DEFAULT_DECIMALS; }

        if(ori_locale.defaultUnits !== new_locale.defaultUnits){
            if(new_locale.defaultUnits === this.UNIT_IMPERIAL){

                //convert to imperial values
                for(var i=0; i<elements.length; i++){
                    var element = elements[i];
                    var obj = element.obj;
                    var obj_value = obj.val();
                    if(obj.attr('data-realvalue')!==undefined){
                        obj_value = this.formatNumber(obj.attr('data-realvalue'), 10, ori_locale);        // use it for higher precision
                    }

                    var value = '';
                    var real_value = '';
                    if(element.type === this.UNIT_TYPE_LENGTH){
                        //value = this.format2DbLength(obj_value, element.level, decimals, ori_locale);
                        real_value = this.convert2DbLength(obj_value, element.level,  ori_locale);
                        value = this.formatNumber(real_value, decimals, new_locale);
                    }
                    else if(element.type === this.UNIT_TYPE_WEIGHT){
                        //value = this.format2DbWeight(obj_value, element.level, decimals, ori_locale);
                        real_value = this.convert2DbWeight(obj_value, element.level, ori_locale);
                        value = this.formatNumber(real_value, decimals, new_locale);
                    }
                    else{

                    }

                    obj.val(value);

                    ori_locale = this.findLocale(ori_locale);
                    new_locale = this.findLocale(new_locale);
                    obj.attr('data-exp',  "obj_value " + obj_value + ' converting from locale' + ori_locale.localeId + ' to locale ' + new_locale.localeId + ': ' + real_value);
                    obj.attr('data-obj-value', obj_value);
                    obj.attr('data-realvalue', real_value);
                    obj.attr('data-bran', 'a');

                }
            }
            else {
                //convert to metric values
                for(var i=0; i<elements.length; i++){
                    var element = elements[i];
                    var obj = element.obj;
                    var obj_value = obj.val();
                    if(obj.attr('data-realvalue')!==undefined){
                        obj_value = this.formatNumber(obj.attr('data-realvalue'), 10, ori_locale);        // use it for higher precision
                    }

                    var value = '';
                    if(element.type === this.UNIT_TYPE_LENGTH){
                        //value = this.formatFromDbLength(obj_value, element.level, decimals, new_locale);
                        real_value = this.convertFromDbLength(obj_value, element.level, new_locale);
                        value = this.formatNumber(real_value, decimals, new_locale);

                    }
                    else if(element.type === this.UNIT_TYPE_WEIGHT){
                        //value = this.formatFromDbWeight(obj_value, element.level, decimals, new_locale);
                        real_value = this.convertFromDbWeight(obj_value, element.level, new_locale);
                        value = this.formatNumber(real_value, decimals, new_locale);
                    }
                    else{

                    }

                    obj.val(value);

                    ori_locale = this.findLocale(ori_locale);
                    new_locale = this.findLocale(new_locale);
                    obj.attr('data-exp',  "obj_value " + obj_value + ' converting from locale' + ori_locale.localeId + ' to locale ' + new_locale.localeId + ': ' + real_value);

                    obj.attr('data-obj-value', obj_value);
                    obj.attr('data-realvalue', real_value);
                    obj.attr('data-bran', 'b');

                }
            }
        }
    }

};

function showCurrencyDisclaimer(sourceLocaleId) { // similiar to LocaleEx::showCurrencyDisclaimer
    var sourceLocaleInfo = g_locale.getLocale(sourceLocaleId);

    if (sourceLocaleInfo && sourceLocaleInfo.currencyId != g_currency_locale.currencyId) {
        return true;
    } else {
        return false;
    }
}

//*************************** loyalty rewards  *********************************

var g_loyalty_rewards = {
    session: null,

    getPointRedemptionFactor: function(fromLocaleId) {
        const rate = this.session.usdExchangeRate;
        return rate !== null ?
            g_locale.getLocale(fromLocaleId).usdExchangeRate * rate :
            null;
    },

    rawPointsToPrice: function(price, localeId, pointRedemptionFactor = null) {
        const factor = +(pointRedemptionFactor ?? this.getPointRedemptionFactor(localeId));
        return factor > 0 ? price * factor : null;
    },

    rawPriceToPoints: function(price, localeId, pointRedemptionFactor = null) {
        const factor = +(pointRedemptionFactor ?? this.getPointRedemptionFactor(localeId));
        return factor > 0 ? price / factor : null;
    },

    convertPointsToPrice: function(points, localeId, pointRedemptionFactor = null) {
        const price = this.rawPointsToPrice(points, localeId, pointRedemptionFactor);
        return price === null ? null : this.roundPointsToPrice(
            price,
            g_locale.getDigitsRightOfDecimal(localeId)
        );
    },

    convertPriceToPoints: function(price, localeId, pointRedemptionFactor = null) {
        const points = this.rawPriceToPoints(price, localeId, pointRedemptionFactor);
        return points === null ? null : this.roundPriceToPoints(points);
    },

    roundPriceToPoints: function(value) {
        return roundDir(value, 0);
    },

    roundPointsToPrice: function(value, precision) {
        return roundDir(value, 0, precision);
    },

    formatPoints: function(points) {
        const pts = this.session.pointsSymbol;
        const locale = g_locale.getSessionCurrencyLocaleId();
        return g_locale.formatNumber(points, 0, locale, false) + ' ' + pts;
    },

    getPoints: function(price, fromLocaleId) {
        if (typeof price === 'string' && ! isNumeric(price)) {
            return null;
        }
        const conversion = this.convertPriceToPoints(+price || 0, fromLocaleId);
        return conversion === null ? null : this.formatPoints(conversion);
    }
};

//******************* masked credit card input ************************************************* */




//*************************** carousel  *********************************************
function make_carousel(selector){

    var $carousel = $(selector);

    moveViewMoreIntoHeader();

    var small_tile = $carousel.hasClass('small_tile');
    var justify_left = $carousel.hasClass('justify_left');
    var tile_count = $carousel.find('.carousel_content .carousel_tile ').length;

    // no need to scroll if we have just few tiles
    if ($carousel.hasClass('desktop')) {

        if (small_tile) {
            if (justify_left) {
                if (tile_count<=3){
                    return;
                }
            }
            else {
                if (tile_count<=4){
                    return;
                }
            }
        }
        else {
            if (justify_left) {
                if (tile_count<=2){
                    return;
                }
            }
            else {
                if (tile_count<=3){
                    return;
                }
            }
        }
    }
    else {
        if (tile_count<=1){
            return;
        }
    }

    var scrolling = false;
    var $content = $carousel.find('.carousel_content');
    var $first = $content.find('.carousel_tile:first-child');

    if ($first.length == 0){
        return;
    }

    var margin = $first.css('margin-right').replace('px', '')*1;
    var step_distance = $first.width() + margin;

    $carousel.find('.carousel_content .carousel_tile *').attr('draggable', 'false');
    //$carousel.find('.carousel_content .carousel_tile ').addClass('select_disabled');          //product_img_container
    make_clone_of_last();
    highlight_dot();



    function make_clone_of_last(){
        var $last = $content.find('.carousel_tile:last-child')
        $content.prepend($last.clone().addClass('cloned'));
        $content.css({'left': -1 * ($last.width() + margin)});
    }

    function highlight_dot(){
        var n='xxx';
        $content.find('.carousel_tile').each(function(){
            if (! $(this).hasClass('cloned')) {
                n = $(this).attr('data-index');
                return false;
            }

        })

        $carousel.find('.dot').removeClass('active');
        $carousel.find('.dot[data-index=' + n + ']').addClass('active');
    }


    // direction: left/right
    function move_tile(direction,  times){
        // force time to be one for now
        //times = times || 1;
        times = 1;

        if(scrolling == true){
            return;
        }

        scrolling = true;

        var $cloned = $content.find('.carousel_tile:first-child');
        var $first = $content.find('.carousel_tile:nth-child(2)')   // first non_cloned. $content.find('.carousel_tile:first-child');
        var $last = $content.find('.carousel_tile:last-child');

        if (direction == 'right'){

            $content.animate({'left': (-2) * step_distance }, function(){

                $cloned.remove();
                $content.append($first);
                make_clone_of_last();
                highlight_dot();

                //$content.css({'left': 0});

                scrolling = false;

                if(times>1){
                    //move_tile(direction, times -1 )
                    (function(direction, times){move_tile(direction, times)})(direction, times-1);
                }
            });

        }
        else if (direction == 'left') {
            $content.animate({'left': 0}, function(){
                $last.remove();
                $cloned.removeClass('cloned');
                make_clone_of_last();
                highlight_dot();

                //var $first = $content.find('.carousel_tile:first-child');
                //var $last = $content.find('.carousel_tile:last-child');
                //$first.remove();
                //$content.prepend($last);

                scrolling = false;

                if(times>1){
                   // move_tile(direction, times -1 )
                   (function(direction, times){move_tile(direction, times)})(direction, times-1);
                }

            });
        }
    }


    function move(n){
        if(scrolling == true){
            return;
        }

        scrolling = true;

        var distance = 0;
        var $cloned = $content.find('.carousel_tile:first-child');
        var appends = [];
        
        
        $content.find('.carousel_tile').each(function(){
            var $this = $(this);
            if ($this.attr('data-index')*1==n*1  && !$this.hasClass('cloned')) {
                return false;

            }
            else {

                distance = distance + $this.width() + $this.css('margin-right').replace('px', '')*1;
                if (!$this.hasClass('cloned')) {
                    appends.push($this);
                }
            }
        })

        $content.animate({'left': -1 * distance }, function(){

            $cloned.remove();
            for(var i=0; i<appends.length; i++) {
                $content.append(appends[i]);
            }

            make_clone_of_last();
            highlight_dot();

            //$content.css({'left': 0});

            scrolling = false;
        });
    }


    function moveViewMoreIntoHeader(){
        var conatiner = $carousel.parents('.pageframe_div');
        var viewMore = $carousel.siblings('.pageframe_button');
        var header = $carousel.siblings('.pageframe_header');
        var reg = $carousel.siblings('.pageframe_reg_btn');

        viewMore.find('a').removeClass('primaryButton button');

        if (conatiner.hasClass('show_reg')) {
            reg.show();
        }
        else {
            viewMore.show();
        }

        header.append(viewMore).append(reg);
    }

    $carousel.on('click keypress', '.left_btn, .left_arrow', function(){
        move_tile('left');
    });


    $carousel.on('click keypress', '.right_btn, .right_arrow', function(){
        move_tile('right');
    });


    $carousel.on('click keypress', '.dot', function(){
        var n = $(this).attr('data-index')*1;

        move(n);
    });


    $carousel.on('click', '.pageframe_reg_btn', function(){
        signupDialog(1,false);
    });

    /*
    var t1 = Date.now();
    var wheel_event = 0;
    var last_wheel_event_time = null;
    $carousel.on('wheel', function(e){

        e.preventDefault();
        e.stopPropagation();

       // console.log('event ' + (Date.now() - t1));


        var  current_time = Date.now();
        if (last_wheel_event_time==null || current_time - last_wheel_event_time > 400) {
            wheel_event = wheel_event + 1;
            //console.log('new wheel event -- ' + (wheel_event))
            console.log('start event' + wheel_event + ': ' + e.originalEvent.deltaX + '--' + e.originalEvent.deltaY);

            // deltaY obviously records vertical scroll, deltaX and deltaZ exist too
            if(e.originalEvent.deltaY < 0){
                move_tile('left');
            }
            else {
                move_tile('right');
            }
        }
        else {
            console.log('- ' + wheel_event)
        }

        last_wheel_event_time = current_time;

    });
    */    

    $carousel.on('mousedown', function(e){
        // console.log('mouse down ' + e.pageX)
        $carousel.data('mouse_ori_x', e.pageX);
    })


    $carousel.on('mouseup', function(e){
        // console.log('mouse up '  + e.pageX)

        var ori_x = $carousel.data('mouse_ori_x');

        //console.log('mouse up ' +  ori_x + '->' + e.pageX)
        if (ori_x != null && ori_x != undefined) {
            var new_x = e.pageX;

            var direction = 'left';
            if (new_x < ori_x) {
                direction = 'right';
            }

            if(Math.abs(new_x - ori_x)>20){
                var times =  Math.abs(Math.round((new_x - ori_x)/step_distance));
                if (times < 1) {
                    times = 1;
                }
                move_tile(direction, times);
                e.preventDefault();
                e.stopPropagation();
            }
        }
        $carousel.data('mouse_ori_x', undefined)
    })


    $carousel.on("touchstart",function(e){
        var touchobj = e.changedTouches[0];
        $carousel.data('touch_ori_x', touchobj.pageX)
        $('.output').html('jquery touchstart ' + touchobj.pageX);
    });


    $carousel.on("touchend",function(e){
        var touchobj = e.changedTouches[0];
        var ori_x = $carousel.data('touch_ori_x');

        if (ori_x != null && ori_x != undefined) {
            var new_x = touchobj.pageX;

            var direction = 'right';
            if (new_x > ori_x) {
                direction = 'left';
            }

            if(Math.abs(new_x - ori_x)>10){
                move_tile(direction);
            }

        }

        $carousel.data('touch_ori_x', undefined)
    });



}


/******************************** passion category *******************************/
function make_menued_tabs(selector, first_partial_visible_index){
    var $container = (selector instanceof jQuery)? selector : $(selector);
    first_partial_visible_index = first_partial_visible_index || 2;



    $container.on('click', '.menu_item', function(e){

        var $menu = $(this);
        var menuId = $(this).attr('data-menuid');
        var index = $container.find('.menu_item').index($menu);



        if($container.hasClass('mobile') && index>=first_partial_visible_index){

           //$container.find('.menu_container').append($menu.prevAll()) ;
           /*
           var counter = 0;
           while(! $container.find('.menu_item:first-child').hasClass('active')){
               $container.find('.menu_container').append($container.find('.menu_item:first-child'));

               counter++;
               if(counter >=100){
                   return;
               }
           }
            */
           move_menu('left');
        }
        else {
          show_menu(menuId);
        }
    });


    function show_menu(menuId) {
        if  (menuId == undefined) {
            alert('no menuId')
            return;
        }

        $container.find('.menu_item').removeClass('active');
        $container.find('.menu_item[data-menuid=' + menuId + ']').addClass('active');

        //'.dot[data-index=' + n + ']'
        $container.find('.tab_item').removeClass('active');
        $container.find('.tab_item[data-menuid=' + menuId + ']').addClass('active');
    }


    function move_menu(direction){
        var $current = $container.find('.menu_item.active');

        if (direction == 'left') {
            var $next = $current.next();
            var first = $container.find('.menu_item:first-child');
            if($next.length ==0){
                $next = first;
            }

            var menuId = $next.attr('data-menuid');
            show_menu(menuId);

            if($container.hasClass('mobile')){
                $container.find('.menu_container').append(first) ;
            }

        }
        else {
            var $prev = $current.prev();
            var last = $container.find('.menu_item:last-child');
            if($prev.length ==0){
                $prev = last;
            }

            var menuId = $prev.attr('data-menuid');
            show_menu(menuId);

            if($container.hasClass('mobile')){
                $container.find('.menu_container').prepend(last) ;
            }
        }

    }


    $container.on("touchstart",function(e){
        var touchobj = e.changedTouches[0];
        $container.data('touch_ori_x', touchobj.pageX)
        $('.output').html('jquery touchstart ' + touchobj.pageX);
    });


    $container.on("touchend",function(e){
        var touchobj = e.changedTouches[0];
        var ori_x = $container.data('touch_ori_x');

        if (ori_x != null && ori_x != undefined) {
            var new_x = touchobj.pageX;

            var direction = 'left';
            if (new_x > ori_x) {
                direction = 'right';
            }

            if(Math.abs(new_x - ori_x)>10){
                move_menu(direction);
            }

        }

        $container.data('touch_ori_x', undefined)
    });
}

//************* Utility Helper Functions ***** START ************************************

function get_mobile_url_prefix(){
    if(g_is_mobile){
        return '/m/';
    }else{
        return '/';
    }
}

function addCommas(nStr)
{
	nStr += '';
	x = nStr.split('.');
	x1 = x[0];
	//x2 = x.length > 1 ? '.' + x[1] : ''; Decimals
	var rgx = /(\d+)(\d{3})/;
	while (rgx.test(x1)) {
		x1 = x1.replace(rgx, '$1' + ',' + '$2');
	}
	//return x1 + x2; with decimals
    return x1;
}


function getPageName(){
    if ($('#pageName').length > 0) {
        return $('#pageName').val();
    }
    return '';
}


function isLocalStorageSupported(){
    if (typeof(Storage) !== "undefined") {

        // for ios safari, private mode, we need to actually try it.
        var testKey = 'test';
        try
        {
            localStorage.setItem(testKey, '1');
            localStorage.removeItem(testKey);
            return true;
        }
        catch (error)
        {
            return false;
        }
    }
    else{
        return false;
    }

}


function  isIE() {

    var ua = window.navigator.userAgent;
    var msie = ua.indexOf("MSIE ");

    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./))  // If Internet Explorer, return version number
    {
        //alert(parseInt(ua.substring(msie + 5, ua.indexOf(".", msie))));
        return true;
    }
    else  // If another browser, return 0
    {
        //alert('otherbrowser');
        return false;
    }

    return false;
}

function isAdminSite(){
    return window.location.href.indexOf('/admin/')>=0;
}

var g_ifonly_sticky_msg_timer = undefined;

function ifonly_sticky_msg_clicked(div){
    var $div = $(div);
    $div.html('');
    $div.css('display', 'none');
}


function ifonly_sticky_msg_add_row(text, btn_text, btn_call_back, attrs){

    ifonly_sticky_msg_stop_fading_timer();

    if ( typeof(btn_text) === "undefined")      {    btn_text = '';  }
    if ( typeof(btn_call_back) === "undefined") {    btn_call_back = '';  }
    if ( typeof(attrs) === "undefined") {    attrs = undefined;  }

    var $row = $('<div class="msg_row"><div class="msg_text sg-f-bdy"></div><div class="msg_btn sg-f-bdy sg-text-transform"></div></div>');
    if(attrs!=undefined && $.isPlainObject(attrs)){
        $row.attr(attrs);
    }
    $row.find('.msg_text').html(text);
    $row.find('.msg_btn').html(btn_text);

    if($.isFunction(btn_call_back)){
        $row.click(function(){
            btn_call_back();
        });
    }

    $row.click(function(e){
        e.stopPropagation();
        e.preventDefault();
    });

    var $sticky_msg = $('.ifonly_sticky_msg');
    $sticky_msg.append($row);
    //$sticky_msg.css({display:'block', opacity:0}).animate({opacity:1}, 1500);
    $sticky_msg.slideDown();

    // auto fade away
    ifonly_sticky_msg_start_fading_timer();
}

function validateSessionWithCallback(callback) {
    var sessck = "OPx5Txqt7jJhvBCZPV6N";
    $.ajax({
        type: 'POST',
        url: '/common/validateSession',
        data: {
            sessck: sessck
        },
        timeout: 10000,
        dataType: 'json'
    })
    .done(function(data) {
        if (data.result === 1) {

            if (typeof callback == 'function') {
                callback();
                return;
            }

        }

        alertEx("Session expired. Page will be refreshed.");
        //alertEx(data.msg);
        // redirect after 5 seconds
        // it will display session expires screen for guestCheckoutUser
        window.setTimeout(function() {
            location.href = g_is_mobile ? '/m' : '/';
        }, 5000);
    })
    .fail(function(xhr, textStatus, error) {
        console.log('Network: ' + textStatus + ', ' + xhr + ', ' + error);
        alertEx("Session expired. Page will be refreshed.");
        // redirect after 5 seconds
        // it will display session expires screen for guestCheckoutUser
        window.setTimeout(function() {
            location.href = g_is_mobile ? '/m' : '/';
        }, 5000);
    });
}

function isTransparent(color) {
    switch ((color || "").replace(/\s+/g, '').toLowerCase()) {
      case "transparent":
      case "":
      case "rgba(0,0,0,0)":
        return true;
      default:
        return false;
    }
}


function getEffectiveBackgroundColor($elm){
    var bc='';
    while (isTransparent(bc = $elm.css("background-color"))) {
        if ($elm.is("body")) {

          return bc;
        }
        $elm = $elm.parent();
    }
    return bc;
}


// if the text container has too much text,
function ifonly_add_read_more_link($text_container){
    if($text_container.length>0){
        var el = $text_container.get(0);


        if($text_container.find('.ifonly_read_more_link').length === 0){

            // element is overflow
            if(el.scrollHeight - el.offsetHeight > 5){

                $text_container.append($("<div class='ifonly_read_more_link sg-f-btn sg-c-primary sg-cursor'></div>"));

                //if($text_container.find(.'ifonly_read_less_link').length==0){
                //    $text_container.append($("<div class='ifonly_read_less_link'></div>"))
                //}


                var sh = el.scrollHeight;
                var oh = el.offsetHeight;

                $text_container.css('position', 'relative');
                $text_container.addClass('ifonly_read_container');

                var read_more_link = $text_container.find('.ifonly_read_more_link');
                read_more_link.click(function(){

                    $text_container.toggleClass('read_all');

                    /*
                    if(!$text_container.hasClass('read_all')){
                       console.log( 'exp: ' + $text_container.height() + ' to ' + sh );
                       $text_container.animate({height: sh}, 400, 'swing', function(){$text_container.css('height', 'auto'); $text_container.addClass('read_all')})
                    }
                    else{
                       console.log( 'shr: ' + $text_container.height() + ' to ' + oh );
                       $text_container.removeClass('read_all')
                       $text_container.animate({height: oh}, 400, 'swing', function(){ })
                    }
                    */

                    // auto scroll back if the review content is too long
                    var $reveiw_item = $text_container.parents('.review_item');
                    var h = $text_container.offset().top;
                    if( h-80<$('body').scrollTop() || h-80<$('html').scrollTop() ){
                        //alert('sssrr')
                        $("body, html").animate({ scrollTop:h-120 });
                    }

                });

                var effective_bg_color = getEffectiveBackgroundColor($text_container);
                if(isTransparent(effective_bg_color)){
                    effective_bg_color = '#ffffff';
                }
                read_more_link.css('background-color', effective_bg_color);
            }
        }
    }
}


// onmouseover="ifonly_sticky_msg_stop_fading_timer()"
// onmouseout ="ifonly_sticky_msg_start_fading_timer()"
// when mouse is on the msg, stop fadding
ioReady(function(){
    $('.ifonly_sticky_msg').hover(ifonly_sticky_msg_stop_fading_timer, ifonly_sticky_msg_start_fading_timer);
});

function ifonly_sticky_msg_stop_fading_timer(){
    //console.log('stopping fading')
    if(g_ifonly_sticky_msg_timer !== undefined){
        clearTimeout ( g_ifonly_sticky_msg_timer );
    }
}

function ifonly_sticky_msg_start_fading_timer(){
    if (isLocalStorageSupported()) {
        if (localStorage.ifonly_sticky_msg_auto_fade === 'false') {
            return;
        }
    }

    //console.log('start fadding')
    g_ifonly_sticky_msg_timer = setTimeout(function() {
        $sticky_msg = $('.ifonly_sticky_msg');
        //$sticky_msg.animate({opacity:0}, 1000, function(){ $sticky_msg.css('display', 'none');});
        $sticky_msg.html('');
        $sticky_msg.slideUp(300, function(){});
    }, 8000);
}

//************* Utility Helper Functions ***** END ************************************

// Product Info Box Function
function infoBoxLayOutPreparing(){
    $(".p-form .one-row").each(function(){
        if($(this).children(".preCheckOutField").length === 1){
            $(this).children(".preCheckOutField").css("width", "100%");
        }
    });

    $(".attr-row").each(function(){
        if($(this).find(".attr-field").length === 1){
            $(this).find(".attr-field").children("div").css("display","block");
        }
    });

    $(".attr-field.loc p").each(function(){
        if($(this).height() < 22){
            // $(this).css("margin-top","12px");
        }
    });

    $(".widget-row:visible").each(function(){
        if($(this).height() < 15){
            $(this).hide();
        }
    });

    // when height less than 15, mean empty
    $(".info-box:visible").each(function(){
        if($(this).height() < 15 && !$(this).hasClass("js-is-gift-certificate")){
            $(this).hide();
            if($(this).hasClass("js-cart")){
                $(this).closest(".p-block").hide();
            }
        }
    });


    //for vp-8836
    $('.js-p-form.product-section-p-form').each(function(){
        if($(this).height() < 15 && ! g_is_mobile){
            $(this).hide();
        }
    });
}


function highlightTopNavigation(catId) {
    $("#top-left-menu ul li").removeClass('active').each(function() {
        if ($(this).attr('catid') == catId) {
            $(this).addClass('active');
        }
    });
}

//***************** Function used mobile PDP price CSS ************************
function mobilePriceTextCssClearing(){
    $(".buyBox #totalPrice").css("margin-top", "0px");
    $(".buyBox .priceText").css("margin-top", "0px");
    //$(".buyBox .price .soldout").css("margin-top", "10px");
    $(".buyBox .totalPriceText").css("margin-top", "0px");
}

function mobilePriceTextCssAdjusting(){
    /*
    if ($(".buyBox .priceText").text().trim() === "" || $(".buyBox .priceText:hidden").length === 1 ) {
        if($(".buyBox #totalPrice").text().trim() !== "" ){
            $(".buyBox .totalPriceText").css("margin-top", "10px");
        }else if($(".buyBox .price .soldout").text().trim() !== ""){
            $(".buyBox .price .soldout").css("margin-top", "10px");
        }
    }*/
}
//***************** Function used mobile PDP price CSS ************************

function markWishlistedProducts(wishlistProducts){
    var startTimeTest = new Date().getTime();
    if(!g_is_guest){
        if(wishlistProducts !== undefined && wishlistProducts !== ""){
            var $obj;

            if(g_controller_id === "search"){
                 $obj = $('#filterPage a.tile_product');
            }else{
                if(g_is_mobile || $('#main .pageframe_div').length){
                    $obj = $('#main .tile_product');
                } else {
                    $obj = $('.main-vertical-list .productTile');
                }
            }

            $obj.each(function(){
                var thisPid = $(this).attr('pid');
                var $wishlist = $(this).find('.wishlist');
                if($wishlist.length === 0) {
                    $wishlist = $(this).siblings('.wishlist');
                }
                if(wishlistProducts.indexOf(thisPid) > -1){
                    if($wishlist.hasClass('listed')){
                        //Do Nothing wishlisted product is marked as green
                    } else {
                        $wishlist.addClass('listed');
                        //$wishlist.css('background-image', 'url("/images/io/icon_heart_on_green.png")');
                    }
                } else {
                    //Product Not in wishlist, check for listed class if yes remove or do nothing
                    if($wishlist.hasClass('listed')){
                        $wishlist.removeClass('listed');
                        //$wishlist.css('background-image', 'url("/images/io/icon_heart_off_FFF.png")');
                    }
                }
                // adobe tracking
                if($wishlist.hasClass('listed')){
                    $wishlist.attr('di-id', 'Remove From Wishlist');
                    $wishlist.attr('title', g_wishlist_remove);
                    $wishlist.attr('aria-label', g_wishlist_remove);
                    $wishlist.attr('alt', g_wishlist_remove);
                } else {
                    $wishlist.attr('di-id', 'Add To Wishlist');
                    $wishlist.attr('title', g_wishlist_add);
                    $wishlist.attr('aria-label', g_wishlist_add);
                    $wishlist.attr('alt', g_wishlist_add);
                }
            });
        }
    }
    var startTimeTestEnd = new Date().getTime();
    console.log("mark wishlist time: "+ (startTimeTestEnd - startTimeTest)/1000 +" seconds");

}

//***************** Function used mobile PDP CSS ************************

function markActivatedProducts(activatedProducts) {
    var startTimeTest = new Date().getTime();
    var siteColors    = {"topNavigationButtonColor":"#FFFFFF","overlayTextColorHexCode":"#FFFFFF","mobileTextBackgroundColor":"","primary":"#cf4500","primary2":"#fd6f3a","border":"#b4b0a9","background":"#f6f3ef","warning":"#d1282d","charcoal":"#3b3935","white":"#ffffff","black":"#141413","red":"#d1282d","grey-ef":"#f6f3ef","orange-c":"#cf4500","orange-d":"#d93c02","grey-f2":"#f2f2f2","blue":"#2d87d9","green-d":"#18a487","purple":"#793cd6","auctionTextMin":"#fd6f3a","auctionTextHour":"#8cba2d","bottomCatNav":"#d5d1c9","headerMenuLevelMenuBar":"#b4b0a9","headerMenuLevelMenuLabelHover":"#cf4500","topWelcomeShopping":"#3b3935","sweepstakeHistoryBackground":"#d5d1c9","filterTimeRangeHighlight":"#b4b0a9","emailThemeColor":"#141413","emailButtonColor":"#cf4500","headerNavColor":"#ffffff","topNavigationColor":"#141413","primaryButtonBackground":"#cf4500","primaryButtonFontColor":"#ffffff","emailHeaderColor":"#141413","emailFooterColor":"#141413","bd1":"#141413","bd2":"#b4b0a9","bd3":"#ffffff","bd4":"#3b3935","bg1":"#141413","bg2":"#f6f3ef","bg3":"#ffffff","bg4":"#3b3935","bgFooter":"#141413","c1":"#141413","c2":"#676561","c3":"#ffffff","c4":"#3b3935","c5":"#b4b0a9"};

    if (activatedProducts !== undefined && ! $.isArray(activatedProducts)) {
        activatedProducts = activatedProducts.split(',');
    }

    if (activatedProducts !== undefined && $.isArray(activatedProducts)) {
        var $obj;

        if (g_controller_id === "search") {
            $obj = $('#filterPage a.tile_product');
        } else {
            if (g_is_mobile || $('#main .pageframe_div').length) {
                $obj = $('#main .tile_product');
            } else {
                $obj = $('.main-vertical-list .productTile');
            }
        }

        $obj.each(function() {
            var thisPid = $(this).attr('pid');
            var $bottomBanner = $(this).find('.bottom_banner');
            if (activatedProducts.includes(thisPid)) {
                if ($bottomBanner.is(':visible')) {
                    //Do Nothing activatedProducts product is visible
                } else {
                    var text = "Activated";
                    if ($bottomBanner.hasClass('user_activation')) {
                        text = "Added to card";
                    }
                    $bottomBanner.show();
                    $bottomBanner.addClass('full_width');
                    $bottomBanner.find('.bottom_banner_text').css('background-color', siteColors['primary']);
                    $bottomBanner.find('.bottom_banner_text span').text(text);
                }
            } else if ($bottomBanner.is(':visible') && $bottomBanner.hasClass('full_width')) { // dont want to affect endingSoon
                $bottomBanner.hide();
            }
        });
    }

    var startTimeTestEnd = new Date().getTime();
    console.log("mark activatedProducts time: "+ (startTimeTestEnd - startTimeTest)/1000 +" seconds");
}

function refreshNotifications() {
    if(g_is_guest){
        return;
    }

    $.ajax({
        type: "GET",
        url: "/services/common/getNotifications",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'json',
        success: function(data) {
            populateNotificationHtml(data);
        }
    });
}
function populateNotificationHtml(data){
    $('#acct-popup li span.bubble, #top-welcome .myaccount .bubble, #vendor-menu .menu-li .bubble').css({visibility:'hidden'}).html('');
                                    // need cleanup later
    $('.bubble.notification.sum').css({visibility:'hidden'});
    $('.bubble.notification.todo').css({visibility:'hidden'});
    $('.bubble.notification.unread').css({visibility:'hidden'});

    var width_css;
    if (data.sum > 0) {
        width_css = _getNotificationBubbleWidth(data.sum, $('.bubble.notification.sum').html(data.sum).css("width"));
        $('.bubble.notification.sum').html(data.sum).css({visibility:'visible', width: width_css, height: width_css});
    }
    if (data.todo > 0) {
        width_css = _getNotificationBubbleWidth(data.todo, $('.bubble.notification.todo').html(data.todo).css("width"));
        $('.bubble.notification.todo').html(data.todo).css({visibility:'visible', width: width_css, height: width_css});
    }
    if (data.unread > 0) {
        width_css = _getNotificationBubbleWidth(data.unread, $('.bubble.notification.unread').html(data.unread).css("width"));
        $('.bubble.notification.unread').html(data.unread).css({visibility:'visible', width: width_css, height: width_css});
    }
}


var digit_three = "24px";
var digit_four  = "24px";
function _getNotificationBubbleWidth(num, defaultWidth){
    var width_css = defaultWidth;

    if( num > 999){
        width_css = digit_four;
    }
    else if( num > 99){
        width_css = digit_three;
    }

    return width_css;
}

function getCartPopupHtml(added, show) {
    ga('send', 'pageview', 'Shopping Bag Popup');
    $.ajax({
        type: "POST",
        cache : false,
        url: "/services/common/getPopup",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'html',
        data: {from:1},
        success: function(data) {

            populateCartPopupHtml(data);

            if (added) {
                showCartPopupHtml(added);
            } else {
                if (show !== false) {
                    $("#cart-popup-wrapper").fadeIn(250);
                }
            }
        }
    });
}
function populateCartPopupHtml(html){

    var $html  =  $(html);
    $("#cart-popup-content").html(html);

    var has_item = false;
    var $count_element = $html.find('#cart-popup-item-count');
    if ($count_element.length > 0 && $count_element.html()*1 > 0) {
        has_item = true;
    }

    if (has_item){
        // for desktop top nav
        $("#cart-item-count").html($count_element.html()*1).show();
        $('#top-welcome > a.shopping').addClass('filled');

        //for mobile top nav
        $('#header-m .bag').addClass('filled').addClass('bg-ovr-1');
        $('#header-m #js-cart-item-cnt').html($count_element.html()*1).show();

    } else {
        //for desktop top nav
        $("#cart-item-count").html('');
        $("#cart-item-count").siblings("img").attr("src",$("#cart-item-count").siblings("img").attr("data-empty-bag"));

        //for mobile top nav
        $('#header-m .bag').removeClass('filled').removeClass('bg-ovr-1');
        $('#header-m #js-cart-item-cnt').html('');
    }

}
function showCartPopupHtml(added) {
    //var left = $("#top-welcome .shopping").position().left - 310;
    //$("#cart-popup-wrapper").css({"left":left + "px"});
    if (added) {
        $("#cart-popup-added-block .added-icon").removeClass('cancel');
        $("#cart-popup-added-block .added-text").html('ITEM ADDED TO CART');
    } else {
        $("#cart-popup-added-block .added-icon").addClass('cancel');
        $("#cart-popup-added-block .added-text").html('REQUESTED QUANTITY IS NOT AVAILABLE');
    }
    $("#cart-popup-added-block").fadeIn(250);
    setTimeout(function() { $('#cart-popup-added-block').fadeOut(); }, 3000);
    setTimeout(function() { hideCartPopup(); }, 8000);
    $("#cart-popup-wrapper").fadeIn(250);
    if ( ! $("#cart-popup-items").hasClass("mCustomScrollbar")){
        $("#cart-popup-items").mCustomScrollbar({theme: "dark"});
    }
    adjustTextLength($("#cart-popup #cart-popup-items li.item div.name p.pName"));
    $.post('/website/logPageView',{'pageId':'cart-popup-wrapper'},function(data){},'json');
}

function hideCartPopup() {
    if (!mouseIn) {
        $("#cart-popup-wrapper").fadeOut(200);
    }
}


function getWishlistPopupHtml(showAddHint, showPopUp, productId) {
    if (showPopUp === undefined) {
        showPopUp = true;
    }

    //return; // we don't use this popup anymore

    ga('send', 'pageview', 'Wishlist Popup');
    $.ajax({
        type: "POST",
        url: "/services/common/getWishlistPopup",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'json',
        data: {'pageId': 'wish-popup-wrapper', 'productId': productId},
        success: function(data) {
            $("#wish-popup-content").html(data.html);
            var $wishlistImg = $("#header .wishlist img, #top-welcome a.wishlist img, #top .wishlist img");
            var $wishlistLink = $wishlistImg.parent();
            if (data.hasWishlist > 0) {
                $wishlistImg.attr("src", $wishlistImg.attr("data-has-wishlist"));
                $wishlistLink.show();

            } else {
                $wishlistImg.attr("src", $wishlistImg.attr("data-no-wishlist"));

                if (g_headerVersion == 2 && ! productId) {
                    $wishlistLink.hide();
                }
            }

            showWishlistPopupHtml(showAddHint, showPopUp);
        }
    });
}

function showWishlistPopupHtml(showAddHint, showPopUp) {
    var left = 800;
    if ($("#top-welcome .wishlist").length > 0) {
        left = $("#top-welcome .wishlist").position().left - 347;
    }
    $("#wish-popup-wrapper").css({"left":left + "px"});
    if(showAddHint){
        $("#wish-popup-added-block").fadeIn(250);
    }

    if(showPopUp){
        setTimeout(function() { hideWishlistPopup(); }, 4000);
        $("#wish-popup-wrapper").fadeIn(250);
        if ( ! $("#wish-popup-items").hasClass("mCustomScrollbar")){
            $("#wish-popup-items").mCustomScrollbar({theme: "dark"});
        }
    }
}

function hideWishlistPopup() {
    if (!mouseIn) {
        $("#wish-popup-wrapper").fadeOut(200);
    }
}

function g_postRequestQuote(pid) {
    ga('send', 'event', 'PDP', 'Request Quote button clicked');
    $("#pid").val(pid);
    if(g_is_guest){
        $("#signUp-dialog-called-from").val("requestQuote");
        signupDialog();
    } else {
        show_ifonly_overlay('.request_quote_confirm_overlay');
    }
    return false;
}

function g_postWaitList(pid) {
    if ( 
        false                                 // intented to skip exclusivity warning for waitlist. vp 27748
        /*
        // this logic is for PDP only, so checking if these are defined will take care of all cases where this logic is relavent
        typeof pdp_isProductAccessCodeOverride !== "undefined"
        && pdp_isProductAccessCodeOverride
        && typeof pdp_punchoutProductIssuersDisplayName !== "undefined"
        && typeof pdp_isProductVisibleByUserIssuers !== 'undefined'
        && ! pdp_isProductVisibleByUserIssuers
        */
    ) {
        show_ifonly_overlay('.pdp_issuer_exclusivity_overlay');
        $('#pdp-issuer-exclusivity-default').hide();
        $('#pdp-issuer-exclusivity-wishlist').show();
        $("#pdp-issuer-exclusivity-dialog .js-mc-type-text").text(pdp_punchoutProductIssuersDisplayName);
    } else {
        ga('send', 'event', 'PDP', 'Waitlist button clicked');
        $("#pid").val(pid);
        if(g_is_guest){
            $("#signUp-dialog-called-from").val("waitlist");
            signupDialog();
        } else {
            $("#waitlist-confirm-dialog").overlay().load();
        }
    }
    return false;
}




/*
 *
 * Google SingUp
 */
var g_googleUser = {};
var auth2;

function attachGoogleSignin(element) {
    /*
     * https://developers.google.com/identity/sign-in/web/reference
     */
    auth2.attachClickHandler(element, {},
        function(googleUser) {
            g_googleUser = googleUser;
            var resp = {
                id: googleUser.getBasicProfile().getId(),
                email: googleUser.getBasicProfile().getEmail(),
                name: {
                    familyName: googleUser.getBasicProfile().getFamilyName(),
                    givenName: googleUser.getBasicProfile().getGivenName()
                }
            };
            var authResult = googleUser.getAuthResponse();
            if (resp.email) {
                var googleUrl = "/website/LoginWithGoogle";
                if(g_vendorSignUp == 1){
                    googleUrl = "/website/LoginWithGoogle/from/vendorSignUp";
                }
                var postData = {resp: resp, authResult: authResult};
                if (g_is_pickonePromo) {
                    postData.social_emailOptedIn = $("#social_emailOptedIn").attr('checked') ? 1 : 0;
                }
                postData.authResult['g-oauth-window'] = null;
                $.ajax({
                    type:  "POST",
                    url:   googleUrl,
                    data:  postData,
                    async: true,
                    dataType: 'json'
                }).done(function ( data ) {
                    if ( data.result === 1 ) {
                        var redirectUrl = $("#redirectURL").val().trim();
                        if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                            redirectUrl = data.redirectUrl;
                        }

                        if (data.newUser === 1) {
                            ga('send', 'event', 'MemberActivity', 'Google Signup');
                            if(g_allowFacebookTracking) {
                                fb_p('track', 'CompleteRegistration');
                            }
                            if (g_siteId === 1) {
                                pintrk('track', 'signup'); // pinterest event code
                            }
                            g_userId = data.userId;
                            callSignupTrackingCode();
                            //$("#thank-dialog-firstName").html(" "+data.firstName);
                            //$("#thank-dialog").overlay().load();
                            if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
                            googleAnalyticsImage = new Image();
                            googleAnalyticsImage.src = 'https://www.googleadservices.com/pagead/conversion/995223985/?value=0&amp;label=VrOnCNe_ogQQsdPH2gM&amp;guid=ON&amp;script=0';
                            // $("#google-tracking").html('<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/pagead/conversion/995223985/?value=0&amp;label=VrOnCNe_ogQQsdPH2gM&amp;guid=ON&amp;script=0" onload = "location.reload();" />');
                            if (g_bespoke === '1'){
                                //bespoke page go to Question 7
                                g_bespoke = "";
                                slideToNextQuestion(6, 7);
                                submitBespokeForm();
                            } else {
                                if (redirectUrl) {
                                    setTimeout(function() { window.location.href = redirectUrl; }, g_signup_timer);
                                } else {
                                    setTimeout(function() { location.reload(); }, g_signup_timer);
                                }
                            }
                        } else {
                            ga('send', 'event', 'MemberActivity', 'Google Login');
                            if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
                            // If from vendor portal sign up and vendor email is verified, redirect to vendor profile page
                            if (data.vendorVerified === 1) {
                                setTimeout(function() { location.href = "/profile/edit"; }, g_login_timer);
                            }
                            else if (g_bespoke === '1'){
                                g_bespoke = "";
                                slideToNextQuestion(6, 7);
                                if (! empty(data.terms)) {
                                    showMemberTermsAndPrivacyDialog('bespoke', data.terms, data.termsTranslatedText);
                                } else {
                                    submitBespokeForm();
                                }
                            } else {
                                if (! empty(data.terms)) {
                                    var context = redirectUrl;
                                    if (g_page === 'cart.checkout') {
                                        context = data.cartItemCount > 0 ? 'gotoCart' : 'checkout'; // goto checkout / stay checkout
                                    }
                                    console.log('context: ' + context);
                                    showMemberTermsAndPrivacyDialog(context, data.terms, data.termsTranslatedText);
                                } else {
                                    if (g_page === 'cart.checkout' && data.cartItemCount > 0) {
                                        // Items already in cart. Prompt with pop up
                                        show_ifonly_overlay('.checkout_login_cart_items_overlay');
                                        // $("#checkout-login-cart-items").overlay().load();
                                    } else {
                                        if (redirectUrl !== '' && redirectUrl !== '#') {
                                            setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
                                        } else {
                                            setTimeout(function() { location.reload(); }, g_login_timer);
                                        }
                                    }
                                }
                            }
                        }
                        /* Request an invite functionality : not used any more */
                        //} else if ( data.result == 2 ) {     //if the user is not a menber and is trying to login
                        //    $("#thank-invite-dialog").overlay().load();
                    } else {
                        alertEx(data.msg);
                        if(g_call_from === "signup"){
                            $("#page-member-signup-dialog-overlay").hide();
                            $("#page-member-signup-dialog-loading").hide();
                        } else {
                            $("#page-login-dialog-overlay").hide();
                            $("#page-login-dialog-loading").hide();
                            userAccessHide();
                            //$("#login-box-dialog").overlay().close();
                        }
                    }
                    $('*').css('cursor','default');
                });
            }
            else {
                if(g_call_from === "signup"){
                    $("#page-member-signup-dialog-overlay").hide();
                    $("#page-member-signup-dialog-loading").hide();
                } else {
                    $("#page-login-dialog-overlay").hide();
                    $("#page-login-dialog-loading").hide();
                }
            }
        }, function(error) {
            if (g_thisHost === 'local') {
                alert(JSON.stringify(error, undefined, 2));
            }
        });
}
var startGoogleAuthApp = function() {
    gapi.load('auth2', function(){
        // Retrieve the singleton for the GoogleAuth library and set up the client.
        auth2 = gapi.auth2.init({
            client_id: g_googleClientKey,
            cookiepolicy: 'single_host_origin'
        });
        attachGoogleSignin(document.getElementById('googleSignInButton'));
            });
};

function loadGoogleClient(){
    //gapi.client.setApiKey(); //set your API KEY
    //gapi.client.load('plus', 'v1',function(){});//Load Google + API
    gapi.load('client:auth2', function() {
        gapi.client.init({
            apiKey: 'AIzaSyC0maY5si28S9FM1Wna4eK9xoyHLdJs6ik',
            clientId: g_googleClientKey,
            scope: 'profile email'
        });
    });
}

function adjustFileUploadWidgetMargin() {
    if($(".img-square-wrapper.add-new-box.js-adjust-block").length === 1){
        var $uploadWidget = $(".img-square-wrapper.add-new-box.js-adjust-block");
        var imageCount = $uploadWidget.siblings(".img-square-wrapper:not(.hidden)").length;
        if($uploadWidget.closest("form").attr("id") === "mediaUpload"){ //For Media Library
            //Do Nothing
        } else if($uploadWidget.closest(".form-row").attr("formid") !== "demonstration") {
            if(imageCount % 2 === 0) {       // imageCount % 2 = 0 means even number of medias uploaded
                $uploadWidget.css("margin-left", "215px");
            } else if( imageCount % 2 === 1) {
                $uploadWidget.css("margin-left", "24px");
            }
        }
    }
}


var pos = !isHandheld();


function hideOverlay(popId){
    $('#'+popId).hide();
    $('#exposeMask').hide();
    $('#container').css('max-height', 'initial');
}

function userAccessHide2(){
    $('#exposeMask').css({position:'fixed', width:'100%', height: '100%'});
    //$('#container').css({height:"auto", "max-height":"none", overflow:"auto"});
    //$('#body').css('overflow','auto');
    $('#exposeMask').fadeOut();


    if (g_active_popup){
        $("#"+g_active_popup).fadeOut();
        if (g_active_popup === 'accesscode-add-dialog') {
            $("#accesscode-add-dialog .update-access-code-close .btn-w").html('Join Our Membership Waitlist'); // can be changed at bottom_js
        }
    }
    g_active_popup = "";
    $("#page-member-signup-dialog-overlay").hide();
    $("#page-member-signup-dialog-loading").hide();
}


function userAccessHide(){
    $('#exposeMask').css("height", "100%");
    $('#container').css({height:"auto", "max-height":"none", overflow:"auto"});
    $('#body').css('overflow','auto');
    $('#exposeMask').fadeOut();
    if (g_active_popup){
        $("#"+g_active_popup).fadeOut();
        if (g_active_popup === 'accesscode-add-dialog') {
            $("#accesscode-add-dialog .update-access-code-close .btn-w").html('Join Our Membership Waitlist'); // can be changed at bottom_js
        }
    }
    g_active_popup = "";
    $("#page-member-signup-dialog-overlay").hide();
    $("#page-member-signup-dialog-loading").hide();
}

function getPopupMethod(popupId){
    var forceOld = '0';
    if (forceOld === '1') {
        return 1;
    }

    var methodMapping =  {"member-signup-dialog":2,"defaultMethod":1};

    if (methodMapping[popupId] !== undefined && methodMapping[popupId] !== '') {
        return methodMapping[popupId];
    }
    else {
        return methodMapping.defaultMethod;               // default method,  the original overlay with jquery Tools overlay
    }

}

//ele is the element has data-buffer attr
function loadBufferedElement(ele){
    var $ele = $(ele);
    var html = $.trim($ele.attr('data-buffer'));
    if (html !== '') {
        var $html = $(html);
        $html.addClass('loadedFromBuffer');
        $ele.replaceWith($html);
    }
}

function loadAllBufferedPopup(parentSelector){
    if (typeof(parentSelector) === "undefined") {  parentSelector = ''; }
    parentSelector = $.trim(parentSelector);
    if (parentSelector !== '' && /[a-zA-Z]/.test( parentSelector[0])){
        parentSelector = '.' + parentSelector;
    }

    var selector = $.trim(parentSelector + ' .ifonly_popup_buffer');

    $(selector).each(function(){
        loadBufferedElement(this);
    });
}

function loadBufferedPopup(popupId){
    if (popupId !== '') {
        var $popup = $('#'+popupId);
        if($popup.length>0){
            $popup.find('.ifonly_popup_buffer').each(function(){
                loadBufferedElement(this);
            });
        }
    }
}

function logOverlay(ele){

    var $ele = ele;
    if (! (ele instanceof jQuery)){
        $ele = $(ele);
    }

    var pageName = $ele.attr('id');
    if (pageName == undefined || pageName == ''){
        pageName = $ele.attr('class');
    }

    if (pageName == '' ){
        return;
    }

    var log_params = {
        'pageId': pageName,
    }

    var productId = $.trim($overlay.attr('data-productId'));
    if ( productId !== '' && /^[0-9]*$/.test(productId)) {
        log_params.productId = productId;
    }

    // $.post('/website/logPageView', log_params, function(data){},'json');
}

//ele is the parent whose children has data-buffer attr
function loadBufferedHtmlInEle(ele){
    var $ele = ele;
    if (! (ele instanceof jQuery)){
        $ele = $(ele);
    }

    $ele.find('.ifonly_buffer').each(function(){
        loadBufferedElement(this);
    });
}


function displayOverlay(popupId, type){
    var method = getPopupMethod(popupId);
    if (method==1){
        _displayOverlay(popupId, type);
    }
    else if(method==2){
        _displayOverlay2(popupId, type);
    }

    if ($("#" + popupId +  " .close").length > 0 && $("#" + popupId +  " .close").is(':visible')) {
        $("#" + popupId +  " .close").focus();
    }
}


function _displayOverlay2(popupId, type){

    console.log('_displayOverlay 2');
    loadBufferedPopup(popupId);

    if (popupId === 'closed-accessCode-dialog') {
        return;
    }

    // do not show the popup if it is already shown
    if ($.trim(popupId) !== '') {
        var pop = $('#'+popupId);
        if(pop.length>0 && pop.is(':visible')){
            //centerWindowResponsive(popupId);
            return;
        }
    }

    //var webkitExist = (typeof window.webkit == "undefined")? false: true;
    if (popupId === 'sweepstake-share-dialog' && $('#sweepstake-share-dialog').css('display') !== 'none') {
        return false;
    }
    if (g_isMobileApp === 1 && g_is_guest &&
        popupId !== "accesscode-add-dialog" &&
        popupId !== "conciergeOverlay-dialog"  &&
        popupId !== "sweepstake-share-dialog" &&
        popupId !== "sweepstake-email-share-dialog")
    {
        if (g_uaType === 4) {
            window.webkit.messageHandlers.shownativelogin.postMessage(JSON.stringify({url:window.location.href}));
        } else {
            Android.showSignup(window.location.href);
        }
        return false;
    }

    g_active_popup  = popupId;

    //userAccessHide2();          // for vp-8860
    $("#page-member-signup-dialog-overlay").hide();
    $("#page-member-signup-dialog-loading").hide();


    g_active_popup  = popupId; // in userAccessHide() reset the popup id, so we need to set this again.
    ga('send', 'pageview', popupId);
    $('.overlayDialog').hide();


    var action      = $("#signUp-dialog-called-from").val();
    var lockedPopup = ["member-signup-dialog", "streamline-signup-dialog", "email-signup-dialog"];

    if (action === 'session-expired' || (g_forceLogin && ($.inArray(popupId, lockedPopup) !== -1))) {
        $("#"+popupId).find('a.close,  .ifonly_pop_close_img').hide();
    }

    var exposeMaskAddMinHeightClass = false;
    switch (popupId) {
        case "sweepstake-share-dialog":
        case "sweepstake-email-share-dialog":
        case "conciergeOverlay-dialog":                         //for vp-7897
            //$("#body").css("overflow","hidden");
            exposeMaskAddMinHeightClass = true;
            break;
        case "productImageList":
        case "profileImageList":
            //$("#body").css("overflow","hidden");
            break;
        case "member-signup-dialog":
        case "streamline-signup-dialog":
            var arr      = ['addToBag','buynow-button','add-to-bag'];
            var headerId = "#signInHeader";
                        // reset popup text and button wording
            $('#signup-submit-button > .title').text("Sign up");
            $("#"+popupId+" .accesscodeTitle").html(g_accesscodeTitle);

            // for default g_welcomeString and g_login_welcomeString
            // see /io/web/ifonly/protected/views/common/_loginAndRegistrationDialogs.php
            if(g_sessionAccessCode !== "" && action === ""){
                if (g_sessionAccessCode === 'AMEXWOW' || g_sessionAccessCode === 'PLATINUM') {
                    g_welcomeString   = "Welcome to Priceless";
                    g_accesscodeTitle = "Redeem your credit now for bespoke gifts and one-of-a-kind experiences.";
                    $(headerId).html(g_welcomeString);
                    $("#"+popupId+" .accesscodeTitle").html(g_accesscodeTitle);
                } else if (g_sessionAccessCode === "TIERONEART"){
                    $('.social_icons,.continue-with').show();
                }
            } else if (g_sessionAccessCode === "TIERONEART" && $.inArray(action,arr) !== -1){
                $(headerId).html("To redeem your Tier One art print,<br /> please continue below");
                $('#signup-submit-button > .title').text('Redeem');
                $('.social_icons, .continue-with').hide();
                $('.social_icons[data-name=EMAIL]').show();
            } else {
                if (g_sourceId && g_sourceWelcomeString) {
                    break;
                }

                //$("#signUp-dialog-called-from").val(""); // VP-12661 in addGuestProductToWishlist() check val of $("#signUp-dialog-called-from")
                if( $.inArray(action,arr) !== -1)       { $(headerId).html("To add this item to your cart,<br \/> please continue below"); }
                else if( action === "add-under-500" )   { $(headerId).html("To redeem your offer and complete the checkout process, please continue below"); }
                else if( action === "suggestion" )      { $(headerId).html("To suggest a dream,<br \/> please continue below"); }
                else if( action === "celebrityMessage" ){ $(headerId).html("To send a message,<br \/> please continue below"); }
                else if( action === "requestQuote" )    { $(headerId).html("To request a quote,<br \/> please continue below"); }
                else if( action === "waitlist" )        { $(headerId).html("To waitlist for this item,<br \/> please continue below"); }
                else if( action === "wishlist" )        { $(headerId).html("To add this item to your wishlist,<br \/> please continue below"); }
                else if( action === "following" )       { $(headerId).html("To follow this luminary,<br \/> please continue below"); }
                else if( action === "watchlist" )       { $(headerId).html("To watchlist this item,<br \/> please continue below"); }
                else if( action === "placeBid" )        { $(headerId).html("To place a bid, please continue below"); }
                else if( action === "sweepstake-share" ){ $(headerId).html("To share this sweepstake, please continue below"); }
                else if( action === "crowdBuy-share" )  { $(headerId).html("To share this event, please continue below"); }
                else if( action === "share" )           { $(headerId).html("To share this, please continue below"); }
                else if( action === "memberAccess" )    { $(headerId).html("You must be a Member to view this"); }
                else if( action === "shopping-bag" )    { $(headerId).html("To view your shopping cart, please continue below"); }
                else if( action === "partialLogin")     { $(headerId).html("Welcome Back!");}
                else if( action === "session-expired")  { $(headerId).html("Welcome Back!"); $('#signInHeader_sub').html("sign_up_dialog_title_for_session_expire");}
                //else if( action === "redemption")       { $(headerId).html("Redemption Signup mobile");  }
                else {
                    //
                }
            }
            break;
        default:
            // ?
    }

    var opaqueMask = ["preview-dialog", "swap-image-dialog"];
    if ($.inArray(popupId, opaqueMask) !== -1) {
        //var styles = {backgroundColor: "rgb(255, 255, 255)",opacity: ""};
        //$('#exposeMask').css(styles);
    }

    // 2020-10-23 (Jun)
    // covered from controlSignInSignUpFormDisplay() in /views/common/_loginAndRegistrationDialogs.php
    // if (popupId === 'member-signup-dialog' && type === 'login') {
    //     $.post('/website/logPageView',{pageId:1014},function(data){},'json');
    // } else {
    //     $.post('/website/logPageView',{pageId:1022},function(data){},'json');
    // }

    //$('#exposeMask').fadeIn();
    //$('html,body').scrollTop(0);

    if($('#'+popupId).hasClass('ifonly_overlay')){
        show_ifonly_overlay('#'+popupId);
    }
    else{
        $('#'+popupId).fadeIn("200",function(){
            //_fixMaskHeight();
        });
    }


    //_fixMaskHeight();

    if (popupId === "complete-signup-dialog" && $('#mc_complete_reg_iframe').length > 0) { // MC only
        if ($('#mc_complete_reg_iframe').length > 0) {
            var data = {action : 'getSize'};
            if ($('#mc_complete_reg_iframe').attr('src') !== $('#mc_complete_reg_iframe').attr('data-src')) {
                $('#mc_complete_reg_iframe').attr('src', $('#mc_complete_reg_iframe').attr('data-src'));
            }
            $('#mc_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify(data), '*');
        }
    }


    if (popupId === "member-signup-dialog" && $('#mc_one_step_complete_reg_iframe').length > 0) { // MC only
        if ($('#mc_one_step_complete_reg_iframe').length > 0) {
            var data = {action : 'getSize'};
            if ($('#mc_one_step_complete_reg_iframe').attr('src') !== $('#mc_one_step_complete_reg_iframe').attr('data-src')) {
                var d = new Date();
                g_pay_load_start_time = d.getTime();
                $('#mc_one_step_complete_reg_iframe').attr('src', $('#mc_one_step_complete_reg_iframe').attr('data-src'));
            }
            $('#mc_one_step_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify(data), '*');
        }
    }

    //used to force the expose mask cover the full screen
    if (exposeMaskAddMinHeightClass ){
        //$('#exposeMask').addClass('withMinHeight');
    }
    else{
        //$('#exposeMask').removeClass('withMinHeight');
    }


    //centerWindowResponsive(popupId);


     /*
    if( popupId=='member-signup-dialog' ){

        // auto resize the recapture width to be 100% of the contianer
        var $recap =$('.g-recaptcha:visible');
        if( $recap.length>0){
            var factor = ($recap.parent().width()/304).toFixed(3);
            $recap.css({
                transform: 'scale(' + factor + ')'
            });



        }
    }
    */



    return false;
}







function _displayOverlay(popupId, type){

    console.log('_displayOverlay 1');

    if (popupId === 'closed-accessCode-dialog') {
        return;
    }

    // do not show the popup if it is already shown
    if ($.trim(popupId) !== '') {
        var pop = $('#'+popupId);
        if(pop.length>0 && pop.is(':visible')){
            centerWindowResponsive(popupId);
            return;
        }
    }

    //var webkitExist = (typeof window.webkit == "undefined")? false: true;
    if (popupId === 'sweepstake-share-dialog' && $('#sweepstake-share-dialog').css('display') !== 'none') {
        return false;
    }
    if (g_isMobileApp === 1 && g_is_guest &&
        popupId !== "accesscode-add-dialog" &&
        popupId !== "conciergeOverlay-dialog"  &&
        popupId !== "sweepstake-share-dialog" &&
        popupId !== "sweepstake-email-share-dialog")
    {
        if(g_uaType === 4) {
            window.webkit.messageHandlers.shownativelogin.postMessage(JSON.stringify({url:window.location.href}));
        } else {
            Android.showSignup(window.location.href);
        }
        return false;
    }

    g_active_popup  = popupId;
    userAccessHide();          // for vp-8860
    g_active_popup  = popupId; // in userAccessHide() reset the popup id, so we need to set this again.
    ga('send', 'pageview', popupId);
    $('.overlayDialog').hide();


    var action      = $("#signUp-dialog-called-from").val();
    var lockedPopup = ["member-signup-dialog", "streamline-signup-dialog", "email-signup-dialog"];

    if (action === 'session-expired' || (g_forceLogin && ($.inArray(popupId, lockedPopup) !== -1))) {
        $("#"+popupId).find('a.close').hide();
    }

    var exposeMaskAddMinHeightClass = false;
    switch (popupId) {
        case "sweepstake-share-dialog":
        case "sweepstake-email-share-dialog":
        case "conciergeOverlay-dialog":                         //for vp-7897
            $("#body").css("overflow","hidden");
            exposeMaskAddMinHeightClass = true;
            break;
        case "productImageList":
        case "profileImageList":
            $("#body").css("overflow","hidden");
            break;
        case "member-signup-dialog":
        case "streamline-signup-dialog":
            var arr      = ['addToBag','buynow-button','add-to-bag'];
            var headerId = "#signInHeader";
                        // reset popup text and button wording
            $('#signup-submit-button > .title').text("Sign up");
            $("#"+popupId+" .accesscodeTitle").html(g_accesscodeTitle);

            // for default g_welcomeString and g_login_welcomeString
            // see /io/web/ifonly/protected/views/common/_loginAndRegistrationDialogs.php
            if(g_sessionAccessCode !== "" && action === ""){
                if (g_sessionAccessCode === 'AMEXWOW' || g_sessionAccessCode === 'PLATINUM') {
                    g_welcomeString   = "Welcome to Priceless";
                    g_accesscodeTitle = "Redeem your credit now for bespoke gifts and one-of-a-kind experiences.";
                    $(headerId).html(g_welcomeString);
                    $("#"+popupId+" .accesscodeTitle").html(g_accesscodeTitle);
                } else if (g_sessionAccessCode === "TIERONEART"){
                    $('.social_icons,.continue-with').show();
                }
            } else if (g_sessionAccessCode === "TIERONEART" && $.inArray(action,arr) !== -1){
                $(headerId).html("To redeem your Tier One art print,<br /> please continue below");
                $('#signup-submit-button > .title').text('Redeem');
                $('.social_icons, .continue-with').hide();
                $('.social_icons[data-name=EMAIL]').show();
            } else {
                if (g_sourceId && g_sourceWelcomeString) {
                    break;
                }

                //$("#signUp-dialog-called-from").val(""); // VP-12661 in addGuestProductToWishlist() check val of $("#signUp-dialog-called-from")
                if( $.inArray(action,arr) !== -1)       { $(headerId).html("To add this item to your cart,<br \/> please continue below"); }
                else if( action === "add-under-500" )   { $(headerId).html("To redeem your offer and complete the checkout process, please continue below"); }
                else if( action === "suggestion" )      { $(headerId).html("To suggest a dream,<br \/> please continue below"); }
                else if( action === "celebrityMessage" ){ $(headerId).html("To send a message,<br \/> please continue below"); }
                else if( action === "requestQuote" )    { $(headerId).html("To request a quote,<br \/> please continue below"); }
                else if( action === "waitlist" )        { $(headerId).html("To waitlist for this item,<br \/> please continue below"); }
                else if( action === "wishlist" )        { $(headerId).html("To add this item to your wishlist,<br \/> please continue below"); }
                else if( action === "following" )       { $(headerId).html("To follow this luminary,<br \/> please continue below"); }
                else if( action === "watchlist" )       { $(headerId).html("To watchlist this item,<br \/> please continue below"); }
                else if( action === "placeBid" )        { $(headerId).html("To place a bid, please continue below"); }
                else if( action === "sweepstake-share" ){ $(headerId).html("To share this sweepstake, please continue below"); }
                else if( action === "crowdBuy-share" )  { $(headerId).html("To share this event, please continue below"); }
                else if( action === "share" )           { $(headerId).html("To share this, please continue below"); }
                else if( action === "memberAccess" )    { $(headerId).html("You must be a Member to view this"); }
                else if( action === "shopping-bag" )    { $(headerId).html("To view your shopping cart, please continue below"); }
                else if( action === "partialLogin")     { $(headerId).html("Welcome Back!");}
                else if( action === "session-expired")  { $(headerId).html("Welcome Back!"); $('#signInHeader_sub').html("sign_up_dialog_title_for_session_expire");}
                //else if( action === "redemption")       { $(headerId).html("Redemption Signup mobile");  }
                else {
                    //
                }
            }
            break;
        default:
            // ?
    }

    var opaqueMask = ["preview-dialog", "swap-image-dialog"];
    if ($.inArray(popupId, opaqueMask) !== -1) {
        var styles = {backgroundColor: "rgb(255, 255, 255)",opacity: ""};
        $('#exposeMask').css(styles);
    }

    if (popupId === 'member-signup-dialog' && type === 'login') {
        $.post('/website/logPageView',{pageId:1014},function(data){},'json');
    } else {
        $.post('/website/logPageView',{pageId:1022},function(data){},'json');
    }

    $('#exposeMask').fadeIn();
    //$('html,body').scrollTop(0);
    $('#'+popupId).fadeIn("200",function(){
        _fixMaskHeight();
    });
    _fixMaskHeight();

    if (popupId === "complete-signup-dialog" && $('#mc_complete_reg_iframe').length > 0) { // MC only
        if ($('#mc_complete_reg_iframe').length > 0) {
            var data = {action : 'getSize'};
            if ($('#mc_complete_reg_iframe').attr('src') !== $('#mc_complete_reg_iframe').attr('data-src')) {
                $('#mc_complete_reg_iframe').attr('src', $('#mc_complete_reg_iframe').attr('data-src'));
            }
            $('#mc_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify(data), '*');
        }
    }


    if (popupId === "member-signup-dialog" && $('#mc_one_step_complete_reg_iframe').length > 0) { // MC only
        if ($('#mc_one_step_complete_reg_iframe').length > 0) {
            var data = {action : 'getSize'};
            if ($('#mc_one_step_complete_reg_iframe').attr('src') !== $('#mc_one_step_complete_reg_iframe').attr('data-src')) {
                var d = new Date();
                g_pay_load_start_time = d.getTime();
                $('#mc_one_step_complete_reg_iframe').attr('src', $('#mc_one_step_complete_reg_iframe').attr('data-src'));
            }
            $('#mc_one_step_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify(data), '*');
        }
    }

    //used to force the expose mask cover the full screen
    if (exposeMaskAddMinHeightClass ){
        $('#exposeMask').addClass('withMinHeight');
    }
    else{
        $('#exposeMask').removeClass('withMinHeight');
    }


    centerWindowResponsive(popupId);


     /*
    if( popupId=='member-signup-dialog' ){

        // auto resize the recapture width to be 100% of the contianer
        var $recap =$('.g-recaptcha:visible');
        if( $recap.length>0){
            var factor = ($recap.parent().width()/304).toFixed(3);
            $recap.css({
                transform: 'scale(' + factor + ')'
            });
        }
    }
    */



    return false;
}


//***************************** Filter codes ********************************

// used in filter to get the filter options

function getFilterOptions(trigger){
    var options = getFilterOptionsObj();

    if (trigger === undefined){
        trigger = "";
    }
    options.get = "";
    options.mobileMenu = g_filter_from_mobile_menu ? 1 : 0;
    $.ajax({
        type: "GET",
        headers: { "Cache-Control": "no-cache" },
        url: (g_is_mobile ? "/m" : '') + "/filter/getFilterOptions",
        dataType: 'json',
        data: options
    })
    .done(function(data) {
        if(data.result === 1) {
            if(data.totalCnt > 0){
                $("#filter .js-apply").removeClass("disabled");
            }
            else{
                $("#filter .js-apply").addClass("disabled");
            }

            filterHideLoading();

            // location filter section refresh
            if (g_is_mobile || g_filter_from_mobile_menu) {
                $("#filter .js-options-location").html(data.location);
                $("#filter .js-options-cardType").html(data.cardType);
                $("#filter .js-options-contentType").html(data.contentType);
                $("#filter .js-options-category").html(data.category);
                //priceSectionRefresh(data, true);
            } else {

                if(trigger !== "location"){
                    $("#filterPage .js-widget-popup.location div.js-widget-popup-content").html(data.location);
                }
                if(trigger !== "cardType"){
                    $("#filterPage .js-widget-popup.cardType div.js-widget-popup-content").html(data.cardType);
                }
                if(trigger !== "contentType" && trigger !== "program"){
                    $("#filterPage .js-widget-popup.contentType div.js-widget-popup-content").html(data.contentType);
                }
                if(trigger !== "category" || ! options.catString){
                    $("#filterPage .js-widget-popup.category div.js-widget-popup-content").html(data.category);
                }
                priceSectionRefresh(data);
            }
            // update pageTitle
            var pageTitle = "Priceless" + " | " + "Search";
            var mobile = g_is_mobile ? 'mobile' : 'desktop';
            if (options.keyword) {
                pageTitle += " | " + options.keyword;
            }
//            if (options.catString) {
//                var catName = $("."+mobile+".js-filter-hints .js-disc-hints .js-span").text();
//                pageTitle += " | " + catName + ' ' + "category ";
//            }
            if (options.shpString) {
                var collectionString = $("."+mobile+".js-filter-hints .js-filter-hint[data-mapping='collection']").text();
                pageTitle += " | " + collectionString;
            }
            if (options.geoString) {
                // find correct names
                var geoName = '';
                var geoString = options.geoString.split(",");
                if ($.isArray(geoString)) {
                    var geoStringArr = [];
                    $.each(geoString, function( index, value ){
                        if (! geoStringArr[value]) {
                            geoStringArr.push(value);
                            geoName += $("."+mobile+".js-filter-hints .js-location-hints .js-filter-hint[data-value='"+value+"'] .js-span").text() + " ";
                        }
                    });
                } else {
                    geoName = $("."+mobile+".js-filter-hints .js-location-hints .js-filter-hint[data-value='"+options.geoString+"'] .js-span").text() + " ";
                }
                pageTitle += " | " + geoName + "Location";
            }
            if (options.cardString) {
                var cardName   = '';
                var cardString = options.cardString.split(",");
                if ($.isArray(cardString)) {
                    var cardStringArr = [];
                    $.each(cardString, function( index, value ){
                        if (! cardStringArr[value]) {
                            cardStringArr.push(value);
                            cardName += $("."+mobile+".js-filter-hints .js-cardType-hints .js-filter-hint[data-value='"+value+"'] .js-span").text() + " ";
                        }
                    });
                } else {
                    cardName = $("."+mobile+".js-filter-hints .js-cardType-hints .js-filter-hint[data-value='"+options.cardString+"'] .js-span").text() + " ";
                }
                pageTitle += " | " + cardName + "Product Type ";
            }
            if (options.catString) {
                var catName   = '';
                var catString = options.catString.split(",");
                if ($.isArray(catString)) {
                    var catStringArr = [];
                    $.each(catString, function( index, value ){
                        if (! catStringArr[value]) {
                            catStringArr.push(value);
                            catName += $("."+mobile+".js-filter-hints .js-category-hints .js-filter-hint[data-value='"+value+"'] .js-span").text() + " ";
                        }
                    });
                } else {
                    catName = $("."+mobile+".js-filter-hints .js-category-hints .js-filter-hint[data-value='"+options.catString+"'] .js-span").text() + " ";
                }
                pageTitle += " | " + catName + "category ";
            }
            if (options.pppString) {
                var pppString = options.pppString.replace('-', ' ' + "To" + ' ');
                pageTitle += " | " + pppString + ' ' + "Price";
            }
            if (options.ppiString) {
                var ppiString = options.ppiString.replace('-', ' ' + "To" + ' ');
                pageTitle += " | " + ppiString + ' ' + "people";
            }
//            if (options.display && options.display !== "all") {
//                pageTitle += " | " + options.display + ' ' + "only";
//            }
            if (options.contentString) {
                var contentName   = '';
                var contentString = options.contentString.split(",");
                if ($.isArray(contentString)) {
                    var contentStringArr = [];
                    $.each(contentString, function( index, value ){
                        if (! contentStringArr[value]) {
                            contentStringArr.push(value);
                            contentName += $("."+mobile+".js-filter-hints .js-contentType-hints .js-filter-hint[data-value='"+value+"'] .js-span").text() + " ";
                        }
                    });
                } else {
                    contentName = $("."+mobile+".js-filter-hints .js-contentType-hints .js-filter-hint[data-value='"+options.contentString+"'] .js-span").text() + " ";
                }
                pageTitle += " | " + contentName + "Content Type ";
            }
            if (options.date) {
                var dateString = options.date.replace('_', ' ' + "To" + ' ');
                pageTitle += " | " + dateString;
            }

            document.title = pageTitle;

            $(".js-filter-hints .results-count-hidden").text("In" + ' ' + pageTitle.split(" |").join(","));

            dynamicAdobeLocationTracking();
            //$(".price-ul").html(data.tpp);
            //markWishlistedProducts(wishlistProducts);
        }
    })
    .fail(function() {
        //window.location = link;
        filterHideLoading();
        console.log("error");
    });
}

function dynamicAdobeLocationTracking() {
    if (g_siteId === 5) { // adobe tracking for MC
        if(g_is_mobile || g_filter_from_mobile_menu){
            var selector = "#filter ";
        }else{
            var selector = "#filterPage ";
        }
        var locations         = [];
        var selectedLocations = $(selector).find(".js-checkbox-options").find(".js-filter-location.filter-selected .js-label");

        for(i=0; i < selectedLocations.length; i++) {
            if($(selectedLocations[i]).closest('.js-filter-location').data('value') !== "") {
                var text = $(selectedLocations[i]).text();
                if(text.indexOf(' (') !== -1){
                    text = text.substr(0, text.indexOf(' ('));
                }
                locations.push(text);
            }
        }

        if(locations.length > 0) {
            if(typeof(_satellite) !== 'undefined') {
                var alreadyTracked = di.contentCity;
                var addedLocation  = locations.length > alreadyTracked.split(',').length; // do not track if we remove a locations
                di.contentCity = locations.sort().join(',');

                if(addedLocation && alreadyTracked !== di.contentCity && typeof(_satellite.track) === 'function') { // do not track if other filters are selected
                    console.log('tracking');
                    _satellite.track('filtercity', {pageName:di.pageName, siteName:di.siteName, country:di.country, language:di.language, contentCity: di.contentCity});
                }
            }
        }
    }
}

function priceSectionRefresh(data, mobileViewOnly){
    if(mobileViewOnly === undefined ){
        mobileViewOnly = false;
    }

    if(mobileViewOnly){
        var preSelector = "#filter ";
    }else{
        var preSelector = "";
    }

    $(preSelector+".js-filter-people").each(function(){
        $(this).addClass("no-prod");
    });

    var ppiArray = $.parseJSON(data.ppi);
    //console.log(data.tpp);
    for (index = 0; index < ppiArray.length; ++index) {
        $obj = $(preSelector+".js-filter-people[data-value='"+ ppiArray[index] +"']");
        //console.log($obj.attr("price"));
        $obj.removeClass("no-prod");
    }
}


function selectOptionsBasedOnURL(getProductBasedOnOptions){
    if (getProductBasedOnOptions === undefined) {
        getProductBasedOnOptions = false;
    }

    var url = window.location.pathname;
    var $current = $(".js-tiles-sec");
    var indexPos = url.indexOf("/options");
    var fromBackBtn = false;

    var lastChar = url.substr(-1); // Selects the last character
    if (lastChar !== '/') {         // If the last character is not a slash
       url = url + '/';            // Append a slash to it.
    }

    if (indexPos !== -1 ){  // load data from back button
        $current.html("");
        if(retrieveLocalStorage()) {                          // if can get g_category_products_and_collections from localStorage use it
            initiateFilterProducts($current, false, g_renderedTileIndex);
            renderSpecialOfferProductsHtml(g_special_offer_products);
            backBtnFilterOptionsPreparing(url);
            fromBackBtn = true;
            $(".js-filter-no-results").hide();
        }else if( (url.length > indexPos + 10) ){                          // otherwise ajax to get data
            if(g_is_mobile){
                $("#filter-overlay").show();
                $(".filterLoading").show();
            }else{
                $("#page-overlay").show();
                $("#loading").show();
            }

            var options = backBtnFilterOptionsPreparing(url);
            if(getProductBasedOnOptions){
                var optionsFromDom = getFilterOptionsObj();

                // kind of hard codes for now,
                // need to make it more modules
                if(optionsFromDom.pdzMasterPid !== undefined){
                    options.pdzMasterPid = optionsFromDom.pdzMasterPid;
                }

            }
            getFilteredProducts(options, "", false);
            console.log('selectOptionsBasedOnURL - from back button');
            fromBackBtn = true;
        }
    }
    if(!fromBackBtn) {    // not from back button

        if(getProductBasedOnOptions){
            var options = getFilterOptionsObj();
            getFilteredProducts(options);
            console.log('selectOptionsBasedOnURL - not from back button');
        }else{
            initiateFilterProducts($current);
            populateLocalStorage();
            addIdentifierStrIntoUrlForBackBtn(url);
        }

    }else{
        if(getProductBasedOnOptions){
            getFilterOptions();
        }

    }

    filterSelectedHandling();
    getFilterOptions();
}




// Trigger changeUrlWhenClickOption function in different parameters
function choseBasedOnType($obj, urlObj){

    if(urlObj === undefined){
        urlObj = "";
    }
    // Change URL for back button
    if($obj.hasClass("js-filter-location")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-filter-cardType")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-filter-contentType")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-filter-category")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-filter-collection")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-filter-partner-category")){
        var url = window.location.pathname;
        var value = $obj.hasClass("filter-selected") ? 1 : 0;
        changeUrlWhenClickOption($obj.attr("data-name"), value,                   "", urlObj);
        if (value && url.indexOf("/collection") === -1) { // collection can be removed from clear all
            changeUrlWhenClickOption("collection", partnerCategoryId, "", urlObj);
        }
    }else if($obj.hasClass("totalPrice")){
        changeUrlWhenClickOption("totalPrice",           $obj.attr("price"),      "", urlObj);
    }else if($obj.hasClass("js-filter-price")){
        changeUrlWhenClickOption("perPersonPrice",       $obj.attr("data-urlvalue"), "", urlObj);
    }else if($obj.hasClass("selected-luminary")){
        changeUrlWhenClickOption("selected-luminary",    $obj.attr("celebid"),    "", urlObj);
    }else if($obj.hasClass("selected-charity")){
        changeUrlWhenClickOption("selected-charity",     $obj.attr("charityid"),  "", urlObj);
    }else if($obj.hasClass("js-filter-people")){
        changeUrlWhenClickOption($obj.attr("data-name"), $obj.attr("data-value"), "", urlObj);
    }else if($obj.hasClass("js-useObj")){
        changeUrlWhenClickOption($obj.attr("data-name"), "useObj", $obj, urlObj);
    }

}


function changeUrlWhenClickOption(name, value, $obj, urlObj){
    var returnUrl = false;
    var url = window.location.pathname;
    if(urlObj === undefined || urlObj === ""){
        // use default
    } else {
        returnUrl = true;
        url = urlObj.url;
    }

    var lastChar = url.substr(-1); // Selects the last character
    if (lastChar !== '/') {        // If the last character is not a slash
       url = url + '/';            // Append a slash to it.
    }

    if(value === "useObj" && $obj.hasClass("js-availability-type")){
        var re = new RegExp("notIncludeUnSure"+"\/(.*?)\/", 'i');
        url = url.replace(re,"");
    }

    if(value === "useObj" && $obj.hasClass("js-filter-keyword")){
        if(url.indexOf("/keywordUrl/") !== -1){
            var re = new RegExp("keywordUrl"+"\/(.*?)\/", 'i');
            url = url.replace(re,"");
        }
        if(url.indexOf("/noKeyword/") !== -1){
            var re = new RegExp("noKeyword"+"\/(.*?)\/", 'i');
            url = url.replace(re,"");
        }
    }

    if (url.indexOf("options") === -1){
        if(url.slice(-1) === "/"){
            url = url.slice(0,-1);
        }
        url = url + "/options/";
    }

    if (url.indexOf("/"+name) !== -1){
        var re = new RegExp(name+"\/(.*?)\/", 'i');
        var strObj = {str:""};
        if(value === "useObj"){
            formUrlPath($obj, strObj);
        } else{

            if(g_filter_from_mobile_menu){
                $("#filter ul li[data-name="+name+"].filter-selected").each(function(){
                    formUrlPath($(this), strObj);
                });
            }else{
                $("#filterPage ul li[data-name="+name+"].filter-selected").each(function(){
                    formUrlPath($(this), strObj);
                });
            }
        }
        if(strObj.str === "_"){
            strObj.str = "";
        }
        if(strObj.str !== ""){
            strObj.str = strObj.str.substring(0, strObj.str.length - 1);
            strObj.str = name + "/" + strObj.str + "/";
        }
        url = url.replace(re,strObj.str);
    }else{
        if(value === "useObj"){
            value = "";
            if($obj.hasClass("js-filter-keyword") && !$obj.hasClass("filter-selected")){
                name  = "noKeyword";
                value = "true";
            }else{
                value = $obj.attr("data-value");
            }
        }
        if(value !== "" && value !== undefined){
            url = url + name + "/" + value + "/";
        }
    }

    // If select totalPrice option, perPersonPrice options will be clear
    if(name === "totalPrice"){
        var re = new RegExp("perPersonPrice"+"\/(.*?)\/", 'i');
        url = url.replace(re,"");
    }else if(name === "perPersonPrice"){
        var re = new RegExp("totalPrice"+"\/(.*?)\/", 'i');
        url = url.replace(re,"");
    }

    g_link = url;

    var lastChar = url.substr(-1); // Selects the last character
    if (lastChar === '/') {         // If the last character is not a slash
       url = url.replace(/\/$/, "");
    }
    if (returnUrl) {
        urlObj.url = url;
    } else {
        if ( ! $.browser.msie) {
            window.history.pushState({page:url}, "page title",url);
        }
    }
}

function addIdentifierStrIntoUrlForBackBtn(url){


    // append options when page loaded to utilize the localStorage for back btn
    if (url.indexOf("options") === -1 && $.browser === undefined){
        setTimeout(function(){
            addIdentifierStrIntoUrlForBackBtn(url);
        }, 4000);
    } else if (url.indexOf("options") === -1){

        var selector = "#filterPage ";
        if (g_is_mobile || g_filter_from_mobile_menu){
            selector = "#filter ";
        }

        var urlObj = {url:url};

        $(selector+".filter-selected").each(function(){
            choseBasedOnType($(this), urlObj);
        });

        if(urlObj.url.indexOf("options") !== -1) {
            window.history.pushState({page: urlObj.url}, "page title", urlObj.url);
            sessionStorage.setItem("url", window.location.href);
        }
    }

}


function formUrlPath($obj, strObj){
    if($obj.hasClass("js-filter-disc-item")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("js-filter-location")) {
        if (! $obj.parent().parent().hasClass("filter-selected")) {
            strObj.str += $obj.attr("data-value") + "_";
        }
    }else if($obj.hasClass("js-filter-cardType")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("js-filter-contentType")){
        //strObj.str += $obj.attr("data-value") + "_";
        if (! $obj.parent().parent().hasClass("filter-selected")) {
            strObj.str += $obj.attr("data-value") + "_";
        }
    }else if($obj.hasClass("js-filter-category")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("js-filter-collection")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("js-filter-partner-category")){
        strObj.str += $obj.hasClass("filter-selected") ? 1 : 0;
    }else if($obj.hasClass("totalPrice")){
        strObj.str += $obj.attr("price") + "_";
    }else if($obj.hasClass("perPersonPrice")){
        strObj.str += $obj.attr("price") + "_";
    }else if($obj.hasClass("selected-luminary")){
        strObj.str += $obj.attr("celebid") + "_";
    }else if($obj.hasClass("selected-charity")){
        strObj.str += $obj.attr("charityid") + "_";
    }else if($obj.hasClass("keywordUrl")){
        strObj.str += $obj.attr("keyword") + "_";
    }else if($obj.hasClass("js-filter-people")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("js-filter-availability")){
        strObj.str += $obj.attr("data-value") + "_";
    }else if($obj.hasClass("toDate")){
        strObj.str += $obj.val()+ "_";//console.log("111");
    }else if($obj.hasClass("js-sortBy")){
        if($obj.val() !== ""){
            strObj.str = $obj.val()+ "_";//console.log("111");
        }
    }else{
        strObj.str += $obj.attr("data-value") + "_";
    }
    /*else if($obj.hasClass("js-availability-type")){
        if(!$obj.prop("checked")){
            strObj.str = "1"+ "_";//console.log("111");
        }
    }
    */
    //console.log(strObj.str);
}
function getSlideValueBasedOnPriceValue(price){
    var slideValue = 1;
//    if(price == 5){
//        slideValue = 2;
//    }else if(price > 5 && price <= 400){
//        slideValue = 2 + price/20;
//    }else if(price > 400 && price <= 1000 ){
//        slideValue = 20 + (price - 400) / 50;
//    }else if(price > 1000 && price <= 2000){
//        slideValue = 32 + (price - 1000) / 100;
//    }else if(price > 2000 && price < 10000){
//        slideValue = 42 + (price - 2000) / 500;
//    }else if(price >= 10000){
//        slideValue = 58;
//    }

    if(price == 5){
        slideValue = 2;
    }else if(price > 5 && price <= 400){
        slideValue = 2 + price/20;
    }else if(price > 400 && price < 1000 ){
        slideValue = 20 + (price - 400) / 50;
    }else if(price >= 1000){
        slideValue = 33;
    }

    return slideValue;
}


function backBtnFilterOptionsPreparing(url){

    var $obj;
    var options = { catString:"", geoString:"", ttpString:"", pppString:"",
                    shpString:"", display:"", cardString:"",
                    ppiString:"", lumString:"", chaString:"", keyword:"", date:"",
                    notIncludeUnSure:0, sortBy:"", partnerCategoryFilter: ""};
    var selector = "#filterPage ";
    if (g_is_mobile || g_filter_from_mobile_menu){
        selector = "#filter ";
    }

    if (url.indexOf("/category") !== -1 ){
        var re = new RegExp("category\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.catString = str.replace(/_/gi,",");
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-category[data-value='"+ arr[index] +"']");
            $(selector+".js-checkbox-options li.js-filter-category.js-all-category").removeClass("filter-selected").removeAttr('aria-selected');
            $(selector+".js-filter-category.js-all-category input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
            catSelectedArray.push(arr[index]);
            if($obj.length > 0){
                $obj.addClass("filter-selected");
                $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
            }
        }
    }else{
        $(selector+".js-filter-category.filter-selected input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-checkbox-options li.js-filter-category.filter-selected").removeClass("filter-selected")
        $(selector+".js-checkbox-options li.js-filter-category.js-all-category").addClass("filter-selected")
        $(selector+".js-filter-category.js-all-category input.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
    }

    if (url.indexOf("/collection") !== -1){
        $(selector+".js-filter-collection .js-io-checkBox.select").removeClass("select");
        $(selector+".js-filter-collection.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
        var re = new RegExp("\/collection\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.shpString = str.replace(/_/gi,",");
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-collection[data-value='"+ arr[index] +"']");
            //console.log($obj.attr("price"));
            if($obj.length > 0){
                $obj.addClass("filter-selected").attr('aria-selected', 'true');
                $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');
            }
        }
    }else{
        $(selector+".js-filter-collection .js-io-checkBox.select").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-filter-collection.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
    }

    if (url.indexOf("/location") !== -1){
        var re = new RegExp("location\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.geoString = str.replace(/_/gi,",");
        var arr = str.split("_");

        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-location[data-value='"+ arr[index] +"']");
            $(selector+".js-checkbox-options li.js-filter-location.js-all-location").removeClass("filter-selected").removeAttr('aria-selected');
            $(selector+".js-filter-location.js-all-location input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
            geoSelectedArray.push(arr[index]);
            //console.log($obj.attr("price"));
            if($obj.length > 0){
                $obj.addClass("filter-selected");
                $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
            }
        }
    }else{
        $(selector+".js-filter-location.filter-selected input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-checkbox-options li.js-filter-location.filter-selected").removeClass("filter-selected")
        $(selector+".js-checkbox-options li.js-filter-location.js-all-location").addClass("filter-selected")
        $(selector+".js-filter-location.js-all-location input.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
    }

    if (url.indexOf("/cardType") !== -1){
        var re = new RegExp("cardType\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.cardString = str.replace(/_/gi,",");
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-cardType[data-value='"+ arr[index] +"']");
            $(selector+".js-checkbox-options li.js-filter-cardType.js-all-cardType").removeClass("filter-selected").removeAttr('aria-selected');
            $(selector+".js-filter-cardType.js-all-cardType input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
            cardSelectedArray.push(arr[index]);
            if($obj.length > 0){
                $obj.addClass("filter-selected");
                $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
            }
        }
    }else{
        $(selector+".js-filter-cardType.filter-selected input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-checkbox-options li.js-filter-cardType.filter-selected").removeClass("filter-selected")
        $(selector+".js-checkbox-options li.js-filter-cardType.js-all-cardType").addClass("filter-selected")
        $(selector+".js-filter-cardType.js-all-cardType input.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
    }

    if (url.indexOf("/contentType") !== -1 ){
        var re = new RegExp("contentType\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.contentString = str.replace(/_/gi,",");
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-contentType[data-value='"+ arr[index] +"']");
            $(selector+".js-checkbox-options li.js-filter-contentType.js-all-contentType").removeClass("filter-selected").removeAttr('aria-selected');
            $(selector+".js-filter-contentType.js-all-contentType input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
            contentSelectedArray.push(arr[index]);
            if($obj.length > 0){
                $obj.addClass("filter-selected");
                $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
            }
        }
    }else{
        $(selector+".js-filter-contentType.filter-selected input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-checkbox-options li.js-filter-contentType.filter-selected").removeClass("filter-selected")
        $(selector+".js-checkbox-options li.js-filter-contentType.js-all-contentType").addClass("filter-selected")
        $(selector+".js-filter-contentType.js-all-contentType input.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
    }

    if (url.indexOf("/program") !== -1 ){
        var re = new RegExp("program\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.programString = str.replace(/_/gi,",");
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-contentType.js-filter-children[data-value='"+ arr[index] +"']");
            //$(selector+".js-checkbox-options li.js-filter-contentType.js-all-contentType").removeClass("filter-selected").removeAttr('aria-selected');
            //$(selector+".js-filter-contentType.js-all-contentType input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
            programSelectedArray.push(arr[index]);
            if($obj.length > 0){
                $obj.addClass("filter-selected");
                $obj.find(".childCheckbox.js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
            }
        }
    }

    if (url.indexOf("/partnerCategoryFilter") !== -1 ){
        var re = new RegExp("partnerCategoryFilter\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.partnerCategoryFilter = str;
        
        $obj = $(selector+".js-filter-partner-category");
        if(str){
            $obj.addClass("filter-selected");
            $obj.find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');;
        }
    }else{
        $(selector+".js-filter-partner-category.filter-selected input.js-io-checkBox").removeClass("select").removeAttr('aria-checked');
        $(selector+".js-checkbox-options js-filter-partner-category.filter-selected").removeClass("filter-selected");
    }
    
    if (url.indexOf("/totalPrice") !== -1){
        var re = new RegExp("totalPrice\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.ttpString = decodeURI(str.replace(/_/gi,","));
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".totalPrice[price='"+ decodeURI(arr[index]) +"']");
            if($obj.length > 0){
                $obj.addClass("filter-selected").attr('aria-selected', 'true');
            }
        }
    }

    if (url.indexOf("/perPersonPrice") !== -1){
        //$(".total-perPerson .price-perPerson").click();
        var re = new RegExp("perPersonPrice\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        str = str.replace("%3E", ">");
        //options.pppString = str;
        $obj = $(selector+".js-filter-price");
        //$obj.attr("data-value",str);
        if(str.indexOf(">") !== -1){
            var arr      = [];
            var slideArr = [];
            arr[0]       = Math.floor(parseInt(str.slice(0, -1))            * g_filter_slider_exchange_rate_factor);
            arr[1]       = Math.floor(parseInt($obj.attr("data-range-max")) * g_filter_slider_exchange_rate_factor);
            slideArr[0]  = parseInt(str.slice(0, -1));
            slideArr[1]  = parseInt($obj.attr("data-range-max"));
            options.pppString = arr[0].toString() + (">");
        } else if(str.indexOf("%3E") !== -1){
            var arr      = [];
            var slideArr = [];
            arr[0]       = Math.floor(parseInt(str.slice(0, -3))            * g_filter_slider_exchange_rate_factor);
            arr[1]       = Math.floor(parseInt($obj.attr("data-range-max")) * g_filter_slider_exchange_rate_factor);
            slideArr[0]  = parseInt(str.slice(0, -3));
            slideArr[1]  = parseInt($obj.attr("data-range-max"));
            options.pppString = arr[0].toString() + ("%3E");
        }else{
            var arr      = str.split("-");
            var slideArr = [];
            slideArr[0]  = parseInt(arr[0]);
            slideArr[1]  = parseInt(arr[1]);
            arr[0]       = Math.floor(parseInt(arr[0]) * g_filter_slider_exchange_rate_factor);
            arr[1]       = Math.floor(parseInt(arr[1]) * g_filter_slider_exchange_rate_factor);
            options.pppString = arr.join('-');
        }

        if(options.pppString !== "1>") {
            $obj.attr("data-value",options.pppString);
        }
    }else{
        $obj = $(selector+".js-filter-price");
        $obj.attr("data-value","1>");
        var arr      = [];
        var slideArr = [];
        arr[0]       = Math.floor(1    * g_filter_slider_exchange_rate_factor);
        arr[1]       = Math.floor(1000 * g_filter_slider_exchange_rate_factor);
        slideArr[0]  = 1;
        slideArr[1]  = 1000;
    }
    var $sibling           = $obj.siblings(".js-price-attr");
    var minSlideValue      = getSlideValueBasedOnPriceValue(slideArr[0]);
    var maxSlideValue      = getSlideValueBasedOnPriceValue(slideArr[1]);
    var formattedPriceLow  = g_price_converter_string.replace(g_price_converter_place_holder, g_locale.formatCurrency(arr[0], 0, g_currency_localeId, false, false));
    var formattedPriceHigh = g_price_converter_string.replace(g_price_converter_place_holder, g_locale.formatCurrency(arr[1] ,0, g_currency_localeId, false, false));
    var formattedPriceMax  = g_price_converter_string.replace(g_price_converter_place_holder, g_locale.formatCurrency($sibling.attr("data-show-max") ,0, g_currency_localeId, false, false));

    $obj.attr("data-min",minSlideValue);
    $obj.attr("data-max",maxSlideValue);
    $sibling.find(".js-min-price").attr("data-value", arr[0]);
    //$sibling.find(".js-min-price").text("$"+ui.values[0]);
    $sibling.find(".js-min-price").text(formattedPriceLow);
    if(arr[1] >= parseInt($sibling.attr("data-show-max"))){
        $sibling.find(".js-max-price").attr("data-value", $sibling.attr("data-show-max")+"+");
        //$sibling.find(".js-max-price").text("$"+$sibling.attr("data-show-max")+"+");
        $sibling.find(".js-max-price").text(formattedPriceMax+"+");
    }else{
        $sibling.find(".js-max-price").attr("data-value", arr[1]);
        //$sibling.find(".js-max-price").text("$"+ui.values[1]);
        $sibling.find(".js-max-price").text(formattedPriceHigh);
    }

    $obj.attr("data-text", $sibling.find(".js-min-price").text()+" - "+$sibling.find(".js-max-price").text());
    //$obj.slider("values", [parseInt(arr[0]), parseInt(arr[1])]);
    //$obj.slider("option", "slide").call($obj, null, { values: $obj.slider("values") });
    $obj.addClass("filter-selected").attr('aria-selected', 'true');




    if (url.indexOf("/keywordUrl") !== -1){
        var re = new RegExp("keywordUrl/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.keyword = str.replace(/_/gi,",");
        var arr = str.split("_");
        $obj = $(selector+".keywordUrl[keyword='"+ options.keyword +"']");
        //console.log($obj.attr("price"));
        if($obj.length > 0){
            $obj.addClass("filter-selected").attr('aria-selected', 'true');
        }
    }else{
        $obj = $(selector+".js-filter-keyword");
        //console.log($obj.attr("price"));
        if($obj.length > 0){
            $obj.removeClass("filter-selected").removeAttr('aria-selected');
        }
        $obj = $("#filterPage .js-filter-hint[data-mapping=keyword]");
        if($obj.length > 0){
            $obj.remove();
        }
    }
    if (url.indexOf("/noKeyword") !== -1){
        $obj = $(selector+".js-filter-keyword");
        //console.log($obj.attr("price"));
        if($obj.length > 0){
            $obj.removeClass("filter-selected").removeAttr('aria-selected');
        }
        $obj = $("#filterPage .js-filter-hint[data-mapping=keyword]");
        if($obj.length > 0){
            $obj.remove();
        }
    }


    if (url.indexOf("/peoplePerItem") !== -1){
        var re = new RegExp("peoplePerItem\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.ppiString = decodeURI(str.replace(/_/gi,","));
        var arr = str.split("_");
        for (index = 0; index < arr.length; ++index) {
            $obj = $(selector+".js-filter-people[data-value='"+ decodeURI(arr[index]) +"']");
            if($obj.length > 0){
                $obj.addClass("filter-selected").attr('aria-selected', 'true');
            }
        }
    }else{
        $(selector+".js-filter-people.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
    }


    if (url.indexOf("/date") !== -1){
        $(selector+".js-filter-availability.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
        var re = new RegExp("date\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.date = str;
        if(str.indexOf("_") !== -1){
            $obj = $(selector+".js-filter-date-range");
            var arr = str.split("_");
            var fromDate = new Date(arr[0]+"T00:00:00.000");
            var toDate   = new Date(arr[1]+"T00:00:00.000");
            $obj.attr("data-value",str);
            $obj.attr("data-filter-from", monthNames[fromDate.getMonth()]+ " "+fromDate.getDate());
            $obj.attr("data-filter-to", monthNames[toDate.getMonth()]+ " "+toDate.getDate());
            // VP-26595 initialize global variables for filter date selection when they are present
            g_filter_from_date = arr[0];
            g_filter_to_date = arr[1];
        }else{
            if(g_is_mobile || g_filter_from_mobile_menu){
                $obj = $(selector+".js-filter-preset");
                $obj.attr("data-value",str);
                var text = "";
                switch(str){
                    case "weekdays":
                        text = "Weekdays Only";
                        break;
                    case "weekends":
                        text = "Weekends Only";
                        break;
                    case "nexttwoweeks":
                        text = "Next 2 weeks";
                        break;
                    case "nextthreemonths":
                        text = "Next 3 Months";
                        break;
                    case "nextmonth":
                        text = "Next Month";
                        break;
                    case "nextsixmonths":
                        text = "Next 6 Months";
                        break;
                }
                $obj.text(text);
            }else{
                $obj = $(selector+".js-filter-availability[data-value='"+ str +"']");
            }

        }

        if($obj.length > 0){
            $obj.addClass("filter-selected").attr('aria-selected', 'true');
        }
    }else{
        $(selector+".js-filter-availability.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
    }

    if (url.indexOf("/sortBy") !== -1 ){
        var re = new RegExp("sortBy\/(.*?)\/", 'i');
        var str = url.match(re)[1];
        options.sortBy = str;
        $(selector+".js-filter-sort.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
        $(selector+".js-filter-sort[data-value='"+ str +"']").addClass("filter-selected").attr('aria-selected', 'true');

    }else{
        $(selector+".js-filter-sort.filter-selected").addClass("filter-selected").attr('aria-selected', 'true');
    }

//    if (url.indexOf("/display") !== -1 ){
//        var re = new RegExp("display\/(.*?)\/", 'i');
//        var str = url.match(re)[1];
//        options.display = str;
//        $(selector+".js-filter-blog.filter-selected").removeClass("filter-selected").removeAttr('aria-selected');
//        $(selector+".js-filter-blog[data-value='"+ str +"']").addClass("filter-selected").attr('aria-selected', 'true');
//
//    }else{
//        $(selector+".js-filter-blog.filter-selected").addClass("filter-selected").attr('aria-selected', 'true');
//    }
    return options;
}


function isLocalStorageAvailable(){
    if( Storage !== undefined ){
        try {
            sessionStorage.setItem("test", '1' );
            sessionStorage.removeItem("test");
            g_localStorage_available = true;
        } catch (error){
            g_localStorage_available = false;
        }
    }else{
        g_localStorage_available = false;
    }
}
isLocalStorageAvailable();


function populateLocalStorage(params){
    if( g_localStorage_available ){
        if(params !== undefined){
            if(params.tileIndexOnly){
                sessionStorage.setItem("renderedTileIndex", g_cat_pro_col_index );
            }
        }else{
            sessionStorage.setItem("filterTiles", JSON.stringify(g_category_products_and_collections) );
            sessionStorage.setItem("filterTilesTotalCnt", $("#totalCnt").val() );
            sessionStorage.setItem("loadedBCnt", $("#loadedBCnt").val() );
            sessionStorage.setItem("loadedPCnt", $("#loadedPCnt").val() );
            sessionStorage.setItem("listType", g_currentListType);
            sessionStorage.setItem("languageId", g_languageId);
            sessionStorage.setItem("url", window.location.href);
            sessionStorage.setItem("currencyLocaleId", g_currency_localeId);
        }

        return true;
    }else{
        return false;
    }
}

function populateSpecialOffersLocalStorage() {
    if( g_localStorage_available ){
        sessionStorage.setItem("specialOfferProducts", JSON.stringify(g_special_offer_products));
    }
}

function retrieveLocalStorage(){

    if( g_localStorage_available ){
        var oldListType = sessionStorage.getItem("listType");
        if(oldListType != g_currentListType){
            return false;
        }
        var languageId = sessionStorage.getItem("languageId");
        if(languageId != g_languageId) {
            return false;
        }

        var currencyLocaleId = sessionStorage.getItem("currencyLocaleId");
        if(currencyLocaleId != g_currency_localeId) {
            return false;
//            lazyLoadCleaning(g_currentListType, true);
//            window.location.reload();
//            throw new Error("Currency changed!");
        }

        if(isLocalStorageSupported()){
            if (localStorage.disable_filterTiles_local_cache ==='1') {
                return false;
            }
        }

        if(window.location.href !== sessionStorage.getItem("url")){
            return false;
        }

        var temp = JSON.parse(sessionStorage.getItem("filterTiles"));
        if(temp){
            g_category_products_and_collections = temp;
            if(g_category_products_and_collections){    // can get filterTiles from sessionStorage
                $("#totalCnt").val(sessionStorage.getItem("filterTilesTotalCnt"));
                $(".js-totalTilesCnt").text($("#totalCnt").val());
                $("#filterProductsCnt").text(": "+$("#totalCnt").val()+" "+"Listings");
                $("#loadedBCnt").val(sessionStorage.getItem("loadedBCnt"));
                $("#loadedPCnt").val(sessionStorage.getItem("loadedPCnt"));
                $(".experience-text-d").text(getValueWordString($("#totalCnt").val(), 'result', 'htmlAttr', true));
                $(".experience-text-m").text(getValueWordString($("#totalCnt").val(), 'result', 'htmlAttr', true));
                if($("#totalCnt").val() > g_category_products_and_collections.length){
                    $("#needMoreTiles").val(1);
                }else{
                    $("#needMoreTiles").val(0);
                }
                g_renderedTileIndex      = sessionStorage.getItem("renderedTileIndex");
                g_special_offer_products = JSON.parse(sessionStorage.getItem("specialOfferProducts"));

                return true;
            }else{
                return false;
            }
        }

    }else{
        return false;
    }

}


function isImgCache(url){
    var test = document.createElement("img");
    test.src = url;
    return test.complete || test.width+test.height > 0;
}



function filterDesktopWidgetTextHandling($obj){
    if(!g_filter_from_mobile_menu){
        var $text = $obj.closest(".js-d-filter-widget").find(".js-widget-text");

        var html = "";
        var aria_label = $text.attr("data-original-text") || '';

        if($obj.hasClass("js-filter-disc-item")){
            if($obj.hasClass("filter-selected")){
                html = $obj.children("p").html();
            }else{
                html = $text.attr("data-original-text");
            }

            aria_label += ": " + $obj.children("p").html();

        }else if($obj.hasClass("js-filter-location")){
            var dataValue = true; // $obj.closest(".js-checkbox-options").find(".js-filter-location.filter-selected").attr("data-value");

            var childrenLength = 0;
            $obj.closest(".js-checkbox-options").find(".js-filter-location.js-filter-parent").each(function(){
                if ($(this).hasClass("filter-selected")) {
                    childrenLength++;
                } else {
                    childrenLength += $(this).find(".js-filter-location.js-filter-children.filter-selected").length;
                }
            });

            var noChildrenLength = $obj.closest(".js-checkbox-options").find(".js-filter-location.js-filter-no-children.filter-selected").length;
            var length = childrenLength + noChildrenLength;

            if(length >= 1 && dataValue){
                html = "locations" + " (" + length + ")";
                html = html.charAt(0).toUpperCase() + html.substring(1);
            }else if(length === 1){
                html = $obj.closest(".js-checkbox-options").find(".js-filter-location.filter-selected .js-label").text();
                if(html.indexOf(' (') !== -1){
                    html = html.substr(0, html.indexOf(' ('));
                }
            }else{
                html = $obj.closest(".js-checkbox-options").find(".js-all-location .js-label").text();
            }

            if(length>0){
                var options = [];
                $obj.closest(".js-checkbox-options").find(".js-filter-location.filter-selected").each(function(){
                    var $this = $(this);
                    var option = $this.find('.label').html();
                    if(option.indexOf(' (')!=-1){
                        option = option.substr(0, option.indexOf(' ('));
                    }
                    options.push(option);
                })
                aria_label += ": " + options.join(', ');
            }

        }else if($obj.hasClass("js-filter-cardType")){
            var length = $obj.closest(".js-checkbox-options").find(".js-filter-cardType.filter-selected").length;
            var dataValue = $obj.closest(".js-checkbox-options").find(".js-filter-cardType.filter-selected").attr("data-value");
            if(length >= 1 && dataValue){
                html = "Product types" + " (" + length + ")";
                html = html.charAt(0).toUpperCase() + html.substring(1);
            }else if(length === 1){
                html = $obj.closest(".js-checkbox-options").find(".js-filter-cardType.filter-selected .js-label").text();
            }else{
                html = $obj.closest(".js-checkbox-options").find(".js-all-cardType .js-label").text();
            }

            if(length>0){
                var options = [];
                $obj.closest(".js-checkbox-options").find(".js-filter-cardType.filter-selected").each(function(){
                    var $this = $(this);
                    var option = $this.find('.label').html();
                    options.push(option);
                })
                aria_label += ": " + options.join(', ');
            }

        }else if($obj.hasClass("js-filter-contentType")){
            var dataValue = true;
            var childrenLength = 0;
            $obj.closest(".js-checkbox-options").find(".js-filter-contentType.js-filter-parent").each(function(){
                if ($(this).hasClass("filter-selected")) {
                    childrenLength++;
                } else {
                    childrenLength += $(this).find(".js-filter-contentType.js-filter-children.filter-selected").length;
                }
            });

            var noChildrenLength = $obj.closest(".js-checkbox-options").find(".js-filter-contentType.js-filter-no-children.filter-selected").length;
            var length = childrenLength + noChildrenLength;

            if(length >= 1 && dataValue){
                html = "Content types" + " (" + length + ")";
                html = html.charAt(0).toUpperCase() + html.substring(1);
            }else if(length === 1){
                if ($obj.hasClass("js-all-contentTypes")){
                    html = $obj.closest(".js-checkbox-options").find(".js-filter-contentType.filter-selected .parent-label.js-label").text();
                } else {
                    html = $obj.closest(".js-checkbox-options").find(".js-filter-contentType.filter-selected .js-label").text();
                }
            }else{
                html = $obj.closest(".js-checkbox-options").find(".js-all-contentType .js-label").text();
            }

            if(length>0){
                var options = [];
                $obj.closest(".js-checkbox-options").find(".js-filter-contentType.filter-selected").each(function(){
                    var $this = $(this);
                    var option = $this.find('.label').html();
                    if(option.indexOf(' (')!=-1){
                        option = option.substr(0, option.indexOf(' ('));
                    }
                    options.push(option);
                })
                aria_label += ": " + options.join(', ');
            }

        }else if($obj.hasClass("js-filter-category")){
            var length = $obj.closest(".js-checkbox-options").find(".js-filter-category.filter-selected").length;
            var dataValue = $obj.closest(".js-checkbox-options").find(".js-filter-category.filter-selected").attr("data-value");
            if(length >= 1 && dataValue){
                html = "Categories" + " (" + length + ")";
                html = html.charAt(0).toUpperCase() + html.substring(1);
            }else if(length === 1){
                html = $obj.closest(".js-checkbox-options").find(".js-filter-category.filter-selected .js-label").text();
            }else{
                html = $obj.closest(".js-checkbox-options").find(".js-all-category .js-label").text();
            }

            if(length>0){
                var options = [];
                $obj.closest(".js-checkbox-options").find(".js-filter-category.filter-selected").each(function(){
                    var $this = $(this);
                    var option = $this.find('.label').html();
                    options.push(option);
                })
                aria_label += ": " + options.join(', ');
            }

        }else if($obj.hasClass("totalPrice")){

        }else if($obj.hasClass("js-filter-price")){
            if($obj.attr("data-value") === "1>" || $obj.attr("data-value") === (1 * g_filter_slider_exchange_rate_factor).toString() + ">"){
                html = $text.attr("data-original-text");
            }else{
                html = $obj.attr("data-text");
                aria_label += ": " + $obj.attr("data-text");
            }

        }else if($obj.hasClass("selected-luminary")){

        }else if($obj.hasClass("selected-charity")){

        }else if($obj.hasClass("js-filter-people")){
            if($obj.hasClass("filter-selected")){
                html = $obj.find("span").text();
            }else{
                html = $text.attr("data-original-text");
            }

            aria_label += ": " + $obj.find("span").text();
        }else if($obj.hasClass("js-filter-availability")){
            if($obj.hasClass("filter-selected")){
                if($obj.hasClass("js-filter-date-range")){
                    html = $obj.attr("data-filter-from") + " - "+ $obj.attr("data-filter-to") ;
                    aria_label += ": " + $obj.attr("data-filter-from") + " - "+ $obj.attr("data-filter-to");
                }else{
                    html = $obj.text();
                    aria_label += ": " + $.trim($obj.text());
                }

            }else{
                html = $text.attr("data-original-text");
            }

        }else if($obj.hasClass("js-filter-sort")){
            if($obj.hasClass("filter-selected")){
                html = $obj.find("span").text();
            }else{
                html = $text.attr("data-original-text");
            }
        }
//        }else if($obj.hasClass("js-filter-blog")) {
//            html = $obj.find("span").text();
//            aria_label += ": " + $obj.find("span").text();
//        }

        if(html !== ""){
            $obj.closest(".js-d-filter-widget").find(".js-filter-text-row .js-widget-text").html(html);
            $obj.closest(".js-d-filter-widget").find(".js-filter-text-row").attr('aria-label', aria_label)
        }


    }
}

function filterSelectedHandling(){
    if(g_is_mobile || g_filter_from_mobile_menu){
        var filterMenu = true;
        var selector = "#filter .filter-selected";
    }else{
        var filterMenu = false;
        var selector = "#filterPage .filter-selected";
    }
    $(selector).each(function(){
        if( filterMenu && $(this).hasClass("js-filter-disc-item") ){
           if($("#js-filter-menu-discId .js-filter-disc-item").length === 1
            && $("#js-filter-menu-discId .js-filter-disc-item").attr("data-value") !== $(this).attr("data-value")){
               filterHintAdd($(this));
           }else{
               // do nothing
           }
        }else {
            if (! $(this).hasClass("js-filter-parent")) { // dont add parent, was showing extra
                //console.log($(this));
                filterHintAdd($(this));
            }
        }

        if(!filterMenu){
            filterDesktopWidgetTextHandling($(this));
        }
    });

    if(filterMenu){
        // hint text clearing
        if($("#filterPage .js-filter-hint:visible").length > 0){
            if($("#filterPage .js-disc-hints .js-filter-hint").length > 0){
                if($("#filterPage .js-hint-clear .js-filter-hint:visible").length > 0){
                    $("#filterPage .js-disc-hints .js-filter-hint").show();
                    $("#filterPage .js-hint-clear .js-filter-hint:visible:first").find(".js-comma").css("visibility", "hidden");
                }else{
                    $("#filterPage .js-disc-hints .js-filter-hint").hide();
                }
            }else{
                if($("#filterPage .js-hint-clear .js-filter-hint:visible").length > 0){
                    $("#filterPage .js-hint-clear .js-filter-hint:visible:first").find(".js-comma").hide();
                }
            }
        }
    }
}

function initiateFilterProducts($obj, data, renderNumber){
    if(data === undefined){
        data = false;
    }

    if(data){
        lazyLoadCleaning(g_currentListType, true);
        lazyLoadDataHandling(g_currentListType, data);
    }

    var params = {};
    if (renderNumber !== undefined) {
        params.renderNumber = renderNumber;
    }
    populate_product_collection_tiles(0, "", $obj, true, params);

}

function radioFilterClick($obj){
//    if($obj.hasClass('js-filter-sort') && $obj.hasClass('filter-selected') ||
//       $obj.hasClass('js-filter-blog') && $obj.hasClass('filter-selected')
//    ) {
//        return false; // sort filter always autoselected so do not allow unselect
//    }

    if($obj.hasClass('js-filter-sort') && $obj.hasClass('filter-selected')) {
        return false; // sort filter always autoselected so do not allow unselect
    }

    liClick($obj);
    if(!g_filter_from_mobile_menu){
        filterPopupClose($(".js-d-filter-widget.clicked .js-widget-popup"));
        $(".js-d-filter-widget.clicked").removeClass("clicked");
    }

    //$obj.closest(".js-widget-popup").animate({opacity: 'hide', height: 'hide'}, 150);
}

function clearDateRange(filter){
    if(filter === undefined){
        filter = true;
    }
    if($("#filterPage .js-filter-date-range").hasClass("filter-selected") && filter){

        filterRemove($("#filterPage .js-filter-hint[data-mapping=availability]"));
    }else{
        $("#filterPage .js-filter-date-range").removeClass("filter-selected");
        $("#filterPage .js-filter-date-range").attr("data-value","");
        $("#filterPage .js-cal .day.highlight ").removeClass("highlight");
        $("#filterPage .js-cal .day.selected").removeClass("selected");
        $("#filterPage .js-cal .day.js-first").removeClass("js-first");
        $("#filterPage .js-cal .day.js-second").removeClass("js-second");
    }

    if (g_is_mobile || g_filter_from_mobile_menu) {
        // reset universal variables used to track from_date and to_date
        g_filter_from_date = "";
        g_filter_to_date = "";
        // reset the values inside the invisible value-storing div for the mobile filter
        $("#filter .js-filter-date-range").attr("data-value","");
        $("#filter .js-filter-date-range").attr("data-filter-from","");
        $("#filter .js-filter-date-range").attr("data-filter-to","");
        $("#filter .data-filter-from").attr("data-value","");
        $("#filter .data-filter-to").attr("data-value","");
        
        // reset the buttons for selecting filter dates
        $('input[data-name="fromDate"]').attr('selectedtime', "");
        $('input[data-name="fromDate"]').val("");
        $('input[data-name="toDate"]').attr('selectedtime', "");
        $('input[data-name="toDate"]').val("");
        $('input[data-name="toDate"]').attr('disabled', 'disabled');
    }
    /*
    $("#filterPage .js-filter-date-range").attr("data-value","");
    $("#filterPage .js-cal .day.selected").removeClass("selected");
    $("#filterPage .js-cal .day.js-first").removeClass("js-first");
    $("#filterPage .js-cal .day.js-second").removeClass("js-second");

    if(filter){
        $("#filterPage .js-filter-date-range").addClass("filter-selected");
        $("#filterPage .js-filter-date-range").click();
    }
    */
}

function loadingStart(){
    $("#page-overlay").show();
    $("#loading").show();
}

function loadingEnd(){
    $("#page-overlay").hide();
    $("#loading").hide();
}


function ajaxFilterProducts(options, triger){
    console.log("ajax to get ps"); //console.log(options);
    var thisTrigger = triger;
    filterShowLoading();
    var $current    = $("#filterPage .js-tiles-sec");

    var filterUrl = (g_filter_from_mobile_menu || g_is_mobile)? "/m":"";
    filterUrl += "/filter/getProductsFromFilter";


    options.filterOnlyType    = g_filter_only_type;
    options.request_data_only = 1;
    options.mobileMenu        = g_filter_from_mobile_menu ? 1 : 0;

    g_filter_get_products_ajax = $.ajax({
        type: "GET",
        url: filterUrl,
        dataType: 'json',
        cache: false,
        data: options,
        success: function(data) {
            $current.html('');
            if($.isEmptyObject(g_filter_get_products_ajax_data)){

                if(data.result === 1) {
                    $("#totalCnt").val(data.totalCnt);

                    $(".experience-text-d").text(getValueWordString($("#totalCnt").val(), 'result', 'htmlAttr', true));
                    $(".experience-text-m").text(getValueWordString($("#totalCnt").val(), 'result', 'htmlAttr', true));

                    if(data.catDisplay !== undefined && data.catDisplay !== ''){
                        $('.filter_cat_title').html(data.catDisplay).show();
                    }
                    else{
                        $('.filter_cat_title').html('').hide();
                    }

                    initiateFilterProducts($current, data.data);

                    // for productized product, the count is nonSoldOut count
                    if(options.pdzMasterPid !== undefined && data.totalNonSoldOutCount!==undefined){
                        $(".js-totalTilesCnt").html(data.totalNonSoldOutCount);
                    }else{
                        $(".js-totalTilesCnt").html(data.totalCnt);
                    }

                    if(options.pdzMasterPid !== undefined ){
                        var header = $('.productization_vendor_list .filter_additional_header');
                        if(header.length>0){
                            var c=0;
                            if($.isArray(data.data)){
                                var c = data.data.length;
                            }

                            var occupation = header.attr('data-occupation');
                            var occupations = header.attr('data-occupations');

                            var header_str = c + ' ' + (c>=2?occupations:occupation);
                            header.html(header_str);
                        }
                    }

                    if(g_is_mobile || g_filter_from_mobile_menu){
                        $("#filterProductsCnt").text(": "+data.totalCnt + " " + "Listings");
                        $("#filterProductsCnt").attr("data-value",data.totalCnt);
                    }

                    if(thisTrigger !== "sortBy"){
                        getFilterOptions(thisTrigger);
                    } else {
                        filterHideLoading(); // we filterHideLoading() in getFilterOptions
                    }

                    if(data.totalCnt == 0){
                        $('.js-zero-search-results').html(data.zeroSearchResults);
                        $(".js-filter-no-results").show();
                    }else{
                        $(".js-filter-no-results").hide();

                    }

                    if(typeof(data.specialOfferProducts) !== undefined) {
                        g_special_offer_products = data.specialOfferProducts;
                        renderSpecialOfferProductsHtml(g_special_offer_products);
                        populateSpecialOffersLocalStorage();
                    } else {
                        g_special_offer_products = [];
                    }
                } else {
                    filterHideLoading(); // we filterHideLoading() in getFilterOptions
                }
                populateLocalStorage();
            }
            else {
                console.log("ajax to get queue filter products ");
                ajaxFilterProducts(g_filter_get_products_ajax_data, thisTrigger);
                g_filter_get_products_ajax_data = {};
            }
        },
        error: function(msg) {
            //window.location = link;
            console.log("error");
            filterHideLoading();
        }
    });
}


function getFilteredProducts(options, trigger, pCntOnly){
    if(pCntOnly === undefined){
        pCntOnly = false;
    }

    if(trigger === undefined){
        trigger = "";
    }

    if(pCntOnly){
        var filterUrl      = "/m/filter/getProductsFromFilter";
        $("#filter .js-apply").addClass("disabled");
        options.filterOnlyType = g_filter_only_type;
        options.cntOnly        = 1;
        options.mobileMenu     = g_filter_from_mobile_menu ? 1 : 0;
        $.ajax({
            type: "GET",
            url: filterUrl,
            dataType: 'json',
            cache: false,
            data: options,
            success: function(data) {

                if(data.result === 1){
                    $("#filter .filter-result-cnt").slideDown();
                    $("#filterProductsCnt").text(": "+data.totalCnt + " " + "Listings");
                    $("#filterProductsCnt").attr("data-value",data.totalCnt);
                    getFilterOptions();
                }

                if(data.totalCnt > 0){
                    $("#filter .js-apply").removeClass("disabled");
                }
                filterHideLoading();

            },
            error: function(msg) {
                $("#filter .js-apply").removeClass("disabled");
                filterHideLoading();
            }
        });
    }else{

        if (g_filter_get_products_ajax !== "" &&
            g_filter_get_products_ajax.readyState !== undefined &&
            g_filter_get_products_ajax.readyState !== 4
        ){
            console.log("queue the ajax requests");
            g_filter_get_products_ajax_data = options;
            return false;
        }else{
            ajaxFilterProducts(options, trigger);
        }

    }
}
//***************************** Filter codes ********************************

//*******************************************
// get the jquery object for a product
//*******************************************
function get_product_dom(product, template_obj, show_celebrity, urlAppended, outer_html){
    var siteColors = {"topNavigationButtonColor":"#FFFFFF","overlayTextColorHexCode":"#FFFFFF","mobileTextBackgroundColor":"","primary":"#cf4500","primary2":"#fd6f3a","border":"#b4b0a9","background":"#f6f3ef","warning":"#d1282d","charcoal":"#3b3935","white":"#ffffff","black":"#141413","red":"#d1282d","grey-ef":"#f6f3ef","orange-c":"#cf4500","orange-d":"#d93c02","grey-f2":"#f2f2f2","blue":"#2d87d9","green-d":"#18a487","purple":"#793cd6","auctionTextMin":"#fd6f3a","auctionTextHour":"#8cba2d","bottomCatNav":"#d5d1c9","headerMenuLevelMenuBar":"#b4b0a9","headerMenuLevelMenuLabelHover":"#cf4500","topWelcomeShopping":"#3b3935","sweepstakeHistoryBackground":"#d5d1c9","filterTimeRangeHighlight":"#b4b0a9","emailThemeColor":"#141413","emailButtonColor":"#cf4500","headerNavColor":"#ffffff","topNavigationColor":"#141413","primaryButtonBackground":"#cf4500","primaryButtonFontColor":"#ffffff","emailHeaderColor":"#141413","emailFooterColor":"#141413","bd1":"#141413","bd2":"#b4b0a9","bd3":"#ffffff","bd4":"#3b3935","bg1":"#141413","bg2":"#f6f3ef","bg3":"#ffffff","bg4":"#3b3935","bgFooter":"#141413","c1":"#141413","c2":"#676561","c3":"#ffffff","c4":"#3b3935","c5":"#b4b0a9"};

    if ( typeof(show_celebrity) === "undefined") { show_celebrity = false;  }
    if ( typeof(outer_html)     === "undefined") { outer_html = false;  }


    if ( urlAppended === undefined ) { urlAppended = ""; }
    if (g_renderedTileIndex != 0 && g_renderedTileIndex >= g_cat_pro_col_index){
        var mayNotNeedLazyLoad = true;
    } else {
        var mayNotNeedLazyLoad = false;
    }

    //var product_html = template_obj.html();
    var product_dom = template_obj.clone();
    var alt   = '';
    var title = '';

    if(product) {
        alt   = product.pDisplayName;
        title = product.pDisplayName;

        if(product.geographicName) {
            alt   = alt + ': In ' + product.geographicName;
            title = product.pDisplayName + ': In ' + product.geographicName;
        }
    }

    var $product_tile = product_dom.find(".js-product-title");

    $product_tile.attr('createdByJs', 1);
    $product_tile.attr('href', (g_is_mobile && !g_isTablet ? '/m' : '') + product.productUrl + urlAppended);
    $product_tile.attr('pid', product.productId);
    $product_tile.attr('displayOrderPoints', product.displayOrderPoints!==undefined?product.displayOrderPoints:'');
    $product_tile.attr('ori_displayOrderPoints', product.ori_displayOrderPoints!==undefined?product.ori_displayOrderPoints:'');
    $product_tile.attr('displayOrder', product.displayOrder!==undefined?product.displayOrder:'');
    $product_tile.attr('isActiveAuction', product.isActiveAuction!==undefined?product.isActiveAuction:'');


    // adobe tracking used by siteId 5 but add on all sites for simplicity
    $product_tile.attr('offerName', product.pDisplayName);
    $product_tile.attr('merchantName', product.displayName);
    $product_tile.attr('offerCategory', product.primary_catName);
    $product_tile.attr('contentCity', product.geographicName.substring(0, product.geographicName.indexOf(',')));

    product_dom.find(".heart_img.wishlist").css('visibility', (product.showWishListIconOnTile == 1 && product.showSocialLinks == 1 ? 'visible' : 'hidden'));
    product_dom.find(".heart_img.wishlist").attr('offerName', product.pDisplayName);
    product_dom.find(".heart_img.wishlist").attr('merchantName', product.displayName);
    product_dom.find(".heart_img.wishlist").attr('offerCategory', product.primary_catName);
    product_dom.find(".heart_img.wishlist").attr('contentCity', product.geographicName.substring(0, product.geographicName.indexOf(',')));

    if(product.isActiveAuction=='1'){
        product_dom.find(".heart_img.wishlist").addClass('watchlist');
    }
    else{
        product_dom.find(".heart_img.wishlist").removeClass('watchlist');
    }

    if(product.isActiveAuction=='1'){
        product_dom.find(".heart_img.wishlist").addClass('watchlist');
    }
    else{
        product_dom.find(".heart_img.wishlist").removeClass('watchlist');
    }

    if(g_cat_pro_col_index < g_no_lazysize_img_cnt || (mayNotNeedLazyLoad && isImgCache(product.productThumbImgSrc))){
        product_dom.find('.product_img').removeClass("js-lazyload");
        product_dom.find('.product_img').attr('src', product.productThumbImgSrc);   //   '/media/celebrities/971/products/santana_record_302x246.jpg'
        product_dom.find('.product_img').attr("alt", alt);
        product_dom.find('.product_img').attr("title", title);
    }else{
        product_dom.find('.product_img').attr('data-src', product.productThumbImgSrc);   //   '/media/celebrities/971/products/santana_record_302x246.jpg'
        product_dom.find('.product_img').attr("alt", alt);
        product_dom.find('.product_img').attr("title", title);
    }

    if(show_celebrity && product.showVendorImageOnTile == 0) {
        show_celebrity = false;
    }

    if (product.sellable == 0 && product.hidePriceOnTile == 0) { // VP-21379
        product_dom.find('.product_title').hide();
        product_dom.find('.product_price').css('text-decoration', 'underline');
    }


    product_dom.find('.celeb_img').attr('data-src', product.celebImgSrc ).css('display', (show_celebrity? 'block' : 'none'));  //  '/media/celebrities/998/j_cole_ifonly_177x177.jpg'

    product_dom.find('.heart_img').attr('pid', product.productId);
    if (product.wishlistStatus || wishlistProducts.indexOf(product.productId) > -1){
        product_dom.find('.heart_img').addClass('listed');
        product_dom.find('.heart_img').attr('di-id', 'Remove From Wishlist');
    }
    else{
        product_dom.find('.heart_img').removeClass('listed');
        product_dom.find('.heart_img').attr('di-id', 'Add To Wishlist');
    }

    if (product.buyType !== undefined && product.buyType !== '') {
        if (product.buyType === 'Auction' || product.buyType === 'Auction Closed') {
            product_dom.find('.buy_type').addClass('auction');
            if(typeof(product.lazyLoaded) != undefined && product.lazyLoaded == 1) {
                product_dom.find('.buy_type').css('display', 'flex');
                product_dom.find('.buy_type_text span').html(product.buyType);

                if(product.buyTypeCss !== undefined){
                    product_dom.find('.buy_type').addClass(product.buyTypeCss);
                }

                var banner_color = siteColors.black;
                if (product.buyTypeCss === 'grey') {
                    banner_color = '#999999';
                } else if (product.buyTypeCss === 'light-grey') {
                    banner_color = siteColors['grey-f2'];
                }
                product_dom.find('.buy_type_text').css('background-color', banner_color);
                product_dom.find('.buy_type polygon').css('fill', banner_color);
            }

        } else if (! product.hasMasterCardType) {
            product_dom.find('.buy_type').css('display', 'flex');
            product_dom.find('.buy_type_text span').html(product.buyType);

            if(product.buyTypeCss !== undefined){
                product_dom.find('.buy_type').addClass(product.buyTypeCss);
            }

            var banner_color = siteColors.black;
            if (product.buyTypeCss === 'grey') {
                banner_color = '#999999';
            } else if (product.buyTypeCss === 'light-grey') {
                banner_color = siteColors['grey-f2'];
            }
            if (product.productTypeId == '30') { // blog post banner text
                product_dom.find('.product_img_container').removeClass('sg-c-3');
                product_dom.find('.product_img_container').addClass('sg-c-1');
            }
            product_dom.find('.buy_type_text').css('background-color', banner_color);
            product_dom.find('.buy_type polygon').css('fill', banner_color);
        }
    }

    if (product.auctionText !== undefined && product.auctionText !== '') {
        product_dom.find('.buy_type').addClass('auction');
        product_dom.find('.auction_type').css('display', 'flex');

        if(typeof(product.lazyLoaded) != undefined && product.lazyLoaded == 1) {
            product_dom.find('.auction_text span').html(product.auctionText);

            if(product.buyTypeCss !== undefined){
                product_dom.find('.auction_text').css('background-color', product.auctionCss);
            }
        }
    }


    if (product.bottomText !== undefined && product.bottomText !== '') {
        product_dom.find('.bottom_banner').css('display', 'flex');


        product_dom.find('.bottom_banner_text span').html(product.bottomText);

        if(product.bottomCss !== undefined){
            product_dom.find('.bottom_banner_text').css('background-color', product.bottomCss.backgroundColor);
        }

    }

    product_dom.find('.product_stars').attr('data-celebaveragerating', '');

    if(product.occasionTitleDisplay !== null && $.trim(product.occasionTitleDisplay) !== ''){
        product_dom.find('.occasion_banner_container ').html(get_occasions_html(product.occasionTitle));
    }

    if (parseInt(product.isBenefit)) { //VP-22086
        if (product.preferredCatDisplayName){
            product_dom.find('.product_celeb_name').html(product.preferredCatDisplayName).css('visibility', 'visible');
        } else if (product.preferredCatName) {
            product_dom.find('.product_celeb_name').html(product.preferredCatName).css('visibility', 'visible');
        } else {
            product_dom.find('.product_celeb_name').html(product.primary_catName).css('visibility', 'visible');
        }

    } else {
        product_dom.find('.product_celeb_name').html(product.displayName).css('visibility', (product.showVendorNameOnTile == 1 ? 'visible' : 'hidden'));          // display name is celebrity name
    }

    var location_txt = (product.productization == 1 ? "Multiple locations" : (product.geographicName ? product.geographicName : '&nbsp;'));
    var digital_productTypeIds = [14,12,23];
    if (product.productTypeId==10 && $.inArray(product.child_productTypeId*1, digital_productTypeIds)!=-1) {
        location_txt = "Available online"    }
    product_dom.find('.product_location').html(location_txt);


    //physical/physical personalized products, do not show location
    if($.inArray(product.productTypeId*1, [1, 18])>=0 || parseInt(product.isBenefit)){
        product_dom.find('.product_location').hide();
    }
    else{
        product_dom.find('.product_location').show();
    }

    product_dom.find('.product_title h3').html( product.pDisplayName);

    var comingSoon = false;
    if (product.isAuction == 1 && product.activeAuctions == 1) {

    } else {
        var d = new Date();
        var currentTime = d.getTime();

        if (product.startBookTime != undefined && product.startBookTime != '0000-00-00 00:00:00' && product.startBookTime != null && product.startBookTime != '') {
            var startBookTime = new Date(product.startBookTime);
            if(startBookTime.getTime() > currentTime) {
                comingSoon = true;
            }
        } else if (product.isSeriesPattern != 1 && product.eventTime != undefined && product.eventTime != '0000-00-00 00:00:00' && product.eventTime != null && product.eventTime != '') {
            if (product.maximumBookingLeadTimeDays != undefined && product.maximumBookingLeadTimeDays > 0 ) {
                var eventTimePst = product.eventTimePst != undefined ? new Date(product.eventTimePst) : new Date(product.eventTime);
                eventTimePst.setDate(eventTimePst.getDate() - product.maximumBookingLeadTimeDays);

                if (currentTime < eventTimePst.getTime()) {
                    comingSoon = true;
                }
            }
        }
    }

    if(product.hidePriceOnTile < 1 || comingSoon) {
        product_dom.find('.product_price').html( product.displayPrice );
    }

    if(product.hyattPoints !== null && $.trim(product.hyattPoints) !== '' && product.hidePriceOnTile < 1 && !comingSoon) {
        if(product.Hyatt_redemptionOnly > 0) {
            product_dom.find('.product_price').html('');
        }

        if(product.hidePriceOnTile < 1) {
            product_dom.find('.hyatt_points').html( "("+product.hyattPoints+")" );
        } else {
            product_dom.find('.hyatt_points').html('');
        }
    }

    if(outer_html){
        return product_dom[0].outerHTML;
    }else{
        return product_dom.html();
    }


}


function get_occasions_html(txt){
    var html = '';

    if($.trim(txt)!==''){
        html += "<div class=\"occasion_banner sg-occ-banner1 mobile\">    <span class=\"occasion_banner_text sg-bg-3 sg-c-1\">_title_<\/span><\/div>";
        html = html.replace('_title_', txt);

        //html +=  "<div class='occasion_banner'>";
        //    html += "<span class='occasion_banner_text sg-bg-3'>" + $.trim(txt)+ "</span>";
        //html += "</div>";

    }

    return html;
}


//get_productization_product_dom
function get_productization_product_dom(product, template_obj){

    //var product_html = template_obj.html();
    var product_dom = template_obj.clone();

    product_dom.find('div.productization_product').attr('pid', product.productId);;
    product_dom.find(".luminary_img").attr("data-src", product.celebImgSrc);
    product_dom.find("a.luminary_img_box").attr("href", product.celebrityUrl).attr('celebId',  product.celebId);
    product_dom.find(".luminary_name").html(product.displayName).attr('data-celebId', product.celebId);
    product_dom.find(".charity_name").html(product.charityName).attr('data-charityId', product.charityId);
    product_dom.find(".bio_row").html(product.celebDescription);
    product_dom.find(".quote_row").html(product.vendorSalesPitch);

    if(product.geographicName!=='' || product.locationCity!==''){
        //var location_array = [];
        //if($.trim(product.geographicName)!=''){location_array.push($.trim(product.geographicName));}
        //if($.trim(product.locationCity)!=''){location_array.push($.trim(product.locationCity));}
        //var location_str = location_array.join(',');

        var location_str = '';
        if ($.trim(product.geographicName) !== '') {
            location_str=$.trim(product.geographicName);
        }
        else if($.trim(product.locationCity)!==''){
            location_str=$.trim(product.locationCity);
        }

        if(location_str!==''){
            product_dom.find('.location_td span').html(location_str);
            product_dom.find('.location_td').show();
        }
    }


    if (! empty(product.peoplePerItemMax)) {
        var guest_str = 'Up to ' + product.peoplePerItemMax + ' ' + (product.peoplePerItemMax>1?'people':'person');
        product_dom.find('.guests_td span').html(guest_str);
        product_dom.find('.guests_td').show();
    }


    var duration = '';
    if (product.durationMinutesMin_display !== '' || product.durationMinutesMax_display !== ''){
        var duration_array = [];
        if($.trim(product.durationMinutesMin_display) !== ''){
            duration_array.push($.trim(product.durationMinutesMin_display));
        }
        if ($.trim(product.durationMinutesMax_display) !== '' &&
            $.trim(product.durationMinutesMax_display) !== $.trim(product.durationMinutesMin_display))
        {
            duration_array.push($.trim(product.durationMinutesMax_display));
        }
        duration = duration_array.join(' - ');
    }
    else if ($.trim(product.durationMinutes_display) !== '') {
        duration = $.tirm(product.durationMinutes_display);
    }

    if (duration !== ''){
        product_dom.find('.duration_td span').html(duration);
        product_dom.find('.duration_td').show();
    }

    product_dom.find('.price_text').html(product.displayPrice);

    product_dom.find('.js-productId-to-add').val(product.productId);

    //update following button:
    var follow_btn = product_dom.find('.button.follow');
    follow_btn.attr('data-id', product.celebId);
    var following = false;
    for(var i=0; i<g_followingCelebIds.length; i++){
        if(product.celebId == g_followingCelebIds[i] ){
            following = true;
            break;
        }
    }

    if(following){
        follow_btn.addClass('following').removeClass('primaryButton').addClass('secondaryButton');
        follow_btn.find('.greenCheck').show();
        follow_btn.find('.following-text').html("Following");
        follow_btn.attr('aria-label', "UNFOLLOW");
        follow_btn.attr('alt', "UNFOLLOW");
        follow_btn.attr('title', '');
    }
    else{
        follow_btn.addClass('following').addClass('primaryButton').removeClass('secondaryButton');
        follow_btn.find('.greenCheck').hide();
        follow_btn.find('.following-text').html("Follow");
        follow_btn.attr('aria-label', "Follow");
        follow_btn.attr('alt', "Follow");
        follow_btn.attr('title', g_follow_button_hover_text);
    }

    var soldout = false;

    product_dom.find(".waitlist-button").attr('pid', product.productId);
    product_dom.find(".add_to_bag_btn").attr('pid', product.productId);
    if(soldout){
        product_dom.find(".add_to_bag_btn").hide();
        product_dom.find(".waitlist-button").show();
    }
    else{
        product_dom.find(".add_to_bag_btn").show();
        product_dom.find(".waitlist-button").hide();
    }


    return product_dom.html();

}


// get the jquery object for a collection
function get_collection_dom(collection, template_obj, outer_html){

    if ( typeof(outer_html) === "undefined") {    outer_html = false;  }

    var collection_html = template_obj.html();
    var collection_dom = $(collection_html);

    collection_dom.attr('href', (g_is_mobile ? '/m' : '') + collection.collectionUrl);
    collection_dom.find('.collection_img').attr('data-src', collection.collectionImageSrc);   // collection.collectionImageSrc '/media/celebrities/971/products/santana_record_302x246.jpg'

    collection_dom.find('.collection_title').html( collection.title );         // collection.catDisplayName 'SAN FRANCISCO is really a beautiful city. do you believe it? come and have a visit!'
    collection_dom.find('.collection_description').html( collection.subtitle );    //    'Inspired Experiences with Local Luminaries'

    if(outer_html){
        return collection_dom[0].outerHTML;
    }else{
        return collection_dom.html();
    }
}

function get_ad_dom(ad, template_obj, outer_html ){

    if ( typeof(outer_html) === "undefined") {    outer_html = false;  }

    var ad_html = template_obj.html();
    var ad_dom = $(ad_html );

    if (ad.itemTargetUrl !== '') {
        ad_dom.attr('href', ad.itemTargetUrl);
    }
    ad_dom.find('.tile_img').attr('data-src', ad.imgSource);   //

    if(outer_html){
        return ad_dom[0].outerHTML;
    }else{
        return ad_dom.html();
    }

}

function can_use_facebook_tracking(){
    if(g_allowFacebookTracking) {
        return (g_thisHost === 'www') && (typeof(facebooktrack) === 'function');
    } else {
        return false;
    }
}


// event handler for the 'add to bag' button on Productized PDP page
function add_productized_product_to_cart(add_btn_dom){
    var $add_btn = $(add_btn_dom);
    var pid_str = $.trim($add_btn.siblings(".js-productId-to-add").val());
    if (g_is_guest) {
        if (pid_str !== "") {
            $("#signUp-dialog-called-from").val("buynow-button");
            g_guest_productId = pid_str;
        }
        signupDialog(1, false, {login:true});
    } else {
        if (pid_str !== "") {
            $add_btn.parents(".js-productization-add-to-bag").submit();
        }
    }
}

function getFilterOptionsObj(){
    var options = {catString:"", geoString:"", ttpString:"", pppString:"",
                   ppiString:"", lumString:"", chaString:"", keyword:"", fromDate:"",
                   shpString:"", pdzMasterPid:"", display:"", contentString:"", programString:"", cardString:"",
                   toDate:"", weekDays:"", weekNights:"", weekends:"", notIncludeUnSure:"",  sortBy:"",
                   partnerCategoryFilter: ""};
    var mobile = g_is_mobile || g_filter_from_mobile_menu; 
    if(mobile){
        var selector = "#filter ";
    }else{
        var selector = "#filterPage ";
    }

    if($(selector+".js-price-slider.filter-selected").length === 1 && $(selector+".js-price-slider.filter-selected").attr("data-value") !== "1>"){
        options.pppString += $(selector+".js-price-slider.filter-selected").attr("data-value");
    }

    if(mobile && $(selector+".js-filter-disc-item.filter-selected").length === 1){
        options.catString += $(selector+".js-filter-disc-item.filter-selected").attr("data-value") + ",";
    }

    if(($(selector+".js-filter-partner-category.filter-selected").length === 1 && partnerCategoryId) || ! partnerCategoryId){
        options.partnerCategoryFilter = true;
        if (partnerCategoryId && ! options.shpString) {
            options.shpString = partnerCategoryId.toString() + ",";
        }
    }

    if($(selector+".js-filter-keyword.filter-selected").length === 1){
        options.keyword    = $(selector+".js-filter-keyword.filter-selected").attr("data-value");
    }

    /*
    if($(selector+".js-filter-collection.filter-selected").length == 1){
        options.shpString    = $(selector+".js-filter-collection.filter-selected").attr("data-value");
    }
    */

    
    $(selector+"ul li.filter-selected").each(function(){
        if($(this).hasClass("js-filter-location") && $(this).attr("data-value")){
            // children all location or parent without children all location (Canada) or child if not all checked
            if ($(this).hasClass("js-filter-children-all")
                || $(this).hasClass("js-filter-no-children")
                || ($(this).hasClass("js-filter-parent") && ! $(this).find(".js-filter-children-all").length)
                || ($(this).hasClass("js-filter-children") &&
                    ($(this).siblings(".js-filter-children-all").length || (! $(this).siblings(".js-filter-children-all").length && $(this).siblings(".js-filter-children").length !== $(this).siblings(".js-filter-children.filter-selected").length)))
            ) {
                if(! hasValueInCommaSeparatedString(options.geoString, $(this).attr("data-value"))){
                    options.geoString += $(this).attr("data-value") + ",";
                }
            }
        }else if($(this).hasClass("js-filter-contentType") && $(this).attr("data-value")) {
            if ($(this).hasClass("js-filter-children-all")
                || $(this).hasClass("js-filter-no-children")
                || ($(this).hasClass("js-filter-parent") && ! $(this).find(".js-filter-children-all").length)
            ) {
                if (! hasValueInCommaSeparatedString(options.contentString, $(this).attr("data-value"))) {
                    options.contentString += $(this).attr("data-value") + ",";
                }
            } else if ($(this).hasClass("js-filter-children")
                && ($(this).siblings(".js-filter-children-all").length || (! $(this).siblings(".js-filter-children-all").length && $(this).siblings(".js-filter-children").length !== $(this).siblings(".js-filter-children.filter-selected").length))
            ) {
                if (! hasValueInCommaSeparatedString(options.programString, $(this).attr("data-value"))) {
                    options.programString += $(this).attr("data-value") + ",";
                }
            }

        }else if($(this).hasClass("js-filter-people")){
            if(! hasValueInCommaSeparatedString(options.ppiString, $(this).attr("data-value"))){
                options.ppiString += $(this).attr("data-value") + ",";
            }
        }else if($(this).hasClass("js-filter-collection")){
            if(! hasValueInCommaSeparatedString(options.shpString, $(this).attr("data-value")) && options.partnerCategoryFilter){
                options.shpString += $(this).attr("data-value") + ",";
            }
        }else if($(this).hasClass("js-filter-cardType")){
            if(! hasValueInCommaSeparatedString(options.cardString, $(this).attr("data-value"))){
                options.cardString += $(this).attr("data-value") + ",";
            }
        }else if($(this).hasClass("js-filter-category")){
            if(! hasValueInCommaSeparatedString(options.catString, $(this).attr("data-value"))){
                options.catString += $(this).attr("data-value") + ",";
            }
        }
    });


    if($(selector+".js-filter-from").attr("selectedTime") === undefined){
        options.fromDate = "";
        options.toDate   = "";
    }else{
        options.fromDate = $(selector+".js-filter-from").attr("selectedTime").trim();
        options.toDate   = $(selector+".js-filter-to").attr("selectedTime").trim();
    }

    if($(selector+".js-filter-availability.filter-selected").length === 1){
        options.date = $(selector+".js-filter-availability.filter-selected").attr("data-value");
    }else{
        options.date = "";
    }


    if($(selector+".js-filter-productization-master-pid.filter-selected").length === 1){
        options.pdzMasterPid = $(selector+".js-filter-productization-master-pid.filter-selected").attr("data-value");
    }else{
        options.pdzMasterPid = "";
    }

    //options.notIncludeUnSure    = ($(selector+".js-availability-type").prop("checked"))?0:1;
    options.catString = options.catString.slice(0,-1);
    //options.pppString = options.pppString.slice(0,-1);
    options.geoString     = options.geoString.slice(0,-1);
    options.ttpString     = options.ttpString.slice(0,-1);
    options.ppiString     = options.ppiString.slice(0,-1);
    options.lumString     = options.lumString.slice(0,-1);
    options.chaString     = options.chaString.slice(0,-1);
    options.cardString    = options.cardString.slice(0,-1);
    options.contentString = options.contentString.slice(0,-1);
    options.programString = options.programString.slice(0,-1);

    return options;
}

function getFilterDataNameParent(name) {
    if (name == 'program') {
        return 'contentType';
    }
    return name;
}

function getFilterDataNameChild(name) {
    if (name == 'contentType') {
        return 'program';
    }
    return name;
}

//*******************************************
function popUpOpen($obj){
    $obj.animate({opacity: 'show', height: 'show'}, 150);
}
//*******************************************
function popUpClose($obj){
    $obj.animate({opacity: 'hide', height: 'hide'}, 150);
}

function hasValueInCommaSeparatedString(string, value) {
    return string.split(",").includes(value);
}

//*******************************************
// *  action: (1) check
// *          (2) remove
//*******************************************
function actionBtnClickHandling($obj, action){
    if(action === undefined){
        action = "check";
    }

    if (! ($obj instanceof jQuery)) {
        return;
    }

    if(action === "check"){
        if($obj.hasClass("disabled")){
            return false;
        }else{
            $obj.addClass("disabled");
            if(g_is_mobile){
                if($obj.find(".btn-b").length > 0){
                    $obj.find(".btn-b").addClass("disabled");
                }
            }
            return true;
        }
    } else if (action === "remove"){
        $obj.removeClass("disabled");
        if(g_is_mobile){
            if($obj.find(".btn-b").length > 0){
                $obj.find(".btn-b").removeClass("disabled");
            }
        }
    }
}


//*******************************************
//*  Initiate calendar
//*******************************************
function draw_calendar_general($obj, timeSelectedCallBack, getCalendarCallBack) {

    var y = $obj.attr("data-y");
    var m = $obj.attr("data-m");
    var d = $obj.attr('data-d');                // not required. May be undefined.
    if(d === undefined){ d='';}
    var cid = ($obj.attr("data-vid") === undefined) ? '0' :$obj.attr("data-vid");
    var pid = ($obj.attr("data-master-pid") != undefined && $obj.attr("data-master-pid") != 0) ? $obj.attr("data-master-pid") : ($obj.attr("data-pid") === undefined) ? '0' :$obj.attr("data-pid");
    var needFirstAvailableDay   = ($obj.attr("data-nfad") === undefined) ? '1' : $obj.attr("data-nfad");

    var duration                = ($obj.attr("data-dm-x") && $obj.attr("data-dm-x") > 0) ? $obj.attr("data-dm-x") : (($obj.attr("data-dm")   === "")? 60: $obj.attr("data-dm"));
    var bookingLeadTime         = ($obj.attr("data-blm")  === "")? 0: (parseInt($obj.attr("data-blm"))/1440);
    var maximumBookingLeadTime  = ($obj.attr("data-mbld") === "")? 365: $obj.attr("data-mbld");
    var minutesBeforeBuffer     = ($obj.attr("data-mbb")  === undefined || $obj.attr("data-mbb") === "")? 0: $obj.attr("data-mbb");
    var doubleCal               = ($obj.attr("data-double-calendar") === undefined || $obj.attr("data-double-calendar") === "") ? 0 : $obj.attr("data-double-calendar");
    $obj.attr("data-mbb",minutesBeforeBuffer);
    var startYear    = ($obj.attr("data-start-year")    === undefined) ?"":$obj.attr("data-start-year");
    var startMonth   = ($obj.attr("data-start-month")   === undefined) ?"":$obj.attr("data-start-month");
    var seriesEvents = ($obj.attr("data-series-events") === undefined) ?0:$obj.attr("data-series-events");
    var needAvailOverride = ($obj.attr("data-avail-override") === undefined) ? 0 : $obj.attr("data-avail-override");
    var quantity   = ($obj.attr("data-quantity") === undefined) ? 0: $obj.attr("data-quantity");
    var number      = ($obj.attr("data-num")      === undefined) ? 0        : $obj.attr("data-num");
    var address     = $('.js-userAddress').length > 0 ? $('.p-form[data-num=' + number + ']').find('.js-userAddress').val() : '';

    if(timeSelectedCallBack === undefined || typeof(timeSelectedCallBack) !== typeof(Function)){
        timeSelectedCallBack = function(){
            console.log("You can add a callback function :)");
        };
    }

    var displayTimezone = 0;
    if(pid*1>0 && displayTimezone){
        $obj.find(".cal_timezone_msg").show();
    }
    else{
        $obj.find(".cal_timezone_msg").hide();
    }

    $.ajax({
        type: "POST",
        url: "/common/getCalendar",
        dataType: 'json',
        data: {year:y,month:m, day:d, celebId:cid, productId:pid, bookingLeadTime: bookingLeadTime, minutesBeforeBuffer:minutesBeforeBuffer,
               maximumBookingLeadTime:maximumBookingLeadTime, duration: duration, getFirstAvailableDay: needFirstAvailableDay,
               doubleCal: doubleCal, startYear:startYear, startMonth:startMonth,
               seriesEvents:seriesEvents, userId:g_userId, needAvailOverride:needAvailOverride, quantity: quantity, changeRequestOii: g_changeRequestOii,
               address: address
           },
        success: function(data) {
            if (data.result < 1) {
                alertEx(data.msg);
                return false;
            }

            if ($('#calendar-popUp .availability_override_div').attr('data-avail-override') !== undefined){
                if($('#calendar-popUp .availability_override_div').attr('data-avail-override') === 1){
                    $('#calendar-popUp .availability_override_div').show();
                } else {
                    $('#calendar-popUp .availability_override_div').hide();
                }
            }
        
            if(needFirstAvailableDay === '1'){
                $obj.attr("data-nfad","0");
                $obj.find(".cal-body").html(data.html);
                $obj.find(".cal-nav .month").html(monthNames[data.displayMonth-1]);
                $obj.find(".cal-nav .year").html("&nbsp;&nbsp;"+data.displayYear);
                $obj.attr("data-y", data.year);
                $obj.attr("data-year", data.firstAvailableYear);
                $obj.attr("data-m", data.month);
                $obj.attr("data-month", data.firstAvailableMonth);

                if (data.firstAvailableYear < data.year ||
                    data.firstAvailableMonth < data.month
                ){
                    $obj.find(".cal-nav .left img").css("visibility","visible");
                }

            }else{

                if(doubleCal == 1){
                    $obj.find(".js-cal-one .cal-body").html(data.html1);
                    $obj.find(".js-cal-one .month").html(data.displayMonth1);
                    $obj.find(".js-cal-one .year").html(data.displayYear1);
                    $obj.find(".js-cal-two .cal-body").html(data.html2);
                    $obj.find(".js-cal-two .month").html(data.displayMonth2);
                    $obj.find(".js-cal-two .year").html(data.displayYear2);
                }else{
                    $obj.find(".cal-body").html(data.html);
                }

            }

            //VP-14831
            if (data.html!=undefined) {
                var $html = $(data.html);
                var first_available = $html.find('.cal-day-box.active');
                if(first_available.length>0 && first_available.attr('data-month')*1>0){
                    $obj.find(".cal-nav  .month").html(monthNames[first_available.attr('data-month')*1-1]);
                }
            }

            //if(timeSelectedCallBack )
            $obj.bind("timeselected", function() {
                timeSelectedCallBack();
            });

            // selcted the selected date
            // if the selected date is in next month or previous month, we need to reload the calendar
            // and selected that date when new calendar is loaded
            if($obj.attr("data-click-date") !== undefined && $obj.attr("data-click-date") !== ""){
                $obj.find(".cal-body .day[data-date="+$obj.attr("data-click-date")+"]").addClass("selected");
                $obj.attr("data-click-date","");
            }

            if (g_duringAddressSave) {
                populateCalendarPopup();
            }

            setSelectedDay();

            $('.cal-day-box.day.active.selected').click();

            if(getCalendarCallBack !== undefined && typeof(getCalendarCallBack) === typeof(Function)){
                getCalendarCallBack();
            }

            if (data.year != 'undefined') {
                $obj.attr("data-y", data.year);
            }
            if (data.month != 'undefined') {
                $obj.attr("data-m", data.month);
            }

                        console.log('get calendar override:')
            console.log($obj.attr('data-avail-override'));
            console.log(data.needAvailOverride);
        }
    });
}

function populateCalendarPopup() {
    var number = $("#address-scheduling-dialog-googlemaps .address-number").val();
    var productId = $("#address-scheduling-dialog-googlemaps .address-productId").val();

    if (number != '' && productId != '') {
        var dateTime = $('.p-form[data-num=' + number + '][data-pid=' + productId + ']').find('.js-date-1').val();

        if (dateTime) {
            var split = dateTime.split(' ');
            if (split[0]) {
                var date = split[0].replace(/\-/g, '');
                $("#calendar-popUp .scheduledDatetimeDisplay_0").attr('data-date', date);
            }
        }
    }
}

function setSelectedDay() {
    if($("#calendar-popUp .scheduledDatetimeDisplay_0").length > 0 || $("#calendar-popUp .scheduledDatetimeDisplay_1").length > 0){
        var date0 = $("#calendar-popUp .scheduledDatetimeDisplay_0").attr("data-date");
        var date1 = $("#calendar-popUp .scheduledDatetimeDisplay_1").attr("data-date");
        $("#calendar-popUp .cal-body .day").each(function() {
            if($(this).attr("data-date") === date0 || $(this).attr("data-date") === date1){
                $(this).addClass("selected");
            }else{
                $(this).removeClass("selected");
            }
        });
    }
}



//*******************************************
//*  Used in Mobile
//*******************************************
function lazyLoadCleaning(type, forceClean){
    if(forceClean === undefined){
        forceClean = false;
    }
    if(g_currentListType != type || forceClean){  // starting a lazy load for a new type
        g_currentListType = type;
        $("#loadedPCnt").val(0);
        $("#loadedACnt").val(0);
        $("#loadedSCnt").val(0);
        $("#loadedBCnt").val(0);
        $("#needMoreTiles").val(1);
        g_category_products_and_collections = []; // re-initiate
        g_cat_pro_col_index                 = 0;
        g_special_offer_products            = [];
    }
}

//******************************************** Lazy Load Tiles  ****************************************************

//*******************************************
//*  Lazy Load Tiles
//*******************************************
function lazyLoadDataHandling(type, data){
    if (type === g_list_type.category){
        $("#loadedPCnt").val(parseInt($("#loadedPCnt").val())+parseInt(data.pCnt));
        $("#loadedACnt").val(parseInt($("#loadedACnt").val())+parseInt(data.aCnt));
        $("#loadedSCnt").val(parseInt($("#loadedSCnt").val())+parseInt(data.sCnt));
        $("#loadedBCnt").val(parseInt($("#loadedBCnt").val())+parseInt(data.bCnt));
        g_category_products_and_collections = g_category_products_and_collections.concat(data.data);
    } else {
        g_category_products_and_collections = g_category_products_and_collections.concat(data);

    }
    console.log('g_category_products_and_collections');
    console.log(g_category_products_and_collections);
    // add tiles in to queue

}
/****************************************************************************
 *
 * Used in mobile for lazy loading the remaining products
 * (1) Filter Page
 *
 ***************************************************************************/
function loadMoreTilesForFilter(){
    if( !g_downloading_new_tiles ){
        var params = getFilterOptionsObj();
        params.loadedTitleCnt   = g_category_products_and_collections.length;
        params.totalTileCnt     = $("#totalCnt").val();
        var url = g_is_mobile ? "/m/services/search/getNextBlocksProducts" : "/services/search/getNextBlocksProducts";
        jQuery.ajax({
            type: "GET",
            url:  url,
            dataType: 'json',
            cache: false,
            data: params,
            success: function (data) {
                if(data.result === 1){
                    lazyLoadDataHandling(g_list_type.filter, data.data);

                    if(data.data.length < g_block_pCnt * 2){
                        $("#needMoreTiles").val(0);
                    }else{
                        $(".js-view-more-box").show();
                    }

                    populate_product_collection_tiles(0, "", $('.js-tiles-sec'), true);
                    if(typeof(data.specialOfferProducts) !== undefined) {
                        g_special_offer_products = data.specialOfferProducts;
                        renderSpecialOfferProductsHtml(g_special_offer_products);
                        populateSpecialOffersLocalStorage();
                    }
                    //markWishlistedProducts(wishlistProducts);
                    g_downloading_new_tiles = false;
                    populateLocalStorage();
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
            }
        });
        g_downloading_new_tiles = true;
    }
}

// data is an array of items which can be used for views: _tile_product, _tile_collection, _tile_ad
// this function is used to paint the tile
// paint g_block_pCnt tiles
function populate_product_collection_tiles(catId, getVar, tiles_div, show_celebrity, params){
    if (show_celebrity === undefined) { show_celebrity = true; }

    if (show_celebrity) {
        show_celebrity = '1';
    }

    // url parameters appending
    // pass parrameter to PDP page/Productization PDP to narrow down the result sets
    var url      = window.location.pathname;
    var indexPos = url.indexOf("/options");
    var urlAppended = "";
    var lastChar = url.substr(-1); // Selects the last character
    if (lastChar !== '/') {         // If the last character is not a slash
       url = url + '/';            // Append a slash to it.
    }

    if(indexPos !== -1){
        //urlAppended = "/options/";
        var url = url.substring(indexPos);
        var re = new RegExp("perPersonPrice"+"\/([^\/]*)\/", 'i');
        var m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("peoplePerItem"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("sortBy"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("category"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("location"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("cardType"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("contentType"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("program"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("date"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        re = new RegExp("partnerCategoryFilter"+"\/([^\/]*)\/", 'i');
        m  = url.match(re);
        if(m !== null){
            urlAppended += m[0];
        }
        if(urlAppended !== ""){
            urlAppended = "/options/" + urlAppended;
        }
    }


    // ajax to load more tiles
    // loadTilesFromAjax is defined in
    // (1) category  standalone
    // (2) filter
    if($("#needMoreTiles").val() == 1 && g_category_products_and_collections.length < ( parseInt(g_cat_pro_col_index) + parseInt(g_block_pCnt)*2 ) ){

        if(g_currentListType === g_list_type.category){
            loadTilesForCat(catId, getVar);
        }else if(g_category_products_and_collections.length < $("#totalCnt").val()){
            loadMoreTilesForFilter();
        }
    }

    var startTimeTest = new Date().getTime();
    var appendHtml = "";

    var forNumber = (params !== undefined && params.renderNumber !== undefined)? params.renderNumber:g_block_pCnt;
    for(var i=0; i<forNumber; i++){

        if(typeof g_category_products_and_collections[g_cat_pro_col_index] === 'undefined'){
            $('.view-more-box').hide();
            break;
        }else{
            if(g_currentListType === g_list_type.category){
                var item = g_category_products_and_collections[g_cat_pro_col_index];
            }else{
                var item = {
                    type: g_category_products_and_collections[g_cat_pro_col_index].type,
                    data: g_category_products_and_collections[g_cat_pro_col_index]
                };
            }
            if(item.type==='product'){
                var product = item.data;
                appendHtml += get_product_dom(product, $('#product_template'), show_celebrity, urlAppended);

                //tiles_div.append(product_dom);
            }else if(item.type==='collection'){
                var collection = item.data;
                appendHtml += get_collection_dom(collection, $('#collection_template'));
                //tiles_div.append(collection_dom);
            }else if(item.type==='ads'){
                var ad = item.data;
                appendHtml += get_ad_dom(ad, $('#ad_template'));
                //tiles_div.append(ad_dom);
            }else if(item.type==='productization_product'){
                var product = item.data;
                appendHtml += get_productization_product_dom(product, $('#productization_product_template'));

            }else{
                var product = item.data;
                appendHtml += get_product_dom(product, $('#product_template'), show_celebrity, urlAppended);
                //tiles_div.append(product_dom);
            }
            g_cat_pro_col_index++;
        }

    }
    if(appendHtml !== ""){
        tiles_div.append(appendHtml);
        populateLocalStorage({tileIndexOnly:true});

        if(g_block_pCnt * 3 >= g_category_products_and_collections.length) {
            updateAuctionTile(); // This function is defined in _auction_product_js
        }

        // mark wishlist prosucts 4 seconds later
        setTimeout(function(){
            markWishlistedProducts(wishlistProducts);

            markActivatedProducts(activatedProducts);
        }, 5000);
    }

    var startTimeTestEnd = new Date().getTime();
    console.log("client render "+g_block_pCnt+ " titiles "+ (startTimeTestEnd - startTimeTest)/1000 +" seconds");

}

function updateAuctionTile() {
    var auctionPids = [];
    var auctionObject;
    $(".js-tiles-sec .tile_product, .js-block .tile_product, .layout_tiles_container .tile_product").each(function(index) {
        if($(this).find('.buy_type').hasClass('auction')) {
            auctionPids.push($(this).attr('pid'));
        }
    });

    if (! auctionPids.length) {
        return;
    }
    $.ajax({
        type: "POST",
        url: "/common/updateAuctionText",
        dataType: 'json',
        data: {pids: auctionPids},
        success: function(data) {
            if (data.result !== 1) {
                return;
            }

            auctionObject = data.value;
            $.each(auctionObject, function(key, value) {
                // Banner
                var ao = auctionObject[key];
                var $a = $('a[pid="' + key + '"]');
                $a.find('.buy_type').css('display', 'flex');
                $a.find('.buy_type_text span').html(ao.auctionBannerText);
                $a.find('.buy_type_text').css('background-color', ao.auctionBannerColor);
                $a.find('.buy_type svg polygon').css('fill', ao.auctionBannerColor); // for the slanted part of banner
                if (ao.displayPrice) {
                    $a.find('.product_price').html(ao.displayPrice);
                }
                if (ao.hyattPoints) {
                    $a.find('.hyatt_points').html("("+ao.hyatt_points+")");
                }

                // Auction countdown
                $a.find('.auction_type').css('display', 'flex');
                $a.find('.auction_text span').html(ao.auctionText);
                $a.find('.auction_text').css('background-color', ao.css);

                // Auction bottom banner, should always use auction_type
                $a.find('.bottom_banner').css('display', 'none');
            });
        }
    });
}
//*******************************************
// *
// * Used in mobile for lazy loading the remaining tiles
// * (1) Home Page
// * (2) Category Page
// *
//*******************************************
function loadTilesForCat(catId, getVar, pageId){

    lazyLoadCleaning(g_list_type.category);

    if(pageId === undefined){
        pageId = 0;
    }
    if( !g_downloading_new_tiles ){
        jQuery.ajax({
            type: "POST",
            url:  g_url_get_category_products_and_collections,
            dataType: 'json',
            data: {'catId': catId, 'get':getVar,
                   'loadedACnt':$("#loadedACnt").val(), 'loadedPCnt':$("#loadedPCnt").val(), 'loadedSCnt':$("#loadedSCnt").val(),
                   'loadedBCnt':$("#loadedBCnt").val(),
                   'pageId'    : pageId
            },
            success: function (data) {
                loadTilesDataHandling(data, catId);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //alert('Unknow Error. Please refresh and try again');
            }
        });
        g_downloading_new_tiles = true;
    }

}

function loadTilesDataHandling(data, catId, getVar){
    g_downloading_new_tiles = false;
    lazyLoadDataHandling(g_list_type.category, data);

    if(catId == g_homepage_catId){
        $('.collection_tiles').removeClass('loading');
    }else{
        $('.collection_tiles').closest(".tab").removeClass('loading');
    }


    if(data.data.length < g_block_pCnt * 2){
        $("#needMoreTiles").val(0);
    }else{
        $(".view-more-box").show();
    }


    if(data.trackProductList){
        setTimeout(function(){
            eval(data.trackProductList);
        }, 2000);
    }

    populate_product_collection_tiles(catId, getVar, $('.collection_tiles'), true);
    //markWishlistedProducts(wishlistProducts);
    $('.collection_tiles').closest(".tab").attr('data-loaded', '1');
    $('.collection_tiles').closest(".tab").attr('data-showing-serach', '0');
}

function loadingAnimation(show){

    if (show === 'show') {
        $("#page-member-signup-dialog-overlay").show();
        $("#page-member-signup-dialog-loading").show();
    } else {
        $("#page-member-signup-dialog-overlay").hide();
        $("#page-member-signup-dialog-loading").hide();
    }
}

/******************************************** Lazy Load Tiles  ****************************************************/

ioReady(function(){

    //opens member sign up

    $("#main").on('mouseover', '.heart_img.wishlist', function(){
        if($(this).hasClass('listed')) {
            if ($(this).hasClass('watchlist')) {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("REMOVE FROM WATCHLIST");
            } else {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Remove from wishlist");
            }
        } else {
            if ($(this).hasClass('watchlist')) {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Add to watchlist");
            } else {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Add to wishlist");
            }
        }
        $(this).siblings('.wishlist-main-con').show();
    }).on('mouseout', '.heart_img.wishlist', function() {
        $(this).siblings('.wishlist-main-con').hide();
    });

    $("#main").on('focus', '.heart_img.wishlist', function(){
        if($(this).hasClass('listed')) {
            if ($(this).hasClass('watchlist')) {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("REMOVE FROM WATCHLIST");
            } else {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Remove from wishlist");
            }
        } else {
            if ($(this).hasClass('watchlist')) {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Add to watchlist");
            } else {
                $(this).siblings('.wishlist-main-con').find('.wishlist-text').text("Add to wishlist");
            }
        }
        $(this).siblings('.wishlist-main-con').show();
    }).on('focusout', '.heart_img.wishlist', function() {
        $(this).siblings('.wishlist-main-con').hide();
    });

    if(!g_is_mobile && !g_is_tablet) {
        $('#main').on('mouseover', '.product_img_container, .collection_img_container.js-cat-gradient', function() {
            $(this).find('.gradient-con').show();
        }).on('mouseout', '.product_img_container, .collection_img_container.js-cat-gradient', function() {
            $(this).find('.gradient-con').hide();
        });
    }

    $('#sign-bar,  #nav,  .bag, #top-welcome, #buttons-nav, #member-signup-dialog, #bespokeForm, #modal-container, #vendor-signup-dialog, #mobile-header').on('click', '.js-signUp', function(event){
        event.preventDefault();

        if (g_forVendorSignUp && !$(this).hasClass('js-ignore-vendor-signup')){
            //$("#member-signup-dialog").hide();
            hide_ifonly_overlay("#member-signup-dialog");
            show_ifonly_overlay('.vendor_signup_overlay'); //displayOverlay('vendor-signup-dialog');
            return false;
        }
        if ($("#signUp-dialog-called-from").val() !== 'wishlist') {
            $("#signUp-dialog-called-from").val(""); // clear action
        }
        //clearTimeout(autoPopupTimer);console.log("here");
        if ($("#login-email").val() !== ""){
            $("#User_emailAddress").val($("#login-email").val());
        }
        if ($(this).hasClass('js-shopping-bag')){
            if (g_uuidCheckout) {
                location.href = (g_is_mobile ? '/m' : '') + '/cart';
                return false;
            } else {
                $("#signUp-dialog-called-from").val('shopping-bag');
            }
        } else if ($(this).hasClass('js-from-login-form') && $("#signUp-dialog-called-from").val() !== 'wishlist') {
            $("#signUp-dialog-called-from").val('Login form');
        } else if ($(this).parent().attr('id') === 'buttons-nav' || $(this).hasClass('member-signup-btn')) {
            $("#signUp-dialog-called-from").val('Header');
        }
        console.log($(this));

        if($('#header-m #X-icon').is(':visible')){
            $('#header-m #X-icon').trigger('click');
        }

        signupDialog(1,1,{'button': $(this)});
        return false;
    });


    $('#sign-bar, #signup-dialog, #nav, .modal-container, #bespoke, #top-welcome, #buttons-nav, #vendorSignUp, #marketplace-home, #mobile-header').on('click', '.js-login', function(event){
        event.preventDefault();
        //clearTimeout(autoPopupTimer);
        if($(this).hasClass("bespokePage")){
            if($.trim($("#bespoke .willingToPay").val()) === ""){
                $("#bespoke .budget").show();
                return false;
            }
        }
        if ($(this).parent().attr('id') === 'buttons-nav' || $(this).hasClass('login-button')) {
            $("#signUp-dialog-called-from").val('Header');
        } else if ($(this).hasClass('js-from-signup-form') && $("#signUp-dialog-called-from").val() !== 'wishlist') {
            $("#signUp-dialog-called-from").val('Sign up form');
        }

        if($('#header-m #X-icon').is(':visible')){
            $('#header-m #X-icon').trigger('click');
        }

        signupDialog(1,1,{'button': $(this)});
        return false;
    });




    $("body, #nav, #header, #header-nav, #acct-popup-wrapper").on( 'click', ".js-member-access",function(){
        displayOverlay('closed-accessCode-dialog');
        return false;
    });

    $("body, #closed-accessCode-dialog").on( 'click', ".update-access-code",function(){
        var input = $("#closed-accessCode-dialog .access-code");
        if (input.val() === "" || input.val() === input.attr('default')) {
            displayError("#closed-accessCode-dialog .error-general", "Please enter an access code.");
            return false;
        }
        var accessCode = input.val();
        if (accessCode !== ""){
            accessCodeUpdate(accessCode);
        }
        return false;
    });

    $('.imageChild').on('mouseleave',".child-right-sec .add-to-bag",function() {
        var $button = $(this);
        if ($button.hasClass('checkout')) {
            if($button.hasClass("buyNow")){
                $button.html("Add to cart");
            }else{
                $button.html("SELECT"); // sweepstakes
            }

            $button.attr('href','#');
            $button.removeClass('checkout');
        }
    });



    $("#exposeMask").click(function(){
        if(g_active_popup !== "" && !g_forceLogin){
            $('#exposeMask').css("height", "100%");
            $('#container').css({height:"auto", overflow:"auto"});
            $('#body').css('overflow','visible');
            $('#exposeMask').fadeOut();
            $("#"+g_active_popup).fadeOut();
            if (g_active_popup === 'accesscode-add-dialog') {
                $("#accesscode-add-dialog .update-access-code-close .btn-w").html('Join Our Membership Waitlist'); // can be changed at bottom_js
            }
        }
        return false;
    });

    $('.modal-container').on('click', '.close, .js-close', function(){
        userAccessHide();
        return false;
    });

    // body does not work on checkout, #main does
    $("body, #main").on("click",".loginWithFacebookButton", function(e){
        //if ($('.mc_priceless_check:visible').length > 0 && $('.mc_priceless_check').prop('checked') === false) {
        //    displayError("#streamlineSignup_error", "Priceless Communications opt-in required for sign-up");
        //    return false;
        //}
        e.stopImmediatePropagation();
        $.post('/website/logPageView',{pageId:114}, function(){},'json');

        if (g_isMobileApp === 1 && g_vendorProfile === ""){
            if(g_uaType === 4) {
                window.webkit.messageHandlers.loginThroughFacebook.postMessage(JSON.stringify({url:window.location.href}));
            } else {
                Android.facebookLogin(window.location.href);
            }

            return false;
        }
        if($(this).hasClass("bespokePage")){
            if($.trim($("#bespoke .willingToPay").val()) === ""){
                $("#bespoke .budget").show();
                return false;
            }
        }
        if(g_chrome_iOS){
            var type = $(this).attr('type');
            if(type === "login"){
                $("#buttonByClickSource").html("<a href='#' class='new-signIn'>Log in with email</a>.");
            } else {
                $("#buttonByClickSource").html("<a href='#' class='email-signup'>SIGN UP WITH EMAIL</a>.");
            }
            userAccessHide();
            show_ifonly_overlay('.chrome_exempt_overlay');
            return false;
        }

        var fbLogin = $(this).attr('fbLogin');

        if (typeof(FB) === 'undefined' || FB === null) {
            alertEx("Login and signup with Facebook is not available due to your browser's current security settings.");
            return false;
        }

        $('*').css('cursor','wait');

        FB.login(function(response) {
            if (response.status === 'connected' && response.authResponse) {
                var accessToken   = response.authResponse.accessToken;
                var signedRequest = response.authResponse.signedRequest;
                FB.api('/me', 'get', {fields:"significant_other, id, first_name, middle_name, last_name, email, location{location}, hometown{location}, birthday"}, function(response) {
                    response.accessToken   = accessToken;
                    response.signedRequest = signedRequest;
                    response.fbLogin = fbLogin; //pass the info that this is a facebook login and not facebook sign up
                    var fbUrl = "/website/LoginWithFacebook";
                    if (g_vendorSignUp == 1){
                        fbUrl = "/website/LoginWithFacebook/from/vendorSignUp";
                    }
                    var postData = {response: response};
                    if (g_is_pickonePromo) {
                        postData.social_emailOptedIn = $("#social_emailOptedIn").attr('checked') ? 1 : 0;
                    }
                    if ($(".mc_priceless_check").length) {
                        postData.pricelessProgram = $(".mc_priceless_check").prop('checked') ? 1 : 0;
                    }
                    if ($(".mc_master_check").length) {
                        postData.mastercardProgram = $(".mc_master_check").prop('checked') ? 1 : 0;
                    }
                    $.ajax({
                        type:  "POST",
                        url:   fbUrl,
                        data:  postData,
                        async: true,
                        dataType: 'json'
                    }).done(function ( data ) {
                        if (data.result === 1) {
                            var redirectUrl = $("#redirectURL").val().trim();
                            //if (redirectUrl === '') {
                            //    redirectUrl = window.location.pathname + window.location.search + window.location.hash;
                            //}
                            if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                                redirectUrl = data.redirectUrl;
                            }

                            if (data.newUser === 1) {
                                ga('send', 'event', 'MemberActivity', 'Facebook Signup');
                                if(g_allowFacebookTracking) {
                                    fb_p('track', 'CompleteRegistration');
                                }
                                                                g_userId = data.userId;
                                callSignupTrackingCode();

                                if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
                                googleAnalyticsImage = new Image();
                                googleAnalyticsImage.src = 'https://www.googleadservices.com/pagead/conversion/995223985/?value=0&amp;label=VrOnCNe_ogQQsdPH2gM&amp;guid=ON&amp;script=0';
                                // $("#google-tracking").html('<img height="1" width="1" style="border-style:none;" alt="" src="https://www.googleadservices.com/pagead/conversion/995223985/?value=0&amp;label=VrOnCNe_ogQQsdPH2gM&amp;guid=ON&amp;script=0" onload = "location.reload();" />');
                                if (g_bespoke === '1'){
                                    slideToNextQuestion(6, 7);
                                    submitBespokeForm();
                                } else {
                                    if (redirectUrl !== '' && redirectUrl !== '#') {
                                        setTimeout(function() { window.location.href = redirectUrl; }, g_signup_timer);
                                    } else {
                                        setTimeout(function() { window.location.reload(); }, g_signup_timer);
                                    }
                                }
                            }
                            else {
                                ga('send', 'event', 'MemberActivity', 'Facebook Login');
                                if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
                                // If from vendor portal sign up and vendor email is verified, redirect to vendor profile page
                                if (data.vendorVerified === 1) {
                                    setTimeout(function() { location.href = "/profile/edit"; }, g_login_timer);
                                } else if (g_bespoke === '1'){
                                    slideToNextQuestion(6, 7);
                                    if (! empty(data.terms)) {
                                        showMemberTermsAndPrivacyDialog('bespoke', data.terms, data.termsTranslatedText);
                                    } else {
                                        submitBespokeForm();
                                    }
                                } else if (g_vendorProfile !== "") { // in vendor profile page
                                    $(".form-row .edit-block .facebook.defaultBox").hide();
                                    $(".form-row .edit-block .facebook.linkedBox").fadeIn();
                                    if($(".page-left-col").length === 1) {
                                        if($(".prg-block font").length > 0){
                                            $(".prg-block .prg-bar .complete-bar").css("width", data.percentNumber+"%");
                                            $(".prg-block font").text(data.percentNumber);
                                        }
                                        $(".page-left-col").find(".menu-social").removeClass("un-complete");
                                        $(".page-left-col").find(".menu-social").addClass("complete");
                                    }
                                } else {
                                    if (! empty(data.terms)) {
                                        var context = redirectUrl;
                                        if (g_page === 'cart.checkout') {
                                            context = data.cartItemCount > 0 ? 'gotoCart' : 'checkout'; // goto checkout / stay checkout
                                        }
                                        console.log('context: ' + context);
                                        showMemberTermsAndPrivacyDialog(context, data.terms, data.termsTranslatedText);
                                    } else {
                                        if (g_page === 'cart.checkout' && data.cartItemCount > 0) {
                                            // Items already in cart. Prompt with pop up
                                            // $("#checkout-login-cart-items").overlay().load();
                                            show_ifonly_overlay('.checkout_login_cart_items_overlay');
                                        } else {
                                            if (redirectUrl !== '' && redirectUrl !== '#') {
                                                setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
                                            } else {
                                                setTimeout(function() { location.reload(); }, g_login_timer);
                                            }
                                        }
                                    }
                                }
                            }
                        } else if (data.result === 2) {             // If facebook account does not have email (i.e. signed up with phone number)
                            $('#member-signup-dialog').css('z-index', '9998');
                            alertEx(data.msg);
                        } else if (data.result === 3) {
                            var redirectUrl = $("#redirectURL").val().trim();
                            if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                                redirectUrl = data.redirectUrl;
                            }
                            confirmEx(data.msg, "Warning",
                                function(){
                                    postData.linkAccount = 1;
                                    $.ajax({
                                        type:  "POST",
                                        url:   fbUrl,
                                        data:  postData,
                                        async: true,
                                        dataType: 'json'
                                    }).done(function (data2) {
                                        if (data2.result === 1) {
                                            if (redirectUrl !== '' && redirectUrl !== '#') {
                                                setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
                                            } else {
                                                setTimeout(function() { location.reload(); }, g_login_timer);
                                            }
                                        } else {
                                            alertEx(data2.msg);
                                        }
                                    });
                                },
                                function(){
                                    // do nothing for cancel
                                },
                                "OK",
                                "Cancel"                           );
                        } else {
                            alertEx(data.msg);                      // Sign up dialog will have higher z-index than alertEx.
                        }
                        $('*').css('cursor','default');
                    });
                });
            } else {
                $('*').css('cursor','default');
            }
        }, {scope:'public_profile, email, user_birthday, user_location, user_hometown'});
        return false;
    });

    
    $("body, .custom-form").on("click",".google-signinButton, .googleSigninButton", function(e){
        console.log('google signin button clicked');
        e.stopImmediatePropagation();
        $.post('/website/logPageView',{pageId:115}, function(){},'json');

        if(g_chrome_iOS){
            var type = $(this).attr('type');
            if(type === "login"){
                $("#buttonByClickSource").html("<a href='#' class='new-signIn'>Log in with email</a>.");
            } else {
                $("#buttonByClickSource").html("<a href='#' class='email-signup'>SIGN UP WITH EMAIL</a>.");
            }
            userAccessHide();
            show_ifonly_overlay('.chrome_exempt_overlay');
            return false;
        }

        if (g_isMobileApp === 1 ) {
            if(g_uaType === 4) {
                window.webkit.messageHandlers.loginThroughGoogle.postMessage(JSON.stringify({url:window.location.href}));
            } else {
                Android.googleLogin(window.location.href);
            }
            return false;
        }

        g_call_from = $(this).attr('type');
        if ($(this).hasClass("bespokePage")){
            if ($.trim($("#bespoke .willingToPay").val()) === ""){
                $("#bespoke .budget").show();
                return false;
            }
        }
    });

    // click event for the question mark (will be moved to popups/viewFile)
    $("#main").on("click",".phone",function(){
                    //questionPopUp($(this));
                return false;
    });

    //For accesibility
    var acc = '.tabbable, a, select, .button, .heart_img, .task-name, \
                .wishlist, .view-fp, .js-participants, \
                .pdp_question_mark, .delete, \
                .conversation_item, .conversation_compose_icon_container, .checkBox';

    $('body').on('keydown', acc, function(e) {
        var code = e.which;
        if (((code === 13) || (code === 32)) && !($(this).hasClass('fc-button'))) { //availablility calendar, no 'double click'
            //for navbar to peform the 'hover' action
            if(($(this).hasClass('wishlist') && !$(this).hasClass('heart_img') )|| $(this).hasClass('shop') || $(this).hasClass('myaccount') || $(this).hasClass('shopping')){
                e.preventDefault();
                $(this).mouseenter();
            }
            else {
                var $this = $(this);
                var tagName = $this.prop('tagName');

                // for Button, key press of space and enter will trigger click automatically
                // for link, key press of enter will trigger click automatically
                // VP-19892
                if(tagName=='BUTTON'){
                    return;
                }
                else if(tagName=='A' && code==13){
                    return;
                }
                else{
                    if(code==g_keycodes.space){
                        //e.preventDefault();                   // VP-20854
                        if($(this).is(':checkBox') ){
                            return;                             // vp-20788
                        }
                    }
                    $(this).click();
                }
            }
        }

        $('.js-filter-hint').attr('tabindex', '0');

        //able to tab through active days on calendar
        $('.cal-day-box.day.active').attr('tabindex', '0');

    });


    $('body').on('keydown', 'a.close', function(e){
        if(e.which == g_keycodes.enter){
            $(this).trigger('click');
        }
    })

    
//    $('#complete-signup-submit').click(function() {
//            var url = $("#redirectURL").val();
//            input = $("#complete-signup-password");
//            if(input.val() === '' || input.val() === input.attr('default-value')) {
//                displayError("#complete-signup-error","Please enter a password");
//                return false;
//            } else if(input.val().length < 7){
//                displayError("#complete-signup-error","Password must be at least 7 characters long");
//                return false;
//            }
//
//            $.post( '/m/website/completeSignUp',
//                $("#complete-signup-form").serialize(),
//                function (data){
//                    if (data.result === 1) {
//                        ga('send', 'event', 'Member Activity', 'Member Activity - Complete Sign Up for emailAddress Users');
//                        if (url !== '' && url !== '#') {
//                            setTimeout(function() { location.href = url; }, 1000);
//                        } else {
//                            setTimeout(function() { location.reload(); }, 1000);
//                        }
//                    } else {
//                        displayError("#complete-signup-error",data.msg);
//                    }
//                },'json');
//
//            return false;
//        });

    $('.collapsible-container-header').on('click', function() { // used in pdp and charityAdmin
        var collapsibleContainerHeader = $(this);
        var collapseContainer = $(this).parent('.collapsible-container');
        var content = collapseContainer.find('.content');
        content.slideToggle(function() {
            if (content.hasClass('active')) {
                collapsibleContainerHeader.addClass('rotate');
                content.removeClass('active');
                collapseContainer.find('.icon').html('+');
            } else {
                // Need to run 'add more' link when the reviews are visible
                if (collapseContainer.hasClass('review-container')){
                    $(".reviews-section").find('.review_content').each(function(){
                        ifonly_add_read_more_link($(this));
                    });
                }

                collapsibleContainerHeader.removeClass('rotate');
                content.addClass('active');
                collapseContainer.find('.icon').html('-');
            }
        });
    });

});

function showMemberTermsAndPrivacyDialog(context, tandcIds, translatedText) {
    g_forceLogin = true;
    $('#member-signup-dialog .border-box.sign-in').hide();
    $('#member-signup-dialog .close, #member-signup-dialog .ifonly_pop_close_img').hide();
    $('#member-signup-dialog #registrationTerms').hide();
    loadingAnimation("hide");

    $('#member-signup-dialog .terms-border-box .section-header').html(translatedText.headerText);
    $('#member-signup-dialog .terms-border-box .section-body').html(translatedText.bodyText);
    $('#member-signup-dialog .terms-border-box .allowAllUsers .title').html(translatedText.buttonText);
    if (! parseInt(translatedText.textLeft2Right)) { // VP-16719 if user is rtl but session is still ltr
        $('#member-signup-dialog .terms-border-box .section-header').css("direction","rtl");
        $('#member-signup-dialog .terms-border-box .section-body').css("direction","rtl");
    }
    $('#member-signup-dialog .terms-border-box .email-susi-form').show();

    $('#member-signup-dialog .terms-border-box').show();
    $('#member-signup-dialog').addClass("forTermsAndConditionsMobile");
    $('#member-signup-dialog').addClass("no_overlay_close"); // VP-22552

    g_signUpContext = context; // see _login_form
    g_newUserTerms  = tandcIds;

    if (context === 'gotoCart' || context === 'checkout' || context.indexOf("/cart/checkout") === 0 || context.indexOf("/m/cart/checkout") === 0) {
        $('#member-signup-dialog #login-container-terms').show();
        displayOverlay('member-signup-dialog', 'login');
    }

    return;
};

function showGeneralErrorMsgs($obj, centerErr, msg, appendedClass) {
    if(!$obj.hasClass("notForValidation")) {
        if (centerErr === undefined) {
            centerErr = false;
        }

        if(appendedClass === undefined){
            appendedClass = "";
        }

        if(msg === undefined) {
            if($obj.attr("type") === "hidden"){
                msg = "Please select an option";
            }else{
                var fieldName = $obj.attr("fieldname");

                if(fieldName === "address"){
                    fieldName = "street address";
                }

                if(fieldName) {
                    msg = "Please enter %fieldName%".replace("%fieldName%", fieldName);
                } else {
                    msg = "Please fill in required field";
                }
            }
        }

        if($obj.closest(".js-err-con").length > 0) {
            if($obj.closest(".js-err-con").children(".js-error-general").length > 0 ){
                $obj.closest(".js-err-con").children(".js-error-general").remove();
            }
            if(centerErr) {
                var errorClass = "js-error-general error-general err-center sg-f-bdy " + appendedClass;
                $obj.closest(".js-err-con").append("<p class='"+errorClass+"'>" + msg + "</p>");
            }else{
                var errorClass = "js-error-general error-general sg-f-bdy " + appendedClass;
                $obj.closest(".js-err-con").append("<p class='"+errorClass+"'>" + msg + "</p>");
            }
        }
    }
}

function textCounter($obj) {
    var attrName = ($obj.hasClass("wordCounter") ? "words" : "chars");
    var attrNameTranslation = ($obj.hasClass("wordCounter") ? "words" : "chars");
    var inputValue = $obj.is('textarea') || $obj.is('input') ? $obj.val() : $obj.text();
    var textLength = ($obj.hasClass("wordCounter") && $.trim(inputValue) !== "" ? inputValue.match(/\S+/g).length : inputValue.length);
    var className = ($obj.hasClass("wordCounter") ? ".wordsRemaining" : ".charRemaining");

    if($obj.siblings().find(className).length === 1){
        if($.trim(inputValue) !== "" && (parseInt($obj.siblings().find(className).attr(attrName)) - textLength) <= 0) {
            if($obj.hasClass("min")) {
                if($obj.hasClass("max") && inputValue.split(/\s+/).length >= parseInt($obj.attr("maxwords"))) {
                    $obj.siblings().find(".wordsRemaining").text("maximum reached");
                }
                else {
                    $obj.siblings().find(className).html("<img src='" + getStaticFile('/images/io/icon_checkmark_green.png') + "' alt='icon' style='width: 27px;'>");
                }
            } else {
                $obj.siblings().find(className).text("maximum reached");
            }
            $obj.siblings().find(className).show();
            $obj.siblings().find(".counter-text").hide();
        } else {
            var remainingText = parseInt($obj.siblings().find(className).attr(attrName));
            if($.trim(inputValue) !== "") {
                remainingText = parseInt($obj.siblings().find(className).attr(attrName)) - textLength;
            }
            $obj.siblings().find(className).text(remainingText);
            $obj.siblings().find(className).show();
            if(remainingText === 1) {
                $obj.siblings().find(className).siblings("span").html("&nbsp;" + attrNameTranslation.slice(0, -1) + " " + "remaining");
            }
            else {
                $obj.siblings().find(className).siblings("span").html("&nbsp;" + attrNameTranslation + " " + "remaining");
            }
            $obj.siblings().find(className).siblings("span").show();
        }
    }
}

function onDeviceReady() { // for geolocation
    // Check to see if the browser supports the GeoLocation API.
    if (navigator.geolocation) {
        console.log('geolocation detected!');
        // Get the location
        navigator.geolocation.getCurrentPosition(
            function(position) {
                var lat = position.coords.latitude;
                var lon = position.coords.longitude;
                //alert(lat + ' ' + lon);

                var GEOCODING = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=' + lat + '%2C' + lon + '&key=AIzaSyC0maY5si28S9FM1Wna4eK9xoyHLdJs6ik';

                $.getJSON(GEOCODING).done(function(location) {
                    //alert(JSON.stringify(location));
                    $.ajax({
                        type: "POST",
                        url: "/website/updateGeoInfo",
                        dataType: 'json',
                        data: {geoInfo: location.results},
                        success: function(data) {
                            if(data.result === 1) {
                                //alert(1);
                                //window.location.reload();
                            }
                        }
                    });
                });
            },
            function (error) {
                if (error.code === error.PERMISSION_DENIED) {
                    console.log("location permission denied");
                }
            } // callback if user denies permission
        );
    } else {
        // Print out a message to the user.
        document.write('Your browser does not support GeoLocation :(');
    }

    return;
}

function getCCTypeName(ccNum) {
    const cards = [["Visa",/^4[0-9]{12}([0-9]{3})?$/],["Mastercard",/^5[1-5][0-9]{14}$/],["Mastercard",/^222[1-9][0-9]{12}$/],["Mastercard",/^22[3-9][0-9]{13}$/],["Mastercard",/^2[3-6][0-9]{14}$/],["Mastercard",/^27[01][0-9]{13}$/],["Mastercard",/^2720[0-9]{12}$/],["American Express",/^3[47][0-9]{13}$/],["Discover",/^6011[0-9]{12}$/],["Discover",/^622[0-9]{13}$/],["Discover",/^6[45][0-9]{14}$/],["Maestro",/^(50|56|57|58)[0-9]{11,16}$/],["Maestro",/^6[0-9]{15,18}$/]];
    for (const [name, pattern] of cards) {
        if (pattern.test(ccNum)) {
            return name;
        }
    }
    return false;
}

function getValueWordString(valueStr, wordStr, func, wordOnly) {
    var str = '';
    $.ajax({
    type: "POST",
    url: "/common/getValueWordString",
    dataType: 'json',
    async: false,
    data: {valueStr: valueStr, wordStr: wordStr, func: func, wordOnly: wordOnly}})
    .done( function(data){
        if(data.str !== undefined) {
            str = data.str;
        }
    });

    return str;
}

function favoriteTracking(type, id, name, event) {
    }

function onScriptGlobal(name, cb) {
    // Use the global if already set (script loaded).
    if (window[name] !== undefined) {
        cb(window[name]);
        return;
    }
    // Listen for each tag to load (capture phase).
    const listener = () => {
        if (window[name] !== undefined) {
            document.removeEventListener('load', listener, true);
            cb(window[name]);
        }
    };
    document.addEventListener('load', listener, true);
}

function adobeSatelliteTracking(name, data) {
    onScriptGlobal('_satellite', t => {
        if (g_thisHost !== 'www') {
            console.log('adobe satellite script loaded, name: '+name);
            console.log('data: '+JSON.stringify(data));
        }
        if (data === undefined) {
            t.track(name);
        } else {
            t.track(name, data);
        }
    });
}

function facebookTracking(type, name) {
    if (g_thisHost !== 'www') {
        console.log('facebook tracking script loaded: type = '+type+', name:'+name);
    }
    if (typeof(name) === 'undefined') {
        fbq(type);
    } else {
        fbq(type, name);
    }
}
</script>

<script  type='text/javascript'  src='/scripts/jquery.tools.min.fix.js?12.01'></script>
<script  type='text/javascript'  src="/scripts/common.js?12.01"></script>
<script  type='text/javascript'  src="/scripts/mobile/main.js?12.01"></script>


<script             type='text/javascript' onload="coreJSLoadingHandling('jqueryUI');"          src='/scripts/node_modules/jquery-ui-dist/jquery-ui.min.js?12.01'></script>
<script defer type='text/javascript' onload="coreJSLoadingHandling('jqueryWidget');"      src='/scripts/node_modules/jquery-ui/ui/widget.js?12.01'></script>
<script defer type='text/javascript' onload="coreJSLoadingHandling('jqueryTouchPunch');"  src='/scripts/node_modules/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js?12.01'></script>
<script defer type='text/javascript' onload="coreJSLoadingHandling('jqueryCookie');"      src="/scripts/node_modules/jquery.cookie/jquery.cookie.js?12.01"></script>
<script>




</script>


        <div id="header-nav" class="mobile">
            <style>
    .menu-name { line-height: 100%; }
    .menu-stick-bottom:empty {display:none;}

    .mobile.section.identity .userlink {width:100%;}
    .mobile.section.identity .avatar .name {max-width:calc(100% - 105px); white-space: nowrap; overflow:hidden; text-overflow: ellipsis;}

    .mobile.section.identity .single-sign-on-btn span a:hover { color: white; }

     #nav.rtl.mobile .nav-item .content {flex-direction: row-reverse;}
     
    .mobile-menu-item {text-decoration: none; }
</style>
<img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_plus_FFF.png" style="display:none" />
<img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_minus_FFF.png" style="display:none" />
<div id="search" class="search_result_container">
    <div style="position: relative;">
        <div style='position: absolute; left:0px; width: 15%; height:100%; text-align: left; ' id="search-back">
            <img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_left_fff.png" alt="icon" style="width:28px; margin-left: 5px; margin-top: 10px;" />
        </div>
        <input  id="m-search" class="m-search ui-autocomplete-input top-nav-search" id="m-search" data-appendto="#search" type="text"   value="" name="searchKey" aria-label="Search interests, things to do, locations, and more" placeholder="Search interests, things to do, locations, and more" autocomplete="off">
        <div style='position: absolute; right: 0px; width: 6%; height:100%; text-align: center; background-color: #252525;' id="search-clear">
            <img src="https://d5xydlzdo08s0.cloudfront.net/images/io/x-button-grey.png" alt="Clear" style="width:15px; margin-top: 16px;" />
        </div>
    </div>

</div>
<div id="nav" class="sg-bg-3  mobile" data-allowuuid="1" >
            <div class="nav-menu consumer consumer2 current sg-f-hdr sg-text-transform ">
                            <div class="section identity mobile">
                                            <div class="nav-item" >
                            <div class="content bg-ovr-1 sg-c-3 sg-inline-middle" style="height:55px; text-align:center; ">
                                <div class="tw-col login-button js-login sg-inline-middle sg-bd-3 sg-no-bd-bottom sg-no-bd-left sg-no-bd-top">
                                    <span class="sg-text-transform" di-type="sign in initiated" >Log in</span>
                                </div>

                                <div class="tw-col email-signup member-signup-btn js-signUp sg-inline-middle">
                                    <span class="sg-text-transform" di-type="sign up initiated" >Sign up</span>
                                </div>
                            </div>
                        </div>
                                            <div class="clearAll"></div>
                    <div class="menu-gap" style="margin: 0px; width: 100%;"></div>
                </div>
                            <div class="section level-menus" >
                                        <div class="nav-item js-hasChild" data-navmenuid="language1" >
                            <div class="content">
                                <a class="js-button mobile-menu-item sg-c-1 sg-text-transform" href="#" data-url="/m"  di-type="basic" di-class="Header Click" di-id="Language Selector" >
                                    <span class="menu-name">Language</span>
                                    <img class='right' src='https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_right_000.png' />
                                </a>
                            </div>
                        </div>
                                            <div class="nav-item js-hasChild" data-navmenuid="currency1" >
                            <div class="content">
                                <a class="js-button mobile-menu-item sg-c-1 sg-text-transform" href="#" data-url="/m"  di-type="basic" di-class="Header Click" di-id="Language Selector" >
                                    <span class="menu-name">Currency</span>
                                    <img class='right' src='https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_right_000.png' />
                                </a>
                            </div>
                        </div>
                                        <div class="nav-item js-hasChild" data-navmenuid="148" >
                        <div class="content">
                            <a class="js-button  mobile-menu-item sg-c-1 sg-text-transform" href="#" data-url="/m"  di-type="basic" di-class="Header Click" di-id="Menu - Interests" >
                                <span class="menu-name">Interests</span>
                                <img class='right' src='https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_right_000.png' />
                            </a>
                        </div>
                    </div>
                                        <div class="nav-item js-hasChild" data-navmenuid="150" >
                        <div class="content">
                            <a class="js-button  mobile-menu-item sg-c-1 sg-text-transform" href="#" data-url="/m"  di-type="basic" di-class="Header Click" di-id="Menu - Locations" >
                                <span class="menu-name">Locations</span>
                                <img class='right' src='https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_right_000.png' />
                            </a>
                        </div>
                    </div>
                                    <div class="clearAll"></div>
                <!--<div class="menu-gap"></div>-->
            </div>

            <div class="section account">
                                    <hr>
                    <div class="nav-item account">
                        <a href="//www.mastercard.com" di-type="basic" di-class="Header Click" di-id="About Mastercard" >
                            <div class="content sg-c-1">
                                <span>Mastercard.com</span>
                            </div>
                        </a>
                    </div>
                                    <div class="nav-item help-number">
                                            <div class="content ">
                            <a href="/m/about" di-type="basic" di-class="Header Click" di-id="About Priceless Cities" >
                                <span style="width: 80%;" class="menu-name sg-c-1">About Priceless</span>
                            </a>
                        </div>
                        <div class="content ">
                            <a href="/m/website/contact" class='contactus_link' di-type="basic" di-class="Header Click" di-id="Contact Us" >
                                <span style="width: 80%;" class="menu-name sg-c-1">Contact us</span>
                            </a>
                        </div>
                                        </div>
            </div>
                        <div class="menu-end" style="width: 200px; height:20px;"></div>
        </div>
        
    <div class="nav-menu level-details sg-bg-3">
        <div class="menu-end" style="width: 200px; height:20px;"></div>
    </div>

    <!-- removed margin-top 300px to elimate white space out of menu bar mobile/desktop   -->

            <div class="menu-stick-bottom sg-bg-1 sg-c-3" ></div>
        </div>
    <div id="search-disc-menu" style="display: none;">
        <style>
    .discovery-popup .disc-item:hover {background-color: #141413}
</style>

<div class="discovery-popup js-discovery-popup sg-f-bdy ">
    <div class="disc-header-search">
        <a href="/filter/" class="sg-c-primary sg-text-transform sg-f-ttl">ADVANCED SEARCH</a>
        <div class="clearAll"></div>
    </div>
    <div class="disc-all-ex">
        <div class="disc-item js-disc-item js-filter-disc-item js-filter-op js-useObj js-filter-all sg-hover-3" data-type="radio" data-closest=".js-discovery-popup" data-name="category" data-value="" tabindex="0" role="menuitem">
            <p class='disc-item-text'>
                All Experiences            </p>
        </div>
    </div>
                    <div class='disc-column inline-top js-disc-col'>
                    <div class='col-title js-col-title sg-f-ttl'>Interests</div>
                <a lvl='1' href='/m/filter/options/category/511' di-type="basic" di-class="Header Click" di-id="Filter Category (Entertainment)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='511' data-catname='entertainment' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Entertainment)" >Entertainment</p></div></a><a lvl='1' href='/m/filter/options/category/506' di-type="basic" di-class="Header Click" di-id="Filter Category (Arts and Culture)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='506' data-catname='arts-and-culture' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Arts and Culture)" >Arts and Culture</p></div></a><a lvl='1' href='/m/filter/options/category/507' di-type="basic" di-class="Header Click" di-id="Filter Category (Sports)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='507' data-catname='sports' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Sports)" >Sports</p></div></a><a lvl='1' href='/m/filter/options/category/508' di-type="basic" di-class="Header Click" di-id="Filter Category (Culinary)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='508' data-catname='culinary' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Culinary)" >Culinary</p></div></a><a lvl='1' href='/m/filter/options/category/509' di-type="basic" di-class="Header Click" di-id="Filter Category (Travel)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='509' data-catname='travel' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Travel)" >Travel</p></div></a>                <div class="disc-item disc-view-more js-view-more"  tabIndex="0"
                     onkeydown="var char =event.which || event.keyCode; if(char==13){discoveryViewMore($(this));return false;}  "
                     onclick="discoveryViewMore($(this))"
                >
                    <p class=" disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">More...</p>
                </div>
                <div class="more-items js-more-items">
                <a lvl='1' href='/m/filter/options/category/510' di-type="basic" di-class="Header Click" di-id="Filter Category (Shopping)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='510' data-catname='shopping' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Shopping)" >Shopping</p></div></a>                        <div class="disc-item disc-view-less js-view-less" onclick="discoveryShowLess($(this))">
                            <p class="disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">Less...</p>
                        </div>
                    </div>
                    </div>                <div class='disc-column inline-top js-disc-col'>
                    <div class='col-title js-col-title sg-f-ttl'>Locations</div>
                <a lvl='1' href='/m/filter/options/location/9716/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Argentina)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='argentina'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Argentina)" >Argentina</p></div></a><a lvl='1' href='/m/filter/options/location/9458/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Australia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='australia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Australia)" >Australia</p></div></a><a lvl='1' href='/m/filter/options/location/8486/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Austria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='austria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Austria)" >Austria</p></div></a><a lvl='1' href='/m/filter/options/location/18575/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Brazil)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='brazil'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Brazil)" >Brazil</p></div></a><a lvl='1' href='/m/filter/options/location/8830/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Bulgaria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='bulgaria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Bulgaria)" >Bulgaria</p></div></a>                <div class="disc-item disc-view-more js-view-more"  tabIndex="0"
                     onkeydown="var char =event.which || event.keyCode; if(char==13){discoveryViewMore($(this));return false;}  "
                     onclick="discoveryViewMore($(this))"
                >
                    <p class=" disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">More...</p>
                </div>
                <div class="more-items js-more-items">
                <a lvl='1' href='/m/filter/options/location/18557/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Canada)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='canada'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Canada)" >Canada</p></div></a><a lvl='1' href='/m/filter/options/location/8832/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Chile)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='chile'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Chile)" >Chile</p></div></a><a lvl='1' href='/m/filter/options/location/18604/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (China)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='china'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (China)" >China</p></div></a><a lvl='1' href='/m/filter/options/location/20341/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Colombia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='colombia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Colombia)" >Colombia</p></div></a><a lvl='1' href='/m/filter/options/location/5767/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Croatia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='croatia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Croatia)" >Croatia</p></div></a><a lvl='1' href='/m/filter/options/location/46204/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Czechia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='czechia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Czechia)" >Czechia</p></div></a><a lvl='1' href='/m/filter/options/location/63462/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Fiji)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='fiji'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Fiji)" >Fiji</p></div></a><a lvl='1' href='/m/filter/options/location/18551/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (France)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='france'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (France)" >France</p></div></a><a lvl='1' href='/m/filter/options/location/46254/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Germany)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='germany'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Germany)" >Germany</p></div></a><a lvl='1' href='/m/filter/options/location/8851/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Greece)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='greece'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Greece)" >Greece</p></div></a><a lvl='1' href='/m/filter/options/location/20943/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Hong Kong)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='hong-kong'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Hong Kong)" >Hong Kong</p></div></a><a lvl='1' href='/m/filter/options/location/3568/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (India)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='india'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (India)" >India</p></div></a><a lvl='1' href='/m/filter/options/location/3302/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Indonesia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='indonesia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Indonesia)" >Indonesia</p></div></a><a lvl='1' href='/m/filter/options/location/8857/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Ireland)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='ireland'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Ireland)" >Ireland</p></div></a><a lvl='1' href='/m/filter/options/location/46053/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Italy)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='italy'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Italy)" >Italy</p></div></a><a lvl='1' href='/m/filter/options/location/21046/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Japan)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='japan'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Japan)" >Japan</p></div></a><a lvl='1' href='/m/filter/options/location/8476/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Kenya)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='kenya'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Kenya)" >Kenya</p></div></a><a lvl='1' href='/m/filter/options/location/72961/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Macau)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='macao'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Macau)" >Macau</p></div></a><a lvl='1' href='/m/filter/options/location/6698/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Malaysia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='malaysia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Malaysia)" >Malaysia</p></div></a><a lvl='1' href='/m/filter/options/location/89610/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Maldives)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='maldives'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Maldives)" >Maldives</p></div></a><a lvl='1' href='/m/filter/options/location/9473/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Mexico)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='mexico'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Mexico)" >Mexico</p></div></a><a lvl='1' href='/m/filter/options/location/8872/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Morocco)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='morocco'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Morocco)" >Morocco</p></div></a><a lvl='1' href='/m/filter/options/location/7696/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Netherlands)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='netherlands'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Netherlands)" >Netherlands</p></div></a><a lvl='1' href='/m/filter/options/location/43025/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (New Zealand)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='new-zealand'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (New Zealand)" >New Zealand</p></div></a><a lvl='1' href='/m/filter/options/location/8875/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Nigeria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='nigeria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Nigeria)" >Nigeria</p></div></a><a lvl='1' href='/m/filter/options/location/8885/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Puerto Rico)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='puerto-rico'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Puerto Rico)" >Puerto Rico</p></div></a><a lvl='1' href='/m/filter/options/location/8887/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Romania)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='romania'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Romania)" >Romania</p></div></a><a lvl='1' href='/m/filter/options/location/62738/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Serbia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='serbia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Serbia)" >Serbia</p></div></a><a lvl='1' href='/m/filter/options/location/8892/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Singapore)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='singapore'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Singapore)" >Singapore</p></div></a><a lvl='1' href='/m/filter/options/location/18659/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (South Africa)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='south-africa'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (South Africa)" >South Africa</p></div></a><a lvl='1' href='/m/filter/options/location/18600/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Spain)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='spain'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Spain)" >Spain</p></div></a><a lvl='1' href='/m/filter/options/location/43084/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Sweden)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='sweden'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Sweden)" >Sweden</p></div></a><a lvl='1' href='/m/filter/options/location/18582/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Thailand)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='thailand'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Thailand)" >Thailand</p></div></a><a lvl='1' href='/m/filter/options/location/20876/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Turkey)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='turkey'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Turkey)" >Turkey</p></div></a><a lvl='1' href='/m/filter/options/location/19588/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United Arab Emirates)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-arab-emirates'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United Arab Emirates)" >United Arab Emirates</p></div></a><a lvl='1' href='/m/filter/options/location/9673/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United Kingdom)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-kingdom'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United Kingdom)" >United Kingdom</p></div></a><a lvl='1' href='/m/filter/options/location/45824/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United States)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-states'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United States)" >United States</p></div></a><a lvl='1' href='/m/filter/options/location/8910/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Uruguay)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='uruguay'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Uruguay)" >Uruguay</p></div></a></div></div>    <div class="view-all-categories">
        <p class="fo-11-n-m  co-gr le-14 sg-text-transform js-category-clear" style="display:none;" onclick="$('.js-filter-hint[data-mapping=disc]').click()" di-type="basic" di-class="Body Click" di-id="Filter Clear Category Selection"  >
            Clear Selection        </p>
        <div class="clearAll"></div>
    </div>
    <div class="disc-footer">
        <a href="/filter/" class="fo-11-n-m  co-gr le-14" di-type="basic" di-class="Body Click" di-id="View All Filter Results"  >
            ADVANCED SEARCH        </a>
        <div class="clearAll"></div>
    </div>
</div>

    </div>
    <div id="m-how-ifonly-works">
            </div>
    <div id="nav-overlay" class="" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 480px; display: none; opacity: 0.5; z-index: 999; background-color: #000;"></div>

<!-- Javascript has been moved to mobile.views/layouts/_nav_js --><!--
    this is javascript taken from mobile.views/layouts/_nav
    moved so that we can separately render html and JS so that we can "lazy" load the html to save on dom elements for desktop
-->
<style>
    #body.rtl .bag-item { right:auto; left:25px;}
    #nav.mobile .nav-menu .menu-detail .backToMain { padding-right:0;}
    /* #nav {z-index:10000;} for hotfix, moved to common.css*/
</style>


<script type="text/javascript">
    var topOff = 0;
    var windowHeight = $(window).height();


    if($(".hide-menu-stick-bottom").length > 0 ){
        $("#nav .menu-stick-bottom").hide();
    }


    $(document).ready(function() {

        $('#body').on('click', '#top .language', function() {
            $( "#main").toggleClass( "active" );
            $( ".lang-selector").toggleClass( "active" );
        });

        $("#nav").animate({left:'-'+($("#nav").width()+1)+"px"},{duration:10});


        $('#body').on('click', '#nav .expand-trggier', function() {
            if($(this).hasClass("expended")){
                $(this).find(".plus-minus").attr("src", $(this).find(".plus-minus").attr("data-plus"));
                $(this).next(".sub-menu").slideUp(400, "linear");
                $(this).removeClass("expended");
            }else{
                $(this).find(".plus-minus").attr("src", $(this).find(".plus-minus").attr("data-minus"));
                $(this).next(".sub-menu").slideDown(400, "linear");
                $(this).addClass("expended");
            }

            return false;
        });

        $('#body').on('click', '#nav .nav-item a', function() {
            if($(this).attr("href") !== "#"){
                $('#nav-overlay').click();
            }
        });

        $('#body').on('keydown', '#nav .nav-menu', function(e){
            var $this = $(this);

            if(e.which==g_keycodes.esc ){
                //debugger;
                if($this.hasClass('level-details')){
                    //2nd level menu
                    $this.children('.level-detail:visible').find('.menu-header .backToMain').trigger('click');
                    var navmenuid = $this.children('.level-detail:visible').attr('data-navmenuid');
                    $this.siblings('.nav-menu').find('.nav-item.js-hasChild[data-navmenuid="' +navmenuid+ '"] a').focus();

                }
                else{
                    //first level menu
                    $('#nav-overlay').trigger('click');//need this for non-M
                    $('.hamburger_img').focus();
                }
            }

        });

        $('body').on('keydown', '#nav', function(e){
            if(e.which==g_keycodes.tab ){
                trap_focus($('#nav'));
            }
        });

        $('#body').on('click', '.section.level-menus .nav-item, #mc-account-button', function() {
            console.log('hit #nav .section.level-menus .nav-item, #mc-account-button');
            if($(this).hasClass("js-hasChild")){
                console.log($(this).attr("data-navmenuid"));
                if ($("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").find('.level-sec').length > 0) {
                    
                    $("#nav .nav-menu.level-details .level-detail").hide();
                    $("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").show();
                    if (!g_is_mobile) {
                        $("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").find(':focusable').first().focus();
                    }
                    
                    if($(this).data('navmenuid') == 3) {
                        var expand = $("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").find('.js-moreOrLess').first();
                        if(expand.hasClass('js-more')) {
                            expand.click();
                        }
                    }
                    
                    $("#nav .nav-menu.consumer").animate({left:'-100%'},function(){
                        $('img[class="backToMain"]').attr('data-backto', '');
                        var scrollTo = $("#nav").offset().top;
                        $('html, body').animate({scrollTop:scrollTo}, 0,function(){});
                        $("#nav .nav-menu.consumer").removeClass("current");
                        $("#nav .nav-menu.level-details").animate({left:'0px'});
                        $("#nav .nav-menu.level-details").addClass("current");
                    });
                } else {
                    if ($(this).find('a.js-button').attr('data-url')) {
                        location.href = $(this).find('a.js-button').attr('data-url');
                    }
                }
                return false;
            }
        });
        
        $('#body').on('click', '#nav .nav-menu.vendor .nav-item', function() {
            if($(this).hasClass("js-hasChild")){
                if ($("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").find('.level-sec').length > 0) {
                    $("#nav .nav-menu.level-details .level-detail").hide();
                    $("#nav .nav-menu.level-details .level-detail[data-navmenuid="+$(this).attr("data-navmenuid")+"]").show();
                    $("#nav .nav-menu.consumer").animate({left:'-100%'},function(){
                        $('img[class="backToMain"]').attr('data-backto', 'vendor');
                        console.log('vendor');
                        var scrollTo = $("#nav").offset().top;
                        $('html, body').animate({scrollTop:scrollTo}, 0,function(){});
                        $("#nav .nav-menu.consumer").removeClass("current");
                        $("#nav .nav-menu.level-details").animate({left:'0px'});
                        $("#nav .nav-menu.level-details").addClass("current");
                    });
                } else {
                    if ($(this).find('a.js-button').attr('data-url')) {
                        location.href = $(this).find('a.js-button').attr('data-url');
                    }
                }
                return false;
            }
        });

        $('#body').on('click', '#nav .nav-menu.level-details img.backToMain', function() {
            console.log('hit #nav .nav-menu.level-details img.backToMain');
            $("#nav .nav-menu.level-details").animate({left:'-100%'},function(){
                $("#nav .nav-menu.level-details").removeClass("current");
                if ($('img[class="backToMain"]').attr('data-backto') && $('img[class="backToMain"]').attr('data-backto') === 'vendor') {
                    $("#nav .nav-menu.vendor").animate({left:'0px'});
                    $("#nav .nav-menu.vendor").addClass("current");
                } else {
                    $("#nav .nav-menu.consumer").animate({left:'0px'});
                    $("#nav .nav-menu.consumer").addClass("current");
                }
            });

            var $this = $(this);
            var $navmenu = $this.closest('.nav-menu');
            var navmenuid = $navmenu.children('.level-detail:visible').attr('data-navmenuid');
            if (!g_is_mobile) {
                $navmenu.siblings('.nav-menu').find('.nav-item.js-hasChild[data-navmenuid="' +navmenuid+ '"] a').focus();
            }    
        });

//        $("#nav").on("click", ".nav-item.js-moreOrLess", function(){
        $('#body').on('click', '#nav .nav-item.js-moreOrLess', function() {
            moreOrLess($(this));
        });

//        $("#nav").on("click", ".level-sec .level-title", function(){
        $('#body').on('click', '#nav .level-sec .level-title', function() {
            moreOrLess($(this).siblings(".level-content").find(".nav-item.js-moreOrLess"));
        });

//        $("#nav .menu-stick-bottom .switch-account").click(function(){
        $('#body').on('click', '#nav .menu-stick-bottom .switch-account', function() {
            if($("#nav .nav-menu.current").hasClass('consumer')){
                $("#nav .nav-menu.current").animate({left:'-100%'},function(){
                    var scrollTo = $("#nav").offset().top;
                    $('html, body').animate({scrollTop:scrollTo}, 0,function(){});
                    $("#nav .nav-menu.current").addClass("previous");
                    $("#nav .nav-menu.current").removeClass("current");
                    $("#nav .nav-menu.vendor").animate({left:'0px'});
                    $("#nav .nav-menu.vendor").addClass("current");
                });
                $("#nav .menu-stick-bottom .switch-account .status").text("CONSUMER");
                $("#nav .menu-stick-bottom").addClass("bg-white");
                $(this).find("img").attr("src",$(this).find("img").attr("data-c-img"));
                sessionStorage['mobile_menu'] = 'vendor';
            }else{
                $("#nav .nav-menu.current").animate({left:'-100%'},function(){
                    var scrollTo = $("#nav").offset().top;
                    $('html, body').animate({scrollTop:scrollTo}, 0,function(){});
                    $("#nav .nav-menu.previous").animate({left:'0px'});
                    $("#nav .nav-menu.previous").addClass("current");
                    $("#nav .nav-menu.previous").removeClass("previous");
                    $("#nav .nav-menu.vendor").removeClass("current");
                });
                $("#nav .menu-stick-bottom .switch-account .status").text("Luminary");
                $("#nav .menu-stick-bottom").removeClass("bg-white");
                $(this).find("img").attr("src",$(this).find("img").attr("data-l-img"));
                sessionStorage['mobile_menu'] = 'customer';
            }

        });

        
        if(sessionStorage['mobile_menu'] == 'vendor'){
            $("#nav .menu-stick-bottom .switch-account").click();
        }


        //Search
//        $('#m-search').click(function(){
        $('#body').on('click', '#m-search', function() {
            $('#m-search').focus();
        });

//        $("#m-search").focus(function(){
        $('#body').on('focus', '#m-search', function() {
            $("#search-disc-menu").fadeOut("fast");
        });

//        $("#top .search").click(function(){
        $('#body').on('click', '#top .search', function() {
            $("#search #m-search").animate({right:'0px'},{
                duration:300,
                complete:function(){
                    selectDiscInMenuBasedOnCatId($(this).attr("data-value"));
                    showMobileDiscMenu();
                }
            });
        });



        $('body').on('keydown', '#disc-menu', function(e){
            if(e.which == g_keycodes.esc){
                $(this).find('.close-mobile-filter-menu').trigger('click');
                $('#top .icon.search img').focus();
            }
        });

        $('body').on('keydown', '#filter', function(e){
            if(e.which == g_keycodes.esc){
                $('#filter').find('.backToMain').trigger('click');
            }
            else if(e.which==g_keycodes.tab){
                trap_focus($('#filter'));
            }
        })


        $('#body').on('click', '#search-clear', function() {
             $('#m-search').val("");
             $("#search-disc-menu").fadeIn("fast");
        });

        $('#body').on('click', '#search-back', function() {
            $("#search-disc-menu").fadeOut("fast");
            $("#search").animate({right:"-100%"},{
                duration:300,
                complete:function(){
                }
            });
        });


        $("#nav-overlay").height($( window ).height());
       
        $('#body').on('click', '.icon.back, #top .icon.back', function() { 
            window.history.back();
            return false;
        });



        $('#body').on('click', '.menu', function(e) { 
            if ($("#top .menu").length > 0) {
                var $button = $("#top .menu");
            } else {
                var $button = $("#body .menu");
            }

            var isRtl = $('body').hasClass('rtl');

            if ( ! $button.hasClass("slided")){
                $('#X-icon').css('display','block');
                e.stopImmediatePropagation();

                if ($(window).width() < 576) {
                    $("#top .logo").hide();
                    $(".hamburger_img").hide();
                }
                $("#cat-title").hide();
                $("#subcat-title").hide();
                $("#nav-overlay").height($("#nav").height());
                $("#nav-overlay").fadeIn();


                if($("#body .bag").length === 1){
                    $("#top .logo").hide();
                    $("#body .bag, #body .icon.wishlist, #body .search").fadeOut(200);

                }

                var marginAttr = (isRtl? 'marginRight':'marginLeft');
                var animateCss = {};
                animateCss[marginAttr] = '255px';
                $button.animate(animateCss,{
                    speed :300,
                    easing: "linear",
                    complete:function(){
                        $button.addClass("slided");
                    }
                });

                var positionAttr = (isRtl? 'right':'left');
                var positionCss = {};
                positionCss[positionAttr] = 0;

                if(isRtl){
                    $('#nav').css({right:'-255px'});
                    $('#nav').css({left:'auto'})
                }
                else{
                    $('#nav').css({right:'auto'})
                }

                $("#nav").show().animate(positionCss,{speed:300, easing:"linear"});
                $("#nav").find(':focusable').first().focus();
                $("#nav .menu-stick-bottom").animate(positionCss,{speed:300, easing:"linear"});
            } else {
                $('#nav-overlay').click();
            }
        });

        $(".nav-item ul").hide();
        $(".nav-item.account ul").show();

        $('#body').on('click', '.nav-item .parent', function(e) {
            var $navItem = $(this).parent();

            if ($navItem.hasClass('open')) {
                $navItem.find("ul").slideToggle('fast', function() {
                    $navItem.removeClass('open');
                    $navItem.find('img.up').hide();
                    $navItem.find('img.down').show();
                });
            } else {
                $navItem.addClass('open');
                $navItem.find('img.down').hide();
                $navItem.find('img.up').show();
                $navItem.find("ul").slideToggle('fast');
            }
            return false;
        });

        if( ! g_is_guest ){
            $('#body').on('click', '#nav .new-signup', function() {
                displayOverlay('accesscode-add-dialog');
                return false;
            });
        }

        $('#body').on('click', '#nav-overlay, #X-icon', function(e) {
            //if the top section has slide out, slide back when click
            //
            $('#X-icon').css('display','none');
            e.stopImmediatePropagation();
            $(".hamburger_img").show();
            $("#top .logo").show();
            $("#cat-title").show();
            $("#subcat-title").show();

            var isRtl = $('body').hasClass('rtl');

            var marginAttr = (isRtl? 'marginRight':'marginLeft');
            var animateCss = {};
            animateCss[marginAttr] = '0px';
            $("#body .menu, #top .menu").animate(animateCss,{'speed': 300, 'easing':"linear",
                                                complete:function(){
                                                    if($("#body .bag").length === 1){
                                                        $("#body .bag, #body .icon.wishlist, #body .search, #top .logo").fadeIn(200);
                                                    }
                                                }
            });

            $("#nav-overlay").fadeOut(200);

            var positionAttr = (isRtl? 'right':'left');
            var positionCss1 = {};
            positionCss1[positionAttr] = '-'+($("#nav").width()+1)+"px";
            $("#nav .menu-stick-bottom").animate(positionCss1,{'speed': 300, 'easing':"linear"});
            var positionCss2 = {};;
            positionCss2[positionAttr] = '-'+($("#nav").width()+1)+"px";
            $("#nav").animate(positionCss2,{
                    speed :300,
                    easing: "linear",
                    complete:function(){
                        if ($("#top .bag").length === 1) {
                            $("#top .bag, #top .icon.wishlist, #top .search, #top .logo").fadeIn();
                        }
                        $("#nav").hide();
                    }
            });


            $("#body .menu, #top .menu").removeClass("slided");
        });

        //Code to handle rotate
        jQuery(window).on('orientationchange', function(e) {
            switch ( window.orientation ) {
                case 0:
                    if( $("#top .menu").hasClass('slided') ){
                        $("#nav-overlay").height($("#nav").height());
                    }
                break;
                case 90:
                    if( $("#top .menu").hasClass('slided') ){
                        $("#nav-overlay").height($("#nav").height());
                    }
                break;
                case -90:
                    if( $("#top .menu").hasClass('slided') ){
                        $("#nav-overlay").height($("#nav").height());
                    }
                break;
            }
        });


        // javascript to stop parent div scrolling when scroll to the bottom of the #nav or the top of the #nav
        var stuff = {};
        $('#nav').on('touchstart',stuff,function(e){
          e.data.max = this.scrollHeight - this.offsetHeight;
          e.data.y = e.originalEvent.pageY;
        }).on('touchmove',stuff,function(e){
          var dy = e.data.y - e.originalEvent.pageY;
          // if scrolling up and at the top, or down and at the bottom
          if((dy < 0 && this.scrollTop < 1)||(dy > 0 && this.scrollTop >= e.data.max)){
            e.preventDefault();
          };
        });

        // javascript to stop parent div scrolling when scroll to the bottom of the .how-ifonly-works or the top of the .how-ifonly-works
        var stuffHowItWorks = {};
        $('#m-how-ifonly-works .how-ifonly-works').on('touchstart',stuffHowItWorks,function(e){
          e.data.max = this.scrollHeight - this.offsetHeight;
          e.data.y = e.originalEvent.pageY;
        }).on('touchmove',stuffHowItWorks,function(e){
          var dy = e.data.y - e.originalEvent.pageY;
          // if scrolling up and at the top, or down and at the bottom
          if((dy < 0 && this.scrollTop < 1)||(dy > 0 && this.scrollTop >= e.data.max)){
            e.preventDefault();
          };
        });

        // javascript to stop parent div scrolling when scroll to the bottom of the .how-ifonly-works or the top of the .how-ifonly-works
        var stuffSearchDisv = {};
        $('#search-disc-menu').on('touchstart',stuffSearchDisv,function(e){
          e.data.max = this.scrollHeight - this.offsetHeight;
          e.data.y = e.originalEvent.pageY;
        }).on('touchmove',stuffSearchDisv,function(e){
          var dy = e.data.y - e.originalEvent.pageY;
          // if scrolling up and at the top, or down and at the bottom
          if((dy < 0 && this.scrollTop < 1)||(dy > 0 && this.scrollTop >= e.data.max)){
            e.preventDefault();
          };
        });




        $('#body').on('click', '.js-m-how-ifonly-works', function() {
            $('html, body').animate({scrollTop:0}, 0,function(){});
            $("#m-how-ifonly-works").find(".how-ifonly-works").fadeIn();
            sawHowItWorks();
        });

                    /* moved from mobile.views/layouts/_top */
            $('#body').on('click', '.js-wishlist', function() {
                    if($("#wish-popup-wrapper-m .popup-content").html() === ""){
                    getMobileWishlistPopupHtml();
                }else{
                     $("#wish-popup-wrapper-m").fadeIn();
                }
            });

            $('#body').on('click', '#wish-popup-wrapper-m .js-close', function() {
                $("#wish-popup-wrapper-m").fadeOut();
                if (g_controller_id === "search"){
                    $("#header-m").css("z-index","2");
                }
            });
                });

    function moreOrLess($obj){
        if($obj.hasClass("js-more")){
            $("#nav .level-sec:visible .nav-item.js-moreOrLess.js-less").each(function(){
                $(this).siblings(".default-hidden").slideUp();
                $(this).removeClass("js-less");
                $(this).addClass("js-more");
                $(this).find("span").text("More +");
                $(this).closest(".js-lc").removeClass("bg-co-e1");
            });
            $obj.siblings(".default-hidden").slideDown();
            $obj.removeClass("js-more");
            $obj.addClass("js-less");
            $obj.find("span").text("Less -");
            $obj.closest(".js-lc").addClass("bg-co-e1");
        }else{
            $obj.siblings(".default-hidden").slideUp();
            $obj.removeClass("js-less");
            $obj.addClass("js-more");
            $obj.find("span").text("More +");
            $obj.closest(".js-lc").removeClass("bg-co-e1");
        }
    }

    function closeAllTopPopUp(){
        $("#wish-popup-wrapper-m").fadeOut();
        $("#m-how-ifonly-works").find(".how-ifonly-works").fadeIn();
    }
</script>
        </div>

        <div class="filter-icon-box">
    <div id="filter-icon" style="">
        <img src="https://d5xydlzdo08s0.cloudfront.net/images/io/filter_icon_big.png" alt="filter-icon" />
    </div>
    <div class="filter-icon-close">
        <img src="https://d5xydlzdo08s0.cloudfront.net/images/io/icon_close.png" alt="close" />
    </div>
</div>

<style>
    .filter-icon-box {  bottom: 80px;  position: fixed; display: none; visibility: hidden;}
    
    #filter-icon { background-color: #111; opacity: 0.9;
                   height: 40px; left: 0px;
                  line-height: 40px; text-align: center;
                   width: 40px; float: left; }
    
    #filter-icon img{ width: 30px; margin-top: 5px;}
    
    .filter-icon-box .filter-icon-close{width: 40px; height: 40px; background-color: #111; opacity: 0.4; float: left; display: none;}
    .filter-icon-box .filter-icon-close img {width: 20px; display: block; margin: 10px auto;}
</style><style>
    
    #filter { width: 100%;
              min-width: 300px;
              min-height: 100vh;
              left: -100%;
              background-color: #fff;
              top: 0px;
              z-index: 9999;
              position: absolute;
              overflow: auto;
              /*
              overflow-y: scroll;
              height: 580px;
              height: 100vh;
              */
    }
    #filter .filter-result-cnt{width: 100%; height: 50px;
                               text-align: center; line-height: 50px; z-index: 1;}

    #filter .filters-section{width: 100%; min-width: 300px; margin: 0 auto; margin-bottom: 150px;}
    #filter .filters-section .filter-box{
        float: left;
        margin: 20px 0px;
        width: 100%;
        padding: 0 15px;
        box-sizing: border-box;
    }
    #filter .filters-section div.filter-box:last-of-type{margin-bottom: 120px;}



    #filter .filters-section .title-seperater{ width:100%; border-bottom: 1px solid #333; clear: both;}

    #filter .filter-options ul li{
        float: left; width: 25%;
        border: 1px solid #e1e1e1;
        box-sizing: border-box;
        min-width: 20px;
        /* border-right: none; */
        text-align: center;
        /*height: 38px;*/
        line-height: 38px;
        margin-bottom: 5px;
    }
    #filter .filter-options ul li.filter-selected{
        color: #fff;
        background-color: #cf4500;
    }
    #filter .filter-options ul li:last-of-type{
        border-right: 1px solid #b4b0a9;
    }
    #filter .filter-options ul li span{
        margin-left: 0px;
    }
    #filter .filter-options ul li:hover{
        color: #000;
        background-color: #fff;
    }
    #filter .filter-options ul li.filter-selected:hover{
        color: #fff;
        background-color: #cf4500;
    }

    #filter .filter-select{width: 100%; border: 1px solid #b4b0a9; height: 42px;}

    #filter .time-seperator{margin: 20px 0px; position: relative; text-align: center;}
    #filter .time-seperator-line{
        border-top: 1px solid #b4b0a9;
        top: 9px;
        position: absolute;
        width: 100%;
        z-index: -1;
    }
    #filter .time-circle{
        background-color: #fff;
        width: fit-content;
        display: inline-block;
    }
    #filter .filter-date-range{position: relative;}

    #filter .filter-title{margin-bottom: 20px;}

    #filter input[type=text]:not([type="checkbox"]).checkBox{
        margin: 3px 0px;
    }

    #filter .calendar-panel{
        display: none;
        height: 100vh;
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100%;
        z-index: 3;
    }
    #filter .filter-calendar-box{
        margin: 0 auto;
        margin-top: 90px;
        position: relative;
    }
    #filter .calendar-panel-header{
        height: 35px;
        line-height: 35px;
        background-color: #e2e2e2;
        text-align: center;
    }

    #filter .btn-section{ padding: 10px 0; float: right; width: 100%; min-width: 300px; background-color: #000; bottom: 0px; left: 0px; position: fixed;
                          display: none;
                          z-index: 2;
                          box-shadow: 0 0 15px 0px rgba(47,47,47,0.2);
                        }
    #filter .btn-section > div{ text-align: center; }
    #filter .btn-section div.apply{width: 132px; line-height: 35px;}
    #filter .btn-section div.apply.disabled {background-color: #e1e1e1;}
    #filter .btn-section div.clear-all{margin-left: 30px; width: 132px; line-height: 35px; background-color: white;color: #cf4500;}
    #filter .btn-section a.back{position:absolute; top:20px; left:20px;}

    .zeroResult {padding: 40px 0px;}
    .zeroResult ul { margin-top: 10px;}
    .zeroResult li{list-style: initial; margin-bottom: 15px; width: 100%;}

    .backto-disc {
        position: relative;
        height: 50px;
        border-bottom: 1px solid #333;
    }

    .backto-disc .cat-name{
        width: 100%;
        text-align: center;
        line-height: 50px;
    }

    #disc-menu{
        width: 100%;
        min-width: 300px;
        min-height: 100%;
        left: -100%;
        background-color: #fff;
        top: 0px;
        z-index: 9999;
        position: absolute;
        overflow: auto;
    }

    #disc-menu .disc-all-ex{
        display: block;
    }
    #disc-menu .discovery-popup .disc-all-ex .disc-item{
        padding: 10px 0px;
    }
    #disc-menu .discovery-popup .disc-all-ex .disc-item-text{
        margin-left: 10px;
    }
    #disc-menu .disc-menu-header{
        height: 50px;
        line-height: 50px;
        padding-left: 10px;
        border-bottom: 1px solid #e1e1e1;
    }
    #disc-menu .disc-menu-header img{
        width: 44px;
        float: right;
        margin-right: 10px;
    }
    #disc-menu .disc-header{
        display: none;
    }
    #disc-menu .discovery-popup .col-title{
        height: 40px;
        line-height: 40px;
        background-color: #e4e4e4;
        margin-bottom: 8px;
        padding-left: 10px;
    }
    #disc-menu .discovery-popup .disc-item{
        padding: 10px 0px;
    }
    #disc-menu .discovery-popup .disc-item:active{
        background-color: #999;
    }
    #disc-menu .disc-item .disc-item-text{
        margin: 0px 20px;
    }
    #disc-menu .disc-view-more{
        display: none;
    }
    #disc-menu .disc-view-less{
        display: none;
    }
    #disc-menu .discovery-popup .disc-column{
        width: 100%;
    }

    #disc-menu a {
        text-decoration: none;
    }

    img.backToMain {position: absolute; left: 10px; width:28px; margin-top:10px;}

    img.closeFilterButton {position: absolute; top: 0; right: 0; margin-top: 10px; width: 32px;}

    #filterPage .filter-no-results{
        padding-top: 50px;
    }

    .filterPage .checkBox {
        width: 15px;
        height: 15px;
        padding: 10px;
        cursor: pointer;
        border-radius: 10%;
        background-color: white;
        border: 1px solid #e1e1e1;
    }

    .filterPage .checkBox.select {
        background: url('https://d5xydlzdo08s0.cloudfront.net/images/io/icon_checkmark_FFF.png') no-repeat 5px 5px;
        background-size: 15px;
        background-position: center;
    }

    .filterPage .clear-people-filter {
        margin-left: 10px;
    }


    .slider-range.ui-widget-content .ui-slider-range, .slider-range.ui-widget-content .ui-slider-handle.ui-state-default.ui-corner-all { background: #cf4500; }
    .co-gr { color: #cf4500; }
    #filter .highlight { border: 1px solid #cf4500; }
    #filter .filter-options ul li.sort-blog { width: 33.3%; }
            .filterPage .checkBox.select { background-color: #141413; }
        .filter-text-row.select { color: #d93c02; }
        .filters-section .filter-options ul li:hover, .filter-btn:hover,
        .filters-section .filter-options ul li.filter-selected {background-color:#141413; border-color:#141413; color: #fff; }
        .filter-text-row.select .arrow { background: url("https://d5xydlzdo08s0.cloudfront.net/images/icon_arrow_down_dark_orange.png") no-repeat; background-position: 5px -3px; background-size: 20px; }
        #filter .filter-options ul li.sort-filter { width: 33.3%; }
    

    /*   width<=640   */
    @media only screen  and (max-width: 640px) {



        .filterPage .checkBox {
            width: 30px;
            height: 30px;
        }

        .rtl .filterPage .filter-date-range .calender-field {padding: 10px 35px 10px 15px;}
        .filterPage .filter-date-range .calender-field {
            padding: 10px 15px 10px 35px;
            width: 100%;
            cursor: pointer;
            margin: 0;
            box-sizing: border-box;
            height: 44px;
            background-image: url('https://d5xydlzdo08s0.cloudfront.net/images/mc/calendar.png');
            background-repeat: no-repeat;
            background-size: 22px;
            line-height: 22px;
        }

        #disc-menu{
            position: absolute;
        }
    }


    /*   641<=width<=980   */
    @media only screen and (min-width: 641px) and (max-width: 980px){

        .filterPage .checkBox {
            width: 30px;
            height: 30px;
        }

        .filterPage .filter-date-range .calender-field {
            padding: 10px 10px;
            width: 100%;
            cursor: pointer;
            margin: 0;
            box-sizing: border-box;
            height: 44px;
            background-image: url('https://d5xydlzdo08s0.cloudfront.net/images/mc/calendar.png');
            background-repeat: no-repeat;
            background-size: 22px;
        }

        .filterPage .filter-date-range {
            width: 100%;
            justify-content: center;
        }
        
        #disc-menu{
            position: absolute;
        }
    }

        #top-welcome .ui-autocomplete {
        border:1px solid #b4b0a9;    }
    .ui-widget {
        font-family:mc-mark-narrow-book;font-size:14px;letter-spacing:0;font-weight:normal;line-height:20px;    }
    .ui-autocomplete-category.ac-group {
        margin-top:10px;
    }
    .ac-group {
        font-family:mc-mark-narrow-medium;font-size:14px;letter-spacing:0;font-weight:normal;    }
    .ui-autocomplete.ui-menu .ui-menu-item span.highlight {
        background-color: yellow;
    }
    #top-welcome .ui-autocomplete .ui-menu-item.ui-state-focus, #top-welcome .ui-autocomplete .ui-menu-item.ui-state-hover {
        border: none;
    }
    #disc-menu .ui-autocomplete .ui-menu-item:last-of-type,
    #disc-menu .ui-autocomplete .ui-menu-item:last-of-type a,
    #disc-d-widget .ui-autocomplete .ui-menu-item:last-of-type,
    #top-welcome .ui-autocomplete .ui-menu-item:last-of-type,
    #top-welcome .ui-autocomplete .ui-menu-item:last-of-type {
        text-align:center;
        text-transform:none;        font-family:mc-mark-narrow-medium;font-size:14px;letter-spacing:0;font-weight:normal;        color:#cf4500;    }

    li.ui-autocomplete-category, li.ui-menu-item {
        width: initial !important;
    }

</style>


    <div id="disc-menu" style="display:none;">
        <div class="disc-menu-header fo-14-n-m js-disc-menu-back">
            <!--EXPLORE EXPERIENCES BY-->
            <input class="f-left fo-14-n-m js-disc-input ui-autocomplete-input discovery-search sg-f-bdy-s" data-appendto="#disc-menu" type="text" aria-label="Search interests, things to do, locations, and more" placeholder="Search interests, things to do, locations, and more"
                   name="discovery-search" id="mobile-disc-input" style="height: 100%;border:none;" di-type="basic" di-class="Body Click" di-id="Mobile Filter Keyword Search"  />
            <img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="Filter Mobile Close Menu" class="close-mobile-filter-menu" di-type="basic" di-class="Body Click" di-id="Filter Mobile Close Menu"  tabindex="0"/>
        </div>
        <style>
    .discovery-popup .disc-item:hover {background-color: #141413}
</style>

<div class="discovery-popup js-discovery-popup sg-f-bdy ">
    <div class="disc-header-search">
        <a href="/filter/" class="sg-c-primary sg-text-transform sg-f-ttl">ADVANCED SEARCH</a>
        <div class="clearAll"></div>
    </div>
    <div class="disc-all-ex">
        <div class="disc-item js-disc-item js-filter-disc-item js-filter-op js-useObj js-filter-all sg-hover-3" data-type="radio" data-closest=".js-discovery-popup" data-name="category" data-value="" tabindex="0" role="menuitem">
            <p class='disc-item-text'>
                All Experiences            </p>
        </div>
    </div>
                    <div class='disc-column inline-top js-disc-col'>
                    <div class='col-title js-col-title sg-f-ttl'>Interests</div>
                <a lvl='1' href='/m/filter/options/category/511' di-type="basic" di-class="Header Click" di-id="Filter Category (Entertainment)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='511' data-catname='entertainment' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Entertainment)" >Entertainment</p></div></a><a lvl='1' href='/m/filter/options/category/506' di-type="basic" di-class="Header Click" di-id="Filter Category (Arts and Culture)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='506' data-catname='arts-and-culture' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Arts and Culture)" >Arts and Culture</p></div></a><a lvl='1' href='/m/filter/options/category/507' di-type="basic" di-class="Header Click" di-id="Filter Category (Sports)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='507' data-catname='sports' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Sports)" >Sports</p></div></a><a lvl='1' href='/m/filter/options/category/508' di-type="basic" di-class="Header Click" di-id="Filter Category (Culinary)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='508' data-catname='culinary' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Culinary)" >Culinary</p></div></a><a lvl='1' href='/m/filter/options/category/509' di-type="basic" di-class="Header Click" di-id="Filter Category (Travel)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='509' data-catname='travel' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Travel)" >Travel</p></div></a>                <div class="disc-item disc-view-more js-view-more"  tabIndex="0"
                     onkeydown="var char =event.which || event.keyCode; if(char==13){discoveryViewMore($(this));return false;}  "
                     onclick="discoveryViewMore($(this))"
                >
                    <p class=" disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">More...</p>
                </div>
                <div class="more-items js-more-items">
                <a lvl='1' href='/m/filter/options/category/510' di-type="basic" di-class="Header Click" di-id="Filter Category (Shopping)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='510' data-catname='shopping' data-location=''  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Shopping)" >Shopping</p></div></a>                        <div class="disc-item disc-view-less js-view-less" onclick="discoveryShowLess($(this))">
                            <p class="disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">Less...</p>
                        </div>
                    </div>
                    </div>                <div class='disc-column inline-top js-disc-col'>
                    <div class='col-title js-col-title sg-f-ttl'>Locations</div>
                <a lvl='1' href='/m/filter/options/location/9716/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Argentina)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='argentina'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Argentina)" >Argentina</p></div></a><a lvl='1' href='/m/filter/options/location/9458/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Australia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='australia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Australia)" >Australia</p></div></a><a lvl='1' href='/m/filter/options/location/8486/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Austria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='austria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Austria)" >Austria</p></div></a><a lvl='1' href='/m/filter/options/location/18575/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Brazil)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='brazil'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Brazil)" >Brazil</p></div></a><a lvl='1' href='/m/filter/options/location/8830/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Bulgaria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='bulgaria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Bulgaria)" >Bulgaria</p></div></a>                <div class="disc-item disc-view-more js-view-more"  tabIndex="0"
                     onkeydown="var char =event.which || event.keyCode; if(char==13){discoveryViewMore($(this));return false;}  "
                     onclick="discoveryViewMore($(this))"
                >
                    <p class=" disc-item-text sg-c-primary sg-text-transform sg-hover-3 sg-cursor">More...</p>
                </div>
                <div class="more-items js-more-items">
                <a lvl='1' href='/m/filter/options/location/18557/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Canada)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='canada'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Canada)" >Canada</p></div></a><a lvl='1' href='/m/filter/options/location/8832/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Chile)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='chile'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Chile)" >Chile</p></div></a><a lvl='1' href='/m/filter/options/location/18604/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (China)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='china'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (China)" >China</p></div></a><a lvl='1' href='/m/filter/options/location/20341/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Colombia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='colombia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Colombia)" >Colombia</p></div></a><a lvl='1' href='/m/filter/options/location/5767/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Croatia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='croatia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Croatia)" >Croatia</p></div></a><a lvl='1' href='/m/filter/options/location/46204/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Czechia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='czechia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Czechia)" >Czechia</p></div></a><a lvl='1' href='/m/filter/options/location/63462/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Fiji)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='fiji'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Fiji)" >Fiji</p></div></a><a lvl='1' href='/m/filter/options/location/18551/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (France)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='france'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (France)" >France</p></div></a><a lvl='1' href='/m/filter/options/location/46254/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Germany)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='germany'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Germany)" >Germany</p></div></a><a lvl='1' href='/m/filter/options/location/8851/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Greece)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='greece'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Greece)" >Greece</p></div></a><a lvl='1' href='/m/filter/options/location/20943/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Hong Kong)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='hong-kong'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Hong Kong)" >Hong Kong</p></div></a><a lvl='1' href='/m/filter/options/location/3568/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (India)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='india'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (India)" >India</p></div></a><a lvl='1' href='/m/filter/options/location/3302/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Indonesia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='indonesia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Indonesia)" >Indonesia</p></div></a><a lvl='1' href='/m/filter/options/location/8857/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Ireland)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='ireland'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Ireland)" >Ireland</p></div></a><a lvl='1' href='/m/filter/options/location/46053/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Italy)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='italy'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Italy)" >Italy</p></div></a><a lvl='1' href='/m/filter/options/location/21046/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Japan)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='japan'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Japan)" >Japan</p></div></a><a lvl='1' href='/m/filter/options/location/8476/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Kenya)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='kenya'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Kenya)" >Kenya</p></div></a><a lvl='1' href='/m/filter/options/location/72961/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Macau)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='macao'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Macau)" >Macau</p></div></a><a lvl='1' href='/m/filter/options/location/6698/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Malaysia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='malaysia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Malaysia)" >Malaysia</p></div></a><a lvl='1' href='/m/filter/options/location/89610/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Maldives)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='maldives'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Maldives)" >Maldives</p></div></a><a lvl='1' href='/m/filter/options/location/9473/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Mexico)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='mexico'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Mexico)" >Mexico</p></div></a><a lvl='1' href='/m/filter/options/location/8872/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Morocco)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='morocco'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Morocco)" >Morocco</p></div></a><a lvl='1' href='/m/filter/options/location/7696/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Netherlands)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='netherlands'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Netherlands)" >Netherlands</p></div></a><a lvl='1' href='/m/filter/options/location/43025/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (New Zealand)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='new-zealand'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (New Zealand)" >New Zealand</p></div></a><a lvl='1' href='/m/filter/options/location/8875/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Nigeria)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='nigeria'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Nigeria)" >Nigeria</p></div></a><a lvl='1' href='/m/filter/options/location/8885/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Puerto Rico)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='puerto-rico'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Puerto Rico)" >Puerto Rico</p></div></a><a lvl='1' href='/m/filter/options/location/8887/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Romania)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='romania'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Romania)" >Romania</p></div></a><a lvl='1' href='/m/filter/options/location/62738/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Serbia)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='serbia'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Serbia)" >Serbia</p></div></a><a lvl='1' href='/m/filter/options/location/8892/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Singapore)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='singapore'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Singapore)" >Singapore</p></div></a><a lvl='1' href='/m/filter/options/location/18659/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (South Africa)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='south-africa'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (South Africa)" >South Africa</p></div></a><a lvl='1' href='/m/filter/options/location/18600/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Spain)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='spain'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Spain)" >Spain</p></div></a><a lvl='1' href='/m/filter/options/location/43084/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Sweden)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='sweden'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Sweden)" >Sweden</p></div></a><a lvl='1' href='/m/filter/options/location/18582/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Thailand)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='thailand'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Thailand)" >Thailand</p></div></a><a lvl='1' href='/m/filter/options/location/20876/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Turkey)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='turkey'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Turkey)" >Turkey</p></div></a><a lvl='1' href='/m/filter/options/location/19588/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United Arab Emirates)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-arab-emirates'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United Arab Emirates)" >United Arab Emirates</p></div></a><a lvl='1' href='/m/filter/options/location/9673/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United Kingdom)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-kingdom'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United Kingdom)" >United Kingdom</p></div></a><a lvl='1' href='/m/filter/options/location/45824/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (United States)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='united-states'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (United States)" >United States</p></div></a><a lvl='1' href='/m/filter/options/location/8910/trk/20211/' di-type="basic" di-class="Header Click" di-id="Filter Category (Uruguay)"     style='display:inline-block; width:100%;'><div class='disc-item  js-filter-disc-item js-filter-op js-useObj txt-ovr-3 sg-f-bdy sg-hover-3 ' tabindex='-1' role='menuitem' data-type='radio' data-closest='.js-discovery-popup' data-name='category' data-value='' data-catname='' data-location='uruguay'  ><p class='fo-14-n-s4 disc-item-text js-disc-item-text' di-type="basic" di-class="Header Click" di-id="Filter Category (Uruguay)" >Uruguay</p></div></a></div></div>    <div class="view-all-categories">
        <p class="fo-11-n-m  co-gr le-14 sg-text-transform js-category-clear" style="display:none;" onclick="$('.js-filter-hint[data-mapping=disc]').click()" di-type="basic" di-class="Body Click" di-id="Filter Clear Category Selection"  >
            Clear Selection        </p>
        <div class="clearAll"></div>
    </div>
    <div class="disc-footer">
        <a href="/filter/" class="fo-11-n-m  co-gr le-14" di-type="basic" di-class="Body Click" di-id="View All Filter Results"  >
            ADVANCED SEARCH        </a>
        <div class="clearAll"></div>
    </div>
</div>

    </div>
<div id="filter" ontouchstart="" class="filterPage" style="display:none;">

            <div class="backto-disc js-backto-disc-menu" data-value="" >
            <div class="cat-name js-cat-name sg-text-transform sg-f-hdr">
                Filter            </div>
            <img class="closeFilterButton" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close filter" role='button' tabindex="0"
                di-type="basic" di-class="Body Click" di-id="Filter Mobile Close Menu"  >
        </div>
    


    <div class="filters-section">

        <div style="display:none;" class="js-filter-productization-master-pid " data-value="0"></div>
        

        <div class="js-filter-menu-discId hidden" data-get-name="category">
            <div class="" style="display: none;" >
                <div class='filter-selected disc-item js-disc-item js-filter-disc-item js-filter-op js-useObj ' data-type='radio'
                    data-closest='.js-discovery-popup'
                    data-name='category'
                    data-catname=""
                    data-text="All Experiences"
                    data-value=''>
                   <p class='fo-14-n-s4 disc-item-text'></p>
               </div>
            </div>
        </div>

        
                <div class="js-collections-box" style="display: none; margin-bottom: 0px">
            <div class="filter-box">
                <div class="filter-options-content js-options-collection js-filter-options-content" data-get-name="shpString" >
                                    </div>
            </div>
            <div class="title-seperater"></div>
        </div>


        <div class="filter-box">
            <div class="filter-title">
                <p class="title sg-text-transform sg-f-hdr" >Location</p>
            </div>
            <div class="filter-options-content js-options-location js-filter-options-content" data-get-name="geoString">
                            <div class="checkbox-options-widget js-checkbox-options sg-f-subttl">
                <ul>
                                            <li style="" class="js-filter-cbox js-useObj js-filter-op  filter-selected js-filter-location  js-all-location" data-name='location'  data-value=''  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox select checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="true" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">All locations </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='9716'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Argentina </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='9458'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Australia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8486'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Austria </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18575'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Brazil </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8830'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Bulgaria </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18557'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Canada </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8832'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Chile </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18604'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">China </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='20341'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Colombia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='5767'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Croatia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='46204'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Czech Republic </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='63462'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Fiji </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18551'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">France </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='46254'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Germany </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8851'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Greece </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='20943'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Hong Kong </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='3568'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">India </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='3302'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Indonesia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8857'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Ireland </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='46053'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Italy </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='21046'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Japan </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8476'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Kenya </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='72961'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Macau </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='6698'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Malaysia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='9473'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mexico </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8872'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Morocco </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='7696'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Netherlands </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='43025'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">New Zealand </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8875'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Nigeria </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8885'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Puerto Rico </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8887'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Romania </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='62738'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Serbia </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8892'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Singapore </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18659'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">South Africa </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18600'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Spain </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='43084'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Sweden </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='18582'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Thailand </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='20876'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Turkey </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='19588'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">United Arab Emirates </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='9673'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">United Kingdom </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='45824'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">United States </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-location  js-filter-no-children" data-name='location'  data-value='8910'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Location Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Uruguay </span></label>
        </div>
                                                    </li>
                                        </ul>
                <div class="clearAll"></div>
            </div>
            
            </div>
        </div>
        
                    <div class="title-seperater"></div>
            <div class="filter-box">
                <div class="filter-title">
                    <p class="title sg-text-transform sg-f-hdr" >Categories</p>
                </div>
                <div class="filter-options-content js-options-category js-filter-options-content" data-get-name="category">
                            <div class="checkbox-options-widget js-checkbox-options sg-f-subttl">
            <ul>
                                    <li style="" class="js-filter-cbox js-useObj js-filter-op  filter-selected js-filter-category  js-all-category" data-name='category' data-value=''  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" select checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="true" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox0"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">All categories </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='506'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox1"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Arts and Culture </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='507'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox2"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Sports </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='508'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox3"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Culinary </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='509'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox4"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Travel </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='510'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox5"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Shopping </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='511'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox6"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Entertainment </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-category " data-name='category' data-value='885'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Category Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox7"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Giving back </span></label>
        </div>                    </li>
                                </ul>
            <div class="clearAll"></div>
        </div>
                        </div>
            </div>
        
        <div class="title-seperater"></div>
                <div class="clearAll"></div>

        <div class="title-seperater"></div>
        <div class="filter-box js-parent">
            <div class="filter-title">
                <p class="title sg-text-transform sg-f-hdr" >Time range</p>
            </div>
            <div class="filter-options-content js-filter-options-content" data-get-name="date">
                <div class="hidden  js-filter-availability js-useObj js-filter-op js-filter-preset" data-name="date" data-value="" data-type="radio" data-siblings="li"  onclick="radioFilterClick($(this))" ></div>
                <div class="hidden js-filter-availability js-useObj js-filter-date-range js-filter-op" data-name="date" data-value="" data-type="radio" data-siblings="li"  onclick="radioFilterClick($(this))" ></div>
                <select class="filter-select js-m-filter-date ">
                    <option value="">
                        Select from preset options                    </option>
                    <option value="weekdays"  di-type="basic" di-class="Body Click" di-id="Filter Weekdays Only"  >
                        Weekdays Only                    </option>
                    <option value="weekends"  di-type="basic" di-class="Body Click" di-id="Filter Weekends Only"  >
                        Weekends Only                    </option>
                    <option value="nexttwoweeks"  di-type="basic" di-class="Body Click" di-id="Filter Next 2 Weeks"  >
                        Next 2 weeks                    </option>
                    <option value="nextmonth"  di-type="basic" di-class="Body Click" di-id="Filter Next Month"  >
                       Next Month                    </option>
                    <option value="nextthreemonths"  di-type="basic" di-class="Body Click" di-id="Filter Next 3 Months"  >
                        Next 3 Months                    </option>
                    <option value="nextsixmonths"  di-type="basic" di-class="Body Click" di-id="Filter Next 6 Months"  >
                       Next 6 Months                    </option>
                </select>
                <div class="time-seperator">
                    <div class="time-seperator-line"></div>
                    <div class="time-circle"><span class="co-888 fo-11-n-m le-014" style="padding:10px;" >Or</span></div>
                </div>
                <div class="filter-date-range sg-inline-flex-grow">
                    <div class="standard f-left" style="width: 48%; margin-right: 3%;"  > 
                        <input data-name="fromDate" class="iconRight calender-field js-schedule js-filter-from fromDate js-useObj" data-selector="#filter .js-filter-from" placeholder="From" readonly="readonly" type="text" value="" name="" />                    </div>
                    <div class="standard f-right" id="toDateField" style="width: 48%;" >
                    <div id = "warningHint">
                        <input data-name="toDate" class="iconRight calender-field js-schedule js-filter-to toDate js-useObj" data-selector="#filter .js-filter-to" placeholder="To" readonly="readonly" type="text" value="" name="" />                      </div>
                        <p id="warning" style="color:red; display:none">Must choose a from date first.</p>
                    </div>
                    <div class="clearAll"></div>
                    <div class="calendar-panel js-calendar-panel">
                        <div style="position: relative;">
                            <div class="js-filter-cal-overlay" style="
                                    height: 100%;
                                    width: 100vw;
                                    position: fixed;
                                    top: 0px;
                                    left: 0px;
                                    background-color: #000;
                                    opacity: 0.8;">
                            </div>
                                <div class="filter-calendar-box" style="margin: 0 auto; width: 350px; margin-top: 90px;">
                                            <div class="calendar-panel-header">
            <span class="fo-14-n-m js-cal-panel-header sg-text-transform">from</span>
        </div>
        <div class="user-calendar calendar" data-mobile="1" style="display:block;" data-target="#filter .js-filter-from" data-filter="1" data-nfad="0" data-y="2023" data-year="2023" data-m="04" data-month="04" >
            <style>
/*
=========================================================
   scheduling dialog
*/
.cal-header { padding-top: 18px; }
.cal-wrapper {float:left; width: 100%; background: #fff; color:#333; position: relative; width: 100%; margin: 0 auto;min-height:300px;}

.schedule-box .number {height: 33px; width: 33px; line-height: 33px;
        position: absolute; text-align: center; color: #ffffff;
        background: url(https://d5xydlzdo08s0.cloudfront.net/images/io/green_circle.png);}
.scheduling-form { width: 100%; margin: 0 auto;}
.scheduling-form .schedule-box .date {}
.scheduling-form .schedule-box .date input[type="text"] {width:125px; height: 19px; padding:5px; text-align:center;
        box-shadow: none;
}
.scheduling-form .schedule-box { margin:10px 0px; border:1px solid #e1e1e1; float:left; width:100%;}

.scheduling-form .schedule-box .label {top: 8px; position: absolute; float:left; text-align:center; width:137px;}


.cal-header {float:left; margin:10px 0px; margin-bottom: 0px; border: 1px solid #e1e1e1; border-bottom: none; width: 100%;}

.cal-footer {float:left; margin:20px 0 20px 30px; position: absolute; bottom: 0;}
.cal-footer > span {float: left; line-height: 20px;}
.cal-footer .legend {width: 10px; height:10px; margin-top:5px; background: #f1f1f1; border: 1px solid #ccc;}
.cal-footer .legend.no {background: #989898}
.cal-footer .label {font-style: italic; margin: 0 15px 0 10px;color: #888;}

.cal-nav {float:left; width: 100%; margin: 15px 0; }
.cal-nav .left {float:left; width: 30px; cursor: pointer;}
.cal-nav .title {
    float:left; min-width: 222px;
    width: calc(100% - 62px);
    text-align: center;}
.cal-nav .right {float:right; width: 30px; cursor: pointer; text-align:right;}

.cal-year-nav {float:right; width: 101px;}
.cal-year-nav .left, #cal-year-nav .right {float:left; width: 15px; cursor: pointer;}
.cal-year-nav .title {float:left; width: 70px;}

.schedule-wrapper {float:left; color:#fff; position: relative; background-color: #f5f5f5;}
.schedule-title {margin-top:10px; width:240px; border-bottom:1px solid #fff; font-style: italic; line-height: 36px; text-align: left;}

.cal-week {float:left; width: 100%; display:flex; flex-direction:row;}
.week{ width: 40px;
    width: calc(100% / 7);
    text-align: center;
    float: left;
}
.cal-body {float:left; width: 100%; }
.cal-body {float:left; width: 100%; }
.cal-body table{
    border-collapse: collapse;
    width:100%;
}
.cal-body table, .cal-body td, .cal-body th {
    border: 1px solid #e1e1e1;
}
.cal-day-box {
    height: 50px;  width: 42px;
    cursor: pointer;
     line-height:50px; text-align: center;}
.cal-day-box.day.price{
    line-height: initial;
    text-align: left;
    vertical-align: top;
}
.cal-day-box.day.active:hover {
    background:#3b3935 ;
    color:#fff;
}
.cal-day-box.day.available {background: #fff; color: #000;}
.cal-day-box.day.available:hover {
    background:#cf4500 ;
    color:#fff;
}
.cal-day-box.day.inactive { background:rgb(53,52,50); color:#fff; cursor:default;  }
.cal-day-box.day.black {background: #252525; color: #8d8c8c;}
.cal-day-box.day.selected {color:#fff; background-size:30px 30px;}
.cal-day-box.day.selected.highlight {color:#fff;  background-size:30px 30px;}
.cal-day-box.day.highlight {color:#fff; background-size:30px 30px;}
.cal-day-box.day.price .day-num{ height: 18px; line-height: 18px; padding-left: 5px;}
.cal-day-box.day.price .day-price-hint{ height: 15px; line-height: 15px; padding-left: 5px; color: #888;}
.cal-day-box.day.price.selected .day-price-hint{color:#fff;}
.cal-day-box.day.price:hover .day-price-hint{color:#fff;}
.cal-day-box.day.price .day-price-text{ height: 18px; line-height: 18px; padding-left: 5px;}

.cal-time {float:left; background: #fff; color:#333; position: relative;
    width: calc(50% - 2px);
}
.cal-time .time{min-height: 47px; width:100%}
.cal-time select{width: 100%; min-height: 47px; background-position-y: 50%;}
.cal-time-box {float:left; margin-right:10px;}
.cal-time-box .cal-time-text {  display: inline-block;margin-top: 15px;}
.cal-time-box .cal-time-dropdown {width:76px;}
.scheduling-form-submit {float:left;margin: 10px 0 15px 0;width:100%;}

.cal-day-box.day.noDay{
    color: #fff;
    cursor: default;
}

.cal_timezone_msg {padding-top: 5px; display:none;}
.cal_timezone_msg:empty {display:none;}
</style>

<style>
    .cal-day-box.day.selected, .cal-day-box.day.selected.highlight, .cal-day-box.day.active:hover { background: #cf4500; }
    .cal-day-box.day.highlight { background:#b4b0a9; }
</style>


    <div class="cal-wrapper js-cal">
        <div class="cal-header">
            <div class="cal-nav">
                <div class="left">
                    <img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_arrowleft_000.png" style="width:20px;"
                         role="navigation" alt="previous calendar month"  tabindex="0"
                         di-type="basic" di-class="Body Click" di-id="Calendar Next Month"                     />
                </div>
                <div class="title"><span class="month">April</span><span class="year">&nbsp;&nbsp;2023</span></div>
                <div class="right">
                    <img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_arrowright_000.png" style="width:20px;"
                         role="navigation" alt="next calendar month" tabindex="0"
                         alt=""accesskey=""di-type="basic" di-class="Body Click" di-id="Calendar Previous Month"                     />
                </div>
            </div>

            <!--
            moved to CommonControllerEx::getProductCalendar()
            <div class="cal-week">
                <div class='week first'>S</div><div class='week '>M</div><div class='week '>T</div><div class='week '>W</div><div class='week '>T</div><div class='week '>F</div><div class='week '>S</div>            </div>
            -->

        </div>

        <!-- populated in CommonControllerEx::getProductCalendar() -->
        <div class="cal-body sg-f-bdy">
        </div>

    </div>

    <div class="schedule-wrapper cal-time">
        <div class="schedule-list preCheckOutField">
            <div class="schedule-box schedule-box-0 current sg-bd-2 sg-f-bdy">
                <div class="date" style="height:50px">
                    <input tabindex="-1" index="0" class=" sg-f-bdy date calender-field Schedule_date_0  default-value" readonly
                           style="height:100%; width:100%; background-image: url(https://d5xydlzdo08s0.cloudfront.net/images/mc/calendar.png);
                                    background-repeat: no-repeat;background-size: 22px; background-position: 8px 13px; border: none;
                                        border-right: #b4b0a9"/>
                    <input type="hidden" index="0" class="scheduledDatetimeDisplay_0" name="Schedule[date][0]">
                </div>
                <div class="cal-time cal-time-0">
                    <div class='time '>
                        <select class='dateTimeRange sg-f-bdy'>
                            <option>Select Time</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="sg-f-bdy schedule-box schedule-box-1">
                <div class="date" style="height: 50px;">
                    <input index="1" class="date calender-field Schedule_date_1 default-value" readonly />
                    <input type="hidden" index="1" class="scheduledDatetimeDisplay_1" name="Schedule[date][1]" >
                </div>
                <div class="cal-time cal-time-1">
                    <div class='time'>
                        <select class='dateTimeRange sg-f-bdy'>
                            <option>Select Time</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <p class="errorMessage" role="alert">*Please select time</p>
        <p class="errorMessage2" role="alert" style="color: #fd6340; font-style: italic; text-align: left; margin-bottom: 0; display: none;">*Please select a date/time that is greater than the current date/time.</p>
        <div class='cal_timezone_msg sg-f-bdy-s'>All experiences take place in the local timezone.</div>
    </div>
    
                        <script type='text/javascript'>
                $(document).ready(function(){
                    draw_calendar_general($("#filter .user-calendar"), function(){

                        var $calendar = $("#filter .user-calendar");
                        var selectedTime    = $calendar.attr("selectedTime");
                        var displayTimeText = $calendar.attr("displayTimeText");
                        $($calendar.attr("data-target")).val(displayTimeText);
                        $($calendar.attr("data-target")).attr("selectedTime", selectedTime);
                        // default for one same day
                        // set another input with same value if another input has empty value
                        //

                        var $parent = $($calendar.attr("data-target")).closest(".js-parent");
                        $parent.find(".js-m-filter-date").val("");
                        $parent.find(".js-m-filter-date").removeClass("highlight");
                        $parent.find(".js-schedule").each(function(){
                            if($(this).val() === ""){
                                $(this).val(displayTimeText);
                                $(this).attr("selectedTime", selectedTime);
                            }
                            $(this).addClass("highlight");
                        });

                        if(g_filter_to_date === ""){
                            //$parent.find(".js-filter-to").val("");
                            $calendar.attr("data-target", "#filter .js-filter-to");
                            $("#filter .js-cal-panel-header sg-text-transform").text("To");
                        }else{

                            var $target = $parent.find(".js-filter-date-range");
                            $target.attr("data-value");
                            $target.attr("data-value",g_filter_from_date+"_"+g_filter_to_date);
                            $target.attr("data-filter-from", $calendar.attr("data-filter-from"));
                            $target.attr("data-filter-to", $calendar.attr("data-filter-to"));
                            $target.addClass("filter-selected");
                            $("#filter .js-calendar-panel").fadeOut();
                        }

                        if (g_filter_from_date && g_filter_from_date !== "") {
                            $('input[data-name="fromDate"]').attr('selectedtime', g_filter_from_date);
                            var fromDateArr = g_filter_from_date.split("-");
                            var fromDateVal = getJsText('From') + " " + fromDateArr[1] + "/" + fromDateArr[2] + "/" + fromDateArr[0].slice(2,4);
                            $('input[data-name="fromDate"]').val(fromDateVal);
                        }

                        if (g_filter_to_date && g_filter_to_date !== "") {
                            $('input[data-name="toDate"]').attr('selectedtime', g_filter_to_date);
                            var toDateArr = g_filter_to_date.split("-");
                            var toDateVal = getJsText('To') + " " + toDateArr[1] + "/" + toDateArr[2] + "/" + toDateArr[0].slice(2,4);
                            $('input[data-name="toDate"]').val(toDateVal);
                        }

                        //

                        filtering("", true);

                        //$parent.find(".js-schedule")

                    });
                });

            </script>
            
            <div class="clearAll"></div>
        </div>
                                        </div>
                        </div>

                    </div>

                </div>

            </div>
        </div>
        
                    <div class="title-seperater"></div>
            <div class="filter-box">
                <div class="filter-title">
                    <p class="title sg-text-transform sg-f-hdr" >Mastercard product</p>
                </div>
                <div class="filter-options-content js-options-cardType js-filter-options-content" data-get-name="cardType">
                            <div class="checkbox-options-widget js-checkbox-options sg-f-subttl">
            <ul>
                                    <li style="" class="js-filter-cbox js-useObj js-filter-op  filter-selected js-filter-cardType  js-all-cardType" data-name='cardType'  data-value=''  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" select checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="true" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox0"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">All Mastercard products </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='1'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox1"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mastercard Black </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='2'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox2"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">World Elite Mastercard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='3'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox3"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">World Mastercard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='4'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox4"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Platinum Mastercard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='5'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox5"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">World Mastercard Black Edition </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='6'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox6"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Gold Mastercard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='7'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox7"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Titanium Mastercard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='8'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox8"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">World Mastercard (Europe) </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='9'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox9"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mastercard Standard </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='10'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox10"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">World Mastercard Rewards </span></label>
        </div>                    </li>
                                        <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-cardType " data-name='cardType'  data-value='11'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Card Type Selected"  >
                        <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class=" checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox11"><span class="label js-label  sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mastercard Rewards Only </span></label>
        </div>                    </li>
                                </ul>
            <div class="clearAll"></div>
        </div>
                        </div>
            </div>
                
                    <div class="title-seperater"></div>
            <div class="filter-box">
                <div class="filter-title">
                    <p class="title sg-text-transform sg-f-hdr" >Content Type</p>
                </div>
                <div class="filter-options-content js-options-contentType js-filter-options-content" data-get-name="contentType">
                                <div class="checkbox-options-widget js-checkbox-options sg-f-subttl">
                <ul>
                                            <li style="" class="js-filter-cbox js-useObj js-filter-op  filter-selected js-filter-contentType  js-all-contentType" data-name='contentType'  data-value=''  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox select checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="true" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">All content types </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='1'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Experiences </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='2'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Digital experiences </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='3'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Articles </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='4'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Auctions </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='5'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Sweepstakes </span></label>
        </div>
                                                    </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-parent js-all-contentTypes" data-name='contentType'  data-value='6'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Offers </span></label>
        </div>
                                                            <ul class="js-filter-contentType-children-container js-filter-children-container mg-t-10" style="display: none;">
                                                                    <li style="" class="js-filter-cbox js-useObj js-filter-op mg-l-20  js-filter-contentType  js-filter-children-all" data-name='contentType'  data-value='6'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                                    <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="childCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox6"><span class="label js-label child-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">All offers </span></label>
        </div>                                    </li>
                                                                        <li style="" class="js-filter-cbox js-useObj js-filter-op mg-l-20  js-filter-contentType  js-filter-children" data-name='program'  data-value='2'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                                    <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="childCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox2"><span class="label js-label child-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mastercard Travel Rewards </span></label>
        </div>                                    </li>
                                                                        <li style="" class="js-filter-cbox js-useObj js-filter-op mg-l-20  js-filter-contentType  js-filter-children" data-name='program'  data-value='5'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                                    <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="childCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for="chkBox5"><span class="label js-label child-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Mastercard Travel and Lifestyle Services </span></label>
        </div>                                    </li>
                                                                    </ul>
                                                        </li>
                                                <li style="" class="js-filter-cbox js-useObj js-filter-op  js-filter-contentType  js-filter-no-children" data-name='contentType'  data-value='7'  data-type="checkbox" di-type="basic" di-class="Body Click" di-id="Filter Content Type Selected"  >
                            <div class="checkBox-block js-checkBox-block " style="" onclick=""> <input   class="parentCheckbox checkBox js-io-checkBox" btntype="checkBtn" style="" readonly="readonly" name="" onclick="" aria-checked="false" role="menuitemcheckbox" onfocus="" type="text"  ><label for=""><span class="label js-label parent-label sg-rtl-fix " style="margin: 5px 5px 0 5px;">Benefits </span></label>
        </div>
                                                    </li>
                                        </ul>
                <div class="clearAll"></div>
            </div>
                            </div>
            </div>
                        <div class="clearAll"></div>
    </div>
    <div class="btn-section">
        <div class="filter-result-cnt" style="display: none;">
            <p class="sg-c-3">
                Filter Results                <span class="fo-14-n-s4 co-ff" id="filterProductsCnt" data-value="0"></span>
            </p>
        </div>
        <div>
            <div  class="btn-m apply js-apply sg-text-transform primaryButton button " style="margin: 2px 5px;" di-type="basic" di-class="Body Click" di-id="Filter Mobile Submit" tabIndex="0" role="button"><span class="title-container"><span class="title">Find</span></span></div>
            <div  class="btn-m js-back navButton sg-text-transform whiteButton button  " style="margin: 2px 5px;" di-type="basic" di-class="Body Click" di-id="Filter Mobile Cancel" tabIndex="0" role="button"><span class="title-container"><span class="title">Cancel</span></span></div>        </div>
    </div>
</div>

<div class="filterLoading" style="display: none; position: fixed; top: 200px; width: 100%;">
    <img src="https://d5xydlzdo08s0.cloudfront.net/images/loading_product.gif" alt="loading" style="display: block; margin: 0 auto;" />
</div>
<div id="filter-overlay" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; display: none; opacity: 0.3; z-index: 999; background-color: #666;"></div>



<script type="text/javascript">

    var geoSelectedArray     = [];
    var pppSelectedArray     = [];
    var tppSelectedArray     = [];
    var ppiSelectedArray     = [];
    var cardSelectedArray    = [];
    var contentSelectedArray = [];
    var ajaxForLuminary      = true;
    var ajaxForCharity       = true;

    function usesFilterParentChild(type){
        return ['contentType', 'program', 'location'].includes(type);
    }

    function getCollections(catId){
        if(!catId){
            catId = 0;
        }
        $.ajax({
            type: "POST",
            url: "/services/search/getCollections",
            dataType: 'json',
            cache: false,
            data: {'catId':catId},
            success: function(data) {

                if(data.result === 1){
                    if(data.html !== ""){
                        $("#filter .js-collections-box").slideDown("fast");
                        $("#filter .js-options-collection").html(data.html);
                    }else{
                        $("#filter .js-collections-box").slideUp("fast");
                    }
                }

            },
            error: function(msg) {

            }
        });
    }


    function selectDiscInMenuBasedOnCatId(catId){
        $("#disc-menu .js-filter-disc-item.filter-selected").removeClass("filter-selected");
        if(catId){
            $("#disc-menu .js-filter-disc-item[data-value="+catId+"]").addClass("filter-selected");
        }else{
            $("#disc-menu .js-filter-disc-item.js-filter-all").addClass("filter-selected");
        }
    }

//    moved to _common_inline_js because used by both mobile and desktop filter
//    function radioFilterClick($obj){
//        if($obj.hasClass('js-filter-sort') && $obj.hasClass('filter-selected') || 
//           $obj.hasClass('js-filter-blog') && $obj.hasClass('filter-selected')
//        ) {
//            return false; // sort filter always autoselected so do not allow unselect
//        }
//
//        liClick($obj);
//        if(!g_filter_from_mobile_menu){
//            filterPopupClose($(".js-d-filter-widget.clicked .js-widget-popup"));
//            $(".js-d-filter-widget.clicked").removeClass("clicked");
//        }
//
//        //$obj.closest(".js-widget-popup").animate({opacity: 'hide', height: 'hide'}, 150);
//    }


    function showMobileFilterMenu(callback, catId){
        var $block = $("#filter");
        prepareMobileFilter(catId);
        //adjustHeightForMobileFilter();
        g_filter_from_mobile_menu = true;

        // codes to show the default header
        // to handle for the case: users scroll down to see more experence and then click filter icon ( when category marque is fixed already )
        //$("#top").show();
        //$("#body .icon.menu").css('top', '13px');
        //$("#header-m .toggle-menu").prependTo($("#content"));
        //$("#header-m .cat-marquee").prependTo($("#content"));
        //$("#header-m").css('position', 'absolute');
        //$("#category-page .spacer").hide();

        //$("#body .icon.menu").css("position", "absolute");
        //

        $block.addClass("slideIn").show();
        $('html, body').animate({scrollTop:0}, 0);
        if($("#body > .icon").length > 0){
            $("#body > .icon").css("top","0px");
        }
        $block.animate({left:'0px'},{
            duration:400,
            easing: "linear",
            complete:function(){
                //console.log("slide!");

                $("#filter .btn-section").fadeIn();
                $block.css("width", "100%");

                if(typeof callback === "function"){
                    callback();
                }
                //alert($("#filter").height());
                //alert($("#container").height());
                //alert($("#content").height());
                //alert($("#container").height());
            }
        });
        $block.find(':focusable').first().focus();
    }

    function showMobileDiscMenu(){
        var $block = $("#disc-menu");

        //adjustHeightForMobileFilter();
        g_filter_from_mobile_menu = true;

        // codes to show the default header
        // to handle for the case: users scroll down to see more experence and then click filter icon ( when category marque is fixed already )
        //$("#top").show();
        //$("#body .icon.menu").css('top', '13px');
        //$("#header-m .toggle-menu").prependTo($("#content"));
        //$("#header-m .cat-marquee").prependTo($("#content"));
        //$("#header-m").css('position', 'absolute');
        //$("#category-page .spacer").hide();

        //$("#body .icon.menu").css("position", "absolute");
        //

        $block.addClass("slideIn");
        $('html, body').animate({scrollTop:0}, 0);
        if($("#body > .icon").length > 0){
            $("#body > .icon").css("top","0px");
        }
        $block.show();
        $block.animate({left:'0px'},{
            duration:400,
            easing: "linear",
            complete:function(){
                prepareForPopUpOpening();
                //console.log("slide!");
                //$("#filter .btn-section").fadeIn();
                $block.css("width", "100%");
                //alert($("#filter").height());
                //alert($("#container").height());
                //alert($("#content").height());
                //alert($("#container").height());
                $block.find(':focusable').first().focus();
            }
        });
    }

    function hideDiscMenu(){
        var $block = $("#disc-menu ");
        $block.removeClass("slideIn");
        //releaseMobileFilter();
        //releaseHeightForMobileFilter();
        $block.animate({left: "-100%"},{
            duration:400,
            easing: "linear",
            complete:function(){
                $block.hide();
            }
        });
    }

    function hideFilterMenu(){
        var $block = $("#filter ");
        $block.removeClass("slideIn");
        releaseMobileFilter();
        //releaseHeightForMobileFilter();
        $block.animate({left: "-100%"},{
            duration:400,
            easing: "linear",
            complete:function(){
                $block.hide();
            }
        });
    }

//    moved to _common_inline_js
//    function clearDateRange(filter){
//        if(filter === undefined){
//            filter = true;
//        }
//        if($("#filterPage .js-filter-date-range").hasClass("filter-selected") && filter){
//
//            filterRemove($("#filterPage .js-filter-hint[data-mapping=availability]"));
//        }else{
//            $("#filterPage .js-filter-date-range").removeClass("filter-selected");
//            $("#filterPage .js-filter-date-range").attr("data-value","");
//            $("#filterPage .js-cal .day.highlight ").removeClass("highlight");
//            $("#filterPage .js-cal .day.selected").removeClass("selected");
//            $("#filterPage .js-cal .day.js-first").removeClass("js-first");
//            $("#filterPage .js-cal .day.js-second").removeClass("js-second");
//        }
//
//        /*
//        $("#filterPage .js-filter-date-range").attr("data-value","");
//        $("#filterPage .js-cal .day.selected").removeClass("selected");
//        $("#filterPage .js-cal .day.js-first").removeClass("js-first");
//        $("#filterPage .js-cal .day.js-second").removeClass("js-second");
//
//        if(filter){
//            $("#filterPage .js-filter-date-range").addClass("filter-selected");
//            $("#filterPage .js-filter-date-range").click();
//        }
//        */
//    }

    function filterMenuCatIdHandling(catId, filter, showFilterMenu){

        if(showFilterMenu === undefined){
            showFilterMenu = true;
        }

        var oldCatId = $("#filter .js-filter-menu-discId .js-filter-disc-item").attr("data-value");
        var newCatId = catId;
        if(catId){
            var $disc = $("#disc-menu .js-disc-item[data-value="+catId+"]");
        }else{
            var $disc = $("#disc-menu .js-disc-item.js-filter-all");
        }

        $("#filter .js-filter-menu-discId .js-filter-disc-item").attr("data-value", newCatId);
        $("#filter .js-filter-menu-discId .js-filter-disc-item").attr("data-text", $disc.find("p").text());
        $("#filter .js-filter-menu-discId .js-filter-disc-item").attr("data-catname", $disc.attr("data-catname"));
        $("#filter .js-backto-disc-menu .js-cat-name").html($disc.find("p").text());
        $("#filter .js-backto-disc-menu").attr("data-value", newCatId);
        
        // only update count if new category selected or all experiences selected before selecting a category
        if(oldCatId != newCatId || ($('#filterProductsCnt').html() === '' && $disc.hasClass('js-filter-all'))){
            //getCollections(newCatId);
            //getFilterOptions();
            
            if ($disc.hasClass('js-filter-all')) { // clear current category
                if($("#filter .js-all-category").hasClass("filter-selected") ){
                    filtering("", true);
                } else {
                    $("#filter .js-all-category").click();
                }
            } 
            else if(filter){
                filtering("", true);
            }
        }

        if(showFilterMenu){
            showMobileFilterMenu(function(){
                hideDiscMenu();
            }, catId);
        }


        selectDiscInMenuBasedOnCatId(newCatId);
    }

    // mobile disc widget populating
    function mobileDiscWidgetPreparing(){

        var $discHidden = $(".js-filter-menu-discId .js-filter-disc-item");
        if($discHidden.attr("data-text") && $discHidden.attr("data-value")){
            $("#filterPage .js-m-disc-widget").attr("data-value", $discHidden.attr("data-value"));
            $("#filterPage .js-m-disc-widget span").text($discHidden.attr("data-text"));
            $("#filterPage .js-filter-hints.js-mobile .js-cat-name").text("In "+$discHidden.attr("data-text"));
            $("#filterPage .js-filter-hints.js-mobile .js-cat-name").show();
            filterHintAdd($discHidden);
        }else{
            $("#filterPage .js-m-disc-widget").attr("data-value", "");
            $("#filterPage .js-m-disc-widget span").text($discHidden.attr("data-text"));
            $("#filterPage .js-disc-hints .js-filter-hint").remove();
            $("#filterPage .js-filter-hints.js-mobile .js-cat-name").hide();
        }


    }

    $(document).ready(function() {
        
        $('#disc-menu .discovery-popup .disc-all-ex .disc-item').click(function() {
            $("#filter").css({"position": "relative"});
            $('#content').hide();
        });
        
        $('.primaryButton').click(function() {            
            $("#filter").css({"position": "absolute"});
            $('#content').show();
        });
    
        $('input#mobile-disc-input').on('keyup', function (e) {
            if (e.keyCode == 13) {
                $('.view_all_link.ui-menu-item').click();
            }
        });

        if (g_is_mobile) {
            if($("#filter-overlay").length > 0){
                $("#filter-overlay").hide();
                $(".filterLoading").hide();
            }
            // VP-26595 set value of date inputs on loading filter if there are initial values
            if (g_filter_from_date && g_filter_from_date !== "") {
                $('input[data-name="fromDate"]').attr('selectedtime', g_filter_from_date);
                var fromDateArr = g_filter_from_date.split("-");
                var fromDateVal = getJsText('From') + " " + fromDateArr[1] + "/" + fromDateArr[2] + "/" + fromDateArr[0].slice(2,4);
                $('input[data-name="fromDate"]').val(fromDateVal);
            }
            if (g_filter_to_date && g_filter_to_date !== "") {
                $('input[data-name="toDate"]').attr('selectedtime', g_filter_to_date);
                var toDateArr = g_filter_to_date.split("-");
                var toDateVal = getJsText('To') + " " + toDateArr[1] + "/" + toDateArr[2] + "/" + toDateArr[0].slice(2,4);
                $('input[data-name="toDate"]').val(toDateVal);
            }
        }
        else {
            if ($("#page-overlay").length > 0) {
                $("#page-overlay").hide();
                $("#loading").hide();
            }
        }
        if (g_is_mobile && $(this).closest(".user-calendar").attr("data-filter") === undefined && !g_filter_to_date ) { //
            $('input[data-name="toDate"]').attr('disabled', 'disabled'); //make user select 'from' first
        }

        $("#filter .js-filter-from").click(function(){ 
            $('input[data-name="toDate"]').removeAttr('disabled');
            $('#warning').hide();
        });

        $('#warningHint').click(function() { 
            $('#warning').show(); 
        });

        $("#filter .js-hide-filter").click(function() {
            hideFilterMenu();
            return false;
        });

        $("#disc-menu .js-disc-item").click(function() {
            filterMenuCatIdHandling($(this).attr("data-value"), true);
            return false;
        });

        $("#disc-menu .close-mobile-filter-menu").click(function() {
            hideDiscMenu();
            prepareForPopUpclosing();
            return false;
        });

        $("#filter .js-backto-disc-menu").click(function() {
            selectDiscInMenuBasedOnCatId($(this).attr("data-value"));
            hideFilterMenu();
            return false;
        });

        $("#filter").on("change", ".js-m-filter-date", function() {
            var $preset = $(this).siblings(".js-filter-preset");
            $preset.attr("data-value", $(this).val());
            $('input[data-name="toDate"]').attr('disabled', 'disabled');
            
            if ($(this).val() === "") {
                $(this).removeClass("highlight");
                $preset.attr("data-text","");

            }
            else {
                $preset.text($("#filter .js-m-filter-date option:selected").text().trim());
                $(this).addClass("highlight");
                $("#filter .js-schedule").removeClass("highlight");
                $("#filter .js-schedule").val("");
                $("#filter .js-filter-date-range").removeClass("filter-selected");
                $("#filter .js-filter-date-range").attr("data-value","");
                $("#filter .js-cal .day.selected").removeClass("selected");
                $("#filter .js-cal .day.js-first").removeClass("js-first");
                $("#filter .js-cal .day.js-second").removeClass("js-second");

                $preset.removeClass("filter-selected");
            }
            $preset.click();
        });



        $("#filter").on("click", ".js-filter-cbox", function(){
            var dataName = getFilterDataNameParent($(this).attr('data-name'));
            var dataNameChild = getFilterDataNameChild($(this).attr('data-name'));
            if (! $(this).hasClass("no-prod") ) {
                if (usesFilterParentChild(dataName) && $(this).hasClass("js-all-"+dataName)) {
                    if ( ! $(this).hasClass("filter-selected")) {
                        //liClick($(this));
                        $(this).find(".js-io-checkBox").addClass("select");
                        $(this).siblings(".filter-selected").find(".parentCheckbox.js-io-checkBox").removeClass("select");
                        $(this).siblings(".filter-selected").removeClass("filter-selected");

                        // remove children filter selected
                        $(this).parent().find('.js-filter-children-container').children('.js-filter-children, .js-filter-children-all').find(".childCheckbox.js-io-checkBox").removeClass("select");
                        $(this).parent().find('.js-filter-children-container').children('.js-filter-children, .js-filter-children-all').removeClass("filter-selected");

                        liClick($(this));
                        //$("#filterPage .js-location-hints p").remove();
                        $("#filter-fixed .js-"+dataName+"-hints button").remove();
                        $("#filter-fixed .js-"+dataNameChild+"-hints button").remove();
                        filterHintRemove($(this));
                    }
                }
                else if($(this).hasClass("js-all-cardType")){
                    if (!$(this).hasClass("filter-selected")){
                        //liClick($(this));
                        $(this).find(".js-io-checkBox").addClass("select");
                        $(this).siblings(".filter-selected").find(".js-io-checkBox").removeClass("select");
                        $(this).siblings(".filter-selected").removeClass("filter-selected");
                        liClick($(this));
                        //$("#filterPage .js-location-hints p").remove();
                        $("#filter-fixed .js-cardType-hints button").remove();
                        filterHintRemove($(this));
                    }
                }
                else if ($(this).hasClass("js-all-category")) {
                    if (! $(this).hasClass("filter-selected")) { 
                        $(this).find(".js-io-checkBox").addClass("select");
                        $(this).siblings(".filter-selected").find(".js-io-checkBox").removeClass("select");
                        $(this).siblings(".filter-selected").removeClass("filter-selected");
                        liClick($(this));
                        $("#filter-fixed .js-category-hints button").remove();
                        filterHintRemove($(this));
                    }
                }
                else {
                    $obj = $(this).find(".js-io-checkBox");
                    if ($obj.hasClass("select")) {
                        $obj.removeClass("select");
                    }
                    else {
                        $obj.addClass("select");
                    }

                    if (usesFilterParentChild(dataName) && $(this).hasClass("js-filter-"+dataName)) {
                        var allChildrenMobileClass = ".js-all-" + dataName;
                        if ($(this).hasClass("js-filter-children")) {
                            // if click child, remove filter-selected from .js-all-location
                            $(this).closest('.js-filter-parent').siblings(allChildrenMobileClass + ".filter-selected").find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            $(this).closest('.js-filter-parent').siblings(allChildrenMobileClass + ".filter-selected").removeClass("filter-selected");

                            // if click child, remove filter-selected from .js-filter-children-all
                            $(this).siblings(".js-filter-children-all.filter-selected").find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            $(this).siblings(".js-filter-children-all.filter-selected").removeClass("filter-selected");

                            // if all children checked, add filter-selected to js-filter-parent
                            if ($(this).siblings('.js-filter-children').length === $(this).siblings('.js-filter-children.filter-selected').length) {
                                $(this).closest('.js-filter-parent').addClass("filter-selected").attr('aria-selected', 'true');
                                $(this).closest('.js-filter-parent').find(".parentCheckbox.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
                            } else {
                                $(this).closest('.js-filter-parent').removeClass("filter-selected").attr('aria-selected', 'false');
                                $(this).closest('.js-filter-parent').find(".parentCheckbox.js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            }
                        } 
                        else if ($(this).hasClass("js-filter-children-all")) {
                            // if click child, remove filter-selected from .js-all-location
                            $(this).closest('.js-filter-parent').siblings(allChildrenMobileClass + ".filter-selected").find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            $(this).closest('.js-filter-parent').siblings(allChildrenMobileClass + ".filter-selected").removeClass("filter-selected");

                            // if click child all location, remove filter-selected from other children
                            $(this).siblings(".js-filter-children.filter-selected").find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            $(this).siblings(".js-filter-children.filter-selected").removeClass("filter-selected");

                            // if click child all location, add or remove parent filter-selected
                            if ($(this).hasClass("filter-selected")) {
                                $(this).closest('.js-filter-parent').removeClass("filter-selected").attr('aria-selected', 'false');
                                $(this).closest('.js-filter-parent').find(".parentCheckbox.js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            } 
                            else {
                                $(this).closest('.js-filter-parent').addClass("filter-selected").attr('aria-selected', 'true');
                                $(this).closest('.js-filter-parent').find(".parentCheckbox.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
                            }
                        } 
                        else {
                            // if click parent, remove filter-selected from .js-all-location
                            $(this).siblings(allChildrenMobileClass + ".filter-selected").find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                            $(this).siblings(allChildrenMobileClass + ".filter-selected").removeClass("filter-selected");

                            // if has filter-selected, remove select to input including children
                            if ($(this).hasClass("filter-selected")) {
                                if ($(this).find(".js-filter-children-all").length) {
                                    // only remove parent and .js-filter-children-all
                                    $(this).find(".parentCheckbox.js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                                    $(this).find(".js-filter-children-all .js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                                } 
                                else {
                                    $(this).find(".js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                                }
                            }
                            else { // else add select from input including children
                                if ($(this).find(".js-filter-children-all").length) {
                                    // only add parent and .js-filter-children-all
                                    $(this).find(".parentCheckbox.js-io-checkBox").addClass("select").attr('aria-checked', 'true');
                                    $(this).find(".js-filter-children-all .js-io-checkBox").addClass("select").attr('aria-checked', 'true');
                                    // remove other .js-filter-children
                                    $(this).find(".js-filter-children .js-io-checkBox").removeClass("select").attr('aria-checked', 'false');
                                } 
                                else {
                                    $(this).find(".js-io-checkBox").addClass("select").attr('aria-checked', 'true');
                                }
                            }
                        }
                    }
                    else if ($(this).hasClass("js-filter-cardType")) {
                        if($(this).siblings(".js-all-cardType.filter-selected").length === 1){
                            $(this).siblings(".js-all-cardType").find(".js-io-checkBox").removeClass("select");
                            $(this).siblings(".js-all-cardType").removeClass("filter-selected");
                        }
                        
                    }
                    else if ($(this).hasClass("js-filter-contentType")) {
                        if($(this).siblings(".js-all-contentType.filter-selected").length === 1){
                            $(this).siblings(".js-all-contentType").find(".js-io-checkBox").removeClass("select");
                            $(this).siblings(".js-all-contentType").removeClass("filter-selected");
                        }
                        
                    }else if ($(this).hasClass("js-filter-category")) {
                        if($(this).siblings(".js-all-category.filter-selected").length === 1){
                            $(this).siblings(".js-all-category").find(".js-io-checkBox").removeClass("select");
                            $(this).siblings(".js-all-category").removeClass("filter-selected");
                        }
                        
                    }
                    liClick($(this));
                }
            }
            return false;
        });

        $("#filter .js-filter-cal-overlay").click(function(){
            $("#filter .js-calendar-panel").fadeOut();
            $("#filter .js-calendar-panel").hide();
            return false;
        });

        $("#filter .js-schedule").click(function(){
            $(this).focusout();
            //var topOffset = $(this).position().top  + 45;
            //$("#filter .js-m-calendar-box").css("top",topOffset+"px");
            var $parent = $(this).closest(".js-parent");
            let targetTime = $(this).attr('selectedtime');
            if ($(this).hasClass("js-filter-from")) {
                $("#filter .js-cal-panel-header").text("From");
            } else {
                $("#filter .js-cal-panel-header").text("To");
            }
            if (typeof targetTime !== 'undefined') {
                let timeYMD = targetTime.split('-');
                // console.log(timeYMD);
                var $calendar = $("#filter .user-calendar");
                $calendar.attr("data-y",timeYMD[0]);
                $calendar.attr("data-m",timeYMD[1]);
                $calendar.attr("selectedtime",targetTime);
                draw_calendar_general($("#filter .user-calendar"), function(){});
            }
            $("#filter .js-calendar-panel").fadeIn();
            //$("#filter .user-calendar").fadeIn();
            $parent.find(".user-calendar").attr("data-target", $(this).attr("data-selector"));
            $parent.find(".js-schedule").removeClass("highlight");
            $(this).addClass("highlight");
            return false;
        });



        // Used for back button
        //selectOptionsBasedOnURL();

        if (!g_catId){ // in search result page
            var filterPos = "fixed";
            $(window).scroll(function(){
                if($("#footer").length>0){
                    if( $("#footer").offset().top  <= ($(".filter-icon-box").offset().top + 40) && filterPos === "fixed"){
                        $(".filter-icon-box").css("position", "relative");
                        $(".filter-icon-box").css("bottom", "0px");
                        filterPos = "relative";
                    }else if( ($("#footer").offset().top  - $(window).scrollTop() ) >= ( window.innerHeight -1) && filterPos === "relative" ){
                        $(".filter-icon-box").css("position", "fixed");
                        $(".filter-icon-box").css("bottom", "80px");
                        filterPos = "fixed";
                    }
                }
            });

            $(".subCatExpand").click(function(e){
                e.stopImmediatePropagation();
                if($(this).attr('expand') == 0){
                    $(this).closest("li").next(".subCat").slideDown(400 , function(){adjustHeightForMobileFilter();});
                    $(this).attr('expand',1);
                    $(this).children("img").attr("src","https://d5xydlzdo08s0.cloudfront.net/images/arrow_up_ccc.png");
                }else{
                    $(this).closest("li").next(".subCat").slideUp(400 , function(){adjustHeightForMobileFilter();});
                    $(this).attr('expand',0);
                    $(this).children("img").attr("src","https://d5xydlzdo08s0.cloudfront.net/images/arrow_down_ccc.png");
                }

                return false;
            });
        }


        $("#header-m").on("click", ".filter",function() {
            if($("#filter").hasClass("slideIn")){
                $("#filter .js-back").click();
            }else{
                $("#filter-icon").click();
                $("#main").addClass("filter");
            }

            return false;
        });

        // $("#filter-icon").click(function(e){

        // });


        $("#filter .js-apply").click(function(){

            if($("#filterProductsCnt").attr("data-value") === "0"){
                alertEx("0 listings found. Please release filter option(s) and try again.");
                return false;
            }

            if($(this).hasClass("disabled")){
                return false;
            }

            $block = $("#filter");

            if (g_filter_stay_in_page) {

                filtering("");
                $("#filterPage .js-clean-able .js-filter-hint").remove();
                filterSelectedHandling();

                $block.removeClass("slideIn");
                //$("#body .icon.menu").css("position", "fixed"); // make the menu fixed again
                releaseMobileFilter();
                $block.animate({left: "-100%"},{
                    duration:400,
                    easing: "linear",
                    complete:function(){
                        //console.log("back");
                        //$("#header-m").css('position', 'fixed');
                        //releaseHeightForMobileFilter();
                        //$("#body .icon.menu").css("position", "absolute");
                    }
                });
                $("#main").removeClass("filter");

                // mobile disc widget populating
                mobileDiscWidgetPreparing();
                //setTimeout(function(){ $(".filter-icon-box .filter-icon-close").show("slow"); }, 800);


                return false;


            }
            else {
                var strObj = {str:"", finalStr:""};

                $("#filter .js-filter-options-content").each(function(){
                    $(this).find(".filter-selected").each(function(){
                        formUrlPath($(this), strObj);
                    });

                    if(strObj.str !== ""){
                        strObj.str      = strObj.str.substring(0, strObj.str.length - 1);
                        if(strObj.str && strObj.str !== ""){
                            strObj.finalStr += ($(this).attr("data-get-name")+"/"+strObj.str+"/");
                        }
                        strObj.str      = "";
                    }
                });

                /*
                $("#filter .filter-selected").each(function(){
                    formUrlPath($(this), strObj);
                    if(strObj.str !== "_" && strObj.str !== ""){
                        strObj.str      = strObj.str.substring(0, strObj.str.length - 1);
                        strObj.finalStr += ($(this).attr("data-name")+"/"+strObj.str+"/");
                    }
                    strObj.str      = "";
                });
                */

                var $catObj = $("#filter .js-filter-menu-discId .js-filter-disc-item");
                if($catObj.attr("data-value") && $catObj.attr("data-value") !== "" && $catObj.attr("data-catname") ){
                    var url = "/m/filter/options/c/"+$catObj.attr("data-catname").toLowerCase()+"/"+strObj.finalStr;
                }else{
                    var url = "/m/filter/options/c/all/"+strObj.finalStr;
                }
                url += "mobileMenu/1/";
                //return false;
                window.location.href =  url;

                releaseMobileFilter();
                $block.animate({left: "-100%"},{
                    duration:400,
                    easing: "linear",
                    complete:function(){
                        //console.log("back");
                        //$("#header-m").css('position', 'fixed');
                        //$("#body .icon.menu").css("position", "absolute");
                    }
                });
                if(g_is_mobile){
                    //$("#filter-overlay").show();
                    //$(".filterLoading").show();
                }else{
                    $("#page-overlay").show();
                    $("#loading").show();
                }
                return false;
            }
        });

        /*
        $("#filter .clear-all").click(function(){
            $("#filter .js-schedule").val("");
            $("#filter .js-schedule").prop("readonly", true);
            $("#filter .js-weekday").prop('checked', false);
            availabilityCheckBoxHandling($("#filter .js-weekday"));
            $(".filters-section .filter-options ul li.filter-selected").each(function(){
                liClick($(this), false);
            });

            filtering("", true);
            return false;
        });


        $(".filter-icon-box .filter-icon-close").click(function(){
            $(this).hide();
            $(".filters-section .filter-options ul li.filter-selected").each(function(){
                liClick($(this));
            });
            filtering("");
        });
        */

        $("#filter .js-back").click(function(){
            $block = $("#filter");
            $block.removeClass("slideIn");
            releaseMobileFilter();
            //releaseHeightForMobileFilter();
            $block.animate({left: "-100%"},{
                duration:400,
                easing: "linear",
                complete:function(){
                    //$("#body .icon.menu").css("position", "fixed"); // make the menu fixed again
                    //$("#header-m").css('position', 'fixed');

                    //alert($("#filter").height());
                    //alert($("#container").height());
                    //alert($("#content").height());
                }
            });
            loadingEnd();
            $("#main").removeClass("filter");

        });

        //Code to handle rotate
        jQuery(window).on('orientationchange', function(e) {
            $("#filter").css("width", "100%");
        });


    //    position "OR" in time-circle filter-time-wdget
    // get the size of the circle and change position left



    });
</script>
        <div id="content" class="discovery">
            <style type="text/css">
#tour-overlay {width:100%; height:100%; text-align:center; display:table; background:transparent; position:relative;}
#tour-overlay .arrowBox {position:relative; float:none; display:table-cell; vertical-align: middle; width:45px; height:100%;}
#tour-overlay .rightArrow{cursor:pointer;}
#tour-overlay .leftArrow{cursor:pointer;}
#tour-overlay .cover {background:#fff; opacity:.95; height:100%; width:100%; position:absolute;}
#tour-overlay .scroll {height:500px;  width:500px; overflow:hidden; display:table-cell; float:none;}
#tour-overlay .tour-close { width:15px; height:15px;  z-index:1; cursor: pointer; position:absolute; padding:10px; right:0; top:0; background:#fff;}
#tour-overlay .wishlist{transition: 0.2s ease-in-out;}
#tour-overlay .pics { margin: 0 auto; width:20000px; position:absolute;}
#tour-overlay .pics > div { float:left;}
#tour-overlay .pics div.inactive {}
#tour-overlay .pics div.active {}
#tour-overlay .pics div img {text-align:center;}
#tour-overlay .scroll .pics div .table {display:table; width:100%;}
#tour-overlay .scroll .pics div .table > a {}
#tour-overlay .scroll .pics div .tourImage {display:block;}
#tour-overlay .scroll .pics div p.pageNumber{letter-spacing: 0.02em; border:1px solid #e1e1e1; width:86px; height:44px; color:#000;
          background-color:#fff; position:absolute; margin-top:-46px; line-height:44px; vertical-align:middle;}
#tour-overlay .scroll .pics div .content{display:block;  background:#333; color:#fff; padding:30px; text-align:left; position:relative; height:100%; }
#tour-overlay .scroll .pics div .content .title{padding-bottom:15px;}
#tour-overlay .scroll .pics div .content .description{letter-spacing: 0.02em; padding-bottom:15px;}

.noscroll { position: fixed; overflow-y:scroll }

</style>

<div id="tour-overlay" style="display:none;">
    <a class="tour-close"><img style="opacity:0.35;" src="https://d5xydlzdo08s0.cloudfront.net/images/io/x-button-grey.png"/></a>
    <div class="scroll">
        <div class="pics"></div>
    </div>
    <a class="rightArrow" style="position: absolute;top: 320px;right: 0px;"><img width="30" height="60" src="https://d5xydlzdo08s0.cloudfront.net/images/marquee_scroll_arrow-right_big.png" alt="Arrow icon"></a>
    <a class="leftArrow" style="position: absolute;top: 320px;left: 0px;"><img width="30" height="60" src="https://d5xydlzdo08s0.cloudfront.net/images/marquee_scroll_arrow-left_big.png" alt="Arrow icon"></a>
</div>

<script type="text/javascript">
 $(document).ready(function(){
    var pos = !isHandheld();
    var tour  = "";
    var slide = "";
    var size  = 0;
    var originalUrl = window.location.href;
    var width = Math.max($(window).width(), screen.width);
    var windowHeight= $(window).height();
    var toggleMenuDisplay;

    var imageTypeId = '34';

    $(".tourContainer .resizableImage, .showTour").click(function(){
        if ($(this).hasClass('disabled')) {
            return false;
        }
        imageTypeId      = $(this).attr("imageTypeId");
        var primaryKeyId = $(this).attr("primaryKeyId");

        if ($("#tour-overlay .pics").html() !== '') {
            $(document).scrollTop(0);
            initScroller();
            $("#tour-overlay .scroll").scrollable().seekTo(0);
            var slash = window.location.href.lastIndexOf("/") === window.location.href.length-1 ? "" : "/";
            history.pushState(null, null, window.location + slash + 'tour/'+imageTypeId+primaryKeyId+'/slide/1');
            return false;
        }

        $(this).addClass('disabled');

        var celebId      = $(this).attr("celebId");
        var slideIndex   = $(this).attr("slide");
        var _this        = this;
        $.post('/m/website/tourui',
            { primaryKeyId: primaryKeyId, imageTypeId: imageTypeId, celebId: celebId, width: width},
            function(data){
                if (data.result === 1) {
                    if(data['html'].length >0){
                        //need to set the full width of browser for image
                        //$("#tour-overlay .scroll").width()

                        $("#tour-overlay .pics").html(data['html']);
                        size = data['size'];
                        initScroller();
                        if(slideIndex){
                            $("#tour-overlay .scroll").scrollable().seekTo(slideIndex-1);
                        }else{
                            $("#tour-overlay .scroll").scrollable().seekTo(0);
                            var slash = window.location.href.lastIndexOf("/") === window.location.href.length-1 ? "" : "/";
                            history.pushState(null, null, window.location + slash + 'tour/'+imageTypeId+primaryKeyId+'/slide/1');
                        }

                        var firstChild = $("#tour-overlay .pics div:nth-child(2)");
                        firstChild.removeClass("inactive");
                        firstChild.addClass("active");
                        if($(_this).hasClass('hideMarquee')){
                            $('#content').append('<div class="test" style="height:100%; width:100%"></div>');
                            $('.cat-marquee').hide();
                            toggleMenuDisplay = $('.toggle-menu').css('display');
                        }
                    }
                } else {
                    console.log(data);
                }
                $(_this).removeClass('disabled');
            }, 'json'
        );

        return false;
    });

    if (tour !== ''){
        $("#tour"+tour).attr("slide", slide);
        $("#tour"+tour).trigger("click");
    }

    $("#tour-overlay .leftArrow").click(function(){
        var index = getIndex();
        updateUrl(index);
    });

    $("#tour-overlay .rightArrow").click(function(){
        var index = getIndex();
        updateUrl(index);
    });

    $("#tour-overlay").on("click", ".wishlist .white", function() {
        if(!g_is_guest){
            if(imageTypeId === '34'){ //only change wishlist for current item
                $(this).hide();
                $(this).siblings(".green").fadeIn();
            }else{ //product tourUI
                $("#tour-overlay .wishlist .white").hide();
                $("#tour-overlay .wishlist .green").fadeIn();
            }
        }
    });

    $("#tour-overlay").on("click", ".share-box", function(event){
        event.stopPropagation();
    });

    $("#tour-overlay").on("click", ".tour-close", function(){
        history.pushState(null, null, originalUrl);
        $("#tour-overlay").siblings().not("script, style, #filter-overlay, .filterLoading, .filter-icon-box").show();
        $('.toggle-menu').css({'display':toggleMenuDisplay});
        $("#tour-overlay").hide();
        hideShareBox();
        $("#footer").show();
    });

    function initScroller(){
        $("#tour-overlay").siblings().not("#header-m, script, style").hide();
        $("#footer").hide();
        $("#tour-overlay").show();
        $("#tour-overlay .scroll").scrollable({
            prev: '#tour-overlay .leftArrow',
            next: '#tour-overlay .rightArrow',
            speed: 200,
            circular: true,
            touch: true,
            onSeek: function(event, index) {
                $(".share-box").hide();
                updateUrl(index+1);
                hideOtherTourItems(index);
            }
        });
    }

    //Codes to handle rotate
    jQuery(window).on('orientationchange', function(e) {
        switch ( window.orientation ) {
            case 0:
            case 180:
                width  = Math.min($(window).width(), screen.width);
                break;
            case 90:
            case -90:
                width  = Math.max($(window).width(), screen.width);
                break;
        }
        var index  = getIndex() + 1;
        var contentWidth = width-60;
        var imgHeight       = $(".tourImage", "#tour-overlay .active").height();
        var contentHeight   = $(".content", "#tour-overlay .active").outerHeight();
        var height          = contentHeight + imgHeight;
        var arrowTop        = imgHeight/2-30;
        var left = -1 * index * width;

        animateArrows(arrowTop);
        $("#tour-overlay .tourImage").css({"width": width+"px"});
        $("#tour-overlay .share-box").css({"width": width+"px"});
        $("#tour-overlay .content").css({"width": contentWidth+"px"});
        $("#tour-overlay .scroll").css({"width": width +"px", "height": height+"px"});
        $("#tour-overlay .pics").css({"left":left});
    });


    function updateUrl(index){
        var url        = window.location.href;
        var slideIndex = url.indexOf("slide");
        history.pushState(null, null, url.substring(0, slideIndex)+"slide/"+index);
    }



    // Hide other scroll celebrity items to avoid ctrl+F5 issue
    function hideOtherTourItems(index){
        //var nth             = index + 2; /* index starts 0, nth-child starts 1, need to add 1 for cloned */
        //var $select         = $("#tour-overlay .pics > div:nth-child(" + nth + ")");
        var $select         = $(".tourImage:visible").closest('div').closest('div');
        var imgHeight       = $(".tourImage", $select).height();
        var contentHeight   = $(".content", $select).outerHeight();
        var height          = contentHeight + imgHeight;
        var arrowTop        = imgHeight/2-30;

        $select.siblings().removeClass("active");
        $select.siblings().addClass("inactive");
        animateArrows(arrowTop);


        $select.removeClass("inactive");
        $select.addClass("active");

        $("#tour-overlay .scroll").css({"width": width, "height": height});

        if(windowHeight > height){
            $("#tour-overlay").css({"height": windowHeight+20, "background": "none repeat scroll 0 0 #333"});
        }
    }

    function getIndex(){
        var index      = parseInt($(".scroll .active .pageNumber").attr("number")) - 1;
        if(index <= 0)  index = size;
        return index;
    }

    function animateArrows(arrowTop){
        if (arrowTop < 0) {
            arrowTop = 320;
        }
        $("#tour-overlay .leftArrow").css({"top":arrowTop, "left":-30});
        $("#tour-overlay .leftArrow").animate({left: "0", easing: 'easeout'}, 400);
        $("#tour-overlay .rightArrow").css({"top":arrowTop, "right":-30});
        $("#tour-overlay .rightArrow").animate({right: "0", easing: 'easeout'},400);
    }

 });
</script>
            <div id="main" class="discovery" >
                                <div class="msg-simple" style="margin: 0 auto; padding: 100px 30px; text-align:center; font-size:24px; font-weight: bold; max-width: 600px; line-height:1.4;">
    An unexpected error has occurred. Please try again later. If this continues, please reach out to us via the "Contact Us" details at the bottom of this page.</div>
            </div>
        </div>
        <!--   -->
<div id="footer"  class="mobile responsive " >

    <div id="footer-menu" class="mobile responsive sg-bg-footer">
        <style>
    #footer.responsive.mobile .center { width: 100%; }
    #footer-body { text-align:center; }
    #footer-menu.responsive  ul { text-align:center; }
    #site-link li a {color:#ffffff; text-decoration: none;}
            #footer.mobile.responsive { background-color: #141413;}
        #footer.mobile { background-color: #141413;}
        .footer-item { margin: 20px 0px 20px 0; }
    .footer-mobile-item-list { margin-top:20px; }
    
    .trademark_row {padding: 0 5px;}
    
</style>
<div id="footer-body" class="center sg-bg-footer">
    <div class="io-row sg-c-3" style="text-align:center; padding-top:20px;">
                <p class="sg-f-bdy sg-c-3" id="footer-follow" style="margin-bottom:8px">Follow us</p>
                <ul id="stay-connected">
                        <li>
                <a href="https://www.facebook.com/Mastercard" target="_blank" id="footer-facebook"
                   di-type="basic" di-class="Social Click" di-id="Facebook" >
                    <img class="social-media-icons" src="https://d5xydlzdo08s0.cloudfront.net/images/share_icons/facebook-logo-priceless.svg" alt="Facebook Logo" style="margin:10px 0 20px 0;" width="35px">
                    <span class="screen-reader-only">(opens in new tab)</span>
                </a>
            </li>
                         
            <li>  <!-- either there must be no accessCodeInfo or custom youtube link must be populated and must not be china or taiwan-->
                    <a href="https://www.youtube.com/user/mastercard" target="_blank" rel="noreferre" id="footer-youtube"
                        di-type="basic" di-class="Social Click" di-id="Youtube" >
                        <span class="screen-reader-only">(opens in new tab)</span>
                        <img class="social-media-icons" src="https://d5xydlzdo08s0.cloudfront.net/images/share_icons/youtube-logo-priceless.svg" alt="Mastercard on Youtube" style="margin:10px 0 20px 0;" width="35px">
                    </a>
            </li>
                                                        </ul>
        <div style="border-top: 0.5px solid; border-bottom: 0.5px solid; width: 95%; margin: 0 auto; padding-bottom: 20px;" class="sg-c-3">            
                <ul class="footer-menu-item footer-item">
                                        <li class="io-row footer-mobile-item-list">
                        <a href="/m/contact" target="" rel="" 
                           class="sg-c-3 sg-f-bdy-s contactus_link" di-type="basic" di-class="Footer Click" di-id="Contact Us" >
                           Contact us                           <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                                                            <li class="io-row footer-mobile-item-list">
                        <a href="/m/terms" target="" rel="" 
                           class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="Terms of Use" >
                           Terms of Use                           <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                                                        
                      
                                        <li class="io-row footer-mobile-item-list">
                        <a href="/m/about" target="" rel="" 
                           class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="About Priceless Cities" >
                           About Priceless                           <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                        
                                        <li class="io-row footer-mobile-item-list">
                        <a href="/m/privacy" target="" rel="" 
                           class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="Global Privacy Notice" >
                           Privacy Notice                           <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                                                                                
                
                                        <li class="io-row footer-mobile-item-list">
                        <a href="https://www.mastercard.com" target="_blank" rel="noreferrer" class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="About Mastercard" >
                            Mastercard.com                            <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                      

                    <li class="io-row footer-mobile-item-list" id="footer-manage-cookies">
                        <a href="javascript:Optanon.ToggleInfoDisplay();" 
                           class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="manage cookie" >
                           Manage cookies                        </a>
                    </li>

                                        <li class="io-row footer-mobile-item-list" id="footer-sitemap">
                        <a href="/m/sitemap" target="" rel="" 
                           class="sg-c-3 sg-f-bdy-s" di-type="basic" di-class="Footer Click" di-id="Sitemap" >
                           Sitemap                           <span class="screen-reader-only">(opens in new tab)</span>
                        </a>
                    </li>
                    

                                    </ul>
        </div>
    </div>
        <div class="io-row trademark_row" style="margin-top:20px; padding-bottom: 45px;">
        <p class="sg-f-bdy-s sg-c-3">Mastercard and Priceless are registered trademarks, and the circles design is a trademark of Mastercard International Incorporated. 2023 Mastercard</p>
    </div>
    
    <div style="clear:both;"></div>
</div>

        <div>
            <div id='hidden-info' class="sg-f-bdy-s responsive" style="" aria-hidden="true">
        <p class="info" style="color: #141413;">as01-SI5-SCOPx5Txqt7jJhvBCZPV6N-SO0-U0-V-L1-H54-mA0-uA1-auto0-exec:<span class="exec">0.477</span>-ajax:<span class="ajax">0</span>-total:<span class="total">0.477</span></p>    </div>
            </div>
    </div>

    <div style="clear:both;"></div>

</div>


        <input type="hidden" name="redirectURL" id="redirectURL" value="" />
        <input type="hidden" name="signUp-dialog-called-from" id="signUp-dialog-called-from" value="" />
        <input type="hidden" name="displayLogin" id="js-displayLogin" value="" />
    </div>
    <div class='modal-container' id="modal-container">
        <script type='text/javascript'>
function getCartItemCount() {
    $.ajax({
        type: "POST",
        cache : false,
        url: "/cart/cartItemCount",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'json',
        data: {from:1},
        success: function(data) {
            if (data.result === 1){
                if(parseInt(data.cartItemCount)>0){
                    $("#js-cart-item-cnt").html(data.cartItemCount);
                    $(".js-bag-img").attr("src",$(".js-bag-img").attr("data-filled-bag"));
                }
            }
        }
    });
}

function userStatusCheck() {
    $.ajax({
        type: "POST",
        cache : false,
        url: "/services/common/getUserStatus",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'json',
        data: {from:1},
        success: function(data) {
            if(data.isGuest != g_is_guest){ // status change

            }
        }
    });
}

function getFreshNavMenu() {
    $.ajax({
        type: "POST",
        cache : false,
        url: "/services/common/getFreshNavMenu",
        headers: { "Cache-Control": "no-cache" },
        dataType: 'json',
        data: {userLvl:g_user_lvl},
        success: function(data) {
            if(data.result == 1){ // status change
                $("#header-nav").html(data.html);
                g_user_lvl = data.userLvl;

                if(data.isGuest == 1){
                    g_is_guest = true;
                    $(".js-bag-link").addClass("js-signUp");
                }else{
                    g_is_guest = false;
                    $(".js-bag-link").removeClass("js-signUp");
                }

                if(parseInt(data.cartItemCount)>0){
                    $("#js-cart-item-cnt").html(data.cartItemCount);
                    $(".js-bag-img").attr("src",$(".js-bag-img").attr("data-filled-bag"));
                }else{
                    $("#js-cart-item-cnt").html("");
                    $(".js-bag-img").attr("src",$(".js-bag-img").attr("data-empty-bag"));
                }
            }
        }
    });
}

// used to handle the back button in ios app
if( g_is_mobile && g_agent_type == g_agent_type_options.ios  ){
    // ajax to update the nav if it is necessary
    getFreshNavMenu();
}

$(document).ready(function(){

    // force not to cache ajax
    $.ajaxSetup({ cache: false });

    // General solution for dot dot dot issue
    if($('.p-name').length > 0){
        adjustTextLength($('.p-name'));
    }
            // When scroll up, hide the soft keyboard
        var lastScrollTop = 0;
        $(window).on('scroll', function () {
            var st = $(window).scrollTop(); // get current scrollTop; Used to detect scroll up or down

            if( st < lastScrollTop && ! $("#m-search").is(":focus") ){ //scroll up
                //document.activeElement.blur();
                //$("input").blur();
            }
            lastScrollTop = st;
        });


        // app promotion logic
        var appBanner       = $('#app-banner');
        var appBannerHeight = appBanner.height();
        var headerM         = $('#header-m');
        var headMHeight     = headerM.height();
        var content         = $('#content');
        var contentHeight   = content.height();
        if( appBannerHeight != null){
            content.css('top', headMHeight+appBannerHeight);
        }
        var detectScroll    = true;

        console.log('document READY');
        console.log('hm: '+headMHeight+' app: '+appBannerHeight+' ct: '+contentHeight);

        $(window).scroll(function() {
            // after it's closed
            if( appBannerHeight == null){
                return;
            }

            var currentX = $(window).scrollTop();
            if (  currentX >= appBannerHeight ) {
                console.log('VISIBLE');

                if( !detectScroll){
                    return;
                }
                // Your div has reached the top
                console.log($(window).scrollTop());
                appBanner.hide();
                headerM.css('position', 'fixed').css('top', '0px');
                content.css('top', headMHeight+appBannerHeight);

            }
            else if ( ! appBanner.is(":visible")){
                console.log('NOT visible');
                if ( currentX < appBannerHeight ) {
                    appBanner.show();
                    headerM.css('position', 'static').css('top', appBannerHeight);
                    detectScroll = true;
                }
                return;

            }

            return;

        });
        
});

// Display products under "Shop more experiences" section
function displayProducts(celebId,pageId,$triggerDiv,pId){
    $.ajax({
        type: "POST",
        url: "/m/category/getProductsByCelebrity",
        data: { celebId: celebId, pageId: pageId, productId: pId},
        dataType: "json",
        success: function(data){
            if(data.result === 1){
                $triggerDiv.siblings("div.c-products").children(".loading").css("display","none");
                $triggerDiv.siblings("div.c-products").children(".view-btn").css("display","block");
                $triggerDiv.siblings("div.c-products").children(".product-tiles").children("a.right").css("display","block");
                $triggerDiv.siblings("div.c-products").addClass('loaded');

                if (g_showNewMobileCat  ){
                    $.each( data.prodcuts, function(i, product) {
                        //Append Products tile to lumanary
                        var product_dom = get_product_dom(product, $('#product_template'));
                        //product_dom.css({height: '188px', float: 'left',width: '152px', 'max-height': '240px', 'margin-right': '15px'});

                        $triggerDiv.siblings("div.c-products").children(".product-tiles").children(".items").append(product_dom);
                    });
                }
                else{
                    //Loop products to create product tile
                    $.each( data.prodcuts, function(i, e) {
                        //Append Products tile to lumanary
                        $triggerDiv.siblings("div.c-products").children(".product-tiles").children(".items").append("\n\
                            <div class='title' >\n\
                                <a href='"+e.productPageLink+"' lvl='"+e.userLevelId+"'>\n\
                                    <div class='product-image'>\n\
                                        <div class='black-bar'></div>\n\
                                        <img src='"+e.imgSrc+"' style='"+e.imgStyle+"' alt='"+e.productName+"' />\n\
                                    </div>\n\
                                </a>\n\
                                <div class='desction'>\n\
                                    <a href='"+e.productPageLink+"' lvl='"+e.userLevelId+"'><p class='p-name'>"+e.productName+"</p></a>\n\
                                    <p class='price'>"+e.price+"</p>\n\
                                </div>\n\
                            </div>\n");
                    });
                }



                $triggerDiv.siblings("div.c-products").children(".product-tiles").scrollable({
                    keyboard:true,
                    touch: true,
                    speed: 250,
                    onBeforeSeek: function(){
                            $triggerDiv.siblings("div.c-products").children(".instruction-box").css("display","none");
                        }
                    });

                if ( $triggerDiv.siblings("div.c-products").children(".product-tiles").children(".items").children(".title").length > 1){
                    $(".right").removeClass("disabled");

                    //Add instruction box
                    //$triggerDiv.siblings("div.c-products").children(".instruction-box").css("display","block");
                    //Only show the instruction box per session per page
                    if (showInstructionBox == false) {
                        $triggerDiv.siblings("div.c-products").children(".instruction-box").fadeIn("slow");
                        setTimeout(function(){
                                $triggerDiv.siblings("div.c-products").children(".instruction-box").fadeOut("slow");
                            },5000);
                        showInstructionBox = true;
                    }
                }
                $triggerDiv.siblings("div.c-products").children(".product-tiles").scrollable({keyboard:true,touch: true,speed: 300});

                adjustTextLength($triggerDiv.parent().find('.c-products .title .desction .p-name'));
            }
            else
            {
                //alert("There is an issue with your connection. Please try again.");
                $("#error-dialog .message").html("System error. Please contact IfOnly concierge. <br />" + data.msg);
                $("#error-dialog").overlay().load();
                $triggerDiv.children(".plus-minus").removeClass('minus');
                $triggerDiv.children(".plus-minus").addClass('plus');
                $triggerDiv.children(".plus-minus").children(".plus").css("display","block");
                $triggerDiv.children(".plus-minus").children(".minus").css("display","none");
                $triggerDiv.siblings("div.c-products").hide();
            }
        },
        error: function(data){
            //alert("There is an issue with your connection. Please try again.");
            $("#error-dialog .message").html("There is an issue with your connection. Please try again.");
            $("#error-dialog").overlay().load();
            $triggerDiv.children(".plus-minus").removeClass('minus');
            $triggerDiv.children(".plus-minus").addClass('plus');
            $triggerDiv.children(".plus-minus").children(".plus").css("display","block");
            $triggerDiv.children(".plus-minus").children(".minus").css("display","none");
            $triggerDiv.siblings("div.c-products").hide();
        }

    });
}




</script>

        <div id="trackingImage" style="height:1px;display: none;position: absolute;"></div>
        <!-- Member sign up / Log In -->
<style>
    #member-signup-dialog .close, #complete-signup-dialog .close {right: 18px; }
</style>


<style>
    #member-signup-dialog .rightVertical {float:none;position:relative; max-height:84vh;}   /* max-height:90vh; to enable auto vertical scroll bar for small screen  */

            #member-signup-dialog .rightVertical.desktop, #complete-signup-dialog .rightVertical.desktop {
            /* max-height:710px */
            /* make mastercard one step login loading overlay covers the whole dialog */
            
            /*  should not use fixed height.  on samall screen will not be able to see the full content. VP-24510 */
            /* height reduced for MRS, sign-up popup is longer */
            max-height:80vh;          
        }
        
        #member-signup-dialog { z-index: 10000; }
        
        #member-signup-dialog.mobile .ifonly_pop {border: 1px solid #666; }
    
    
    #member-signup-dialog .loginWithFacebookButton, #member-signup-dialog .google-signinButton {width:98%;}

    /* scroll bar for login popups. */
    #member-signup-dialog .rightVertical::-webkit-scrollbar,   #complete-signup-dialog .rightVertical::-webkit-scrollbar {width:5px; overflow-y:auto;}
    #member-signup-dialog .rightVertical::-webkit-scrollbar-thumb, #complete-signup-dialog .rightVertical::-webkit-scrollbar-thumb{ background-color: #666 ; outline: 1px solid red; }
    #member-signup-dialog .rightVertical::-webkit-scrollbar-track,  #complete-signup-dialog .rightVertical::-webkit-scrollbar-track{ background: #aaa; }



    
                .mobile#member-signup-dialog .rightVertical::-webkit-scrollbar,   .mobile#complete-signup-dialog .rightVertical::-webkit-scrollbar {width:0px;}
        #member-signup-dialog .rightVertical::-webkit-scrollbar-thumb { background-color: #141413; outline: 1px solid black; }
        #member-signup-dialog .rightVertical::-webkit-scrollbar-track { background: #141413; }
        /*
        #member-signup-dialog .rightVertical {
            -ms-scrollbar-base-color:#141413; -ms-scrollbar-track-color:#141413;
            -ms-scrollbar-arrow-color:#141413; -ms-scrollbar-3dlight-color:#141413;
            -ms-scrollbar-highlight-color:#141413; -ms-scrollbar-face-color:#141413;
            -ms-scrollbar-shadow-color:#141413; -ms-scrollbar-darkshadow-color:#141413;
            -ms-overflow-style:-ms-autohiding-scrollbar;
        }
        */
    
    #member-signup-dialog .close.rtl {left:11px; right:auto;}
    #member-signup-dialog .close.rtl.mobile {left:5px; right:auto;}

    .rtl #member-signup-dialog ul {padding-right: 0px;}
</style>




<!-- signup mastercard new design -->

<!-- used to valiation exclusivity with credit card number -->

<style>

    .signup_redesign_overlay {
        z-index: 10000;
    }

    .signup_redesign_overlay .ifonly_pop {
        background: url('https://d5xydlzdo08s0.cloudfront.net/images/mc/signup_background.png') no-repeat scroll center center / cover;
        width: 550px;
        max-width: 100%;
        min-height: 380px;
        padding-bottom: 0;
    }

    .signup_stepicons {
        display: flex;
        justify-content: space-between;
        margin: 30px 0 40px 60px;
        width: 60%;
        flex-wrap: wrap;
        text-align: center;
    }

    .signup_stepicons .middleline{
        border-bottom: 2px solid #cccccc;
        z-index: 0;
        width: 100%;
        margin: 0 10px;
        position: relative;
        top: 10px;

    }

    .signup_stepicon {
        position:relative;
        z-index: 1;
    }

    .signup_stepicon_img {
        display: inline-block;
        width: 20px;
        height: 20px;
        background: url('https://d5xydlzdo08s0.cloudfront.net/images/svg/circle_empty.svg') no-repeat scroll center center / cover;
    }

    .signup_stepicon.current .signup_stepicon_img {
        background-image: url('https://d5xydlzdo08s0.cloudfront.net/images/svg/circle_current.svg');
    }

    .signup_stepicon.done .signup_stepicon_img {
        background-image: url('https://d5xydlzdo08s0.cloudfront.net/images/svg/circle_done.svg');
    }

    .signup_stepicon_label {
        height: 0;
        width: 0px;
        position:relative;
    }

    .signup_stepicon_text{
        font-family: 'mc-mark-bold';
        display:inline-block;
        width:100px;
        position:relative;
        left: 10px;      /* half of the image width */
        color: #b1ada6;

    }

    .signup_stepicon.current .signup_stepicon_text, .signup_stepicon.done .signup_stepicon_text {
        color: #141413;
     }


    .signup_steps_viewport {
        overflow: hidden;

    }

    .signup_steps {
        display: flex;
        position: relative;
        justify-content: flex-start;
        transition: left 1s;
        left: 0%;

    }

     .signupstep {
        position: relative;
        flex: 0 0 100%;
        text-align: initial;
        padding: 0 30px;
    }

    .signup_steps .vc_body {
        margin: 10px 0;
    }

    .signup_steps .vc_body li {
        margin: 8px 0;
        position: relative;
        padding-left: 30px;
    }

    .signup_steps .vc_body li:before {
        content: '';
        background: #cf4500;
        width: 8px;
        height: 8px;
        position: absolute;
        border-radius: 4px;
        top: 7px;
        left: 0;
    }

    .done_img_div {
        margin: 20px -30px 0px -30px;
        height: 470px;
        background: url('https://d5xydlzdo08s0.cloudfront.net/images/mc/signup_done.jpg') no-repeat scroll center center / cover;
        position: relative;
    }

    .done_img_txt {
        position: absolute;;
        left: 30px;
        bottom: 40px;
        color: white;
    }

    .done_img_title {
        margin-bottom: 20px;
        font-size: 32px;
        line-height: 1.2em;
    }

    .done_img_sub_title {
        display: flex;
        align-items: flex-end;
    }

    .signup_cc_btn_row {
        display: flex;
        align-items: center;
    }

    .signup_cc_footer {
        margin: 0 30px;
    }

    .signupstep_signup_form {
        margin-top: 0px;
    }

    .signup_password_div {
        position: relative;
        width: 100%;
    }

    .signup_password_div .img_show_password {
        display: block;
    }

    .signup_password_div .img_hide_password {
        display:none;
    }

    .signup_password_div.password_hidden .img_show_password{
        display: none;
    }

    .signup_password_div.password_hidden .img_hide_password {
        display:block;
    }

    .img_show_password, .img_hide_password {
        position: absolute;
        right: -5px;
        top: 0px;
        width: 50px;
        cursor: pointer;
    }

    .signup_form_row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 15px;
    }

    .signup_form_row > *:first-child {
        width: 100%;
        margin-bottom: 2px;
        display: block !important;
    }

    .signup_form_row > label:first-child {
        font-size: 12px;
    }

    .signup_form_row.mc_check_div {
        align-items: flex-start;
        justify-content: space-between;
    }

    .signup_form_row.mc_check_div > input {
        width: 15px;
    }

    .signup_form_row.mc_check_div > label {
        width: calc(100% - 40px);
    }

    .signup_form_row .error_div {
        font-size: 12px;
    }

    .signupstep_signup_form a {
        color: #141413;
        width: auto;
    }

    .signup_redesign_overlay .country_select {
        background-position-y: 4px;
    }

    .signup_consent_div p:empty {
        display:none;
    }

    .mobile .done_img_div {
        height: 500px;
    }

    .mobile .signup_cc_btn_row {
        flex-wrap: wrap;
    }

    .mobile .signup_cc_footer {
        margin: 10px 0 0 0;
    }

    .signup_redesign_overlay.mobile .ifonly_pop {
        max-height: 86%;
        top: 48%;
        overflow-y: auto;
    }

    .mobile .signupstep {
        padding-bottom: 30px;
    }

    .mobile .signupstep.signupstep_done {
        padding-bottom: 0px;
    }


    .done_header_div >  * {
        display: none;
    }

    .done_header_div.email_verification > .email_verification {
        display: block;
    }

    .done_header_div.no_email_verification > .no_email_verification {
        display: block;
    }


    .rtl .signup_stepicons {
        margin-right: 60px;
        margin-left: 0;
    }

    .rtl .signup_steps .vc_body li:before {
        left: auto;
        right: 0
    }

    .rtl .signup_steps .vc_body li {
        padding-left: 0;
        padding-right: 30px;
    }

    .rtl .signup_steps .vc_body ul {
        padding-right: 0;
    }

    .rtl .signup_stepicon_text {
        left: 86px;
    }

    .rtl .img_show_password, .rtl .img_hide_password {
        right: auto;
        left: -5px;
    }

    .rtl .done_img_sub_title svg{
        transform: rotate(180deg);
    }
    
</style>




<div     
    class="signup_redesign_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="signup_redesign_overlay" 
    data-id="signup_redesign_overlay"   
>
    
    
    <div   class="signup_redesign_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="signup_redesign"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="signup_redesign_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div>
    <div class='body_row sg-f-bdy'>

        <!-- step icons-->
        <div class="signup_stepicons">
            <div class="middleline"></div>

                            <div class="signup_stepicon signup_stepicon_verify_card  signup_stepicon_index_0"  data-stepindex="0">

                    <div class="signup_stepicon_img" src="" ></div>
                    <div class="signup_stepicon_label">
                        <div class="signup_stepicon_text ifonly_transform_horizontal_center sg-f-bdy" style="">Verify card</div>
                    </div>
                </div>

                            <div class="signup_stepicon signup_stepicon_signup_form  signup_stepicon_index_1"  data-stepindex="1">

                    <div class="signup_stepicon_img" src="" ></div>
                    <div class="signup_stepicon_label">
                        <div class="signup_stepicon_text ifonly_transform_horizontal_center sg-f-bdy" style="">Login details</div>
                    </div>
                </div>

                            <div class="signup_stepicon signup_stepicon_done  signup_stepicon_index_2"  data-stepindex="2">

                    <div class="signup_stepicon_img" src="" ></div>
                    <div class="signup_stepicon_label">
                        <div class="signup_stepicon_text ifonly_transform_horizontal_center sg-f-bdy" style="">Done</div>
                    </div>
                </div>

                    </div>



        <!--  each steps -->
        <div class="signup_steps_viewport">
            <div class="signup_steps">
                                    <div class="signupstep signupstep_verify_card  signupstep_index_0 sg-f-bdy"  data-stepindex="0">


                                                <!--  --------------- step card --------------- -->

                            <div class="vc_header sg-f-dspl-m" >
                                Register to reveal content specific to your Mastercard, including:                            </div>


                            <div class="vc_body sg-f-bdy" >
                                <ul>
<li>Priority access to events</li>
<li>Complimentary digital experiences</li>
<li>Exclusive content</li>
<li>Shopping discounts, travel rewards, and more!</li>
</ul>                            </div>

                            <iframe id="signup_cc_iframe" src="https://pay.priceless.com/pay/index.php?r=form/getSignUpCreditCardForm&amp;sh=07800b43fe7437534a2aa93fb8d2a45a81302a04c3c1a4f4fde1490f32c2c21f-%2BFNbwQaLAnuQsl0mpNwZl2Je92%2BldGmlh&amp;su=0&amp;ss=%2Ba%2F27GUhcU3NZz9FVYFh4vzkNoBShmZCY&amp;sd=2&amp;si=%2BU6T4gUzuKV9IW%2Fh07XakozX14WyHrynr&amp;sc=%2Bh6ccz47TrcSWeMHyKuRTU76Pwodb5N%2BLx0inEGs3rws%3D&amp;fid=search&amp;mobile=1&amp;dt=%2BxEai3YZl8xsL%2FZvrc7Z%2B%2BwWo7FsYtBnRTlXiy%2FhqpuK0v01Ps5eQQ5gb%2BtA2%2FTCQ%2FToW0QuNz7u8ZBX8tgkR6ssMBkYbYfODFgOshuzi6HHipcupqnah7OjTZ3bnEV6%2Bf8Ycxqs7SWmXUTz%2FM73hvLTf%2FG4IqiQdP8ocDpIX4NVraZpWPI0hQeXZ3JTZGLBvwgu65ZP82IwCtAar92dvgmopuqxebY5%2BSZyD3WV4LVWpSsn2b%2BDcq6UuJwQEMl2owhPt40HfPXZ7Okxzrv4TSgVLjo3luddm4YRxjyVUZ%2FJJ7jwhTyZH4o%2BPupcr2spn1iSjkfyJegjxFC3A5Fo9WX0Zh7UJE2ri3Y2l1t1L7ULSJXuctOHj0CJg7xbHs77QJrx0IuCr%2BPcAP1ACO%2BYvciEvSYFt%2BGaK9zK2MVKiUc5%2Ft1dJrcFQWMqLW9HdLkVZ7V6GH0TE7FjJjzkWSnXgEUOBJwNU15SphJdin43MNV1NboyRF7wLdvKON78BWGGsNEMzuRbO5gxlNt%2F71tHFC27%2BTiUFxeVS&amp;st=5&amp;c_form=mobile&amp;embedded_form=1&amp;rtl=" title="Enter credit card" style="width:100%; margin:5px 0 30px 0; min-height:100px; height:100px;" scrolling="no"></iframe>

                            <div class="signup_cc_btn_row">
                                <div  class="signup_cc_submit_btn primaryButton button " onclick="signup_cc_submit_btn_clicked()" di-type="basic" di-class="Body Click" di-id="signup redesign cc btn" tabIndex="0" role="button"><span class="title-container"><span class="title">Continue</span></span></div>
                                                                    <div class='signup_cc_footer'>
                                        Already have an account?
                                        <!--  javascript: signupDialog(1, false, {login:true});  -->
                                        <a class='signup_login_link' href=''  onclick="signupDialog(1, false, {login:true}); return false;">
                                            Log in                                        </a>
                                    </div>
                                
                           </div>


                        


                        


                        


                    </div>




                                    <div class="signupstep signupstep_signup_form  signupstep_index_1 sg-f-bdy"  data-stepindex="1">


                        


                                                <!--  --------------- step signup form ---------------  -->

                            <form name="redesignedSignupForm" id="redesignedSignupForm" action="/m/filter/options/location/8910" method="POST">
<input type="hidden" value="YXpzX3lvejRfYUpEZmFxbUJQcnE0NnVaYWtjYjBrM0qsoF2dqjOACHqI7jaBT7068nBO46NM9wJVXOVmdfm8eQ==" name="stk" />
                                
<input type="hidden" name="signupRedesign" value="1" />
<input type="hidden" name="User[noPasswordConfirm]" value="1" />

<div class="signup_form_row ">
    <label class="" for="User_email_emailAddress">Email</label>
    <input type="email" id="User_email_emailAddress"  name="User[emailAddress]" value=""
        class="email_txt sg-label-input " autocomplete="off" aria-invalid='false'
        placeholder="Email" aria-required="true" required
        title="Please fill out this field"
    />
</div>

<div class="signup_form_row ">
    <label class="" for="signup_user_password">Password</label>

    <div class="signup_password_div password_hidden">
        <input id="signup_user_password" type="password" name="User[password]" value="" autocomplete="off"
            class="password sg-label-input " aria-invalid='false'
            placeholder='Password'
        />
        <img class="img_show_password" src="https://d5xydlzdo08s0.cloudfront.net/images/mc/password_on.png" />
        <img class="img_hide_password" src="https://d5xydlzdo08s0.cloudfront.net/images/mc/password_off.png" />
    </div>

    <div class="sg-f-bdy">
        Password must be at least 8 characters with three of: uppercase, lowercase, numbers or special characters. Space, dictionary words and repetitive or sequential characters are not allowed.    </div>
</div>


<div class="signup_form_row country_div " >
    <label class="" for="signup_user_country">
        Location / Region    </label>

    <select id="signup_user_country" name="User[countryShortCode]" class='country_select sg-label-input'
        autocomplete="off" aria-invalid='false'
    >
        <option value="" style=''>
            Location / Region        </option>

        <option value='AF'>Afghanistan</option><option value='DZ'>Algeria</option><option value='AO'>Angola</option><option value='AR'>Argentina</option><option value='AW'>Aruba</option><option value='AU'>Australia</option><option value='AT'>Austria</option><option value='AZ'>Azerbaijan</option><option value='BS'>Bahamas</option><option value='BH'>Bahrain</option><option value='BE'>Belgium</option><option value='BJ'>Benin</option><option value='BO'>Bolivia</option><option value='BA'>Bosnia and Herzegovina</option><option value='BW'>Botswana</option><option value='BR'>Brazil</option><option value='BG'>Bulgaria</option><option value='BF'>Burkina Faso</option><option value='BI'>Burundi</option><option value='CM'>Cameroon</option><option value='CA'>Canada</option><option value='CV'>Cape Verde</option><option value='KY'>Cayman Islands</option><option value='CF'>Central African Republic</option><option value='TD'>Chad</option><option value='CL'>Chile</option><option value='CN'>China</option><option value='CO'>Colombia</option><option value='KM'>Comoros</option><option value='CG'>Congo</option><option value='CR'>Costa Rica</option><option value='CI'>Cote D'Ivoire (Ivory Coast)</option><option value='HR'>Croatia</option><option value='CY'>Cyprus</option><option value='CZ'>Czech Republic</option><option value='CD'>Democratic Republic of the Congo</option><option value='DK'>Denmark</option><option value='DJ'>Djibouti</option><option value='DO'>Dominican Republic</option><option value='EC'>Ecuador</option><option value='EG'>Egypt</option><option value='SV'>El Salvador</option><option value='GQ'>Equatorial Guinea</option><option value='EE'>Estonia</option><option value='ET'>Ethiopia</option><option value='FJ'>Fiji</option><option value='FI'>Finland</option><option value='FR'>France</option><option value='GA'>Gabon</option><option value='GM'>Gambia</option><option value='DE'>Germany</option><option value='GH'>Ghana</option><option value='GR'>Greece</option><option value='GT'>Guatemala</option><option value='GN'>Guinea</option><option value='GW'>Guinea-Bissau</option><option value='HN'>Honduras</option><option value='HK'>Hong Kong</option><option value='HU'>Hungary</option><option value='IN'>India</option><option value='ID'>Indonesia</option><option value='IQ'>Iraq</option><option value='IE'>Ireland</option><option value='IL'>Israel</option><option value='IT'>Italy</option><option value='JM'>Jamaica</option><option value='JP'>Japan</option><option value='JO'>Jordan</option><option value='KE'>Kenya</option><option value='KW'>Kuwait</option><option value='LV'>Latvia</option><option value='LB'>Lebanon</option><option value='LS'>Lesotho</option><option value='LR'>Liberia</option><option value='LY'>Libya</option><option value='LT'>Lithuania</option><option value='LU'>Luxembourg</option><option value='MO'>Macao</option><option value='MG'>Madagascar</option><option value='MW'>Malawi</option><option value='MY'>Malaysia</option><option value='MV'>Maldives</option><option value='ML'>Mali</option><option value='MT'>Malta</option><option value='MR'>Mauritania</option><option value='MU'>Mauritius</option><option value='MX'>Mexico</option><option value='MD'>Moldova</option><option value='ME'>Montenegro</option><option value='MA'>Morocco</option><option value='MZ'>Mozambique</option><option value='NA'>Namibia</option><option value='NL'>Netherlands</option><option value='NZ'>New Zealand</option><option value='NI'>Nicaragua</option><option value='NE'>Niger</option><option value='NG'>Nigeria</option><option value='MK'>North Macedonia</option><option value='NO'>Norway</option><option value='OM'>Oman</option><option value='PK'>Pakistan</option><option value='PS'>Palestine</option><option value='PA'>Panama</option><option value='PY'>Paraguay</option><option value='PE'>Peru</option><option value='PH'>Philippines</option><option value='PL'>Poland</option><option value='PT'>Portugal</option><option value='PR'>Puerto Rico</option><option value='QA'>Qatar</option><option value='RO'>Romania</option><option value='RW'>Rwanda</option><option value='SA'>Saudi Arabia</option><option value='SN'>Senegal</option><option value='RS'>Serbia</option><option value='SC'>Seychelles</option><option value='SL'>Sierra Leone</option><option value='SG'>Singapore</option><option value='SK'>Slovakia</option><option value='SI'>Slovenia</option><option value='SO'>Somalia</option><option value='ZA'>South Africa</option><option value='KR'>South Korea</option><option value='ES'>Spain</option><option value='LK'>Sri Lanka</option><option value='SZ'>Swaziland</option><option value='SE'>Sweden</option><option value='CH'>Switzerland</option><option value='TW'>Taiwan</option><option value='TZ'>Tanzania</option><option value='TH'>Thailand</option><option value='TG'>Togo</option><option value='TN'>Tunisia</option><option value='TR'>Turkey</option><option value='TC'>Turks and Caicos Islands</option><option value='UG'>Uganda</option><option value='AE'>United Arab Emirates</option><option value='GB'>United Kingdom</option><option value='US'>United States</option><option value='UY'>Uruguay</option><option value='VN'>Vietnam</option><option value='YE'>Yemen</option><option value='ZM'>Zambia</option><option value='ZW'>Zimbabwe</option>    </select>
</div>

<div class="signup_form_row mc_check_div   " style=' margin:0 auto;'>
    <!--Added height:auto; width:auto; to prevent checkboxes from moving in safari -->
    <input id="pricelessProgram" type='checkbox' class='mc_priceless_check' name='User[pricelessProgram]' value="1" tabindex="0"/>
    <label for='pricelessProgram' class='label_div txt-align-rtl' style='; margin: 0 5px;'>
        I agree that Mastercard International Inc. and its affiliates may use my contact details and interactions with priceless.com to send me personalized marketing communications about all Priceless programs.</p>
    </label>
</div>

    

<div  class="signup_consent_div txt-align-rtl " style='margin-top:20px;'>
    Information on Mastercards privacy practices is available in the priceless.com <a href="/privacy" target="_blank" rel="noreferrer noopener">Privacy Notice</a>.</p>
 By clicking Sign Up, I confirm that I have read and agree to the <a href="/terms" target="_blank" rel="noreferrer noopener">Terms of Use</a> for priceless.com.</p>
</div>
                                <div class="signup_form_btn_row" style="margin:30px 0;" >
                                    <div  class="signup_form_submit_btn primaryButton button " onclick="signup_form_submit_btn_clicked()" di-type="basic" di-class="Body Click" di-id="signup redesign form btn" tabIndex="0" role="button"><span class="title-container"><span class="title">Submit</span></span></div>                                </div>

                            </form>                        


                        


                    </div>




                                    <div class="signupstep signupstep_done  signupstep_index_2 sg-f-bdy"  data-stepindex="2">


                        


                        


                                                <!--  --------------- step done ---------------  -->
                            <div class="done_header_div no_email_verification">

                                    <!--  msg for email verification -->
                                    <div class="done_header sg-f-dspl-m email_verification" >
                                        Thank you!                                    </div>

                                    <div class="done_subheader sg-f-bdy email_verification" >
                                        Please check your email to complete registration.                                    </div>


                                    <!-- msg for no email verification -->
                                    <div class="done_header sg-f-dspl-m no_email_verification" >
                                        You're all set!                                    </div>


                            </div>


                            <div class="done_img_div">
                                <div class="done_img_txt">

                                    <div class="done_img_title sg-f-bdy">
                                        Start Something Priceless                                    </div>
                                    <a class="done_img_sub_title sg-f-bdy" href="/" style="color: white; text-decoration: none;">
                                        Explore priceless.com                                        <div style="width: 10px;">&nbsp;</div>
                                        
        <svg width='15px' height='15px' viewBox='0 0 47 41'  >
            <g class='g_arrow' stroke='none'  stroke-width='1' fill='none' fill-rule='evenodd' stroke-linecap='round' stroke-linejoin='round'>
                <g class='arrow' transform='translate(2.965509, 2.012526)' stroke='white' stroke-width='5'>
                    <polyline id='Path' points='23.6091859 0 41.5576619 17.0058524 23.6091859 36'></polyline>
                    <line x1='0' y1='16.9874741' x2='40.5576619' y2='16.9874741' id='Path-2'></line>
                </g>
            </g>
        </svg>                                    </a>

                                </div>
                            </div>



                        


                    </div>




                            </div>
        </div>





    </div>

</div>

        </div>
    </div>
</div>


<script type="text/javascript">

    var isStepIconClickable = 0;

    var signup_steps = [{"id":"verify_card","label":"Verify card"},{"id":"signup_form","label":"Login details"},{"id":"done","label":"Done"}];
    var signup_currentstep = 0;
    var signup_collectCardOnSignUp = 1;
    //var signup_user_created = false;
    //var signup_user_created_payUrl = '';


    function signup_goto_step(n){
        var isRtl = 0;
        var direction = isRtl ? 1: -1;
        
        signup_currentstep = n * 1;
        $('.signup_steps').css('left',  (direction * n*100) + '%');
        $('.signup_stepicon').removeClass('current');
        $('.signup_stepicon_index_'+n).addClass('current');
        if (n >= signup_steps.length-1) {
            // last step, automatically add class done
            $('.signup_stepicon_index_'+n).addClass('done');
        }

        var l = signup_steps.length;
        if (n < l && signup_steps[n].id == 'done' ) {
            var step_div_height = $('.signupstep_done').height()*1;
            var header_height = $('.done_header_div').height()*1;
            var done_image_margin_top = $('.done_img_div').css('margin-top').replace('px', '')*1;
            if (isNaN(step_div_height) || isNaN(header_height) || isNaN(done_image_margin_top)) {
                // do nothing
            }
            else {
                $('.done_img_div').height(step_div_height - header_height - done_image_margin_top);
            }
        }

        setTimeout(function(){
            $('.signupstep_index_' + n + ' input:visible').first().focus();            //input:not([type="hidden"])
        }, 1100);

    }

    function signup_goto_next_step(){
        var next_step_index = signup_currentstep + 1;
        $('.signup_stepicon_index_' + signup_currentstep).addClass('done');
        signup_goto_step(next_step_index);
    }

    function get_next_step_by_step_id (id) {
        var j = undefined;
        for (let i=0; i<signup_steps.length; i++) {
            if (signup_steps[i].id == id && i+1 < signup_steps.length ) {
                j = i + 1;
            }
        }

        return j;
    }




    $(document).ready(function(){

        // make the overlay interative.  eg: close the pop up when x is clicked or the background is clicked.
        add_ifonly_overlay_click_handlers('.signup_redesign_overlay', true, {noBodyClose: true});

        //show_ifonly_overlay('.signup_redesign_overlay');

        signup_goto_step(0);


        if (isStepIconClickable) {
            $('.signup_stepicon').click(function(){
                var n= $(this).attr('data-stepindex');
                signup_goto_step(n);
            })
        }

        $('.signup_password_div .img_show_password, .signup_password_div .img_hide_password').click(function(){
            $('.signup_password_div').toggleClass('password_hidden');
            if ( $('#signup_user_password').attr('type') == 'password' ) {
                $('#signup_user_password').attr('type', 'text');
            }
            else {
                $('#signup_user_password').attr('type', 'password');
            }

        })


        $('.ifonly_pop_close_img').click(function(e){
            resetCCform();
            resetSignupForm();
            resetStepIcon();
            signup_goto_step(0);

        });


        // for elements which is the last focusable element of  verify card step, signup form step, stop tab to next element (which is for next step)
        var focus_selector = 'a, input, select, textarea, [tabindex]:not([tabindex="-1"])';
        var $verify_card_last_focus = $('.signupstep_verify_card').find(focus_selector).last();
        var $signup_form_last_focus = $('.signupstep_signup_form').find(focus_selector).last();

        function _stop_tab(e){
            var code = e.which;
            if (code == 9) {
                //tab pressed
                e.preventDefault();
                e.stopPropagation();
            }
        }

        $verify_card_last_focus.on('keydown', function(e){
            _stop_tab(e);

        });

        $signup_form_last_focus.on('keydown', function(e){
            _stop_tab(e);
        });

    });

    //*************** send message from the iframe ************************

    function signup_cc_submit_btn_clicked() {

        if ($(".signup_cc_submit_btn").hasClass('disabled')) {
            return false;
        }

        $(".signup_cc_submit_btn").addClass('disabled');

        validateSessionWithCallback(function(){
            var postData = {action : 'submitSignupCCForm_save_card_with_original_payurl'};
            $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
        });

        /*
        var sessck = "OPx5Txqt7jJhvBCZPV6N";
        $.ajax({
            type: 'POST',
            url: '/common/validateSession',
            data: {
                sessck: sessck
            },
            timeout: 10000,
            dataType: 'json'
        })
        .done(function(data) {
            if (data.result === 1) {
                var postData = {action : 'submitSignupCCForm_save_card_with_original_payurl'};
                $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');

                return;
            }

            alertEx("Session expired. Page will be refreshed.");
            //alertEx(data.msg);
            // redirect after 5 seconds
            // it will display session expires screen for guestCheckoutUser
            window.setTimeout(function() {
                location.href = g_is_mobile ? '/m' : '/';
            }, 5000);
        })
        .fail(function(xhr, textStatus, error) {
            console.log('Network: ' + textStatus + ', ' + xhr + ', ' + error);
            alertEx("Session expired. Page will be refreshed.");
            // redirect after 5 seconds
            // it will display session expires screen for guestCheckoutUser
            window.setTimeout(function() {
                location.href = g_is_mobile ? '/m' : '/';
            }, 5000);
        });
        */

        

        /*
        if (signup_user_created) {
            // user has been created, just save card again
            var postData = {action : 'submitSignupCCForm_save_card',  payUrl: signup_user_created_payUrl};
            $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
        }
        else {
            // first time submit credit card, validation only
            var postData = {action : 'submitSignupCCForm_validate_only'};
            $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
        }
        */



    }

    
    function signup_form_submit_btn_clicked() {
        validateSessionWithCallback(function(){
            _signup_form_submit_btn_clicked_helper();
        });
    }


    function _signup_form_submit_btn_clicked_helper() {

        //signup_form_submit_btn
        if ($(".signup_form_submit_btn").hasClass('disabled')) {
            return false;
        }

        $(".signup_form_submit_btn").addClass('disabled');


        //redesignedSignupForm
        $('#redesignedSignupForm .error_div').hide().attr('aria-live', 'off');


        var email = $("#User_email_emailAddress").val().trim();
        $("#User_email_emailAddress").val(email);


        console.log('redesinged register started');
        $.ajax({
            type:'POST',
            url: '/website/register',
            data: $("#redesignedSignupForm").serialize(),
            timeout: 30000,
            dataType: 'json'
        })
        .done( function(data){

            g_register_result = data;
            if (data.show_mc_error) {
                var aria_live_shown = false;

                for(var i=0; i<data.errors.length; i++){
                    var error = data.errors[i];
                    var selector = error.selector;
                    var msg = error.msg;

                    var error_classes = 'error_div sg-c-error sg-f-bdy-s';

                    var $input = $('#redesignedSignupForm').find(selector);
                    if ($input.length > 0) {
                        var $error = $input.siblings('.error_div');
                        if ($error.length === 0) {
                            $error = $('<div class="' +error_classes+ '"></div>');

                            if ($.trim(selector) !== '') {
                                var id = 'error_div_' + selector.replace('#', '').replace('.', '').replace(' ', '');
                                $error.attr('id', id);
                            }

                            $input.parent().append($error);
                        }
                        $error.html(msg).show();

                        $input.attr('aria-invalid', true).attr('aria-describedby', $error.attr('id'));

                        if (! aria_live_shown) {
                            aria_live_shown = true;
                            $error.attr('aria-live', 'polite');
                            $input.focus();
                        }
                    }
                }

                $(".signup_form_submit_btn").removeClass('disabled');
            }

            else if (data.result === 3) { // Email is already being used, please Log In
                /*
                $("#nav .js-login").click(); // added #nav to log pageview once for desktop and mobile
                $("#login-email").val(email).show();
                $("#login-pass").focus();
                $("#login_error").html(data.msg).show();
                resetRecaptcha('signup');
                */
                alertEx('email already used');
                $(".signup_form_submit_btn").removeClass('disabled');
            }
            /*
            else if (false && data.result === 14) {

                // for countreis like germany, needs email verification
                // directly go to next step

                if (signup_collectCardOnSignUp) {
                    var postData = {action : 'submitSignupCCForm_save_card', payUrl:data.payUrl};
                    $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
                }
                else {
                    signup_goto_next_step();
                }


                //var message = "Please verify your email.";
                //alertEx(message);
                //$(".signup_form_submit_btn").removeClass('disabled');

            }
            */
            else if (data.result > 0) {

                signup_goto_next_step();

                if (data.requiresEmailVerification == 1) {
                    $('.done_header_div').addClass('email_verification').removeClass('no_email_verification');
                    $('.signup_stepicon_done .signup_stepicon_text ').html("Thank You");
                }
                else {
                    $('.done_header_div').addClass('no_email_verification').removeClass('email_verification');
                    $('.signup_stepicon_done .signup_stepicon_text').html("Done");
                }

                /*
                signup_user_created = true;
                signup_user_created_payUrl = data.payUrl;


                if (signup_collectCardOnSignUp) {
                    var postData = {action: 'submitSignupCCForm_save_card', payUrl: data.payUrl};
                    $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
                }
                else {
                    signup_goto_next_step();
                }
                */




                /*
                var j = get_next_step_by_step_id('signup_form');
                if (j !== undefined) {
                    signup_goto_step(j);
                }
                else {
                    alert('can not find next step for signup_form');
                }
                */

                $('.ifonly_pop_close_img').click(function(e){

                    var redirectUrl = $("#redirectURL").val().trim();
                    var url_regex = /^(http|https)/;
                    if (url_regex.test(String(redirectUrl).toLowerCase())) {
                        redirectUrl = ''; // do not allow redirect to other site
                    }
                    location.href = redirectUrl;

                });

                signup_form_submitted(data);

            }
            else {
                if (data.error_code == 'sess_exp') {
                    alertEx("Session expired. Page will be refreshed.");
                    window.setTimeout(function() {
                        location.href = g_is_mobile ? '/m' : '/';
                    }, 5000);
                }
                else if (data.msg) {
                    alert(data.msg);
                }
                else {
                    alert('register error');
                }

            }




        }).fail( function(xhr, textStatus, error) {
            if (g_thisHost === 'www') {
                location.reload();
            }
            else if (g_thisHost==='dev' || g_thisHost==='test') {
                alert_error("Error in _streamlined_signup_form register<br />status:" + textStatus + " <br />error:" + error + " <br /><br />" + xhr.responseText);
            }
            else {
                confirmEx("Please refresh and try again." + ' ' + "If you continue to receive this error please contact Priceless concierge." + '<br /><br />It will automatically refresh the page in LIVE.<br />(' + textStatus + ' - ' + xhr.statusText + ')',
                    'User Signup Error',
                    function(){location.reload();},
                    function(){loadingAnimation("hide");},
                    "Refresh",
                    "Close");
                console.log(xhr);
            }

            $(".signup_form_submit_btn").removeClass('disabled');
        });
        return false;

    }



    // data:  data returned form register ajax call
    function signup_form_submitted(data){

        console.log('signup form submitted successfully');

        // adobe tracking 1.10
        var adobeTracking = {ctaName: 'Sign up - Completed'};
        if (g_withMcCompleteRegistrationForm) {
            adobeTracking['ctaName'] = 'Sign up Completed  Long Form';
        }
        if (data.cardTypeName) {
            adobeTracking['cardType'] = data.cardTypeName;
        }
        adobeSatelliteTracking('Forms', adobeTracking);

                // Need to make callback since we NOW have emailAddress and userId
        // emailAddress and userId are needed for BlueShift
        if (typeof data !== 'undefined' && data.emailAddress && data.userId) {
            trackingSignupConfirmation(data.emailAddress, data.userId);
        }

        if ($("#signUp-dialog-called-from").val() !== "wishlist"){              //VP-14277
            if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
        }


        /*
        if (g_sourceId === 0 && g_register_result.result === 1) { // display thank you when it's new user
            g_signup_timer = 5000; // need more time to read message

            if (g_register_result.loginExistingUser) {
                g_signup_timer  = 0;
            }
            else {
                var showEmailCrm = false;
                if (showEmailCrm && $('#pricelessProgram').prop('checked')) {
                    g_signup_timer = 60 * 60 * 1000;            // one hour
                    show_ifonly_overlay('.email_crm_overlay');
                    $('.email_crm_overlay').attr('continu_signup_process', '1');
                }
                else{
                    showThankYouPopIfNecessary();
                }
            }
        }
        */

        var redirectUrl = $("#redirectURL").val().trim();
        var url_regex = /^(http|https)/;
        if (url_regex.test(String(redirectUrl).toLowerCase())) {
            redirectUrl = ''; // do not allow redirect to other site
        }

        /*
        g_signup_timer = 5000;
        if (g_register_result!==null && ! empty(g_register_result.terms)) {
            showMemberTermsAndPrivacyDialog(redirectUrl, g_register_result.terms, g_register_result.termsTranslatedText);
            return false;
        } else if (redirectUrl !== '' && redirectUrl !== '#') {
            setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
        } else {
            setTimeout(function() { location.reload(); }, g_signup_timer);
        }
        */
    }


    function  signup_syncCCIframeSize() {
        if ($('#signup_cc_iframe').length > 0) {
            var postData = {action : 'syncCCIframeSize'};
            $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
        }


    }

    function resetCCform() {
        if ($('#signup_cc_iframe').length > 0) {
            var postData = {action: 'resetCCform'};
            $('#signup_cc_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
            $('.signup_cc_submit_btn').removeClass('disabled');
        }
    }

    function resetSignupForm() {
        $('#redesignedSignupForm .error_div').hide();
        $('#redesignedSignupForm input, #redesignedSignupForm select').val('');
        $('.signup_form_submit_btn').removeClass('disabled');
        $('.mc_priceless_check').prop('checked', false);
    }

    function resetStepIcon() {
        $('.signup_stepicon').removeClass('done').removeClass('current');
    }


    //*************** listen to message from the iframe ************************

    if (typeof(signup_redesign_js_loaded)=='undefined') {
        signup_redesign_js_loaded = true;

        window.addEventListener("message", function(e){

            if (e.origin !== 'https://pay.priceless.com') return;

            try {
                var data = jQuery.parseJSON(e.data);
            } catch(err) {
                return;
            }



            //signup_cc_validated
            /*
            if (data.action === 'signup_cc_validated') {
                signup_goto_next_step();


            }

            else if (data.action === 'signup_cc_validate_called') {

                $('.signup_cc_submit_btn').removeClass('disabled');

            }

            else if (data.action === 'signup_cc_save_validation_failed') {
                signup_goto_step(0);

            }
            */

            if (data.action === 'signup_cc_saved') {
                console.log('signup_cc_saved received');

                signup_goto_next_step();

                /*
                if (signup_user_created) {
                    signup_goto_step(2);
                }
                else {
                    signup_goto_next_step();
                }
                */
            }

            else if (data.action === 'signup_cc_save_called') {
                $('.signup_cc_submit_btn').removeClass('disabled');
                $(".signup_form_submit_btn").removeClass('disabled');

            }


            else if (data.action === 'alert_session_timeout') {
                alertEx("Session expired. Page will be refreshed.");
                window.setTimeout(function() {
                    location.href = g_is_mobile ? '/m' : '/';
                }, 5000);

            }


            // event handlers
            else if (data.action === 'resize_signup_cc_iframe') {
                if (data.height) {
                    var $target = $('#signup_cc_iframe');
                    if(data.target !== undefined  &&  $.trim(data.target) !== ''  &&  $.trim(data.target) !== '.'  &&  $.trim(data.target) !== '#'){
                        $target = $(data.target);
                    }
                    //$target.attr('style', 'min-height: ' + data.height + 'px; max-height: ' + data.height + 'px;');
                    $target.css('min-height', data.height );
                    $target.css('height', data.height );
                    $target.css('max-height', 'none');
                }

            }




        });
    }


                /*
                //sample for goto next step by id.
               console.log('signup_cc_validated received');

               var j = get_next_step_by_step_id('verify_card');
               if (j !== undefined) {
                   signup_goto_step(j);
               }
               else {
                   alert('can not find next step for verify_card');
               }
                */

</script>

<!-- <div id="member-signup-dialog" class="overlayBlack overlay mobile" style=" height: auto; min-height: 200px; ">   -->



<div  id="member-signup-dialog"   
    class="member_signup_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="member_signup_overlay" 
    data-id="member_signup_overlay"   
>
    
    
    <div   class="member_signup_pop  ifonly_pop mobile overlayBlack" 
         style="height: auto; min-height: 200px; padding:0; " tabindex="0" 
         role="dialog" aria-label="member signup"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_fff_thin.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="member_signup_pop_content  ifonly_pop_content mobile   clearfix" style="" >

    <div id="page-member-signup-dialog-overlay" style="position: absolute; top:0; width: 100%; height: 100%; display: none; opacity: 0.9; z-index: 99999; background-color: white;max-height:700px"></div>
    <div id="page-member-signup-dialog-loading" style="display: none; position: fixed; margin-top: 34%; margin-left:48%; z-index: 99999;">
        <img src="https://d5xydlzdo08s0.cloudfront.net/images/loading_product.gif" alt="loading"/>
    </div>
    <a class="close mobile " popupid="member-signup-dialog" style="display:none; background: url(https://d5xydlzdo08s0.cloudfront.net/images/icon_close_fff_thin.png) no-repeat scroll center center / 30px 30px" tabindex='0' ></a>

    <div class="rightVertical  mobile" style="background:#141413; background-size: cover; background-position: center; height: 800px min-height: 200px;">
        
<style>


    #member-signup-dialog input, #complete-signup-dialog input, #complete-signup-dialog select {
        border-radius: 4px; margin:0; padding: 5px 7px; box-sizing:border-box; height:auto; line-height:22px;

    }
    #member-signup-dialog a, #complete-signup-dialog a {color:white; text-decoration: underline; cursor: pointer; }

    #member-signup-dialog .border-box.mc-border-box    {background:rgba(0,0,0,0.7);}
    #member-signup-dialog .border-box.terms-border-box {background:rgba(0,0,0,0.7);}

    #member-signup-dialog .social_icons .box{border-radius:4px; background-color:white;}
    #member-signup-dialog .social_icons .social_icon_txt{color:black; }

    #member-signup-dialog .primaryButton {}

    #member-signup-dialog .rightVertical {float:none;}
    #member-signup-dialog .rightVertical .border-box.sign-in {border:none;}


    #member-signup-dialog p.terms > * {color:inherit; font:inherit;}


    #member-signup-dialog.mobile  .rightVertical .border-box .header{margin-top:0px; padding-top:15px;}


    .recap_li {display:flex; justify-content: center;}
    .mc_signup_ul .g-recaptcha, .mc_login_ul .g-recaptcha, .terms_login_ul .g-recaptcha{
        transform:scale(0.7);
        transform-origin:center;
    }
        .mc-border-box .header img {
        width: 100%
    }
    .terms-border-box .header img {
        width: 90%
    }
    
    @media only screen and (max-width: 576px) {
        #member-signup-dialog .close{right:-5px; top:-5px;}
    }


            #member-signup-dialog .border-box.mc-border-box    { background: transparent;}
        #member-signup-dialog .border-box.terms-border-box { background: transparent;}
    

    /* vp-13577: */
    @supports (-moz-appearance:none)  {
       #member-signup-dialog  a.close.desktop {right:17px;}
    }

</style>


<div class="border-box mc-border-box sign-in" style=";">
    <div  class="swapper to-login" style="float:left; text-align:center; width:100%; margin-bottom: 10px;">
        <a href="#" class="js-login js-from-signup-form sg-f-ttl" style="color:#fff">
            Already have an account? <span style="text-decoration: underline; color:#fff">Log in here</span>
        </a>
    </div>

    <div class="header" style="">
        <img srcset="/media/frames/94/priceless_lockup_1x__L.png 240w,
            /media/frames/94/priceless_lockup_2x__L.png 480w,
           /media/frames/94/priceless_lockup_3x__L.png 720w"
     sizes="(max-width: 640px) 240px,
            (max-width: 980px) 480px,
            720px"
     src="/media/frames/94/priceless_lockup_1x__L.png" alt="Priceless" style="max-width:100%;">        <h1 id="signInHeader" class="section-header sg-f-ttl" data-welcome-ori="frame_non_sourced_signup"
           style="color:#fff; font-size:16px; line-height:18px; margin:0px auto 5px auto; width: 90%;">
                   Connect to Priceless        </h1>

                <div id="signInHeader_sub" class="section-header accesscodeTitle sg-f-subttl " style="margin:4px auto; font-size:13px; color:#fff"></div>
    </div>

    <div class="body" style="">
        <div class="content" style="width:100%; margin:0 auto; position:relative;">
            <ul class="susi-options" role="presentation">
                <li class="email-susi-form" style="">
                    <div class="content" style="max-width:100%;margin:0 auto;">
                        <div id="back-to-email-arrow" style="display:none"><img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_bigarrowleft_fff.png" alt="go back" /></div>
                                                <div id="login-container" class="mobile formBlock">
                            <style type="text/css">
   #login-submit {-webkit-appearance: none;}
   #login-box-dialog .dialog_content label {top: 9px;}
   #login-box-dialog .dialog_content label.passwordLabel {position:absolute; left:8px; padding-left:0; text-align: left; color:#ccc;}

   #loginformUl.showLoginOnly .swapper.create_account {display:none;}

</style>

<form name="loginForm" id="loginForm" class="form" action="/m/filter/options/location/8910" method="POST">
<input type="hidden" value="YXpzX3lvejRfYUpEZmFxbUJQcnE0NnVaYWtjYjBrM0qsoF2dqjOACHqI7jaBT7068nBO46NM9wJVXOVmdfm8eQ==" name="stk" />    
<style>
    .rtl .terms_login_ul {padding: 0px;}
    .mc_login_ul, .terms_login_ul {text-align:center; list-style:none;}
    .mc_login_ul .error-msg:empty, .terms_login_ul .error-msg:empty {display:none;}

    .mc_login_ul .sg-label {text-align:initial; display:inline-block;}
</style>


<ul id="loginformUl" class="mc_login_ul mobile" role="presentation">
    <input type="hidden" name="LoginForm[emailOptedIn]" id="LoginForm_emailOptedIn" value="1" />

    


    <div class=' ifonly_buffer ifonly_popup_buffer' data-buffer='
    &lt;li class=&quot;sg-label-container&quot;&gt;
        &lt;label class=&quot;sg-label&quot; for=&quot;login-email&quot;&gt;Email&lt;/label&gt;
        &lt;input type=&quot;email&quot; name=&quot;LoginForm[username]&quot; id=&quot;login-email&quot; value=&quot;&quot;
               class=&quot;default-focus sg-btn-size-m sg-label-input&quot;
               aria-label=&quot;Email&quot; placeholder=&quot;Email&quot;
               aria-required=&quot;true&quot; required aria-invalid=&#039;false&#039;
               title=&quot;Please fill out this field&quot;/&gt;
    &lt;/li&gt;

    &lt;li class=&quot;sg-label-container&quot; style=&#039;margin: 10px 0;&#039;&gt;
        &lt;label class=&quot;sg-label&quot; for=&quot;login-pass&quot;&gt;Password&lt;/label&gt;
        &lt;input type=&quot;password&quot; name=&quot;LoginForm[password]&quot; id=&quot;login-pass&quot; value=&quot;&quot;
               class=&quot;password sg-btn-size-m sg-label-input&quot;
               autocomplete=&quot;off&quot; aria-label=&quot;Password&quot;
               placeholder=&quot;Password&quot;  aria-required=&quot;true&quot; required  style=&#039;&#039; aria-invalid=&#039;false&#039; 
               title=&quot;Please fill out this field&quot;/&gt;
    &lt;/li&gt;

    &lt;!--
    &lt;li class=&quot;recap_li&quot;&gt;
        &lt;div id=&#039;mc_login_recaptcha&#039; class=&quot;g-recaptcha&quot; data-sitekey=&quot;&quot; &gt;&lt;/div&gt;
        &lt;input type=&quot;hidden&quot; class=&quot;mc_login_recaptcha_token login_recaptcha_token&quot; name=&quot;LoginForm[recaptchaToken]&quot; value=&#039;&#039; /&gt;
    &lt;/li&gt;
    --&gt;


    &lt;li class=&#039;post_recap_li&#039; style=&quot;display:flex;&quot;&gt;
        &lt;p id=&quot;login_error&quot; class=&quot;error-msg sg-c-error&quot; style=&quot;width:94%; text-align:center; margin-bottom:5px; display:none;&quot;&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;p style=&quot;height:2px;width:100%;&quot;&gt;&amp;nbsp;&lt;/p&gt;&lt;/li&gt;
    '></div>

    <li>
        <a  id="login-submit" class="allowAllUsers sg-btn-size-m primaryButton button " style=" margin:0 auto;" href="javascript:;" role="button" di-type="sign in submit" tabIndex="0"><span class="title-container"><span class="title">Log In</span></span></a>    </li>
    <li>
        <div class='sg-btn-size-m clearfix' style='margin:15px auto;'>
            <div class="swapper" style="float:left;" id="js-hideCreateAccount">
                <a href="#" class="js-signUp js-from-login-form fo-13-n-s3">
                    Create Account                </a>
            </div>
            <div class="swapper" style="float:right;">
                <a href="#" id="forgot-password" class="fo-13-n-s3">Forgot Password?</a>
            </div>
        </div>
    </li>


</ul></form>
<script type="text/javascript">

$(document).ready(function(){

    $("#LoginForm_emailOptedIn").val("1");

    $("#loginForm").on('click', '.swapper', function(){
        resetError("#signup_error");
        resetError("#login_error");
        resetError("#streamlineSignup_error");
    });

    $("#loginForm").on('keypress', 'input', function(e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code === 13) {

            var $signup_btn =  $(this).closest('form').find('.signup-email-submit-button');
            if($signup_btn.length>0){
                $signup_btn.trigger('click');
            }
            else{
                $("#loginForm").submit();
            }

        }
    });

    $("#login-submit").click(function() {
        $("#loginForm").submit();
    });

    $("#login-pass").focusin(function() {
        if(g_is_mobile){
            $('.userAccess-ifonlyLogo').hide();
        }
        $(this).parent().parent().find(".passwordInformational").show();
    });

    $("#loginForm").submit(function(e) {


        var hasGeneralErrorElement = ($('#login_error').length>0);
        $('#loginForm .error_div').hide();

        var email = $("#login-email").val();
        if ($("#login-submit").hasClass('disabled')) {
            return false;
        }

        /*
        if ($.trim(email) === '') {
            var errorMsg = "Please enter your email address";
            if(hasGeneralErrorElement){
                displayError("#login_error", errorMsg) ;
            }
            else{
                ShowErrorForElement('#login-email', errorMsg);
            }

            return false;
        } else if(!validateEmail($.trim(email))){
            var errorMsg = "Please enter valid email address";
            if(hasGeneralErrorElement){
                displayError("#login_error", errorMsg) ;
            }
            else{
                ShowErrorForElement('#login-email', errorMsg);
            }
            return false;
        }


        var emptyCheckElements = [
            {selector:'#login-pass',  errorMsg: "Please enter a password"},
            {selector:'#login-lastname', errorMsg: "Please enter your last name" },
            {selector: '#login-hyatt-username', errorMsg: "Please enter Hyatt # or Username"  }
        ];
        for(var i=0; i<emptyCheckElements.length; i++){
            var eleObj = emptyCheckElements[i];
            var errorMsg = eleObj.errorMsg;
            var ele = $(eleObj.selector);
            if(ele.length>0){
                var ele_val = ele.val();
                if ( ele_val === '') {
                    if(hasGeneralErrorElement){
                        displayError("#login_error", errorMsg) ;
                    }
                    else{
                        ShowErrorForElement(eleObj.selector, errorMsg);
                    }
                    return false;
                }
            }
        }
        */

        if ($('.login_recaptcha_token').length > 0 && $('.login_recaptcha_token').val() === ''){
            var errorMsg = "Please click on the recaptcha";
            if(hasGeneralErrorElement){
                displayError("#login_error", errorMsg) ;
            }
            else{
                ShowErrorForElement('#login-email', errorMsg);
            }
            return false;
        }

        processLogin('popup');
        return false;
    });

    // g_signUpContext: see showMemberTermsAndPrivacyDialog() in _common_inline_js
    $('#member-signup-dialog #terms-reaggreement').click(function() {
        loadingAnimation("show");
        var showWelcomePopup = $('#member-signup-dialog .terms-border-box #login-container-terms').data('showwelcomepopup');

        $.post( '/website/updateUserTerms', {tandcIds: g_newUserTerms, showWelcomePopup: showWelcomePopup},
            function(data){
                if(data.result === 1) {
                    if(g_signUpContext === 'do-not-refresh') {
                        //$("#member-signup-dialog").fadeOut();
                        hide_ifonly_overlay("#member-signup-dialog");
                        $('#exposeMask').fadeOut();
                        if (g_controller_id === 'vendorportal') {
                            vendorHideLoading();
                        }
                    } else if (g_signUpContext === 'bespoke') {
                        submitBespokeForm();
                    } else if (g_signUpContext === 'gotoCart') {
                        // Items already in cart. Prompt with pop up
                        // $("#checkout-login-cart-items").overlay().load();
                        show_ifonly_overlay('.checkout_login_cart_items_overlay');
                    } else if (g_signUpContext === 'checkout') {
                        location.reload();
                    } else if (data.redirectURL) {
                        location.href = data.redirectURL;
                    } else {
                        if (g_signUpContext === '' || g_signUpContext === '#') {
                            setTimeout(function() { location.reload(); }, g_login_timer);
                        } else {
                            setTimeout(function() { location.href = g_signUpContext; }, g_login_timer);
                        }
                    }
                }
            }, 'json');
    });



    $("#forgot-password").click(function(e){
        var inputEmail = $("#loginForm input[name='LoginForm[username]']");
        var errorElement = '#login_error';

        if ($(this).hasClass('from_registration')) {
            // hyatt use registartion form for login
            var parent = $(this).closest('ul');
            inputEmail = parent.find('.User_email_emailAddress');
            errorElement =  parent.find('.streamlineSignup_error');
        }

        resetError(errorElement);

        if (inputEmail.val() === '' || inputEmail.val() === inputEmail.attr('default-value')) {
            var errorMsg = "Please enter your email address";
            displayError(errorElement, errorMsg);
            return false;
        }

        $.post( '/website/ForgotPassword',
            {'email':inputEmail.val()},
            function(data){
                if(data.result === 1){
                    if (! g_forceLogin) {
                        userAccessHide();
                    }
                    //alertEx(data.msg, "Thank You");
                    //Added actual string in alert instead of data.msg
                    //Before 'Thank You' would be in the correct language based on sessions
                    //but data.msg appeared in the language from the user's table from email user has entered
                    //More info in VP-11937
                    alertEx("If your address has an account on file, we have sent you an email to reset your password", "Thank You");
                    $("#alert-dialog").css('z-index', '10002'); // Jun: need to figure out why z-index become 9999
                } else {
                    displayError(errorElement, data.msg);
                }
            }, 'json');
        return false;
    });


    $("#member-signup-dialog").on('click', '#streamline-complete-signup',function(){
        var inputEmail = $("#loginForm input[name='LoginForm[username]']");
        if(inputEmail.val() === '' || inputEmail.val() === inputEmail.attr('default-value')) {
            displayError("#login_error", "Please enter your email address");
            return false;
        }

        $.post( '/website/ForgotPassword', {
         'email'          : inputEmail.val(),
         'signupComplete' : true
        },
        function(data){
            //window.alert(data.msg);
            if(data.result === 1 || data.result === 2){
                if(data.result === 1){
                     alertEx(data.msg, "Thank You");
                 } else if(data.result === 2){
                     alertEx(data.msg);
                 }
                 userAccessHide();
            }
            else{
                displayError("#login_error", data.msg);
            }
        }, 'json');
        return false;
    });

    $('.single-sign-on-btn').click(function() {
        if(g_guest_productId !== '') {
            var type      = '';
            var productId = '';
            if (g_guest_productId === 'form') {
                if ($('#order-detail').length > 0) {
                    type      = 'form';
                    productId = $(document.orderDetail);
                    productId.find('input[name="stk"]').remove(); // remove csrf token
                    productId = productId.serialize() + "&productId=" + $('.p-form').data('pid');
                }
            } else if($.isNumeric(g_guest_productId) && $('.redemption_info_div').length === 0) {
                if($("#signUp-dialog-called-from").val() === "wishlist") {
                    type = 'wishlist';
                } else {
                    type = 'cart';
                }
                productId = {productId : g_guest_productId};
            } else if($('.redemption_info_div').length > 0) {
                type = 'gift';
            }
        }

        location.href = "";
    });

});

function processLogin(from) {

    if (from === 'popup') {
        $form = $("#loginForm");
        errorSection = '#login_error';
        $button = $("#login-submit");
    } else if (from === 'checkout') {
        $form = $("#checkoutLoginForm");
        errorSection = '#checkout-login-error';
        $button = $("#checkout-login-submit");
    } else {
        alert('Unknown place.');
        return false;
    }

    $form.find(".passwordInformational").hide();

    $form.css('cursor','wait');
    $button.addClass('disabled');

    $form.find('input, select').attr('aria-invalid', 'false').removeAttr('aria-errormessage');
    $(errorSection).attr('aria-live', 'off');

    loadingAnimation("show");


    if (g_emailAddress.indexOf('x100604')>=0) {
            //debugger;
         }


    var postData =  $form.serialize();
    var mergeCart = false;
    if ($('#login-container').attr('data-mergeCart') == 1) {
        mergeCart = true;
        postData += "&LoginForm[mergeCart]=1";
    }    

    $.ajax({
        type:'POST',
        url: '/website/login',
        data: postData,
        timeout: 10000,
        dataType: 'json'
    })
    .done( function(data){
        if (data.result === 1) {
            // adobe tracking 1.10
            adobeSatelliteTracking('CTA Click', {ctaName: 'Sign In - Completed'});
        }

        if (data.result === 1 && $("#redirectURL").val() === 'do-not-refresh') {
            $("#redirectURL").val('');
            $("#login-pass").val('');
            $form.css('cursor','auto');
            loadingAnimation("hide");
            if(!empty(data.terms)) {
                showMemberTermsAndPrivacyDialog('do-not-refresh', data.terms, data.termsTranslatedText);
            } else {
                //$("#member-signup-dialog").fadeOut();
                hide_ifonly_overlay('#member-signup-dialog');
                $('#exposeMask').fadeOut();
                if (g_controller_id === 'vendorportal') {
                    vendorHideLoading();
                }
            }
        }
        else if (data.result === 1 && g_bespoke === '1'){
            //bespoke page go to Question 7
            g_bespoke = "";
            $("*").css('cursor','auto');
            userAccessHide();
            //$("#login-box-dialog").overlay().close();
            slideToNextQuestion(6, 7);
            if(!empty(data.terms)) {
                showMemberTermsAndPrivacyDialog('bespoke', data.terms, data.termsTranslatedText);
            } else {
                submitBespokeForm();
            }
        }
        else if (data.result === 1) {
            // success
            if(addGuestProductToWishlist()) { // if need to add a guest product (common.js)
                // dont want to call addGuestProductToCart() function also
            } else if(addGuestProductToCart()) { // if need to add a guest product (common.js)
                return false;
            }
            var redirectUrl = $("#redirectURL").val().trim();
            if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                redirectUrl = data.redirectUrl;
            }

            if (! empty(data.terms)) {
                var context = redirectUrl;
                if (from === 'checkout') {
                    context = data.cartItemCount > 0 ? 'gotoCart' : 'checkout'; // goto checkout / stay checkout (same code in LoginWithFacebook/Google in _common_inline_js)
                }
                showMemberTermsAndPrivacyDialog(context, data.terms, data.termsTranslatedText);
            } else {
                if ((from === 'checkout' || mergeCart) && data.cartItemCount > 0) {
                    // Items already in cart. Prompt with pop up
                   // $("#checkout-login-cart-items").overlay().load();
                   if ($('.member_signup_overlay').is(':visible')) {
                      hide_ifonly_overlay('.member_signup_overlay');
                   }
                   
                   show_ifonly_overlay('.checkout_login_cart_items_overlay');
                } else {
                    if (redirectUrl !== '' && redirectUrl !== '#') {
                        console.log('login - redirect to' + redirectUrl);
                        setTimeout(function() { location.href = redirectUrl; }, g_login_timer);
                    } else {
                        console.log('login - reload');
                        setTimeout(function() { location.reload(); }, g_login_timer);
                    }
                }
            }
        }
        else {
            $form.css('cursor','auto');

            if($.isArray(data.errors) && data.errors.length>0){
                var selector = data.errors[0].selector;
                if(selector){
                    $(selector).focus().attr('aria-invalid', 'true').attr('aria-errormessage', $(errorSection).attr('id'));
                }
            }

            if (data.result === 0) {
                ga('send', 'pageview', 'Login Attempted');
                displayError(errorSection, data.msg);
                $(errorSection).attr('aria-live', 'polite');
                $("#login-email").focus();
            } else if(data.result === 3){
                data.msg = data.msg + " <a class='error-general' style='text-decoration:underline' href='#' id='streamline-complete-signup'>Set Password Here</a>";
                displayError(errorSection, data.msg);
            } else if(data.result === 4){
                userAccessHide();
                var phone = (data.isAmex == 1) ? "(415) 376-4646" : "+1 855 438 7580";
                $("#resend-email").attr("uid", data.userId);
                $("#unverified-concierge-dialog #conciergePhone").text(phone);
                $("#unverified-concierge-dialog").overlay().load();
            } else if(data.result === 6){
                displayError(errorSection, data.msg);
            } else if(data.result === 7){
                location.href = data.redirectUrl;
            }
            //window.top.postMessage('{"action":"showLoader", "showLoader":false}',"*");
            loadingAnimation("hide");
            resetRecaptcha('login');
        }

        $button.removeClass('disabled');
    })
    .fail( function(xhr, textStatus, error) {
        $button.removeClass('disabled');
        if (g_thisHost === 'www') {
            location.reload();
        }
        else if (g_thisHost === 'dev' || g_thisHost === 'test'){
             alert_error("Error in _login_form login <br />status:" + textStatus + " <br />error:" + error + " <br /><br />" + xhr.responseText);
        }
        else {
            confirmEx("Please refresh and try again." + ' ' + "If you continue to receive this error please contact Priceless concierge." + '<br /><br />It will automatically refresh the page in LIVE.<br />(' + textStatus + ' - ' + xhr.statusText + ')',
                'User Signup Error',
                function(){location.reload();},
                function(){loadingAnimation("hide");},
                "Refresh",
                "Close");
            console.log(xhr);
        }
    });
}

var bbb;
</script>
                        </div>
                        <div id="streamlineSignup-container" class="mobile formBlock">
                            
<form name="streamlineSignupForm" id="streamlineSignupForm" action="/m/filter/options/location/8910" method="POST">
<input type="hidden" value="YXpzX3lvejRfYUpEZmFxbUJQcnE0NnVaYWtjYjBrM0qsoF2dqjOACHqI7jaBT7068nBO46NM9wJVXOVmdfm8eQ==" name="stk" />    
<style>
    .mc_signup_ul {text-align:center; list-style:none;}
    .mc_signup_ul .sg-label {text-align:initial; display:inline-block;}
    .mc_signup_ul input:disabled,  .mc_signup_ul select:disabled{background:white; opacity:0.4;}
    #member-signup-dialog .mc_checkbox_row input {float:left; width:20px; margin:3px 0px 0px 0px;}

    #member-signup-dialog .mc_signup_ul p.terms {margin: 0px auto 0px auto; float:none;}
    #member-signup-dialog .mc_signup_ul #streamlineSignup_error {margin-top: 5px;}


    .mobile#member-signup-dialog {overflow:hidden;}
    .mobile#member-signup-dialog .rightVertical {padding: 5px; box-sizing: border-box;}

    .mc_signup_ul .error_div {text-align:initial;}

    .mc_check_div.rtl {display:flex;}

    .mc_signup_ul .io-row.two_children > div{width:calc(50% - 3px);}
    .mc_signup_ul .io-row.two_children > div:first-child{float:left;}
    .mc_signup_ul .io-row.two_children > div:last-child {float:right;}

    .rtl.mc_signup_ul .io-row.two_children > div:first-child{float:right;}
    .rtl.mc_signup_ul .io-row.two_children > div:last-child {float:left;}

    .mc_signup_ul select {
        border-radius: 4px;
        margin: 0;
        padding: 5px 7px;
        box-sizing: border-box;
        height: auto;
        line-height: 22px;
    }


    @media only screen and (max-width: 576px) {
        .mc_signup_ul .io-row.two_children > div {width:100%;}
        .mc_signup_ul .io-row.two_children > div:last-child {float:left; margin-top:8px;}

        .mc_signup_ul .error_div {width:95%; margin: 0 auto;}

        .mc_signup_ul .country_zip_row {padding: 0 2.5%; box-sizing: border-box;}
        .mc_signup_ul .io-row.two_children.country_zip_row > div {width:calc(50% - 3px); }
        .mc_signup_ul .io-row.two_children.country_zip_row .zip_div {float:right; margin-top:0px;}
        .country_zip_row .sg-btn-size-m {width:100% !important;}

    }


    .mc_signup_ul .sg-label {text-align:initial;}
    .mc_signup_ul .field-not-empty .sg-label {padding: 5px 10px;}

    #member-signup-dialog input, #member-signup-dialog select, #complete-signup-dialog input, #complete-signup-dialog select{
        padding: 5px 10px 5px 10px; height: 38px;
    }
    #member-signup-dialog .field-not-empty input, #member-signup-dialog .field-not-empty select, #complete-signup-dialog .field-not-empty input, #complete-signup-dialog .field-not-empty select{
        padding:10px 10px 0px 10px;;
    }

    input#signup_user_password.sg-label-input::-webkit-caps-lock-indicator {
        content: '';
    }
</style>



<ul class="mc_signup_ul mobile " role="presentation">

    <div class=' ifonly_buffer ifonly_popup_buffer' data-buffer='    &lt;li&gt;
        &lt;div class=&quot;sg-label-container&quot; style=&#039;&#039;&gt;
            &lt;label class=&quot;sg-label&quot; for=&quot;User_email_emailAddress&quot;&gt;Email*&lt;/label&gt;
            &lt;input type=&quot;email&quot; id=&quot;User_email_emailAddress&quot;  name=&quot;User[emailAddress]&quot; value=&quot;&quot;
                   class=&quot;email_txt sg-label-input sg-btn-size-m&quot; autocomplete=&quot;off&quot; aria-invalid=&#039;false&#039;
                   placeholder=&quot;Email*&quot; aria-required=&quot;true&quot; required style=&#039;&#039;
                   title=&quot;Please fill out this field&quot;/&gt;

        &lt;/div&gt;
    &lt;/li&gt;


    &lt;li class=&quot;sg-label-container&quot; style=&quot;margin-top:8px;&quot;&gt;
        &lt;div class=&quot;sg-label-container&quot;&gt;
            &lt;label class=&quot;sg-label&quot; for=&quot;signup_user_password&quot;&gt;Create Password*&lt;/label&gt;
            &lt;input id=&quot;signup_user_password&quot; type=&quot;password&quot; name=&quot;User[password]&quot; value=&quot;&quot; autocomplete=&quot;off&quot;
                   class=&quot;password sg-label-input sg-btn-size-m&quot; aria-invalid=&#039;false&#039;
                   placeholder=&#039;Create Password*&#039;
            /&gt;
        &lt;/div&gt;
    &lt;/li&gt;


    &lt;li  style=&quot;margin-top:5px;&quot;&gt;
        &lt;div class=&quot;sg-f-bdy-s sg-btn-size-m txt-align-rtl&quot; style=&#039;color:white; margin:0 auto; text-align:initial;&#039;&gt;
            Password must be at least 8 characters and contain two of the following: upper case, lower case, numbers and special characters        &lt;/div&gt;
    &lt;/li&gt;


    &lt;li  style=&quot;margin-top:5px;&quot;&gt;
        &lt;div class=&quot;sg-label-container&quot;&gt;
            &lt;label class=&quot;sg-label&quot; for=&quot;signup_user_password2&quot;&gt;Confirm Password*&lt;/label&gt;
            &lt;input id=&quot;signup_user_password2&quot; type=&quot;password&quot; name=&quot;User[password2]&quot; value=&quot;&quot; autocomplete=&quot;off&quot;
                   class=&quot;password2 sg-label-input sg-btn-size-m&quot; aria-invalid=&#039;false&#039;
                   placeholder=&#039;Confirm Password*&#039;
            /&gt;
        &lt;/div&gt;
    &lt;/li&gt;

    &lt;li class=&quot;io-row two_children clearfix country_zip_row mobile&quot; style=&#039;margin-top:8px&#039;&gt;
        &lt;div class=&quot;country_div sg-label-container&quot; &gt;
            &lt;label class=&quot;sg-label&quot; for=&quot;signup_user_country&quot;&gt;&lt; Select one &gt;&lt;/label&gt;
            &lt;select id=&quot;signup_user_country&quot; name=&quot;User[countryShortCode]&quot; class=&#039;country_select sg-btn-size-m sg-label-input&#039;
                    autocomplete=&quot;off&quot; aria-invalid=&#039;false&#039;&gt;
                &lt;option value=&quot;&quot; style=&#039;&#039;&gt;&lt; Select one &gt;&lt;/option&gt;
                &lt;option value=&#039;AF&#039;&gt;Afghanistan&lt;/option&gt;&lt;option value=&#039;DZ&#039;&gt;Algeria&lt;/option&gt;&lt;option value=&#039;AO&#039;&gt;Angola&lt;/option&gt;&lt;option value=&#039;AR&#039;&gt;Argentina&lt;/option&gt;&lt;option value=&#039;AW&#039;&gt;Aruba&lt;/option&gt;&lt;option value=&#039;AU&#039;&gt;Australia&lt;/option&gt;&lt;option value=&#039;AT&#039;&gt;Austria&lt;/option&gt;&lt;option value=&#039;AZ&#039;&gt;Azerbaijan&lt;/option&gt;&lt;option value=&#039;BS&#039;&gt;Bahamas&lt;/option&gt;&lt;option value=&#039;BH&#039;&gt;Bahrain&lt;/option&gt;&lt;option value=&#039;BE&#039;&gt;Belgium&lt;/option&gt;&lt;option value=&#039;BJ&#039;&gt;Benin&lt;/option&gt;&lt;option value=&#039;BO&#039;&gt;Bolivia&lt;/option&gt;&lt;option value=&#039;BA&#039;&gt;Bosnia and Herzegovina&lt;/option&gt;&lt;option value=&#039;BW&#039;&gt;Botswana&lt;/option&gt;&lt;option value=&#039;BR&#039;&gt;Brazil&lt;/option&gt;&lt;option value=&#039;BG&#039;&gt;Bulgaria&lt;/option&gt;&lt;option value=&#039;BF&#039;&gt;Burkina Faso&lt;/option&gt;&lt;option value=&#039;BI&#039;&gt;Burundi&lt;/option&gt;&lt;option value=&#039;CM&#039;&gt;Cameroon&lt;/option&gt;&lt;option value=&#039;CA&#039;&gt;Canada&lt;/option&gt;&lt;option value=&#039;CV&#039;&gt;Cape Verde&lt;/option&gt;&lt;option value=&#039;KY&#039;&gt;Cayman Islands&lt;/option&gt;&lt;option value=&#039;CF&#039;&gt;Central African Republic&lt;/option&gt;&lt;option value=&#039;TD&#039;&gt;Chad&lt;/option&gt;&lt;option value=&#039;CL&#039;&gt;Chile&lt;/option&gt;&lt;option value=&#039;CN&#039;&gt;China&lt;/option&gt;&lt;option value=&#039;CO&#039;&gt;Colombia&lt;/option&gt;&lt;option value=&#039;KM&#039;&gt;Comoros&lt;/option&gt;&lt;option value=&#039;CG&#039;&gt;Congo&lt;/option&gt;&lt;option value=&#039;CR&#039;&gt;Costa Rica&lt;/option&gt;&lt;option value=&#039;CI&#039;&gt;Cote D&#039;Ivoire (Ivory Coast)&lt;/option&gt;&lt;option value=&#039;HR&#039;&gt;Croatia&lt;/option&gt;&lt;option value=&#039;CY&#039;&gt;Cyprus&lt;/option&gt;&lt;option value=&#039;CZ&#039;&gt;Czech Republic&lt;/option&gt;&lt;option value=&#039;CD&#039;&gt;Democratic Republic of the Congo&lt;/option&gt;&lt;option value=&#039;DK&#039;&gt;Denmark&lt;/option&gt;&lt;option value=&#039;DJ&#039;&gt;Djibouti&lt;/option&gt;&lt;option value=&#039;DO&#039;&gt;Dominican Republic&lt;/option&gt;&lt;option value=&#039;EC&#039;&gt;Ecuador&lt;/option&gt;&lt;option value=&#039;EG&#039;&gt;Egypt&lt;/option&gt;&lt;option value=&#039;SV&#039;&gt;El Salvador&lt;/option&gt;&lt;option value=&#039;GQ&#039;&gt;Equatorial Guinea&lt;/option&gt;&lt;option value=&#039;EE&#039;&gt;Estonia&lt;/option&gt;&lt;option value=&#039;ET&#039;&gt;Ethiopia&lt;/option&gt;&lt;option value=&#039;FJ&#039;&gt;Fiji&lt;/option&gt;&lt;option value=&#039;FI&#039;&gt;Finland&lt;/option&gt;&lt;option value=&#039;FR&#039;&gt;France&lt;/option&gt;&lt;option value=&#039;GA&#039;&gt;Gabon&lt;/option&gt;&lt;option value=&#039;GM&#039;&gt;Gambia&lt;/option&gt;&lt;option value=&#039;DE&#039;&gt;Germany&lt;/option&gt;&lt;option value=&#039;GH&#039;&gt;Ghana&lt;/option&gt;&lt;option value=&#039;GR&#039;&gt;Greece&lt;/option&gt;&lt;option value=&#039;GT&#039;&gt;Guatemala&lt;/option&gt;&lt;option value=&#039;GN&#039;&gt;Guinea&lt;/option&gt;&lt;option value=&#039;GW&#039;&gt;Guinea-Bissau&lt;/option&gt;&lt;option value=&#039;HN&#039;&gt;Honduras&lt;/option&gt;&lt;option value=&#039;HK&#039;&gt;Hong Kong&lt;/option&gt;&lt;option value=&#039;HU&#039;&gt;Hungary&lt;/option&gt;&lt;option value=&#039;IN&#039;&gt;India&lt;/option&gt;&lt;option value=&#039;ID&#039;&gt;Indonesia&lt;/option&gt;&lt;option value=&#039;IQ&#039;&gt;Iraq&lt;/option&gt;&lt;option value=&#039;IE&#039;&gt;Ireland&lt;/option&gt;&lt;option value=&#039;IL&#039;&gt;Israel&lt;/option&gt;&lt;option value=&#039;IT&#039;&gt;Italy&lt;/option&gt;&lt;option value=&#039;JM&#039;&gt;Jamaica&lt;/option&gt;&lt;option value=&#039;JP&#039;&gt;Japan&lt;/option&gt;&lt;option value=&#039;JO&#039;&gt;Jordan&lt;/option&gt;&lt;option value=&#039;KE&#039;&gt;Kenya&lt;/option&gt;&lt;option value=&#039;KW&#039;&gt;Kuwait&lt;/option&gt;&lt;option value=&#039;LV&#039;&gt;Latvia&lt;/option&gt;&lt;option value=&#039;LB&#039;&gt;Lebanon&lt;/option&gt;&lt;option value=&#039;LS&#039;&gt;Lesotho&lt;/option&gt;&lt;option value=&#039;LR&#039;&gt;Liberia&lt;/option&gt;&lt;option value=&#039;LY&#039;&gt;Libya&lt;/option&gt;&lt;option value=&#039;LT&#039;&gt;Lithuania&lt;/option&gt;&lt;option value=&#039;LU&#039;&gt;Luxembourg&lt;/option&gt;&lt;option value=&#039;MO&#039;&gt;Macao&lt;/option&gt;&lt;option value=&#039;MG&#039;&gt;Madagascar&lt;/option&gt;&lt;option value=&#039;MW&#039;&gt;Malawi&lt;/option&gt;&lt;option value=&#039;MY&#039;&gt;Malaysia&lt;/option&gt;&lt;option value=&#039;MV&#039;&gt;Maldives&lt;/option&gt;&lt;option value=&#039;ML&#039;&gt;Mali&lt;/option&gt;&lt;option value=&#039;MT&#039;&gt;Malta&lt;/option&gt;&lt;option value=&#039;MR&#039;&gt;Mauritania&lt;/option&gt;&lt;option value=&#039;MU&#039;&gt;Mauritius&lt;/option&gt;&lt;option value=&#039;MX&#039;&gt;Mexico&lt;/option&gt;&lt;option value=&#039;MD&#039;&gt;Moldova&lt;/option&gt;&lt;option value=&#039;ME&#039;&gt;Montenegro&lt;/option&gt;&lt;option value=&#039;MA&#039;&gt;Morocco&lt;/option&gt;&lt;option value=&#039;MZ&#039;&gt;Mozambique&lt;/option&gt;&lt;option value=&#039;NA&#039;&gt;Namibia&lt;/option&gt;&lt;option value=&#039;NL&#039;&gt;Netherlands&lt;/option&gt;&lt;option value=&#039;NZ&#039;&gt;New Zealand&lt;/option&gt;&lt;option value=&#039;NI&#039;&gt;Nicaragua&lt;/option&gt;&lt;option value=&#039;NE&#039;&gt;Niger&lt;/option&gt;&lt;option value=&#039;NG&#039;&gt;Nigeria&lt;/option&gt;&lt;option value=&#039;MK&#039;&gt;North Macedonia&lt;/option&gt;&lt;option value=&#039;NO&#039;&gt;Norway&lt;/option&gt;&lt;option value=&#039;OM&#039;&gt;Oman&lt;/option&gt;&lt;option value=&#039;PK&#039;&gt;Pakistan&lt;/option&gt;&lt;option value=&#039;PS&#039;&gt;Palestine&lt;/option&gt;&lt;option value=&#039;PA&#039;&gt;Panama&lt;/option&gt;&lt;option value=&#039;PY&#039;&gt;Paraguay&lt;/option&gt;&lt;option value=&#039;PE&#039;&gt;Peru&lt;/option&gt;&lt;option value=&#039;PH&#039;&gt;Philippines&lt;/option&gt;&lt;option value=&#039;PL&#039;&gt;Poland&lt;/option&gt;&lt;option value=&#039;PT&#039;&gt;Portugal&lt;/option&gt;&lt;option value=&#039;PR&#039;&gt;Puerto Rico&lt;/option&gt;&lt;option value=&#039;QA&#039;&gt;Qatar&lt;/option&gt;&lt;option value=&#039;RO&#039;&gt;Romania&lt;/option&gt;&lt;option value=&#039;RW&#039;&gt;Rwanda&lt;/option&gt;&lt;option value=&#039;SA&#039;&gt;Saudi Arabia&lt;/option&gt;&lt;option value=&#039;SN&#039;&gt;Senegal&lt;/option&gt;&lt;option value=&#039;RS&#039;&gt;Serbia&lt;/option&gt;&lt;option value=&#039;SC&#039;&gt;Seychelles&lt;/option&gt;&lt;option value=&#039;SL&#039;&gt;Sierra Leone&lt;/option&gt;&lt;option value=&#039;SG&#039;&gt;Singapore&lt;/option&gt;&lt;option value=&#039;SK&#039;&gt;Slovakia&lt;/option&gt;&lt;option value=&#039;SI&#039;&gt;Slovenia&lt;/option&gt;&lt;option value=&#039;SO&#039;&gt;Somalia&lt;/option&gt;&lt;option value=&#039;ZA&#039;&gt;South Africa&lt;/option&gt;&lt;option value=&#039;KR&#039;&gt;South Korea&lt;/option&gt;&lt;option value=&#039;ES&#039;&gt;Spain&lt;/option&gt;&lt;option value=&#039;LK&#039;&gt;Sri Lanka&lt;/option&gt;&lt;option value=&#039;SZ&#039;&gt;Swaziland&lt;/option&gt;&lt;option value=&#039;SE&#039;&gt;Sweden&lt;/option&gt;&lt;option value=&#039;CH&#039;&gt;Switzerland&lt;/option&gt;&lt;option value=&#039;TW&#039;&gt;Taiwan&lt;/option&gt;&lt;option value=&#039;TZ&#039;&gt;Tanzania&lt;/option&gt;&lt;option value=&#039;TH&#039;&gt;Thailand&lt;/option&gt;&lt;option value=&#039;TG&#039;&gt;Togo&lt;/option&gt;&lt;option value=&#039;TN&#039;&gt;Tunisia&lt;/option&gt;&lt;option value=&#039;TR&#039;&gt;Turkey&lt;/option&gt;&lt;option value=&#039;TC&#039;&gt;Turks and Caicos Islands&lt;/option&gt;&lt;option value=&#039;UG&#039;&gt;Uganda&lt;/option&gt;&lt;option value=&#039;AE&#039;&gt;United Arab Emirates&lt;/option&gt;&lt;option value=&#039;GB&#039;&gt;United Kingdom&lt;/option&gt;&lt;option value=&#039;US&#039;&gt;United States&lt;/option&gt;&lt;option value=&#039;UY&#039;&gt;Uruguay&lt;/option&gt;&lt;option value=&#039;VN&#039;&gt;Vietnam&lt;/option&gt;&lt;option value=&#039;YE&#039;&gt;Yemen&lt;/option&gt;&lt;option value=&#039;ZM&#039;&gt;Zambia&lt;/option&gt;&lt;option value=&#039;ZW&#039;&gt;Zimbabwe&lt;/option&gt;            &lt;/select&gt;
        &lt;/div&gt;

        &lt;div class=&quot;zip_div sg-label-container&quot;&gt;
            &lt;label class=&quot;sg-label&quot; for=&quot;signup_user_zip&quot;&gt;Postal Code&lt;/label&gt;
            &lt;input id=&quot;signup_user_zip&quot; type=&quot;text&quot; name=&quot;User[zipcode]&quot; class=&#039;postal_txt sg-label-input sg-btn-size-m&#039;
                   value=&quot;&quot;  autocomplete=&quot;off&quot; aria-invalid=&#039;false&#039;
                   placeholder=&quot;Postal Code&quot;
            /&gt;
        &lt;/div&gt;
    &lt;/li&gt;
    '></div>

        <script type='text/javascript'>
        var g_withMcCompleteRegistrationForm = 0;

        if (document.getElementById('mc_one_step_complete_reg_iframe') !== null) {
            document.getElementById('mc_one_step_complete_reg_iframe').onload = function() {
                var d = new Date();
                $('.mc_signup_ul .pay_signup_time').html("User load time: " + ((d.getTime() - g_pay_load_start_time)/1000.0) + " seconds");
            };
        }
    </script>

    <div class=' ifonly_buffer ifonly_popup_buffer' data-buffer='    &lt;li class=&quot;mc_checkbox_row clearfix&quot; style=&quot;margin-top:10px;&quot;&gt;
        &lt;div class=&quot;sg-f-bdy-s sg-btn-size-m mc_check_div sg-inline-top &quot; style=&#039;color:white; margin:0 auto;&#039;&gt;
            &lt;!--Added height:auto; width:auto; to prevent checkboxes from moving in safari --&gt;
            &lt;input id=&quot;pricelessProgram&quot; type=&#039;checkbox&#039; class=&#039;mc_priceless_check&#039; name=&#039;User[pricelessProgram]&#039; value=&quot;1&quot; style=&quot;height:auto; width:auto;&quot; tabindex=&quot;0&quot;/&gt;
            &lt;label for=&#039;pricelessProgram&#039; class=&#039;label_div sg-f-bdy-s txt-align-rtl sg-inline-flex-grow&#039; style=&#039;color:#fff; margin: 0 5px;&#039;&gt;
                I agree that Mastercard International Inc. and its affiliates may use my contact details and interactions with priceless.com to send me personalized marketing communications about all Priceless programs.&lt;/p&gt;
            &lt;/label&gt;
        &lt;/div&gt;
    &lt;/li&gt;

    &lt;li class=&quot;mc_checkbox_row clearfix&quot; style=&quot;margin-top:5px;&quot;&gt;
        &lt;div class=&quot;sg-f-bdy-s sg-btn-size-m mc_check_div sg-inline-top &quot; style=&#039;color:white; margin:0 auto;&#039;&gt;
            &lt;!--Added height:auto; width:auto; to prevent checkboxes from moving in safari --&gt;
            &lt;input id=&#039;mastercardProgram&#039; type=&#039;checkbox&#039; class=&#039;mc_master_check&#039; name=&#039;User[mastercardProgram]&#039; value=&quot;1&quot; style=&quot;height:auto; width:auto;&quot; tabindex=&quot;0&quot;/&gt;
            &lt;label for=&#039;mastercardProgram&#039; class=&#039;label_div sg-f-bdy-s txt-align-rtl sg-inline-flex-grow&#039; style=&#039;color:#fff; margin: 0 5px;&#039;&gt;
                I agree that Mastercard International Inc. and its affiliates may use my contact details to send me email marketing communications about all products and services.&lt;/p&gt;
            &lt;/label&gt;
        &lt;/div&gt;
    &lt;/li&gt;

    &lt;li class=&#039;&#039; style=&quot;margin-top:5px;&quot;&gt;
        &lt;div id=&quot;registrationTerms&quot; style=&quot;width:100%; color:#fff&quot;&gt;
            &lt;div class=&quot;terms bottom sg-f-bdy-s sg-btn-size-m&quot; style=&quot; text-align:initial; margin:0 auto; color:#fff&quot;&gt;
                &lt;div  class=&#039;txt-align-rtl  &#039; style=&#039;margin-top:0px;&#039;&gt;Your consent to receiving marketing communications is voluntary. You are free to withdraw your consent at any time, free of charge.&lt;/div&gt;&lt;div  class=&#039;txt-align-rtl  &#039; style=&#039;margin-top:5px;&#039;&gt;Information on Mastercards privacy practices is available in the priceless.com &lt;a href=&quot;/privacy&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Privacy Notice&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;div  class=&#039;txt-align-rtl  &#039; style=&#039;margin-top:5px;&#039;&gt;By clicking Sign Up, I confirm that I have read and agree to the &lt;a href=&quot;/terms&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener&quot;&gt;Terms of Use&lt;/a&gt; for priceless.com.&lt;/p&gt;
&lt;/div&gt;            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/li&gt;
    '></div>
    <li ><p id="streamlineSignup_error" class="sg-c-error sg-f-bdy-s" style="display:none;"></p></li>
    <li style="margin-top:10px;">
        <a  id="signup-email-submit-button" class="allowAllUsers sg-btn-size-m primaryButton button " style=" margin:0 auto;" href="javascript:void();" role="button" di-type="sign up submit" tabIndex="0"><span class="title-container"><span class="title">Sign up</span></span></a>    </li>

    
</ul>










</form>

<script type="text/javascript">
$(document).ready(function(){
    $("#streamlineSignup, #streamlineSignupForm").on('keypress', 'input', function(e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code === 13) {
            e.stopPropagation();
            e.preventDefault();

            if ($(this).is(':checkBox')) {
                return;
            }

            // $("#streamlineSignupForm").submit();
            // g_withMcCompleteRegistrationForm defined in _signup_form_html.php, for master card one step signup
            if (typeof g_withMcCompleteRegistrationForm !== 'undefined' && g_withMcCompleteRegistrationForm) {
                submitMcOneStepSignUpForm();
            } else {
                submitSignUpForm();
            }
        }
    });

    $(".swapper").click(function(){
        resetError("#login_error");
        resetError("#streamlineSignup_error");
    });


    $("#member-signup-dialog").on('click', '#signup-email-submit-button, .signup-email-submit-button',function(e){
        e.stopPropagation();
        e.preventDefault();

        var $usedFor = $(this).parents('.hyatt_signup_ul').find('.hyattRegFormUsedFor');     // for hyatt, reg form can be used for both login and sign up
        if($usedFor.length>0){
            // for hyatt, login and sign up using the template.
            // user set one form,  we set the other
            var usedFor = $usedFor.val();
            if (usedFor === 'signup'){
                // set login form value
                $('#loginForm .User_email_emailAddress').val($('#streamlineSignupForm .User_email_emailAddress').val());
                $('#loginForm .password').val($('#streamlineSignupForm .password').val());
            }
            else if (usedFor === 'login'){
                // set signup form value
                $('#streamlineSignupForm .User_email_emailAddress').val($('#loginForm .User_email_emailAddress').val());
                $('#streamlineSignupForm .password').val($('#loginForm .password').val());
            }
        }

        // g_withMcCompleteRegistrationForm defined in _signup_form_html.php, for master card one step signup
        if (typeof g_withMcCompleteRegistrationForm !== 'undefined' && g_withMcCompleteRegistrationForm ){
            submitMcOneStepSignUpForm();
        }
        else {
            submitSignUpForm();
        }
    });
});


function disableSignUpFormInputs(){
    $('.mc_signup_ul input, .mc_signup_ul select').prop('disabled', true);
}


function disableSignUpFormSubmitBtn(){
    loadingAnimation("show");
    $("#streamlineSignupForm").css('cursor','wait');
    $("#signup-email-submit-button").addClass('disabled');
}


function enableSignUpFormSubmitBtn(){
    loadingAnimation("hide");
    $("#streamlineSignupForm").css('cursor','auto');
    $("#signup-email-submit-button").removeClass('disabled');
}



var mcSignUpSuccess = false;
var g_register_result = null;

// submit the sign up form
function submitSignUpForm() {

    if ($("#signup-email-submit-button").hasClass('disabled')) {
        return false;
    }

    //if mc Sign up form successfully called before, just submit the compelete sign up form
    if (mcSignUpSuccess) {
        // Jun: Is there any chance to have this case?
        $('.mc_one_step_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify({action:'submitCompleteSignUpForm'}), '*');
        return;
    }

    $('#streamlineSignupForm .error_div').hide().attr('aria-live', 'off');
    $('#streamlineSignup_error, .streamlineSignup_error').hide();

    var usedFor = 'signup';                                 // for hyatt, reg form can be used for both login and sign up
    if($('#login-container').is(':visible')) {
        usedFor = 'login';
    }

    var email = $("#User_email_emailAddress").val().trim();

    $('#member-signup-dialog .error_div').hide();
    $('#member-signup-dialog input, #member-signup-dialog select').attr('aria-invalid', 'false').removeAttr('aria-errormessage');

    // we use serverside validation
    //if (email === '' || email === $("#User_email_emailAddress").attr("default-value")) {
    //    displayError("#streamlineSignup_error","Please enter your email address");
    //    return false;
    //} else if (! validateEmail(email)) {
    //    displayError("#streamlineSignup_error", "Please enter valid email address");
    //    return false;
    //}

    //if ($('.mc_priceless_check').length>0 && $('.mc_priceless_check').prop('checked')==false){
    //    displayError("#streamlineSignup_error", "Priceless Communications opt-in required for sign-up");
    //    return false;
    //}

    if ($('.signup_recaptcha_token').length > 0 && $('.signup_recaptcha_token').val() === ''){
        displayError("#streamlineSignup_error", "Please click on the recaptcha");
        return false;
    }

    $("#User_email_emailAddress").val(email);

    if($('#gdpr_emailOptedIn').is(':visible')) {
        if($('#gdpr_emailOptedIn').prop('checked')) {
            $('#gdpr_emailOptedIn').val(1).prop('checked', true);
        } else {
            $('#gdpr_emailOptedIn').val(0).prop('checked', true);
        }
    }

    disableSignUpFormSubmitBtn();

    var actionRegister = "/website/register";

    //var post_data =
    console.log('streamline register started');
    $.ajax({
        type:'POST',
        url: actionRegister,
        data: $("#streamlineSignupForm").serialize(),
        timeout: 30000,
        dataType: 'json'
    })
    .done( function(data){

        var restore_disabled_btn = true;

        g_register_result = data;
        if (data.show_mc_error) {
            var aria_live_shown = false;

            for(var i=0; i<data.errors.length; i++){
                var error = data.errors[i];
                var selector = error.selector;
                var msg = error.msg;

                var error_classes = 'error_div sg-c-error sg-f-bdy-s';

                var $input = $('#streamlineSignupForm').find(selector);
                if ($input.length > 0) {
                    var $error = $input.siblings('.error_div');
                    if ($error.length === 0) {
                        $error = $('<div class="' +error_classes+ '"></div>');

                        if ($.trim(selector) !== '') {
                            var id = 'error_div_' + selector.replace('#', '').replace('.', '').replace(' ', '');
                            $error.attr('id', id);
                        }

                        $input.parent().append($error);
                    }
                    $error.html(msg).show();

                    $input.attr('aria-invalid', true).attr('aria-describedby', $error.attr('id'));

                    if (! aria_live_shown) {
                        aria_live_shown = true;
                        $error.attr('aria-live', 'polite');
                        $input.focus();
                    }
                }
            }
        }
        else if (data.result === 3) { // Email is already being used, please Log In
            $("#nav .js-login").click(); // added #nav to log pageview once for desktop and mobile
            $("#login-email").val(email).show();
            $("#login-pass").focus();
            $("#login_error").html(data.msg).show();
            resetRecaptcha('signup');
        }
        else if (data.result === 14) {
            userAccessHide(); // close popup
            var message = "Please verify your email.";
            alertEx(message);
        }
        else if (data.result > 0) {
            if (typeof g_withMcCompleteRegistrationForm !== 'undefined' && g_withMcCompleteRegistrationForm ){
                console.log('Signed up successfully, posting complete sign up form');
                disableSignUpFormInputs();
                restore_disabled_btn = false;
                mcSignUpSuccess = true;
                var postData = {action : 'submitCompleteSignUpForm'};
                if (data.completeSignUpUrl) {
                    postData.completeSignUpUrl = data.completeSignUpUrl;
                }
                $('.mc_one_step_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify(postData), '*');
            }
            else {
                afterAllFormsSubmissionSuccess(data);
            }
        }
        else {
            displayError("#streamlineSignup_error, .streamlineSignup_error",data.msg);
            resetRecaptcha('signup');
        }

        if(restore_disabled_btn){
            enableSignUpFormSubmitBtn();
        }

    }).fail( function(xhr, textStatus, error) {
        if (g_thisHost === 'www') {
             location.reload();
        }
        else if (g_thisHost==='dev' || g_thisHost==='test') {
             alert_error("Error in _streamlined_signup_form register<br />status:" + textStatus + " <br />error:" + error + " <br /><br />" + xhr.responseText);
        }
        else {
            confirmEx("Please refresh and try again." + ' ' + "If you continue to receive this error please contact Priceless concierge." + '<br /><br />It will automatically refresh the page in LIVE.<br />(' + textStatus + ' - ' + xhr.statusText + ')',
                'User Signup Error',
                function(){location.reload();},
                function(){loadingAnimation("hide");},
                "Refresh",
                "Close");
            console.log(xhr);
        }
    });
    return false;
};


// data:  data returned form register ajax call
function afterAllFormsSubmissionSuccess(data){

    console.log('afterAllFormsSubmissionSuccess called');

    // adobe tracking 1.10
    var adobeTracking = {ctaName: 'Sign up - Completed'};
    if (g_withMcCompleteRegistrationForm) {
        adobeTracking['ctaName'] = 'Sign up Completed  Long Form';
    }
    if (data.cardTypeName) {
        adobeTracking['cardType'] = data.cardTypeName;
    }
    adobeSatelliteTracking('Forms', adobeTracking);
    
        // Need to make callback since we NOW have emailAddress and userId
    // emailAddress and userId are needed for BlueShift
    if (typeof data !== 'undefined' && data.emailAddress && data.userId) {
        trackingSignupConfirmation(data.emailAddress, data.userId);
    }
    
    if ($("#signUp-dialog-called-from").val() !== "wishlist"){              //VP-14277
        if (addGuestProductToCart()) return false; // if need to add a guest product (main.js)
    }

    if(empty(g_register_result.terms)) {
        userAccessHide(); // close popup
    }

    if (g_sourceId === 0 && g_register_result.result === 1) { // display thank you when it's new user
        g_signup_timer = 5000; // need more time to read message

        if (g_register_result.loginExistingUser) {
            g_signup_timer  = 0;
        }
        else {
            var showEmailCrm = false;
            if (showEmailCrm && $('#pricelessProgram').prop('checked')) {
                g_signup_timer = 60 * 60 * 1000;            // one hour
                show_ifonly_overlay('.email_crm_overlay');
                $('.email_crm_overlay').attr('continu_signup_process', '1');
            }
            else{
                showThankYouPopIfNecessary();
            }
        }
    }

    var redirectUrl = $("#redirectURL").val().trim();
    var url_regex = /^(http|https)/;
    if (url_regex.test(String(redirectUrl).toLowerCase())) {
        redirectUrl = ''; // do not allow redirect to other site
    }

    if (! empty(g_register_result.terms)) {
        showMemberTermsAndPrivacyDialog(redirectUrl, g_register_result.terms, g_register_result.termsTranslatedText);
        return false;
    } else if (redirectUrl !== '' && redirectUrl !== '#') {
        setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
    } else {
        setTimeout(function() { location.reload(); }, g_signup_timer);
    }
}


function showThankYouPopIfNecessary(){
    var hideThankYou = false
    if (hideThankYou) {
        g_signup_timer  = 0;
    }
    else {
        show_ifonly_overlay('.signup_thank_overlay');
        ga('send', 'event', 'Member Activity', 'Sign Up Confirmation Dialog');
        if (can_use_facebook_tracking()) { facebooktrack("'0.00'","'6011685149285'"); }
    }
}


function signupRediret(timer){
    var redirectUrl = $("#redirectURL").val().trim();
    if (redirectUrl !== '' && redirectUrl !== '#') {
        setTimeout(function() { location.href = redirectUrl; }, timer);
    } else {
        setTimeout(function() { location.reload(); }, timer);
    }
}


function trackingSignupConfirmation(email, userId) {
    // vars email and userId used in js call from funciton below:
    }

var mcCompleteRegValidationReturned = false;
var mcCompleteRegIsValid = false;

var mcSignUpValidationReturned = false;
var mcSignUpIsValid = false;

// submit both signup form and complete registration form(in iframe from pay server) for master card one step signup
function submitMcOneStepSignUpForm(){

    mcCompleteRegValidationReturned = false;
    mcCompleteRegIsValid = false;

    mcSignUpValidationReturned = false;
    mcSignUpIsValid = false;

    // validate mc complete registration form ,  then wait msg validateCompleteSignUpFormDone to continue
    $('.mc_one_step_complete_reg_iframe')[0].contentWindow.postMessage(JSON.stringify({action:'validateCompleteSignUpForm'}), '*');

    // validate mc signup form
    validateMcSignupForm();
}

function setTargetHeight(data){
    if (data.height) {
        if (data.target !== undefined && $.trim(data.target) !== '') {
            var $target = $(data.target);
            $target.css('min-height', data.height);
            $target.css('height', data.height);
            $target.css('max-height', 'none');
        }
    }
}

//validate master card signup form
function validateMcSignupForm(){
    $('#member-signup-dialog .error_div').hide();

    $.ajax({
        type:'POST',
        url: '/website/validateMcSignUpFormForErrors',
        data: $("#streamlineSignupForm").serialize(),
        timeout: 10000,
        dataType: 'json'
    }).done( function(data){
        mcSignUpValidationReturned = true;
        if (data.errors.length === 0) {
            mcSignUpIsValid = true;
        }
        else {
            for(var i=0; i<data.errors.length; i++){
                var error = data.errors[i];
                var selector = error.selector;
                var msg = error.msg;

                ShowErrorForElement(selector, msg);
            }
        }
        afterAllMcFormValidation();

    }).fail( function(xhr, textStatus, error) {
        mcSignUpValidationReturned = true;
        afterAllMcFormValidation();
    });
}


function afterAllMcFormValidation()
{
    if (mcCompleteRegValidationReturned && mcSignUpValidationReturned) {
        if (mcCompleteRegIsValid && mcSignUpIsValid) {
            // all forms valid, submit signup form;
            consoleLog('all forms valid, ready to submit');
            submitSignUpForm();
            //submitSignUpForm
        }
        else{
            // some field are not valid. do not submit form
            // reset the flags.
            mcCompleteRegValidationReturned = false;
            mcCompleteRegIsValid = false;
            mcSignUpValidationReturned = false;
            mcSignUpIsValid = false;
        }
    }
    else {
        // one of the validation not returned. just wait
    }
}


var g_complet_signup_result = null;

window.addEventListener("message", function(e){
    if (e.origin !== 'https://pay.priceless.com') return;

    try {
        var data = jQuery.parseJSON(e.data);
    } catch(err) {
        return;
    }

    // event handlers

    if (data.action === 'validateCompleteSignUpFormDone') {
        mcCompleteRegValidationReturned = true;
        if (data.errors !== undefined) {
            if (data.errors.length === 0) {
                mcCompleteRegIsValid = true;
            }
        }
        afterAllMcFormValidation();
        setTargetHeight(data);
    }

    if (data.action === 'submitCompleteSignUpFormDone') {
        console.log('submitCompleteSignUpFormDone recevied');
        g_complet_signup_result = data;

        setTargetHeight(data);

        if (data.result === 1) {
            afterAllFormsSubmissionSuccess(data);
        }
        else {
            alert('Error in completing registration');
        }

        enableSignUpFormSubmitBtn();
    }

    if (data.action === 'adobeSatelliteTrackingDone') {
        var name = data.name;
        var adobeTracking = {ctaName: data.trackingName};
        if (data.cardTypeName) {
            adobeTracking['cardType'] = data.cardTypeName;
        }
        adobeSatelliteTracking(name, adobeTracking);
    }
});

</script>
                        </div>
                    </div>
                </li>
            </ul>
            <div style="clear:both"></div>
        </div>
    </div>

    <div style="float:left; width: 100%; height: 5px;"></div>

    <div style="clear:both"></div>
</div>


<div class="border-box terms-border-box" style="display:none; ">
    <div class="header" style="margin-top: 20px; margin-bottom: 0px; padding:0;">
        <img srcset="/media/frames/94/priceless_lockup_1x__L.png 240w,
            /media/frames/94/priceless_lockup_2x__L.png 480w,
           /media/frames/94/priceless_lockup_3x__L.png 720w"
     sizes="(max-width: 640px) 240px,
            (max-width: 980px) 480px,
            720px"
     src="/media/frames/94/priceless_lockup_1x__L.png" alt="Priceless" style="max-width:100%;">        <p id="terms-header" class="section-header sg-f-ttl" style="color:#fff; text-align:center; font-size:16px; line-height:18px; margin:20px auto; width: 90%;">The Terms of Use and Privacy Notice for Priceless have been updated since you last logged in.</p>
    </div>
    
    <div class="body" style="">
        <div class="content" style="width:100%; margin:0 auto; position:relative;">
            <ul class="susi-options" role="presentation">

                <li class="email-susi-form" style="">
                    <div class="content" style="max-width:100%;margin:0 auto;">
                        <div id="back-to-email-arrow" style="display:none"><img src="https://d5xydlzdo08s0.cloudfront.net/images/icon_bigarrowleft_fff.png" alt="go back" /></div>
                        <div id="login-container-terms" data-showwelcomepopup="0" class="mobile formBlock">
                            <ul id="termUl" class='terms_login_ul mobile'>
                                <input type="hidden" name="LoginForm[emailOptedIn]" id="LoginForm_emailOptedIn" value="1" />
                                <li class="section-body" style='color:#fff; font-size:12px; line-height:14px; margin:0px auto; width: 90%;text-align:center;'>
                                    *By clicking Continue, I acknowledge that I have read and understand the <a class="mc-user-terms-link" href="/terms" target="_blank">Terms of Use</a> for Priceless. I also understand that my personal data will be processed by Mastercard International Inc. and its affiliates in the context of Priceless as described in the <a class="mc-user-privacy-link" href="/privacy" target="_blank">Privacy Notice</a>.                                </li>

                                <li class='post_recap_li' style="display:flex;">
                                    <p id="terms_error" class="error-msg sg-c-error" style="width:94%; text-align:center; display:none; margin-bottom: 10px;"></p>
                                </li>
                                <li><p style="height:2px;width:100%;">&nbsp;</p></li>
                                <li style="padding-right: 20px; padding-left: 20px; margin-top: 20px;">
                                    <div  id="terms-reaggreement" class="allowAllUsers sg-btn-size-m primaryButton button " style="margin:0 auto; width: 100%; border-radius:5px;" di-type="basic" di-class="Body Click" di-id="Terms/Privacy Re-Aggrement" tabIndex="0" role="button"><span class="title-container"><span class="title">Continue</span></span></div>                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                
                

            </ul>
            <div style="clear:both"></div>
        </div>  
        
    </div>   
    
    <div style="float:left; width: 100%; margin-bottom: 20px;"></div>
    
    <div style="clear:both"></div>
</div>  

    </div>


        </div>
    </div>
</div>
<script type="text/javascript">
    add_ifonly_overlay_click_handlers('#member-signup-dialog');
</script>
<!-- </div>  -->





<style>
    .vendor_signup_overlay .ifonly_pop {padding-bottom:0px; max-width:700px;}
</style>




<div  id="vendor-signup-dialog"   
    class="vendor_signup_overlay  ifonly_overlay mobile  overlayBlack" 
    style="display:none;" tabindex='-1' data-overlay="vendor_signup_overlay" 
    data-id="vendor_signup_overlay"   
>
    
    
    <div   class="vendor_signup_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="vendor-signup-dialog"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="vendor_signup_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    
    &lt;div class=&quot;rightVertical&quot; style=&quot;height:auto;float:none;position:relative;background:#141413; background-size: cover; background-position: center; height: 800px&quot;&gt;
        &lt;div class=&quot;header&quot; style=&#039;margin-bottom:0; text-align:center;&#039;&gt;
            &lt;img class=&quot;userAccess-ifonlyLogo&quot; src=&#039;https://d5xydlzdo08s0.cloudfront.net/images/mc/PC_circles_logo.png&#039; alt=&quot;Logo&quot;&gt;
            &lt;p class=&quot;section-header sg-f-ttl&quot; style=&#039;margin: 40px auto 6px; color:#fff&#039;&gt;Welcome to Priceless&lt;/p&gt;
            &lt;p class=&quot;section-header&quot; style=&#039;margin-bottom:4px;color:#fff&#039;&gt;Would you like to sign up as a customer or luminary on our site?&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;body&quot; style=&quot;margin-bottom: 60px;&quot;&gt;
            &lt;div class=&quot;content&quot; style=&quot;max-width:282px; margin:0 auto; position:relative; margin-top: 40px; margin-bottom: 10px;&quot;&gt;
                &lt;ul&gt;
                    &lt;li&gt;
                        &lt;div class=&quot;content&quot; style=&quot;max-width:280px;margin:0 auto;&quot;&gt;
                            &lt;ul&gt;
                                &lt;li&gt;
                                    &lt;a href=&quot;/marketplace/signup&quot; &gt;
                                        &lt;div  class=&quot;allowAllUsers navButton sg-no-bd blackButton button  &quot; style=&quot;width: 100%;&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Sign up as a luminary&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                                    &lt;/a&gt;
                                    &lt;div  class=&quot;allowAllUsers js-signUp js-ignore-vendor-signup navButton sg-no-bd blackButton button  &quot; style=&quot;width: 100%; margin-top: 5px;&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Sign up as a customer&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                                &lt;/li&gt;
                            &lt;/ul&gt;
                        &lt;/div&gt;
                    &lt;/li&gt;
                &lt;/ul&gt;
                &lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        
        var overlay_selector = '.vendor_signup_overlay';

        add_ifonly_overlay_click_handlers(overlay_selector);
        
        $('.vendor_signup_overlay').on('click', '.js-signUp', function(){
            hide_ifonly_overlay(overlay_selector)
        });

    });

</script>



<style>
    #complete-signup-dialog .close {background-image:url(https://d5xydlzdo08s0.cloudfront.net/images/icon_close_fff_thin.png);  position: absolute; top:10px; left:475px;}

    #complete-signup-dialog  {
        background:rgba(0,0,0,0.7);
        width:500px;
        max-height:none;
        -ms-scrollbar-base-color:#141413;
        -ms-scrollbar-track-color:#141413;
        -ms-scrollbar-arrow-color:#141413;
        -ms-scrollbar-3dlight-color:#141413;
        -ms-scrollbar-highlight-color:#141413;
        -ms-scrollbar-face-color:#141413;
        -ms-scrollbar-shadow-color:#141413;
        -ms-scrollbar-darkshadow-color:#141413;
        -ms-overflow-style:-ms-autohiding-scrollbar;

        overflow-y: auto;
        padding: 0px 5px 0px 10px;
        box-sizing: border-box;         /* VP-14959 */
    }
    #complete-signup-dialog.mobile { padding:0; }


    #complete-signup-dialog::-webkit-scrollbar  {
        width: 0px;
    }

    #complete-signup-dialog .header {margin-top:10px;}
        #complete-signup-dialog .header img {width:94%;}
        #complete-signup-dialog .content {width:92%;}

    .mc_complete_reg_iframe {width:100%; min-height:380px; overflow-y:hidden;}
    .mobile .mc_complete_reg_iframe {width:100%; min-height:380px; overflow-y:hidden;}

    .mc_complete_reg_ul {text-align:center;}
    .mc_complete_reg_ul .row { margin-top:10px; float:left; width:100%;}

    .mc_complete_reg_ul .row input, .mc_complete_reg_ul .row select {width:100%;}

    #complete-signup-dialog .row.two_children > div{width:calc(50% - 3px);}
    #complete-signup-dialog .row.two_children > div:first-child{float:left;}
    #complete-signup-dialog .row.two_children > div:last-child {float:right;}

    .mc_complete_reg_ul .error_div {margin-top:3px;}

    #complete-signup-dialog.mobile {
        max-height:96vh; 
        overflow-x:hidden; 
        overflow-y:auto;
    }

    @media only screen and (max-width: 576px) {
        #complete-signup-dialog .row.two_children > div {width:100%;}
        #complete-signup-dialog .row.two_children > div:last-child {float:left; margin-top:10px;}

        #complete-signup-dialog .close {right:-5px; top:-5px; position: sticky;}
        #complete-signup-dialog .header {margin-top:5px;}

        /*.mc_complete_reg_iframe {min-height: calc(100vh - 120px);}*/
    }


            #complete-signup-dialog {background:#141413;}

    
    #complete-signup-dialog .close.mobile {background-size:30px;}
    #complete-signup-dialog .close.rtl {right:450px;}
    #complete-signup-dialog .close.rtl.mobile {right:calc(100% - 20px);}

    .has_gift_cert_link {display:none;}
</style>



<div id="complete-signup-dialog" class='xxx overlayDialog overlay mobile' tabindex='0' style="height: auto; position: absolute;">
    <div class="close mobile " popupid='complete-signup-dialog' tabindex='0' alt='close'></div>
    <div class="rightVertical" style="height:100%;">
        <div class="header" style="text-align:center;">
            <img srcset="/media/frames/94/priceless_lockup_1x__L.png 240w,
            /media/frames/94/priceless_lockup_2x__L.png 480w,
           /media/frames/94/priceless_lockup_3x__L.png 720w"
     sizes="(max-width: 640px) 240px,
            (max-width: 980px) 480px,
            720px"
     src="/media/frames/94/priceless_lockup_1x__L.png" alt="Priceless" style="max-width:100%;">        </div>
        <div class="body" style="width: 100%;">
            <div class="content" style="margin: 0 auto; ">
                <div>
                    <div>
                        <div id="completeSignup-container">
                            <div><p class="sg-c-3 sg-f-ttl">Complete your registration to unlock unique experiences tailored to your specific Mastercard.</p></div>

                            <div style='margin: 10px 0px;'>
                                <a href="javascript:has_gift_cert_link_clicked();" class="has_gift_cert_link" >Have a gift certificate?</a>
                            </div>
                            <iframe id="mc_complete_reg_iframe" title="Complete Sign Up Form" class="mc_complete_reg_iframe mobile" src="about:blank" data-src="https://pay.priceless.com/pay/index.php?r=form/getMastercardCompleteSignUpForm&sh=07800b43fe7437534a2aa93fb8d2a45a81302a04c3c1a4f4fde1490f32c2c21f-%2BIioEpWJLnSUoZf4zWdsg2F%2Fwn2IeRmRk&su=0&ss=%2BVfNCF%2FxuaN6KpmcHVH3ezbEy6KmS2pJ%2B&sd=2&si=%2BGEJGrYX9zGk89PU7EgCuEiY7IxuVroiS&sc=%2BIjxFz9d8WasXI5C5EEdkor37d27zb6933g65E%2FFvNMw%3D&fid=search&mobile=1&dt=%2BgQVajiqzPr8cnLSo2uLVeIh%2BR0EBTTfuf2vjRo7Ud5wN728z25PF%2FWEBnyk4bPydlZ9ScY3R47jVj0PxpI19PWrLV0aYgsAEdSLdbvz8uXxcbJmgnav83ZYwfwjC6eO3OzqZ9Wd3T5Uj%2BP%2FQj85XfLGPlj3RFSLHpHOAMhF5zmR5Nh%2Ff%2FrEyr8Z2V7a4jrQ%2Fs%2BCtcKwIAUE8dnV44omwEev6ZALBfe%2BX5e8rb7tmMVt7P0QyUyvonmc%2FlYmoos6r8T7Na8REj3KUI0z6MeHJtMpLIkJ2sQ4pxlEzFILvjD8xg2B5gj6hjGXfYxyz%2BKOywpLR0mRT%2Fy9DXiuliqNM34iJGCwRmQKHFOU%2FzfXcFd1IuemU%2FC0Tkb8eF04jX2MMWaLGgd5zwF2wNE11djpoMrg90l8SiJNxijm%2BC2TDywWGZt%2B2ZeqSSewgMX444hGYHnxRIzHM7tjuVUhN%2FaAmhFVfecKMgmzbP4AhQHI18tnOPwHq1%2BGhoSWtqEaSSndfcuFNKX4j30mOZZmmEoJPuPnUM2bBOYDF&st=5&c_form=mobile&target=&applePay=0&googlePay=0"></iframe><p style='display:none;' class='pay_signup_time'></p>                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    function has_gift_cert_link_clicked(){
        show_ifonly_overlay('.gift_cert_input_overlay');
        userAccessHide();               // just to hide the step2 registartion form             //$('#complete-signup-dialog').find('.close').trigger('click');
    }

    function reg_gift_cert_entered(gcCode){
        //todo. tracking?

        reset_aria_msg('.gift_cert_input_pop_content', '.gift_cert_error_msg', undefined);

        $.ajax({
            type: "POST",
            url: '/website/completeSignupByGC',
            dataType: 'json',
            data: {gcCode:gcCode},
            success: function(data){
                if (data.result === 1) {
                    //alert('cert ok');
                    window.location.href = '/cart/checkout';
                } else {
                    if(data.inline_error === 1){
                        show_aria_msg(data.msg, '.gift_cert_error_msg', undefined, undefined);
                    }
                    else{
                        hide_ifonly_overlay('.gift_cert_input_overlay');
                        show_ifonly_overlay('.gift_cert_error_overlay');
                    }
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error in verifying gift cert');
            }
        });
    }
</script>


<style>
    .gift_cert_input_overlay {z-index: 10001;}
    .gift_cert_input_overlay .ifonly_pop {width:500px; min-height:auto; padding-bottom:0; padding-top:20px;}
   
            .gift_cert_input_pop.ifonly_pop {background:#141413;}
            
        
    .gift_cert_input_overlay.mobile .ifonly_pop { min-height:280px; }
</style>


    



<div     
    class="gift_cert_input_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="gift_cert_input_overlay" 
    data-id="gift_cert_input_overlay"   
>
    
    
    <div   class="gift_cert_input_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="gift_cert_input"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_fff_thin.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="gift_cert_input_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;margin: 0px 30px 30px 30px; color:#ffffff;&quot;&gt;
        &lt;div class=&quot;&quot; style=&quot;text-align:center; margin:1px;&quot;&gt;   &lt;!-- margin is used to fix missing top border for the input --&gt;
            &lt;img srcset=&quot;/media/frames/94/priceless_lockup_1x__L.png 240w,
            /media/frames/94/priceless_lockup_2x__L.png 480w,
           /media/frames/94/priceless_lockup_3x__L.png 720w&quot;
     sizes=&quot;(max-width: 640px) 240px,
            (max-width: 980px) 480px,
            720px&quot;
     src=&quot;/media/frames/94/priceless_lockup_1x__L.png&quot; alt=&quot;Priceless&quot; style=&quot;max-width:100%;&quot;&gt;        &lt;/div&gt;
        
        
        &lt;div style=&quot;&quot;&gt;
            &lt;div style=&#039;text-align:center;&#039;&gt;
                &lt;label for=&#039;gift_cert_input&#039;&gt;Enter your gift certificate code to unlock unique experiences&lt;/label&gt;&lt;br /&gt;
                &lt;input id=&#039;gift_cert_input&#039;  class=&#039;gift_cert_input sg-btn-size-m&#039; style=&#039;margin-top:20px&#039; 
                       placeholder=&#039;Gift certificate code*&#039; required /&gt;&lt;br /&gt;
                &lt;div style=&#039;min-height:35px; padding-top:5px;&#039;&gt;
                    &lt;div  role=&quot;alert&quot; class=&quot;gift_cert_error_msg aria_msg_div sg-f-bdy-s&quot; style=&quot;&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;    
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div style=&quot;text-align: center;  &quot;&gt;
            &lt;div  class=&quot;gift_cert_submit  primaryButton button &quot; style=&quot;width: 100%;&quot; onclick=&quot;reg_gift_cert_entered($(&amp;#039;.gift_cert_input&amp;#039;).val())&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Submit&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function(){

        // make the overlay interative.  eg: close the pop up when x is clicked or the background is clicked.
        add_ifonly_overlay_click_handlers('.gift_cert_input_overlay');

    });

</script>
<style>
    .gift_cert_error_overlay  .ifonly_pop {width:500px; min-height:auto; padding-bottom:0; padding-top:20px;}
    
            .gift_cert_error_pop.ifonly_pop {background:#141413;}
            
    .gift_cert_error_overlay.mobile .ifonly_pop { min-height:250px; }    
    .gift_cert_error_overlay.mobile .cancel_btn {margin-top:15px;}
</style>




<div     
    class="gift_cert_error_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="gift_cert_error_overlay" 
    data-id="gift_cert_error_overlay"   
>
    
    
    <div   class="gift_cert_error_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="gift_cert_error"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:none;" role="button" />

        <div class="gift_cert_error_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;margin: 30px;  color:#ffffff;&quot;&gt;
        &lt;div style=&quot;margin-bottom: 30px;&quot;&gt;
            &lt;p class=&quot;sg-f-bdy&quot;&gt;This is not a valid gift certificate or has already been redeemed. Please enter a different code or complete registration to unlock unique experiences.&lt;/p&gt;
        &lt;/div&gt;
        &lt;div style=&quot;text-align: center;&quot;&gt;
            &lt;div  onclick=&quot;hide_ifonly_overlay(&amp;#039;.gift_cert_error_overlay&amp;#039;); show_ifonly_overlay(&amp;#039;.gift_cert_input_overlay&amp;#039;);&quot; class=&quot;new_cert_btn primaryButton button &quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Enter new code&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            &lt;div  onclick=&quot;hide_ifonly_overlay(&amp;#039;.gift_cert_error_overlay&amp;#039;)&quot; class=&quot;cancel_btn primaryButton button &quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Cancel&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>


<script type="text/javascript">
    $(document).ready(function(){

        // make the overlay interative.  eg: close the pop up when x is clicked or the background is clicked.
        add_ifonly_overlay_click_handlers('.gift_cert_error_overlay');

    });

</script>
<script>
window.addEventListener('message', function(e) {
    if (e.origin !== 'https://pay.priceless.com') return;

    try {
        var data = jQuery.parseJSON(e.data);
    } catch(err) {
        return;
    }

    //console.log(data);
    if (data.action === 'refresh') {
        ga('send', 'event', 'Member Activity', 'Member Activity - Complete Sign Up for emailAddress Users');

        if ($("#auction-submit-btn").length > 0 && $("#CheckoutForm_bid").length > 0 && $("#CheckoutForm_bid").val() !== '') {
            // in Auction page
            g_needCompleteSignup = false;
            hideOverlay("complete-signup-dialog");
            $("#auction-submit-btn").click();
        }
        else {
            var redirectUrl = $("#redirectURL").val().trim();
            if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                redirectUrl = data.redirectUrl;
            }
            if (redirectUrl !== '' && redirectUrl !== '#') {
                setTimeout(function() { location.href = redirectUrl; }, g_login_timer);
            } else {
                setTimeout(function() { location.reload(); }, g_login_timer);
            }
        }
    }
    if (data.action === 'resize' && data.height) {
        var $target = $('iframe.mc_complete_reg_iframe');
        var dataTarget = data.target ? $.trim(data.target) : '';
        if (dataTarget && dataTarget !== '.' && dataTarget !== '#') {
            $target = $(data.target);
        }
        $target.css({
            height: data.height,
            'min-height': data.height,
            'max-height': 'none'
        });
    }
}, false);

$(function(){
    if (g_ApplePayAvailable) {
        $('.mc_complete_reg_iframe').css({'padding-bottom': '0px'});
        $('#completeSignup-container .apple-pay-container').css('display', 'block');
        $('#completeSignup-container .apple-pay-container button').css({'width': '100%', 'height': '38px', 'margin-bottom':'10px'});
    }

    var g_mc_useOneStepRegistration = 0;

    // if one step registration and need to show complete sign up popup,
    // show the pop immediately.
    if (! g_is_guest && g_needCompleteSignup && g_mc_useOneStepRegistration) {
        displayOverlay('complete-signup-dialog');
    }
});

$('#mc_complete_reg_iframe').on('load', function() {
    $('#complete-signup-dialog .pay_signup_time')
        .html("User load time: " + ((Date.now() - g_pay_load_start_time) / 1000) + " seconds");
});

</script>
<style>
   #closed-accessCode-dialog{transform: translateZ(0); min-height:310px;}

   #member-signup-dialog .border-box {border:5px solid rgba(0,0,0,0); margin: 60px auto 60px; background: rgba(0,0,0,0.5); width:420px}
   #member-signup-dialog .no-bg .border-box {border:5px solid #000; background: none;}

   #member-signup-dialog.mobile .border-box {border:1px solid rgba(0,0,0,0.5); margin:0; background: rgba(0, 0, 0, 0.5); width:100%; height:100%;}
   #member-signup-dialog.mobile .no-bg .border-box {border:1px solid rgba(0,0,0,0); margin:0; background: none;}

   #member-signup-dialog.mobile .rightVertical { min-height: 350px;} /* VP-11747 */
   #member-signup-dialog.forTermsAndConditionsMobile .rightVertical{min-height:auto;} /* VP-18606 */

   #member-signup-dialog .rightVertical .header { text-align: center; margin: 30px 0 10px;}
   .rtl #member-signup-dialog .rightVertical .header { text-align: center; margin: 10px auto;}

   #back-to-social-arrow img {width:22px; vertical-align: middle; cursor: pointer;}
   #back-to-email-arrow img {width:22px; vertical-align: middle; cursor: pointer;}
   /* #login_error {height:17px;} */

   .formBlock { width: 100%; float: left; border: 0; display:none;}
   .formBlock ul input:not([type="submit"]):not([type="checkbox"]) { width: 100%; box-sizing: border-box; height:44px; margin: 5px 0;}

   .social-title p {color:#888; margin: 0;}
   .social_icons {margin:3px 0 0 0; width:100%;}
   .social_icons div.box {width:278px; padding:4px 0; background-color: #fff; margin-left: 2px;}
   .social_icons div h2 {color:#fff; text-align:center; float:left; margin:0 auto;width:212px; line-height:20px;}
   /* width was 240px. Changed to make more 'center' (VP-16103)*/

   .social_icons div a img {float:left; display:block; width:28px; margin-left: 4px;}
   .social_icons div a img.google-icon {float:left; display:block; width:21px; margin-left: 8px; margin-top: 3.5px; margin-bottom: 3.5px;}

   #completeSignup-container .formBlock {display: block; margin-bottom: 20px; max-width: none;}
   #completeSignup-container .formBlock ul {width: 100%;}

   .passwordInformational{display:none;}

   #member-signup-dialog #signInHeader {margin:14px 80px 6px;}
   #member-signup-dialog.mobile #signInHeader {margin:14px 20px 6px;}

   #member-signup-dialog #signInHeader_sub  {line-height:18px; margin:0 80px 4px;}
   #member-signup-dialog.mobile #signInHeader_sub {line-height:18px; margin:0 20px 4px;}

   #signInHeader_sub p {font-size:24px; line-height:130%;}
   #signInHeader_sub p.big {font-size:36px;}

   #member-signup-dialog.mobile #signInHeader_sub p {font-size:20px;}
   #member-signup-dialog.mobile #signInHeader_sub p.big {font-size:25px;}

   #vendor-signup-dialog.mobile .header {text-align:center;}

           #member-signup-dialog .ifonly_pop{background:#141413;}
        #member-signup-dialog .ifonly_pop{width:550px; max-width:calc(100% - 20px);}
        #member-signup-dialog .border-box.mc-border-box    { background: transparent;}
        #member-signup-dialog .border-box.terms-border-box { background: transparent;}
        #member-signup-dialog .border-box {width: 450px; margin:30px auto 30px auto; }
        #member-signup-dialog .border-box .sg-btn-size-m { width: 100%; max-width:none; min-width:0;}
        .mobile#member-signup-dialog .border-box .sg-btn-size-m {width:95%; }

        #member-signup-dialog .social_icons div h2 { width: calc(100% - 60px);}
    
    
   #member-signup-dialog .mCSB_container ,#complete-signup-dialog .mCSB_container  {margin-right:10px;}

   #member-signup-dialog.mobile .terms.bottom {padding: 0 5px 8px 5px;}

   #member-signup-dialog.mobile .ifonly_pop {
        max-height: 90%;
        top: 50%;
   }
</style>

<script type="text/javascript">
    var oneStepSignUp         = true;
    var g_welcomeString       = "Connect to Priceless";
    var g_login_welcomeString = "Login to Priceless";
    var g_accesscodeTitle     = "";

    $(document).ready(function(){

        $(".swapper").click(function(){
            resetError("#signup_error");
            resetError("#login_error");
        });

        $("#social_emailOptedIn_row").change(function(){
            if($("#social_emailOptedIn_row").prop("checked")){
                $("#User_emailOptedIn").val(1);
                $("#LoginForm_emailOptedIn").val(1);
            } else{
                $("#User_emailOptedIn").val(0);
                $("#LoginForm_emailOptedIn").val(0);
            }
        });

        $("#back-to-social-arrow").click(function(){
            $(".susi-options > li").show();
            $(".susi-options > li.email-susi-form").hide();
            $("#back-to-social-arrow").hide();
            return false;
        });

        $(".email-signupButton").click(function() {
            $(".susi-options > li").hide();
            $(".susi-options > li.email-susi-form").show();
            $("#back-to-social-arrow").show();
            $.post('/website/logPageView',{pageId:1016},function(data){},'json');
            return false;
        });

        $("#complete-signup-button").click(function() {
            adobeSatelliteTracking('Forms', {ctaName: 'Registration Initiated  Add Card'});
            displayOverlay('complete-signup-dialog');
        });

        $("#complete-signup-form input").keypress(function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code === 13) {
                $("#complete-signup-form").submit();
            }
        });
        $("#streamlineSignupForm input").keypress(function(e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code === 13) {
                // functionality in _streamlined_signup_form.php
                // $("#streamlineSignupForm").submit();
            }
        });

        $("#complete-signup-submit").click(function() {
            $("#complete-signup-form").submit();
        });

        $("#complete-signup-form").submit(function(e) {
            if ($("#complete-signup-submit").hasClass('disabled')) {
                return false;
            }
            $("#complete-signup-error").hide();
            $("#complete-signup-form").css('cursor','wait');
            $("#complete-signup-submit").addClass('disabled');

            $.post( '/website/completeSignUp',
                $("#complete-signup-form").serialize(),
                function (data){
                    $('#complete-signup-form').find('.error_div').hide();

                    if (data.result === 1) {
                        var redirectUrl = $("#redirectURL").val().trim();
                        if ((redirectUrl === '' || redirectUrl === '#') && ! empty(data.redirectUrl)) {
                            redirectUrl = data.redirectUrl;
                        }

                        //$("#complete-signup-dialog").overlay().close();
                        ga('send', 'event', 'Member Activity', 'Member Activity - Complete Sign Up for emailAddress Users');

                        adobeSatelliteTracking('Forms', {ctaName: 'Registration completed  Add Card'});

                        if ($("#auction-submit-btn").length > 0 && $("#CheckoutForm_bid").length > 0 && $("#CheckoutForm_bid").val() !== '') {
                            // in Auction page
                            g_needCompleteSignup = false;
                            hideOverlay("complete-signup-dialog");
                            $("#auction-submit-btn").click();
                        }
                        else if (redirectUrl !== '' && redirectUrl !== '#') {
                            setTimeout(function() { location.href = redirectUrl; }, g_signup_timer);
                        } else {
                            setTimeout(function() { location.reload(); }, g_signup_timer);
                        }
                    }
                    else {
                        // display master card complete registration form errors
                        if(data.show_mc_error){
                             for(var i=0; i<data.errors.length; i++){
                                var error = data.errors[i];
                                var selector = error.selector;
                                var msg = error.msg;

                                var error_classes = 'error_div sg-c-error sg-f-bdy-s';

                                var $input = $('#complete-signup-form').find(selector);
                                if ($input.length > 0) {
                                    var $error = $input.siblings('.error_div');
                                    if ($error.length < 1) {
                                        $error = $('<div class="' +error_classes+ '"></div>');
                                        $input.parent().append($error);
                                    }
                                    $error.html(msg).show();
                                }
                            }
                        }
                        else{
                            displayError("#complete-signup-error",data.msg);
                        }

                        $("#complete-signup-submit").removeClass('disabled');
                        $("#complete-signup-form").css('cursor','auto');

                    }
                },'json');

            return false;
        });
        
        
    });

    function controlSignInSignUpFormDisplay(type) {
        let from = $("#signUp-dialog-called-from").val();
        
        //Hide error messages
        $(".error-msg").hide();

        //$(".signup-banner").hide();

        if (type === "login") {
            $("#signInHeader").html(g_login_welcomeString);
            $(".susi-options > li").show();
            $(".susi-options .email-susi-form").show();

            $(".email-signupButton").closest('li').hide();
            $("#back-to-social-arrow").hide();
            $("#back-to-email-arrow").hide();
            $(".swapper.to-login").hide();

            $("#member-signup-dialog #login-container").show();
            $("#member-signup-dialog .close,  #member-signup-dialog  .ifonly_pop_close_img ").focus();
            $("#member-signup-dialog #streamlineSignup-container").hide();
            $("#member-signup-dialog #signup-container").hide();

            $(".social_icons").each(function() {
                if ($(this).attr("data-name")) {
                    $(this).find("h2").html($(this).attr("login-text"));
                }
            });

            $("#signInHeader_sub").hide(); // g_accesscodeTitle
            $("#registrationTerms").hide();

            $(".loginWithFacebookButton").attr("type", "login");
            $(".google-signinButton").attr("type", "login");
            $(".email-signupButton").attr("type", "login");

            $(".google-signinButton").attr("fbLogin", "1");
            $(".loginWithFacebookButton").attr("fbLogin", "1");
            $.post('/website/logPageView',{pageId:1014},function(data){},'json');
            
            adobeSatelliteTracking('CTA Click', {ctaName: 'Sign In Initiated', ctaType: 'Regular', ctaLocation: from});
        }
        else {
            $("#signInHeader").html(g_welcomeString); // g_accesscodeTitle
            $(".social_icons").each(function() {
                if ($(this).attr("data-name")) {
                    $(this).find("h2").html($(this).attr("signup-text"));
                }
            });

            if (type === "streamline"){
                $("#member-signup-dialog #streamlineSignup-container").show();
                $("#member-signup-dialog .close, #member-signup-dialog  .ifonly_pop_close_img").focus();
                $("#member-signup-dialog #login-container").hide();
                $("#member-signup-dialog #signup-container").hide();
            } else {
                $("#member-signup-dialog #signup-container").show();
                $("#member-signup-dialog #login-container").hide();
                $("#member-signup-dialog #streamlineSignup-container").hide();
            }
            if (! oneStepSignUp) {
                $(".susi-options > li").show();
                $(".susi-options > li.email-susi-form").hide();
            }

            $("#signInHeader_sub").show(); // g_accesscodeTitle
            $("#registrationTerms").show();
            $(".swapper.to-login").show();

            $(".loginWithFacebookButton").attr("type", "signup");
            $(".google-signinButton").attr("type", "signup");
            $(".email-signupButton").attr("type", "signup");

            $(".google-signinButton").attr("fbLogin", "0");
            $(".loginWithFacebookButton").attr("fbLogin", "0");
            $.post('/website/logPageView',{pageId:1022},function(data){},'json');
            
            adobeSatelliteTracking('CTA Click', {ctaName: 'Sign up Initiated', ctaType: 'Regular', ctaLocation: from});
        }

        $("#member-signup-dialog #login-container-terms").show();
    }

    function renderpopup(type) {

        if ($("#member-signup-dialog .rightVertical").css('background-image') === 'none') {
            $("#member-signup-dialog #login-container .swapper a").css('color', '#777');
        } else {
            $("#member-signup-dialog #login-container .swapper a").css('color', '#fff');
        }

        loadBufferedPopup('member-signup-dialog');

        controlSignInSignUpFormDisplay(type);
        displayOverlay('member-signup-dialog', type);
        // makeAccessibleDropdown("#signup_user_country", 'Select Country');
        return false;
    }


    function signupDialog(lvl, premiumLvl, $obj) {
        //debugger;

        var login   = false;
        var $button = undefined;
        if (lvl === undefined) {
            lvl = 1;
        }
        if (premiumLvl === undefined) {
            premiumLvl = false;
        }
        if ($obj !== undefined) {
            if ('login' in $obj) {
                login = true;
            }

            if ('button' in $obj) {
                $button = $obj['button'];
            }
        }

        if ($obj && $obj.mergeCart) {
            $('#login-container').attr('data-mergeCart', 1);
        }
        else {
            $('#login-container').removeAttr('data-mergeCart');
        }

        

        clearTimeout(autoPopupTimer);


        var showLoginOnly = !1;

        if (g_is_guest || g_tempUser || g_guestOrderUser) {
            if(($button !== undefined && $button.hasClass("js-login")) || login || showLoginOnly){
                hide_ifonly_overlay('.signup_redesign_overlay');
                renderpopup("login");
                return false;
            }

            if(! login) {
                            }

            if (g_stream_lined_sign_up){
                validateSessionWithCallback(function(){
                    adobeSatelliteTracking('new_sign_up', {button_name:'Sign Up - Initiate Form Action', pageURL:window.location.href});
                    show_ifonly_overlay('.signup_redesign_overlay');
                    hide_ifonly_overlay('.member_signup_overlay');
                    signup_syncCCIframeSize();
                    //renderpopup("streamline");
                })
                
            } else if (g_sessionAccessCode) {
                if (g_sessionAccessCode === 'AMEXWOW' && $button !== undefined ) {
                    if ($button.hasClass('add-to-bag') || $button.attr('id') === 'buynow-button' ) {
                        if ($button.attr('price') !== undefined && parseFloat($button.attr('price')) <= 500) {
                            $("#signUp-dialog-called-from").val('add-under-500');
                        }
                    }
                }
                renderpopup();
            } else if (lvl > 2) {
                $("#signUp-dialog-called-from").val("lockedLink");
                renderpopup();
            } else {
                renderpopup();
            }
            return false;
        } else {
            if (($button !== undefined && $button.hasClass('js-partialLogin')) || login || showLoginOnly) {
                if ($("#signUp-dialog-called-from").val() === '') {
                    $("#signUp-dialog-called-from").val("partialLogin");
                }
                renderpopup("login");
                return false;
            } else if (g_user_lvl < lvl || premiumLvl) {
                if (g_user_lvl < 2) {       //already a member?
                    // g_user_lvl < 2 means g_user_lvl = 1, UserEx::GUEST
                    // this case should be covered in g_is_guest || g_tempUser || g_guestOrderUser
                    // $("#update-member-accessCode-dialog").overlay().load();
                    return false;
                }

                // displayOverlay not showing it at all;
                //else {
                //    displayOverlay('closed-accessCode-dialog');
                //    return false;
                //}
            } else {
                return false;
            }
        }
        return true;
    }
</script>
    </div>
        <div id="exposeMask" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; display: none; opacity: 0.5; z-index: 9998; background-color: rgb(0, 0, 0);"></div>
    <!--Error dialog-->
<div id="error-dialog" class="overlay error">
    <div class="overlayContent" >
        <div class="dialog_header"></div>
        <div class="dialog_body">
            <div class="dialog_content" style="text-align: center">
                <p class="message">There is an issue with your connection. Please try again</p>
            </div>
        </div>
        <div class="dialog_footer" >
            <div class="footer_content" >
<!--                <div class="btn">
                    <div>
                        <a href="#" id="error-dialog" class="close-overlay" closePopupId="error-dialog">
                            <div class="btn-m">OK</div>
                        </a>
                    </div>
                </div>-->
                <div  class="close-overlay btn-m primaryButton button " id="error-dialog" closePopupId="error-dialog" tabIndex="0" role="button"><span class="title-container"><span class="title">OK</span></span></div>            </div>
        </div>
    </div>
</div>

<div id="success-dialog" class="overlay error">
    <div class="overlayContent" >
        <div class="dialog_header">Thank you</div>
        <div class="dialog_body">
            <div class="dialog_content" style="text-align: center">
                <p class="message"></p>
            </div>
        </div>
        <div class="dialog_footer" >
            <div class="footer_content" >
<!--                <div class="btn">
                    <div>
                        <a href="#" id="error-dialog" class="close-overlay" closePopupId="success-dialog">
                            <div class="btn-m">OK</div>
                        </a>
                    </div>
                </div>-->
                <div  class="close-overlay btn-m primaryButton button " id="error-dialog" closePopupId="success-dialog" tabIndex="0" role="button"><span class="title-container"><span class="title">OK</span></span></div>            </div>
        </div>
    </div>
</div>

<div id="alert-dialog" class="overlay error" style="z-index: 10002;" >
    <div class="overlayContent" >
        <div class="dialog_header" style="text-align: center; ">
            <p class="header-text" style="text-align: center;"></p>
        </div>
        <div class="dialog_body">
            <div class="dialog_content">
                <p class="message sg-f-bdy" style="text-align: center; padding: 0px 15px;" ></p>
            </div>
        </div>
        <div class="dialog_footer">
            <div class="footer_content" >
<!--                <div class="btn">
                    <div>
                        <a href="javascript:;"  class="close-overlay" closePopupId="alert-dialog">
                            <div class="btn-m">OK</div>
                        </a>
                    </div>
                </div>-->
                <div  id="alert-dialog-close" class="close-overlay btn-m primaryButton button " closePopupId="alert-dialog" style="" tabIndex="0" role="button"><span class="title-container"><span class="title">OK</span></span></div>            </div>
        </div>
    </div>
</div>

<div id="custom-general-dialog" class="overlayBlack overlay wide" style="overflow-y: auto; overflow-x: hidden; height: 100%;">
    <div class="body" style='margin: 20px 0;'>
        <div class="content" style="padding: 0 20px;">
            <p class='message' style="text-align:center;"></p>

        </div>
    </div>
    <div class='footer' style='text-align: center; margin-bottom: 30px;'>
        <div  class="close-overlay primaryButton button " closePopupId="custom-general-dialog" tabIndex="0" role="button"><span class="title-container"><span class="title">Close</span></span></div>    </div>
</div>

<script type="text/javascript">
//$(window).load(function(){
$(window).on('load', function(){
    $("#error-dialog").overlay({
        top: getPopupTopToCenter("error-dialog"), left: getPopupLeftToCenter("error-dialog"), fixed: false, closeOnClick: false, load: false,
        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
    });
    $("#alert-dialog").overlay({
        top: getPopupTopToCenter("alert-dialog"), left: getPopupLeftToCenter("alert-dialog"), fixed: false, closeOnClick: true, load: false,
        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 },
        onBeforeLoad:function(){
            $("#alert-dialog").css('left', getPopupLeftToCenter("alert-dialog"));
        }
    });
    $("#success-dialog").overlay({
        top: getPopupTopToCenter("success-dialog"), left: getPopupLeftToCenter("success-dialog"), fixed: false, closeOnClick: false, load: false,
        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
    });

//    $("#error-dialog").overlay().load();
});
</script>
<style>
    .chrome_exempt_overlay .ifonly_pop {width:500px; max-width: 100%; z-index:10002; padding: 40px 0 20px 0;}
</style>




<div     
    class="chrome_exempt_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="chrome_exempt_overlay" 
    data-id="chrome_exempt_overlay"   
>
    
    
    <div   class="chrome_exempt_pop  ifonly_pop mobile " 
         style="min-height: auto;" tabindex="0" 
         role="dialog" aria-label="chrome_exempt"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="chrome_exempt_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div id=&quot;susi&quot; class=&quot;row&quot;&gt;
        &lt;div class=&quot;center&quot; style=&quot;padding:30px; text-align: center;&quot;&gt;
            &lt;div style=&quot;padding: 0 10px;&quot;&gt;
                &lt;div class=&quot;header&quot; style=&#039;text-align:center; padding-top:30px;&#039;&gt;
                                        &lt;img style=&#039;max-height: 75px; max-width: 100%&#039; src=&#039;https://d5xydlzdo08s0.cloudfront.net/media/frames/159/mc_pc_popups_blk_460x66_1x__L.png&#039; alt=&quot;header&quot;&gt;
                &lt;/div&gt;
                &lt;div style=&quot;padding-bottom: 30px;&quot;&gt;
                    &lt;div class=&quot;row&quot;&gt;
                        &lt;p class=&quot;title&quot;&gt;Unsupported Browser&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;row&quot;&gt;
                        &lt;p&gt;Google Chrome for iOS does not support this feature.&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;row&quot;&gt;
                        &lt;p style=&quot;margin-top:0;margin-bottom: 10px;&quot;&gt;Please use Safari and try again or &lt;span style=&quot;text-decoration:underline;&quot; id=&quot;buttonByClickSource&quot;&gt;&lt;/span&gt;&lt;/p&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;row&quot; style=&quot;text-align:center&quot;&gt;
                        &lt;div style=&quot;margin:0 auto;&quot;&gt;
                            &lt;div  onclick=&quot;hide_ifonly_overlay(&amp;#039;.chrome_exempt_overlay&amp;#039;)&quot; tabIndex=&quot;0&quot; class=&quot;primaryButton button &quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Okay&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        add_ifonly_overlay_click_handlers('.chrome_exempt_overlay');
    });
</script><style>
    #address-scheduling-dialog-googlemaps {max-width:100%; max-height: 100%; min-height: 500px; overflow-y: auto; overflow-x: hidden;}
    #address-scheduling-dialog-googlemaps.mobile{width: 100%; max-height: 100%; overflow-y: auto;}
    #address-scheduling-dialog-googlemaps.mobile div{ max-width: 100%;}
    #address-scheduling-dialog-googlemaps.overlay .dialog_body{margin: 0px;}
    .overlay .dialog_content .address-form{
        padding: 20px;
    }
    .google-map-address-input:focus {
        border-color: #4d90fe;
    }
    .google-map-address-input::-ms-clear { display: none; }

    .pac-container {
        background-color: #FFF;
        z-index: 10001;
    }
    .pac-item{
       z-index: 10000;
    }


    .address_scheduling_googlemaps_overlay  .ifonly_pop {
        width:500px; 
        padding: 20px; 
    }
    .custom_address_overlay  .ifonly_pop {
        width:500px; 
        margin-top: 70px; 
        overflow:auto;
        max-height: 100%;
        position: fixed;
    }
    .custom_address_overlay .edit-label {display:inline-block; padding: 8px 0px 5px 0px;}
    
    .mobile.address_suggestion_pop.ifonly_pop {min-height:auto;} 
    .address_suggestion_pop.ifonly_pop {width:auto; min-height:auto;}
</style>




<div  id="address-scheduling-dialog-googlemaps"   
    class="address_scheduling_googlemaps_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="address_scheduling_googlemaps_overlay" 
    data-id="address_scheduling_googlemaps_overlay"   
>
    
    
    <div   class="address_scheduling_googlemaps_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="address scheduling"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="address_scheduling_googlemaps_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div class=&quot;overlayContent&quot; style=&quot;margin-top: 10px;&quot;&gt;
        &lt;div class=&quot;dialog_body&quot;&gt;
            &lt;div class=&quot;dialog_content&quot;&gt;
                &lt;div class=&quot;address-form&quot;&gt;
                    &lt;input type=&quot;hidden&quot; class=&quot;address-productId&quot; name=&quot;productId&quot; /&gt;
                    &lt;input type=&quot;hidden&quot; class=&quot;address-number&quot;   name=&quot;number&quot;  /&gt;
                    &lt;input type=&quot;hidden&quot; class=&quot;address-oii&quot;   /&gt;
                    &lt;p class=&quot;js-addr-req-header&quot; style=&quot;text-align: left;&quot;&gt;
                        Enter the address where you would like this experience to happen                    &lt;/p&gt;
                    &lt;span class=&quot;js-addr-change-header fo-18-n-g hidden&quot; style=&quot;text-align: center; margin-bottom: 20px; &quot;&gt;
                        Propose Alternative Address                    &lt;/span&gt;
                    &lt;p id=&quot;invalid-address&quot; class=&quot;error-general&quot; style=&quot;display:none;&quot;&gt;We are unable to verify your address.  Please check it and try again.&lt;/p&gt;
                    &lt;div class=&quot;address-wrapper&quot;&gt;
                        &lt;div class=&quot;map-row&quot; style=&quot;height: 250px; width: auto; margin: 20px auto; border: 1px solid #e2e2e2; position: relative;&quot;&gt;
    &lt;div class=&quot;radiusBox&quot; style=&#039;display:none;&#039;&gt;&lt;span&gt;radius: &lt;/span&gt;&lt;span class=&quot;radiusValue&quot;&gt;&lt;/span&gt; miles&lt;/div&gt;
    &lt;div class=&quot;google-map-address-con&quot; style=&quot;text-align:center; &quot;&gt;
        &lt;input class=&quot;js-google-map-address-input google-map-address-input&quot; id=&quot;pac-input-map-canvas6&quot; placeholder=&quot;Enter an address&quot; type=&quot;text&quot; value=&quot;&quot; name=&quot;&quot; /&gt;    &lt;/div&gt;
    &lt;div id=&quot;map-canvas6&quot; class=&#039;map-canvas&#039; address=&#039;&#039; radius=&#039;0&#039;  style=&quot;height: 100%; width: 100%;&quot; &gt;

    &lt;/div&gt;
    &lt;div class=&quot;clearAll&quot;&gt;&lt;/div&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                $(document).ready(function(){
                    var forceInitiateMap = false;
                    if ($(&quot;#map-canvas6&quot;).is(&quot;:visible&quot;) || forceInitiateMap) {
                        g_google_user_map_params = {&quot;showAutocomplete&quot;:true,&quot;markerMaxNum&quot;:1,&quot;addMarker&quot;:true,&quot;radius&quot;:0};
                        initiateCustomMap(&quot;map-canvas6&quot;, &quot;&quot;);
                    }
                });
            &lt;/script&gt;
    &lt;/div&gt;
&lt;div style=&quot;clear: both;&quot;&gt;&lt;/div&gt;                        &lt;div class=&quot;clearAll&quot;&gt;&lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;address-form-submit&quot;&gt;
                        &lt;div class=&quot;js-address-save-btns&quot;&gt;
                            &lt;div  class=&quot;allowAllUsers address-submit address-submit-wrapper primaryButton button &quot; style=&quot; display: inline-block; vertical-align: middle; width:100%; margin-bottom: 10px;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Save&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                            &lt;div  class=&quot;close-overlay secondaryButton button &quot; onclick=&quot;closeOverlay($(this));&quot; style=&quot;width: 100%; display: inline-block; vertical-align: middle;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Cancel&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;clearAll&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>









<div  id="js-custom-address-popup"   
    class="custom_address_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="custom_address_overlay" 
    data-id="custom_address_overlay"   
>
    
    
    <div   class="custom_address_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="js-custom-address-popup"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="custom_address_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;padding: 15px 15px 30px 15px; margin-top: 30px;&quot;&gt;
        &lt;p&gt;
            Could not find your address.  Please enter the address again and make sure that it is correct.        &lt;/p&gt;
        &lt;p class=&quot;js-original-addr&quot; style=&quot;margin: 20px 0;&quot;&gt;
            Original address:
            &lt;span&gt;&lt;/span&gt;
        &lt;/p&gt;
                &lt;div class=&quot;js-err-con&quot;&gt;
            &lt;label class=&#039;edit-label&#039; for=&quot;User_streetAddress&quot;&gt;
                Street Address *            &lt;/label&gt;
            &lt;input class=&quot;address1 js-req&quot; fieldname=&quot;address&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; id=&quot;User_streetAddress&quot; aria-required=&quot;true&quot; required=&quot;required&quot; type=&quot;text&quot; value=&quot;&quot; name=&quot;custom-address1&quot; /&gt;        &lt;/div&gt;
        &lt;div&gt;
            &lt;label class=&#039;edit-label&#039; for=&quot;User_aptNum&quot;&gt;
                Apt/Ste/Bldg (i.e. apt 210)            &lt;/label&gt;
        &lt;/div&gt;
        &lt;input class=&quot;address2 notForValidation&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; id=&quot;User_aptNum&quot; type=&quot;text&quot; value=&quot;&quot; name=&quot;custom-address2&quot; /&gt;        &lt;div class=&quot;js-err-con&quot;&gt;
            &lt;label class=&#039;edit-label&#039; for=&quot;User_city&quot;&gt;
                City *            &lt;/label&gt;
            &lt;input class=&quot;city js-req&quot; fieldname=&quot;City&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; id=&quot;User_city&quot; aria-required=&quot;true&quot; required=&quot;required&quot; type=&quot;text&quot; value=&quot;&quot; name=&quot;custom-city&quot; /&gt;        &lt;/div&gt;
        &lt;div class=&#039;state-box&#039;&gt;
            &lt;p class=&#039;edit-label&#039;&gt;
                State/Province            &lt;/p&gt;
            &lt;select class=&quot;state js-state-dropdown&quot; aria-label=&quot;State / Province&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; js-default=&quot;CA&quot; name=&quot;custom-state&quot;&gt;
&lt;option value=&quot;AK&quot;&gt;AK&lt;/option&gt;
&lt;option value=&quot;AL&quot;&gt;AL&lt;/option&gt;
&lt;option value=&quot;AR&quot;&gt;AR&lt;/option&gt;
&lt;option value=&quot;AZ&quot;&gt;AZ&lt;/option&gt;
&lt;option value=&quot;CA&quot; selected=&quot;selected&quot;&gt;CA&lt;/option&gt;
&lt;option value=&quot;CO&quot;&gt;CO&lt;/option&gt;
&lt;option value=&quot;CT&quot;&gt;CT&lt;/option&gt;
&lt;option value=&quot;DC&quot;&gt;DC&lt;/option&gt;
&lt;option value=&quot;DE&quot;&gt;DE&lt;/option&gt;
&lt;option value=&quot;FL&quot;&gt;FL&lt;/option&gt;
&lt;option value=&quot;GA&quot;&gt;GA&lt;/option&gt;
&lt;option value=&quot;HI&quot;&gt;HI&lt;/option&gt;
&lt;option value=&quot;IA&quot;&gt;IA&lt;/option&gt;
&lt;option value=&quot;ID&quot;&gt;ID&lt;/option&gt;
&lt;option value=&quot;IL&quot;&gt;IL&lt;/option&gt;
&lt;option value=&quot;IN&quot;&gt;IN&lt;/option&gt;
&lt;option value=&quot;KS&quot;&gt;KS&lt;/option&gt;
&lt;option value=&quot;KY&quot;&gt;KY&lt;/option&gt;
&lt;option value=&quot;LA&quot;&gt;LA&lt;/option&gt;
&lt;option value=&quot;MA&quot;&gt;MA&lt;/option&gt;
&lt;option value=&quot;MD&quot;&gt;MD&lt;/option&gt;
&lt;option value=&quot;ME&quot;&gt;ME&lt;/option&gt;
&lt;option value=&quot;MI&quot;&gt;MI&lt;/option&gt;
&lt;option value=&quot;MN&quot;&gt;MN&lt;/option&gt;
&lt;option value=&quot;MO&quot;&gt;MO&lt;/option&gt;
&lt;option value=&quot;MS&quot;&gt;MS&lt;/option&gt;
&lt;option value=&quot;MT&quot;&gt;MT&lt;/option&gt;
&lt;option value=&quot;NC&quot;&gt;NC&lt;/option&gt;
&lt;option value=&quot;ND&quot;&gt;ND&lt;/option&gt;
&lt;option value=&quot;NE&quot;&gt;NE&lt;/option&gt;
&lt;option value=&quot;NH&quot;&gt;NH&lt;/option&gt;
&lt;option value=&quot;NJ&quot;&gt;NJ&lt;/option&gt;
&lt;option value=&quot;NM&quot;&gt;NM&lt;/option&gt;
&lt;option value=&quot;NV&quot;&gt;NV&lt;/option&gt;
&lt;option value=&quot;NY&quot;&gt;NY&lt;/option&gt;
&lt;option value=&quot;OH&quot;&gt;OH&lt;/option&gt;
&lt;option value=&quot;OK&quot;&gt;OK&lt;/option&gt;
&lt;option value=&quot;OR&quot;&gt;OR&lt;/option&gt;
&lt;option value=&quot;PA&quot;&gt;PA&lt;/option&gt;
&lt;option value=&quot;PR&quot;&gt;PR&lt;/option&gt;
&lt;option value=&quot;RI&quot;&gt;RI&lt;/option&gt;
&lt;option value=&quot;SC&quot;&gt;SC&lt;/option&gt;
&lt;option value=&quot;SD&quot;&gt;SD&lt;/option&gt;
&lt;option value=&quot;TN&quot;&gt;TN&lt;/option&gt;
&lt;option value=&quot;TX&quot;&gt;TX&lt;/option&gt;
&lt;option value=&quot;UT&quot;&gt;UT&lt;/option&gt;
&lt;option value=&quot;VA&quot;&gt;VA&lt;/option&gt;
&lt;option value=&quot;VT&quot;&gt;VT&lt;/option&gt;
&lt;option value=&quot;WA&quot;&gt;WA&lt;/option&gt;
&lt;option value=&quot;WI&quot;&gt;WI&lt;/option&gt;
&lt;option value=&quot;WV&quot;&gt;WV&lt;/option&gt;
&lt;option value=&quot;WY&quot;&gt;WY&lt;/option&gt;
&lt;/select&gt;&lt;input class=&quot;state js-state-input&quot; style=&quot;display: none;height: 44px; width: 100%; box-sizing: border-box;&quot; disabled=&quot;disabled&quot; id=&quot;custom-state&quot; type=&quot;text&quot; value=&quot;CA&quot; name=&quot;custom-state&quot; /&gt;        &lt;/div&gt;
        &lt;div class=&#039;zip-box js-err-con&#039;&gt;
            &lt;label class=&#039;edit-label&#039; for=&quot;User_zipcode&quot;&gt;
                Zip Code *            &lt;/label&gt;
            &lt;input class=&quot;zipCode js-req&quot; fieldname=&quot;zip code&quot; maxlength=&quot;10&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; id=&quot;User_zipcode&quot; aria-required=&quot;true&quot; required=&quot;required&quot; type=&quot;text&quot; value=&quot;&quot; name=&quot;custom-zip&quot; /&gt;        &lt;/div&gt;
        &lt;div class=&#039;country-box&#039;&gt;
            &lt;p class=&#039;edit-label&#039;&gt;
                Country/Region            &lt;/p&gt;
            &lt;select class=&quot;js-country-dropdown&quot; aria-label=&quot;Country/Region&quot; style=&quot;height: 44px; width: 100%; box-sizing: border-box;&quot; name=&quot;custom-countryShortCode&quot;&gt;
&lt;option value=&quot;AF&quot;&gt;Afghanistan&lt;/option&gt;
&lt;option value=&quot;DZ&quot;&gt;Algeria&lt;/option&gt;
&lt;option value=&quot;AO&quot;&gt;Angola&lt;/option&gt;
&lt;option value=&quot;AR&quot;&gt;Argentina&lt;/option&gt;
&lt;option value=&quot;AW&quot;&gt;Aruba&lt;/option&gt;
&lt;option value=&quot;AU&quot;&gt;Australia&lt;/option&gt;
&lt;option value=&quot;AT&quot;&gt;Austria&lt;/option&gt;
&lt;option value=&quot;AZ&quot;&gt;Azerbaijan&lt;/option&gt;
&lt;option value=&quot;BS&quot;&gt;Bahamas&lt;/option&gt;
&lt;option value=&quot;BH&quot;&gt;Bahrain&lt;/option&gt;
&lt;option value=&quot;BE&quot;&gt;Belgium&lt;/option&gt;
&lt;option value=&quot;BJ&quot;&gt;Benin&lt;/option&gt;
&lt;option value=&quot;BO&quot;&gt;Bolivia&lt;/option&gt;
&lt;option value=&quot;BA&quot;&gt;Bosnia and Herzegovina&lt;/option&gt;
&lt;option value=&quot;BW&quot;&gt;Botswana&lt;/option&gt;
&lt;option value=&quot;BR&quot;&gt;Brazil&lt;/option&gt;
&lt;option value=&quot;BG&quot;&gt;Bulgaria&lt;/option&gt;
&lt;option value=&quot;BF&quot;&gt;Burkina Faso&lt;/option&gt;
&lt;option value=&quot;BI&quot;&gt;Burundi&lt;/option&gt;
&lt;option value=&quot;CM&quot;&gt;Cameroon&lt;/option&gt;
&lt;option value=&quot;CA&quot;&gt;Canada&lt;/option&gt;
&lt;option value=&quot;CV&quot;&gt;Cape Verde&lt;/option&gt;
&lt;option value=&quot;KY&quot;&gt;Cayman Islands&lt;/option&gt;
&lt;option value=&quot;CF&quot;&gt;Central African Republic&lt;/option&gt;
&lt;option value=&quot;TD&quot;&gt;Chad&lt;/option&gt;
&lt;option value=&quot;CL&quot;&gt;Chile&lt;/option&gt;
&lt;option value=&quot;CN&quot;&gt;China&lt;/option&gt;
&lt;option value=&quot;CO&quot;&gt;Colombia&lt;/option&gt;
&lt;option value=&quot;KM&quot;&gt;Comoros&lt;/option&gt;
&lt;option value=&quot;CG&quot;&gt;Congo&lt;/option&gt;
&lt;option value=&quot;CR&quot;&gt;Costa Rica&lt;/option&gt;
&lt;option value=&quot;CI&quot;&gt;Cote D&amp;#039;Ivoire (Ivory Coast)&lt;/option&gt;
&lt;option value=&quot;HR&quot;&gt;Croatia&lt;/option&gt;
&lt;option value=&quot;CY&quot;&gt;Cyprus&lt;/option&gt;
&lt;option value=&quot;CZ&quot;&gt;Czech Republic&lt;/option&gt;
&lt;option value=&quot;CD&quot;&gt;Democratic Republic of the Congo&lt;/option&gt;
&lt;option value=&quot;DK&quot;&gt;Denmark&lt;/option&gt;
&lt;option value=&quot;DJ&quot;&gt;Djibouti&lt;/option&gt;
&lt;option value=&quot;DO&quot;&gt;Dominican Republic&lt;/option&gt;
&lt;option value=&quot;EC&quot;&gt;Ecuador&lt;/option&gt;
&lt;option value=&quot;EG&quot;&gt;Egypt&lt;/option&gt;
&lt;option value=&quot;SV&quot;&gt;El Salvador&lt;/option&gt;
&lt;option value=&quot;GQ&quot;&gt;Equatorial Guinea&lt;/option&gt;
&lt;option value=&quot;EE&quot;&gt;Estonia&lt;/option&gt;
&lt;option value=&quot;ET&quot;&gt;Ethiopia&lt;/option&gt;
&lt;option value=&quot;FJ&quot;&gt;Fiji&lt;/option&gt;
&lt;option value=&quot;FI&quot;&gt;Finland&lt;/option&gt;
&lt;option value=&quot;FR&quot;&gt;France&lt;/option&gt;
&lt;option value=&quot;GA&quot;&gt;Gabon&lt;/option&gt;
&lt;option value=&quot;GM&quot;&gt;Gambia&lt;/option&gt;
&lt;option value=&quot;DE&quot;&gt;Germany&lt;/option&gt;
&lt;option value=&quot;GH&quot;&gt;Ghana&lt;/option&gt;
&lt;option value=&quot;GR&quot;&gt;Greece&lt;/option&gt;
&lt;option value=&quot;GT&quot;&gt;Guatemala&lt;/option&gt;
&lt;option value=&quot;GN&quot;&gt;Guinea&lt;/option&gt;
&lt;option value=&quot;GW&quot;&gt;Guinea-Bissau&lt;/option&gt;
&lt;option value=&quot;HN&quot;&gt;Honduras&lt;/option&gt;
&lt;option value=&quot;HK&quot;&gt;Hong Kong&lt;/option&gt;
&lt;option value=&quot;HU&quot;&gt;Hungary&lt;/option&gt;
&lt;option value=&quot;IN&quot;&gt;India&lt;/option&gt;
&lt;option value=&quot;ID&quot;&gt;Indonesia&lt;/option&gt;
&lt;option value=&quot;IQ&quot;&gt;Iraq&lt;/option&gt;
&lt;option value=&quot;IE&quot;&gt;Ireland&lt;/option&gt;
&lt;option value=&quot;IL&quot;&gt;Israel&lt;/option&gt;
&lt;option value=&quot;IT&quot;&gt;Italy&lt;/option&gt;
&lt;option value=&quot;JM&quot;&gt;Jamaica&lt;/option&gt;
&lt;option value=&quot;JP&quot;&gt;Japan&lt;/option&gt;
&lt;option value=&quot;JO&quot;&gt;Jordan&lt;/option&gt;
&lt;option value=&quot;KE&quot;&gt;Kenya&lt;/option&gt;
&lt;option value=&quot;KW&quot;&gt;Kuwait&lt;/option&gt;
&lt;option value=&quot;LV&quot;&gt;Latvia&lt;/option&gt;
&lt;option value=&quot;LB&quot;&gt;Lebanon&lt;/option&gt;
&lt;option value=&quot;LS&quot;&gt;Lesotho&lt;/option&gt;
&lt;option value=&quot;LR&quot;&gt;Liberia&lt;/option&gt;
&lt;option value=&quot;LY&quot;&gt;Libya&lt;/option&gt;
&lt;option value=&quot;LT&quot;&gt;Lithuania&lt;/option&gt;
&lt;option value=&quot;LU&quot;&gt;Luxembourg&lt;/option&gt;
&lt;option value=&quot;MO&quot;&gt;Macao&lt;/option&gt;
&lt;option value=&quot;MG&quot;&gt;Madagascar&lt;/option&gt;
&lt;option value=&quot;MW&quot;&gt;Malawi&lt;/option&gt;
&lt;option value=&quot;MY&quot;&gt;Malaysia&lt;/option&gt;
&lt;option value=&quot;MV&quot;&gt;Maldives&lt;/option&gt;
&lt;option value=&quot;ML&quot;&gt;Mali&lt;/option&gt;
&lt;option value=&quot;MT&quot;&gt;Malta&lt;/option&gt;
&lt;option value=&quot;MR&quot;&gt;Mauritania&lt;/option&gt;
&lt;option value=&quot;MU&quot;&gt;Mauritius&lt;/option&gt;
&lt;option value=&quot;MX&quot;&gt;Mexico&lt;/option&gt;
&lt;option value=&quot;MD&quot;&gt;Moldova&lt;/option&gt;
&lt;option value=&quot;ME&quot;&gt;Montenegro&lt;/option&gt;
&lt;option value=&quot;MA&quot;&gt;Morocco&lt;/option&gt;
&lt;option value=&quot;MZ&quot;&gt;Mozambique&lt;/option&gt;
&lt;option value=&quot;NA&quot;&gt;Namibia&lt;/option&gt;
&lt;option value=&quot;NL&quot;&gt;Netherlands&lt;/option&gt;
&lt;option value=&quot;NZ&quot;&gt;New Zealand&lt;/option&gt;
&lt;option value=&quot;NI&quot;&gt;Nicaragua&lt;/option&gt;
&lt;option value=&quot;NE&quot;&gt;Niger&lt;/option&gt;
&lt;option value=&quot;NG&quot;&gt;Nigeria&lt;/option&gt;
&lt;option value=&quot;MK&quot;&gt;North Macedonia&lt;/option&gt;
&lt;option value=&quot;NO&quot;&gt;Norway&lt;/option&gt;
&lt;option value=&quot;OM&quot;&gt;Oman&lt;/option&gt;
&lt;option value=&quot;PK&quot;&gt;Pakistan&lt;/option&gt;
&lt;option value=&quot;PS&quot;&gt;Palestine&lt;/option&gt;
&lt;option value=&quot;PA&quot;&gt;Panama&lt;/option&gt;
&lt;option value=&quot;PY&quot;&gt;Paraguay&lt;/option&gt;
&lt;option value=&quot;PE&quot;&gt;Peru&lt;/option&gt;
&lt;option value=&quot;PH&quot;&gt;Philippines&lt;/option&gt;
&lt;option value=&quot;PL&quot;&gt;Poland&lt;/option&gt;
&lt;option value=&quot;PT&quot;&gt;Portugal&lt;/option&gt;
&lt;option value=&quot;PR&quot;&gt;Puerto Rico&lt;/option&gt;
&lt;option value=&quot;QA&quot;&gt;Qatar&lt;/option&gt;
&lt;option value=&quot;RO&quot;&gt;Romania&lt;/option&gt;
&lt;option value=&quot;RW&quot;&gt;Rwanda&lt;/option&gt;
&lt;option value=&quot;SA&quot;&gt;Saudi Arabia&lt;/option&gt;
&lt;option value=&quot;SN&quot;&gt;Senegal&lt;/option&gt;
&lt;option value=&quot;RS&quot;&gt;Serbia&lt;/option&gt;
&lt;option value=&quot;SC&quot;&gt;Seychelles&lt;/option&gt;
&lt;option value=&quot;SL&quot;&gt;Sierra Leone&lt;/option&gt;
&lt;option value=&quot;SG&quot;&gt;Singapore&lt;/option&gt;
&lt;option value=&quot;SK&quot;&gt;Slovakia&lt;/option&gt;
&lt;option value=&quot;SI&quot;&gt;Slovenia&lt;/option&gt;
&lt;option value=&quot;SO&quot;&gt;Somalia&lt;/option&gt;
&lt;option value=&quot;ZA&quot;&gt;South Africa&lt;/option&gt;
&lt;option value=&quot;KR&quot;&gt;South Korea&lt;/option&gt;
&lt;option value=&quot;ES&quot;&gt;Spain&lt;/option&gt;
&lt;option value=&quot;LK&quot;&gt;Sri Lanka&lt;/option&gt;
&lt;option value=&quot;SZ&quot;&gt;Swaziland&lt;/option&gt;
&lt;option value=&quot;SE&quot;&gt;Sweden&lt;/option&gt;
&lt;option value=&quot;CH&quot;&gt;Switzerland&lt;/option&gt;
&lt;option value=&quot;TW&quot;&gt;Taiwan&lt;/option&gt;
&lt;option value=&quot;TZ&quot;&gt;Tanzania&lt;/option&gt;
&lt;option value=&quot;TH&quot;&gt;Thailand&lt;/option&gt;
&lt;option value=&quot;TG&quot;&gt;Togo&lt;/option&gt;
&lt;option value=&quot;TN&quot;&gt;Tunisia&lt;/option&gt;
&lt;option value=&quot;TR&quot;&gt;Turkey&lt;/option&gt;
&lt;option value=&quot;TC&quot;&gt;Turks and Caicos Islands&lt;/option&gt;
&lt;option value=&quot;UG&quot;&gt;Uganda&lt;/option&gt;
&lt;option value=&quot;AE&quot;&gt;United Arab Emirates&lt;/option&gt;
&lt;option value=&quot;GB&quot;&gt;United Kingdom&lt;/option&gt;
&lt;option value=&quot;US&quot; selected=&quot;selected&quot;&gt;United States&lt;/option&gt;
&lt;option value=&quot;UY&quot;&gt;Uruguay&lt;/option&gt;
&lt;option value=&quot;VN&quot;&gt;Vietnam&lt;/option&gt;
&lt;option value=&quot;YE&quot;&gt;Yemen&lt;/option&gt;
&lt;option value=&quot;ZM&quot;&gt;Zambia&lt;/option&gt;
&lt;option value=&quot;ZW&quot;&gt;Zimbabwe&lt;/option&gt;
&lt;/select&gt;        &lt;/div&gt;
        &lt;input class=&quot;js-contentAddressId &quot; type=&quot;hidden&quot; value=&quot;&quot; name=&quot;&quot; id=&quot;&quot; /&gt;            &lt;div style=&quot;text-align: center; padding-top: 20px;&quot;&gt;
            &lt;div  class=&quot;js-save-custom-address primaryButton button &quot; style=&quot;width: 100%; display: inline-block; vertical-align: middle;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Save&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            &lt;div  class=&quot;close-overlay secondaryButton button &quot; onclick=&quot;closeOverlay($(this));&quot; style=&quot;width: 100%; display: inline-block; vertical-align: middle; margin-top: 10px&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Cancel&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>






<div  id="address-suggestion-dialog"   
    class="address_suggestion_overlay  ifonly_overlay mobile  asd1" 
    style="display:none;" tabindex='-1' data-overlay="address_suggestion_overlay" 
    data-id="address_suggestion_overlay"   
>
    
    
    <div   class="address_suggestion_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="address-suggestion-dialog"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="address_suggestion_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;padding: 50px 30px 30px;&quot;&gt;
        &lt;p class=&quot;sg-f-ttl&quot;&gt;Address Verification&lt;/p&gt;
        &lt;div style=&quot;margin-top:15px;&quot;&gt;
            &lt;p class=&quot;sub-header&quot; style=&quot;font-size: 15px;&quot;&gt;We&#039;ve validated your address.&lt;/p&gt;
            &lt;div style=&quot;margin: 15px 0px&quot;&gt;
                &lt;div class=&quot;update-address&quot; style=&quot;width:270px;font-size:15px;letter-spacing: 0.04em;display: inline-block; vertical-align: top;margin: 15px 0;&quot;&gt;
                    &lt;p class=&quot;suggested-street&quot;&gt;&lt;/p&gt;
                    &lt;p class=&quot;suggested-street1&quot; style=&quot;display:none&quot;&gt;&lt;/p&gt;
                    &lt;p class=&quot;suggested-street2&quot; style=&quot;display:none&quot;&gt;&lt;/p&gt;
                    &lt;p class=&quot;suggested-city&quot;&gt;&lt;/p&gt;
                    &lt;p class=&quot;suggested-state&quot; style=&quot;display: inline-block;&quot;&gt;&lt;/p&gt;
                    &lt;p style=&quot;display: inline-block;&quot;&gt; &lt;/p&gt;
                    &lt;p class=&quot;suggested-zip&quot; style=&quot;display: inline-block;&quot;&gt;&lt;/p&gt;
                    &lt;p style=&quot;display: inline-block;&quot;&gt; &lt;/p&gt;
                    &lt;p class=&quot;suggested-country&quot; style=&quot;display: inline-block;&quot;&gt;&lt;/p&gt;
                &lt;/div&gt;
                &lt;div style=&quot;width:100px;display: inline-block; vertical-align: top;height: 0;&quot;&gt;

                &lt;/div&gt;
                &lt;div class=&quot;orignal-address&quot; style=&quot;width:270px;font-size:15px;letter-spacing: 0.04em;display: inline-block; vertical-align: top;margin: 15px 0px;&quot;&gt;
                    &lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div style=&quot;text-align: center;&quot; id=&quot;address-suggestion-dialog-button-container&quot;&gt;
                &lt;div class=&quot;address-suggestion-footer-left&quot; style=&quot;display: inline-block; vertical-align: middle;&quot;&gt;
                    &lt;div  class=&quot;save-update-address primaryButton button &quot; style=&quot;width: 270px;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;SAVE UPDATED ADDRESS&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                &lt;/div&gt;

                &lt;div class=&quot;address-suggestion-footer-center&quot; style=&quot;display: inline-block; vertical-align: middle; width: 100px; text-align: center;&quot;&gt;
                    &lt;p&gt;OR&lt;/p&gt;
                &lt;/div&gt;

                &lt;div class=&quot;address-suggestion-footer-right&quot; style=&quot;display: inline-block; vertical-align: middle;&quot;&gt;
                    &lt;div  class=&quot;address-suggestion-footer-left js-use-original-addr secondaryButton button &quot; style=&quot;width: 270px;&quot; onclick=&quot;loadCustomAddrOverlay();&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;USE ORIGINAL ADDRESS&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>







<div  id="invalid-address-dialog"   
    class="invalid_address_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="invalid_address_overlay" 
    data-id="invalid_address_overlay"   
>
    
    
    <div   class="invalid_address_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="invalid-address-dialog"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="invalid_address_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;padding: 50px 30px 30px;&quot;&gt;
        &lt;p class=&quot;sg-f-ttl&quot;&gt;Address Verification&lt;/p&gt;
        &lt;div style=&quot;margin-top: 15px;&quot;&gt;
            &lt;p class=&quot;sub-header&quot; style=&quot;font-size: 15px;&quot;&gt;We&#039;ve validated your address according to US Postal Service standards.&lt;/p&gt;
            &lt;p class=&quot;sub-header errorSummary&quot; style=&quot;font-size: 15px; margin: 0; float: none;&quot; role=&#039;alert&#039;&gt;&lt;/p&gt;
            &lt;div class=&quot;orignal-address&quot; style=&quot;margin: 30px 0;&quot;&gt;
                &lt;p style=&quot;font-weight: bold;&quot;&gt;Original address:&lt;/p&gt;
                &lt;span&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;text-center&quot;&gt;
                &lt;div style=&quot;display: inline-block; vertical-align: middle; margin-top: 10px;&quot;&gt;
                    &lt;div  class=&quot;address-suggestion-footer-right secondaryButton button &quot; onclick=&quot;closeOverlay($(this));&quot; style=&quot;width:220px&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Edit&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                &lt;/div&gt;
                &lt;div style=&quot;display: inline-block; vertical-align: middle; margin-top: 10px;&quot;&gt;
                    &lt;div  class=&quot;address-suggestion-footer-right js-use-original-addr secondaryButton button &quot; style=&quot;width:220px&quot; onclick=&quot;loadCustomAddrOverlay();&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;USE ORIGINAL ADDRESS&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>








<div  id="invalid-zipcode-dialog"   
    class="invalid_zipcode_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="invalid_zipcode_overlay" 
    data-id="invalid_zipcode_overlay"   
>
    
    
    <div   class="invalid_zipcode_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="invalid-zipcode-dialog"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="invalid_zipcode_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div style=&quot;padding: 50px 30px 30px;&quot;&gt;
        &lt;p class=&quot;sg-f-ttl&quot;&gt;Zipcode Verification&lt;/p&gt;
        &lt;div style=&quot;margin-top: 15px;&quot;&gt;
            &lt;p class=&quot;sub-header&quot; style=&quot;font-size: 15px;&quot;&gt;Could not find this zipcode in&lt;span class=&quot;js-zip-err&quot;&gt;&lt;/span&gt;&lt;/p&gt;
            &lt;p class=&quot;sub-header errorSummary&quot; style=&quot;font-size: 15px; margin: 0; float: none;&quot; role=&#039;alert&#039;&gt;&lt;/p&gt;
            &lt;div class=&quot;orignal-address&quot; style=&quot;margin: 30px 0; letter-spacing: 0.04em;&quot;&gt;
                &lt;p style=&quot;font-weight: bold;&quot;&gt;Original zipcode:&lt;/p&gt;
                &lt;span&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div style=&quot;display: inline-block; vertical-align: middle;&quot;&gt;
                &lt;div  class=&quot;address-suggestion-footer-right secondaryButton button &quot; onclick=&quot;closeOverlay($(this));&quot; style=&quot;width:220px&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Edit&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            &lt;/div&gt;
            &lt;div style=&quot;display: inline-block; vertical-align: middle;&quot;&gt;
                &lt;div  class=&quot;address-suggestion-footer-right js-use-original-addr secondaryButton button &quot; style=&quot;width:220px&quot; onclick=&quot;loadCustomAddrOverlay();&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;USE ORIGINAL ZIPCODE&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>



<script type="text/javascript">

// common_address_callFrom            1
//                            default 2 - cart, checkout
//                                    3 - order history
//                                    4 - product builder
//                                    5 - product admin
var common_address_callFrom = 2;
var common_address_mode     = g_infobox_modes.edit;

// common_address_header                1 - default
//                                      2 - address changes
var common_address_header   = 1;

var addressObj = '';

var component_address1 = '';
var component_address2 = '';
var component_city = '';
var component_state = '';
var component_zip = '';
var component_country = '';
var timeZoneId = '';

ioReady(function(){
    add_ifonly_overlay_click_handlers('#invalid-zipcode-dialog');
    add_ifonly_overlay_click_handlers('#invalid-address-dialog');
    add_ifonly_overlay_click_handlers('#address-suggestion-dialog');
    add_ifonly_overlay_click_handlers('#js-custom-address-popup');
    loadBufferedHtmlInEle('#address-scheduling-dialog-googlemaps');
    add_ifonly_overlay_click_handlers('#address-scheduling-dialog-googlemaps');

    $('.address-form-submit .address-submit, .address-form-submit .js-propose').on('click', function(e){
        var address = $('.js-google-map-address-input:visible').val();
        if(address.trim() !== '') {
            $.ajax({type:'POST',
                    url: '/common/addressValidation',
                    data: {address : address},
                    timeout: 10000,
                    dataType: 'json'})
            .done( function(data){
                if (data.result === 102) {
                    if (data.suggestedData.address_components) {
                        suggestionAddrHandling(data, address);
                    } else {
                        addressObj = formAddrComps(address);
                        addressPopUpCloseHandling();
                    }
                } else if(data.result === 103) {
                    loadCustomAddrOverlay();
                } else {
                    if(data.validData.address_components) {
                        addressObj = formAddrCompsFromGoogleResponse(data);
                    } else {
                        addressObj = formAddrComps(address);
                    }
                    if(addressObj.address1 === '') {
                        loadCustomAddrOverlay();
                    } else {
                        if(data.validData) {
                            assignLatLng(data.validData.geometry.location.lat, data.validData.geometry.location.lng)
                        }
                        if(typeof address === 'string') {
                            placeMarkerForAddress(address.trim());
                        }
                        addressPopUpCloseHandling();
                    }
                }

                if (typeof(data.timeZoneId) !== 'undefined' && data.timeZoneId) {
                    setTimeZoneIdAndRedrawCalendar(data.timeZoneId);
                }
            });
        }
    });
});




$(document).ready(function(){
    var mapHasBeenInitiated = false;

    $("#main, .js-gift-schedule-by-gifter, .user_input_delegate_container").on("click", ".loc-button.preCheckOutField, .decline.LocationPicker", function(e){
        if($(this).hasClass("decline")){
            common_address_mode = g_infobox_modes.exe;
            common_address_header = 2;
        }else{
            common_address_mode = g_infobox_modes.edit;

            if($(this).hasClass("js-addr-header-2")){
                common_address_header = 2;
            }else{
                common_address_header = 1;
            }
        }

        const $pForm = $(this).closest('.p-form');
        const $googlemaps = $('#address-scheduling-dialog-googlemaps');
        $('.address-productId', $googlemaps).val($pForm.attr('data-pid'));
        $('.address-number', $googlemaps).val($pForm.attr('data-num'));
        $('.address-oii', $googlemaps).val($pForm.attr('data-oii'));

        if (common_address_callFrom != 1) { // not in PDP
            $googlemaps.attr('celeblocation', $pForm.attr('data-cl'));
            $googlemaps.attr('celebState', $pForm.attr('data-cls'));
            $googlemaps.attr('celebcountry', $pForm.attr('data-cs'));
            $googlemaps.attr('celebName', $pForm.attr('data-cbn'));
            $googlemaps.attr('localRadiusMiles', $pForm.attr('data-lrm'));
            $googlemaps.attr('localTravelFee', $pForm.attr('data-ltf'));
            $googlemaps.attr('regionalRadiusMiles', $pForm.attr('data-rrm'));
            $googlemaps.attr('regionalTravelFee', $pForm.attr('data-rtf'));
            $googlemaps.attr('nationalTravelFee', $pForm.attr('data-ntf'));
            $googlemaps.attr('willingToTravelDistance', $pForm.attr('data-wtd'));
            $googlemaps.attr('maxLocalityTypeId', $pForm.attr('data-maxltid'));
            $googlemaps.attr('travelCost', '0');
            $googlemaps.attr('localityTypeId', '0');
            if ($pForm.attr('data-callFrom') !== undefined){
                common_address_callFrom = $pForm.attr('data-callFrom');
            }
        }
        var address = $pForm.find('input.js-userAddress').val();


        if (address != '') {
            populateTimeZoneIdFromLocation(address);
        } else {
            populateTimeZoneIdFromProduct($('.address-productId', $googlemaps).val());
        }

        show_ifonly_overlay('#address-scheduling-dialog-googlemaps');
        saveFocusedEle('#address-scheduling-dialog-googlemaps', $(this).find('input'))

        if(!mapHasBeenInitiated) {
            g_google_user_map_params = {"showAutocomplete":true,"markerMaxNum":1,"addMarker":true};
            const $userAddress = $pForm.find('input.js-userAddress');
            if (address == '') {
                address = ['celeblocation', 'celebstate', 'celebcountry']
                    .map(a => ($userAddress.attr(a) || '').trim())
                    .filter(s => s.length)
                    .join(' ');
            }
            initiateCustomMap("map-canvas6", address);
            $('.js-google-map-address-input').val(address);
            mapHasBeenInitiated = true;
        }
        return false;
    });

    $(".address-form-submit .js-no-propose").click(function(){
        if($("#address-scheduling-dialog-googlemaps .address-productId").val() == '') {
            console.log('Trigger event: $(".address-form-submit .js-no-propose")');
            console.log('Value of $("#address-scheduling-dialog-googlemaps .address-productId") is empty');
            return false;
        }
        $dest = $(".p-form[data-pid="+ $("#address-scheduling-dialog-googlemaps .address-productId").val() +"]"
            + "[data-num=" + $("#address-scheduling-dialog-googlemaps .address-number").val() +"]"
            + "[data-oii=" + $("#address-scheduling-dialog-googlemaps .address-oii").val() +"]");


        $dest = $dest.find(".infobox_mode_div.exe .js-infobox-widget-decision-div.LocationPicker:visible");
        $dest.attr("data-value", "");
        $dest.attr("data-address", "");
        $dest.attr("data-address2", "");
        $dest.attr("data-city", "");
        $dest.attr("data-state", "");
        $dest.attr("data-zipCode", "");
        $dest.attr("data-travelCost", "");
        // trigger change event
        $dest.trigger("change");

        $dest.find('.infobox_widget_decision_btn.decline').addClass('selected');
        infobox_populate_suggested_values($dest);
        infobox_update_exe_mode_decision_btn_status($dest.parents('.infobox_mode_div.exe'));

        hide_ifonly_overlay('#address-scheduling-dialog-googlemaps');
    });


    $('#address-suggestion-dialog').on('click', ".save-update-address", function(){
        var address = saveUpdatedAddrHandling();
        if (! address) {
            return false;
        }
        addressObj = formAddrComps(address);
        addressPopUpCloseHandling();
        return false;
    });

    $('#address-suggestion-dialog, #invalid-address-dialog, #invalid-zipcode-dialog').on('click',  ".js-use-original-addr",  function(){
        if($('.js-google-map-address-input').length > 0 && window.location.pathname === '/profile/dashboard/purchases') {
            $('#js-custom-address-popup').find('.js-original-addr').text($('.js-google-map-address-input').val());
            //$('#js-custom-address-popup').overlay().load();
            show_ifonly_overlay('#js-custom-address-popup');
            return false;
        }
    });

    $('.custom_address_overlay').on('click',  ".js-save-custom-address", function(){
        if(!isCustomAddressValid()) {
            return false;
        }
        addressObj = formAddrObjFromCustomPopup($(this));
        addressPopUpCloseHandling();
        return false;
    });

    $(".js-trigger-address-click").on('click', function(){
        $(this).closest('.overlay').overlay().close();
        hide_ifonly_overlay($(this).closest('.ifonly_overlay'));

        if(common_address_callFrom == 1){   // PDP
            $('.js-userAddress').click();
        } else {
            if($("#address-scheduling-dialog-googlemaps .address-productId").val() == '') {
                console.log('Trigger event: $(".js-trigger-address-click")');
                console.log('Value of $("#address-scheduling-dialog-googlemaps .address-productId") is empty');
                return false;
            }
            $dest = $(".p-form[data-pid=" + $("#address-scheduling-dialog-googlemaps .address-productId").val() +"]"
                            + "[data-num=" + $("#address-scheduling-dialog-googlemaps .address-number").val() +"]"
                            + "[data-oii=" + $("#address-scheduling-dialog-googlemaps .address-oii").val() +"]");

            $dest.find(".loc-button .userAddress").click();
        }
    });
});

function addressPopUpCloseHandling(triggeredByCallBack){
    if( typeof triggeredByCallBack === "undefined"){
        triggeredByCallBack = false;
    }

    // calculate distance
    if (common_address_callFrom == 1){ // in PDP
        if($(".js-userAddress").attr('celebLocation') !== ""){
            var location = {loc1: addressObj.zip.trim(),
                            state1: (addressObj.state != undefined ? addressObj.state.trim() : ''),
                            countryShortCode1: (addressObj.countryShortCode != undefined ? addressObj.countryShortCode.trim() : ''),
                            loc2: $(".js-userAddress").attr('celebLocation').trim(),
                            state2: $(".js-userAddress").attr('celebState').trim(),
                            countryShortCode2: ($(".js-userAddress").attr('celebCountry') != undefined ? $(".js-userAddress").attr('celebCountry').trim() : '')
                            };
            calculateDistanceForPreCheckoutForm(location, function(){
                                            addressHandling();
                                        });
        } else {
            if($("#travelCost").length === 1){
                $("#travelCost").val("0");
            }
            addressHandling();
        }
    } else if (common_address_callFrom == 5) { // Product Admin
        $('#Product_locationAddress1').val(addressObj.address1);
        $('#Product_locationAddress2').val(addressObj.address2);
        $('#Product_locationCity').val(addressObj.city);
        $('#Product_locationState').val(addressObj.state);
        $('#Product_locationZipcode').val(addressObj.zip);
        $('#Product_locationCountryShortCode').val(addressObj.countryShortCode);
    } else{
        if ($("#address-scheduling-dialog-googlemaps").attr('celeblocation')){
            var location = {loc1: addressObj.zip.trim(),
                            state1: (addressObj.state != undefined ? addressObj.state.trim() : ''),
                            countryShortCode1: (addressObj.countryShortCode != undefined ? addressObj.countryShortCode.trim() : ''),
                            loc2: $("#address-scheduling-dialog-googlemaps").attr('celebLocation').trim(),
                            state2: $("#address-scheduling-dialog-googlemaps").attr('celebState').trim(),
                            countryShortCode2: ($("#address-scheduling-dialog-googlemaps").attr('celebCountry') != undefined ? $("#address-scheduling-dialog-googlemaps").attr('celebCountry').trim() : '')
                        };
            calculateDistanceForGeneral(location, function(){addressHandling();}, true);
        } else{
            addressHandling();
        }
    }
}


function addressHandling(){
    var address = addressObj.address1
                + ((addressObj.address2 === "" || addressObj.address2 === undefined) ?  ", " : (" " + addressObj.address2 + ", "))
                + addressObj.city + ", "
                + addressObj.state + " "
                + addressObj.zip + ", "
                + addressObj.country;
    $('.js-google-map-address-input').val(address);
    if ($("#address-scheduling-dialog-googlemaps .address-productId").val() !== '') {
        $dest = $(".p-form[data-pid=" + $("#address-scheduling-dialog-googlemaps .address-productId").val() +"]"
                       + "[data-num=" + $("#address-scheduling-dialog-googlemaps .address-number").val() +"]"
                       + "[data-oii=" + $("#address-scheduling-dialog-googlemaps .address-oii").val() +"]");
        if ($dest.find(".infobox_mode_div.exe .js-infobox-widget-decision-div.LocationPicker:visible").length === 1) { // for exe mode
            $dest = $dest.find(".infobox_mode_div.exe .js-infobox-widget-decision-div.LocationPicker:visible");
            $dest.attr("data-address",    addressObj.address1);
            $dest.attr("data-address2",   addressObj.address2);
            $dest.attr("data-city",       addressObj.city);
            $dest.attr("data-state",      addressObj.state);
            $dest.attr("data-zipCode",    addressObj.zip);
            $dest.siblings(".country").val(addressObj.countryShortCode);
            $dest.attr("data-travelCost", $("#address-scheduling-dialog-googlemaps").attr("travelCost"));
            // trigger change event
            //$dest.trigger("change");
            $dest.find('.infobox_widget_decision_btn.decline').addClass('selected');
            infobox_populate_suggested_values($dest);
            infobox_update_exe_mode_decision_btn_status($dest.parents('.infobox_mode_div.exe'));
            if($(".overlay:visible").length > 0) {
                $(".overlay:visible").overlay().close();
            }
            hide_ifonly_overlay('.ifonly_overlay');


        } else {                                                                                                              // for edit mode
            $dest = $dest.find(".loc-button .userAddress");
            $dest.val(address);
            $dest.siblings(".address").val(addressObj.address1);
            $dest.siblings(".address2").val(addressObj.address2);
            $dest.siblings(".city").val(addressObj.city);
            $dest.siblings(".state").val(addressObj.state);
            $dest.siblings(".zip").val(addressObj.zip);
            $dest.siblings(".country").val(addressObj.countryShortCode);
            $dest.siblings(".js-travelCost").val($("#address-scheduling-dialog-googlemaps").attr("travelCost"));

            // trigger change event
            $dest.trigger("change");
            if($(".overlay:visible").length > 0) {
                $(".overlay:visible").overlay().close();
            }
            hide_ifonly_overlay('.ifonly_overlay');
            if(common_address_callFrom == 1){ // in PDP
                getTravelCost();
                updatePriceDisplay();
            } else {
                $dest.removeClass("required");

                // in order hisotry page, we don't save the address data by here
                // save when user click the SAVE button in order history page
                // ask Fred for more info
                if(common_address_callFrom == 3){
                    return false;
                }
                var formData = $("#address-scheduling-dialog-googlemaps .address-form :input").serialize() +
                                "&travelCost="+$("#address-scheduling-dialog-googlemaps").attr("travelCost") +
                                "&localityTypeId="+$("#address-scheduling-dialog-googlemaps").attr("localityTypeId") +
                                "&CartItemSocialInfo[address]=" + addressObj.address1 +
                                "&CartItemSocialInfo[address2]=" + addressObj.address2 +
                                "&CartItemSocialInfo[city]=" + addressObj.city +
                                "&CartItemSocialInfo[state]=" + addressObj.state +
                                "&CartItemSocialInfo[zip]=" + addressObj.zip +
                                "&CartItemSocialInfo[country]=" + addressObj.countryShortCode +
                                "&CartItemSocialInfo[latitude]=" + g_latitude +
                                "&CartItemSocialInfo[longitude]=" + g_longitude;
                // save address
                $.post( '/cart/addLocationAddress',
                    formData,
                    function(data){
                        if (data.result === 1){
                            clearCustomAddrssOverlayInputs();
                            if ((g_controller_id === 'cart' && g_controller_action_id === 'checkout') ||
                                (g_controller_action_id === 'auction' && g_controller_action_id === 'winnerinfo')
                            ) {
                                if($("#shipping:visible").length > 0 && $("#CheckoutForm_shippingAddressId").val() !== ""){
                                    getShippingAndTax('shipping');
                                } else {
                                    getShippingAndTax('default');
                                }
                            } else {
                                var $priceInfo = $dest.closest('.body-row').find('.price-info');
                                var $main = $dest.closest('.body-row').find('.main');
                                updateCostInfo(data, $main, $priceInfo);
                                displayEstimationData(data);
                                //VP-1555 - Remove error message for address for travel fee
                                $dest.css('border-bottom', 'none');
                                $dest.closest('.widget-row').find('.errorMessage').hide();
                            }


                            var $event_time=$dest.closest('.body-row').find('.cart-event-time')
                            var $time = $dest.closest('.widget-row').find('.negotiate-schedule-picker');
                            $event_time.attr('data-timezone', (data.timezoneDisplay==''?'': '('+ data.timezoneDisplay +')'));
                            if($time.val()!=''){
                                $event_time.html( $time.val() + ' ' + $event_time.attr('data-timezone') );
                            }


                        }else{
                            alertEx("Unknown Error. Please contact IfOnly Concierge for help.");
                        }
                    },
                    'json'
                );
            }
        }
    }
}

function isCustomAddressValid() {
    $('.js-error-general').remove();
    var valid = true;
    $("#js-custom-address-popup:visible").find('.js-req').each(function() {
        if($(this).val().trim() === '') {
            showGeneralErrorMsgs($(this));
            $(this).addClass("needed");
            valid = false;
        }
    });
    return valid;
}

function allRequiredFieldsExist(data) {
    var result = true;
    var suggObj = getGoogleAddressResponseSuggestion(data);
    var suggData = formSuggestionData(suggObj, data);

    if(suggData.street.trim() === '' || suggData.city.trim() === '') {
        result = false;
    }
    return result;
}

function setTimeZoneIdAndRedrawCalendar(tzId) {
    if (typeof(g_inProductBuilder) === 'undefined' && tzId != '') {
        var prevTimeZoneId = timeZoneId;
        timeZoneId = tzId;

        if (prevTimeZoneId != timeZoneId) {
            g_duringAddressSave = true;
            draw_calendar_general($('#calendar-popUp'));
            alertEx("Time zone changed!  Please verify date\/time");
        }
    }
}

// Related functions are in common.js
function addressVerification(address, callback, callbackParams, callbackAlways, callbackAlwaysParams) {
    var formData = typeof address === 'string' ? {address : address} : (typeof address === 'object' ? address : '');

    if(formData && address.trim() !== '') {
        $.ajax({
            type:'POST',
            url: '/common/addressValidation',
            data: formData,
            timeout: 10000,
            dataType: 'json'
        }).done( function(data){
            if (data.result == 102) {
                suggestionAddrHandling(data, address, callback, callbackParams, callbackAlways, callbackAlwaysParams);
            } else if(data.result == 103) {
                loadCustomAddrOverlay();
            } else {
                var addrObj = '';
                if(data.validData) {
                    addrObj = formAddrCompsFromGoogleResponse(data);
                }
                if(addrObj !== '' && addrObj.address1.indexOf('P.O.') !== -1) {
                    loadCustomAddrOverlay();
                } else {
                    if(addrObj.address1 === '' && addrObj.zipcode === '') {
                        alertEx('Please enter an address');
                    } else {
                        if(data.validData) {
                            assignLatLng(data.validData.geometry.location.lat, data.validData.geometry.location.lng);
                        }
                        if(typeof address === 'string') {
                            placeMarkerForAddress(address.trim());
                        }
                        customCallback(callback, callbackParams);
                    }
                }
            }

            if (typeof(data.timeZoneId) !== 'undefined' && data.timeZoneId) {
                setTimeZoneIdAndRedrawCalendar(data.timeZoneId);
            }
        }).always(function() {
            customCallback(callbackAlways, callbackAlwaysParams);
        });
    } else {
        return false;
    }
}

function uspsAddrValidation(address, callbackFail, callbackFailParams, callbackSuccess, callbackSuccessParams, callbackAlways, callbackAlwaysParams) {
    if(address.trim() !== '') {
        var addrObj = formAddrComps(address);
        $.ajax({
        type: "POST",
        url: '/common/addressValidation',
        data: {
            address1: addrObj.address1,
            address2: addrObj.address2,
            city: addrObj.city,
            state: addrObj.state,
            zipcode: addrObj.zip,
            countryShortCode: addrObj.countryShortCode,
            addressTypeId : 9        },
        dataType: 'json'
        }).done(function ( data ) {
            if (data.result == 102) {
                if (data.suggestion != undefined && data.suggestion.suggested != undefined && data.suggestion.suggested) {
                    var suggData = {suggested : true,
                                    street : data.suggestion.street1 + ' ' + data.suggestion.street2,
                                    street1 : data.suggestion.street1,
                                    street2 : data.suggestion.street2,
                                    city : data.suggestion.city,
                                    state : data.suggestion.state,
                                    zip : data.suggestion.zip,
                                    country : 'US',
                                    countryShortCode : 'US'};
                    loadAddressSuggestionOverlay(suggData, addrObj.address1, addrObj.address2, addrObj.city, addrObj.state, addrObj.zip, addrObj.countryShortCode);
                }
            } else if(data.result == 100) {
                var addressStr = addrObj.address1 + ' ' + addrObj.address2 + '</br>' + addrObj.city + '</br>' + addrObj.state + ' ' + addrObj.zip + ' ' + addrObj.countryShortCode;
                loadInvalidAddrOverlay(data.msg, addressStr);
                customCallback(callbackFail, callbackFailParams);
            } else {
                customCallback(callbackSuccess, callbackSuccessParams);
            }
        }).always(function() {
            customCallback(callbackAlways, callbackAlwaysParams);
        });
    } else {
        return false;
    }
}

function populateTimeZoneIdFromProduct(productId) {
    if (productId) {
        productId = parseInt(productId);
        $.ajax({
            type: 'POST',
            url: '/common/getProductTimeZoneId',
            data: {productId},
            timeout: 10000,
            dataType: 'json'
        })
        .done(data => {
            if (data.timeZoneId) {
                timeZoneId = data.timeZoneId;
            }
        });
    }
}

function populateTimeZoneIdFromLocation(address) {
    if (address) {
        $.ajax({
            type:'POST',
            url: '/common/getAddressTimeZoneId',
            data: {address},
            timeout: 10000,
            dataType: 'json'
        })
        .done(data => {
            if (data.timeZoneId) {
                timeZoneId = data.timeZoneId;
            }
        });
    }
}
</script>
<script type='text/javascript'>
var g_showPopupAt = null;


$(document).ready(function(){
        if (! g_tempUser && g_guestOrderUser) {
        $("#redirectURL").val(g_is_mobile ? '/m/' : '/');
    } else {
        // $("#redirectURL").val("");
    }

    g_showPopupAt = 9; 
        $("#body, #category-list-nav-scroll").on("click", "a", function(e){
            clearTimeout(autoPopupTimer);
            if( $(this).hasClass('close') ||
                $(this).hasClass('date-list') ||
                $(this).hasClass('corporate-request') ||
                $(this).hasClass('to-top') ||
                $(this).hasClass('backward') ||
                $(this).hasClass('forward') ||
                $(this).hasClass('allowAllUsers') ||
                $(this).hasClass('signup-button') ||
                $(this).hasClass('login-button') ||
                $(this).hasClass('add-to-bag') ||
                $(this).hasClass('buynow-button') ||
                $(this).closest('.product-content .product-desc').length > 0 ||
                $(this).hasClass('loginWithFacebookButton') ||
                $(this).hasClass('google-signinButton') ||
                $(this).hasClass('loginWithLinkedIn') ||
                $(this).hasClass('waitlist-button') ||
                $(this).hasClass('request-button') ||
                $(this).hasClass('scroll-arrow') ||
                $(this).parent().hasClass('marqueeNav') ||
                $(this).attr('to') ||
                $(this).attr('lvl')==='1' ||
                $(this).attr('id') ==='buynow-button' ||
                $(this).attr('id') ==='forgot-password' ||
                $(this).attr('id') ==='concierge-email-button' ||
                $(this).attr('id') ==='signin-warning-button' ||
                $(this).attr('id') ==='top-nav-story' ||
                $(this).attr('href') ===undefined ||
                $(this).attr('href') ==='/' ||
                $(this).attr('href') ==='/holiday' ||
                $(this).hasClass('mobile-menu-item') // VP-20786
                )
            {                           // allowed links - do default behaviour
                if ( $(this).parent().attr('id') === 'top-welcome' ) {
                    g_guest_productId        = ''; // prevent to add a product
                    g_guest_parent_productId = '';
                }
            }
            else {                    // restricted links
                console.log('buy now button pressed');
                if ($(this).attr('target') !== '_blank') {
                    $("#redirectURL").val($(this).attr('href'));
                }

                var lvl = $(this).attr('lvl');
                if( lvl > g_user_lvl || $(this).attr('href') === '#') {  // id no link (i.e #) the open sign up pop up
                    if($(this).attr('class')){
                        var $button = $(this);

                        if($button.hasClass('wishlist')){
                            $("#signUp-dialog-called-from").val('wishlist');
                        } else if($button.hasClass('following')){
                            $("#signUp-dialog-called-from").val('following');
                        } else if($button.hasClass('watchlist')){
                            $("#signUp-dialog-called-from").val('watchlist');
                        } else if($button.hasClass('js-shopping-bag')){
                            if (g_uuidCheckout) {
                                location.href = (g_is_mobile ? '/m' : '') + '/cart';
                                return false; // do not show signupDialog
                            } else {
                                $("#signUp-dialog-called-from").val('js-shopping-bag');
                            }
                        }
                    }

                    if($(this).attr('instantAccessCode')){
                        g_instantAccessCode = $(this).attr('instantAccessCode');
                    }
                    console.log(lvl);
                    
                    var uuidCheckout  = 1;
                    if (! g_forceGuestCheckout && ! uuidCheckout) {
                        signupDialog(lvl, false, {'button': $(this)});
                    }
                    return false;
                }
            }
        });
        });

function callSignupTrackingCode(){
   }

ioReady(function(){
    
});
</script>
    <script type="text/javascript">
        function ga() {
            // do nothing
        };
    </script>
    
<style>
    .mobile.confirm_pop.ifonly_pop {min-height:auto;}
    .confirm_overlay ul li{margin-left:1em;list-style: disc;}
    .confirm_overlay .ifonly_pop {width:420px; min-height:auto; padding: 30px;}

    /* common.css */
    .confirm_overlay .footer_content {margin: 0px; width: 100%;}
    .confirm_overlay.mobile .footer_content {width:100%; margin:0;}
    .confirm_overlay  {width:100%; margin:0;}
</style>



<div  id="confirm-dialog"   
    class="confirm_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="confirm_overlay" 
    data-id="confirm_overlay"   
>
    
    
    <div   class="confirm_pop  ifonly_pop mobile " 
         style="" tabindex="0" 
         role="dialog" aria-label="overlay confirm"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="confirm_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div class=&quot;dialog_header text-center&quot;&gt;
        &lt;p class=&quot;header-text&quot;&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class=&quot;dialog_body text-center mg-t-20&quot;&gt;
        &lt;div class=&quot;dialog_content &quot;&gt;
            &lt;p class=&quot;message&quot;&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;dialog_footer mg-t-20&quot;&gt;
        &lt;div class=&quot;footer_content text-center&quot; &gt;
            &lt;div  id=&quot;confirm-dialog-ok&quot; class=&quot;close-overlay small primaryButton button &quot; closePopupId=&quot;confirm_overlay&quot; style=&quot;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Confirm&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;            &lt;div  id=&quot;confirm-dialog-close&quot; class=&quot;close-overlay small secondaryButton button &quot; closePopupId=&quot;confirm_overlay&quot; style=&quot;&quot; tabIndex=&quot;0&quot; role=&quot;button&quot;&gt;&lt;span class=&quot;title-container&quot;&gt;&lt;span class=&quot;title&quot;&gt;Cancel&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;        &lt;/div&gt;
    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function(){
        add_ifonly_overlay_click_handlers('.confirm_overlay');
    });
</script>




<!--
<div id="checkout-login-cart-items" class="overlay commonDialog text-center" style='width:500px; max-width: 100%; z-index:10002; padding: 40px;'>
    <h2 class="mg-b-20">Welcome Back!</h2>
    <p class="mg-b-10">We noticed you already had items in your cart.</p>
    <p>By clicking continue, you will be redirected to your cart to review your items.</p>
    <a  class="checkout-login-cart-items-confirm mg-t-20 primaryButton button " href="/cart" popupid="checkout-login-cart-items" style="width: 120px; line-height: 40px" tabIndex="0" role="button"><span class="title-container"><span class="title">Continue</span></span></a></div>
-->




<div  id="checkout-order-summary-mobile"   
    class="checkout_order_summary_mobile_overlay  ifonly_overlay mobile  " 
    style="display:none;" tabindex='-1' data-overlay="checkout_order_summary_mobile_overlay" 
    data-id="checkout_order_summary_mobile_overlay"   
>
    
    
    <div   class="checkout_order_summary_mobile_pop  ifonly_pop mobile " 
         style="width:100%; padding: 40px 0 20px 0; height:100%;" tabindex="0" 
         role="dialog" aria-label="checkout-order-summary-mobile"  
    >
        
        <img class="ifonly_pop_close_img  new" src="https://d5xydlzdo08s0.cloudfront.net/images/icon_close_000.png" alt="close" tabindex="0" style="display:block;" role="button" />

        <div class="checkout_order_summary_mobile_pop_content  ifonly_pop_content mobile   clearfix" style="" >

<div class=' ifonly_buffer ' data-buffer='    &lt;div class=&quot;content&quot;&gt;

    &lt;/div&gt;
'></div>
        </div>
    </div>
</div>


    


<script type="text/javascript">

ioReady(function(){

    $('#lang-dropdown').change(function () {
        $('#select-lang-button').attr('lang-id', $(this).val());
    });

    $('#no-exp-lang-dropdown').change(function () {
        $('#no-exp-select-lang-button').attr('lang-id', $(this).val());
    });

    $('#no-exp-select-lang-button').click(function () {
        var languageId = $('#no-exp-select-lang-button').attr('lang-id');
        if (!languageId) {
            $('#no-experiences-language-selector-dialog .error').show();
        } else {
           setLanguageId(languageId);
        }
    });

    $('#select-lang-button').click(function () {
        var languageId = $('#select-lang-button').attr('lang-id');
        if (!languageId) {
            $('#language-selector-dialog .error').show();
        } else {
           setLanguageId(languageId);
        }
    });

    var pos = !isHandheld();
    var maskObject = { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 };

    $("#mastercard-exclusivity-dialog, #pdp-exclusivity-dialog").overlay({
        fixed: pos, closeOnClick: true, mask: maskObject
    });

    // Not used?
    //$("#realTime-notification-dialog").overlay({
      //  top: 60, left: getPopupLeftToCenter("confirm-dialog"), fixed: pos, closeOnClick: true,
        //mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
    //});

    $("#language-selector-dialog").overlay({
        fixed: pos, closeOnClick: true, mask: maskObject
    });

    $("#no-experiences-language-selector-dialog").overlay({
        fixed: pos, closeOnClick: true, mask: maskObject
    });

    $("#checkout-guest-pdp").overlay({
        top: getPopupTopToCenter("checkout-guest-pdp"), left: getPopupLeftToCenter("checkout-guest-pdp"), fixed: pos, closeOnClick: true,
        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
    });
    $("#checkout-guest-pdp-punchout").overlay({
        top: getPopupTopToCenter("checkout-guest-pdp-punchout"), left: getPopupLeftToCenter("checkout-guest-pdp-punchout"), fixed: pos, closeOnClick: true,
        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
    });

//    $("#checkout-login-cart-items").overlay({
//        top: getPopupTopToCenter("checkout-login-cart-items"), left: getPopupLeftToCenter("checkout-login-cart-items"), fixed: pos, closeOnClick: true,
//        mask: { color: '#000000', loadSpeed: 200, closeSpeed:0, opacity: 0.5 }
//    });

    add_ifonly_overlay_click_handlers('#checkout-order-summary-mobile', true, {
        onLoadCallback:  function() {
            $('#checkout-order-summary-mobile .content').html($('#checkout .js-order-summary'));
            $('.summary-without-total').show();
            $('.js-order-summary .table-body').css({display: 'block'});
            $('.js-order-summary').addClass('open-mobile');
            $('.js-edit-cart').show();
            $('.js-show-details').hide();
            $('body').css({overflowY:'hidden'})
        },
        onCloseCallback: function() {
            $('#checkout .main-col-2').html($('.js-order-summary'));
            $('.js-order-summary').removeClass('open-mobile');
            $('.summary-without-total').css({display: ''});
            $('.js-order-summary .table-body').css({display: ''});
            $('.js-edit-cart').hide();
            $('.js-show-details').show();
            $('body').css({overflowY:'scroll'})
        }
    });

    
});
</script>
<script>
// common layout ajax
var afterLoadContentUrl = (g_is_mobile ? "/m/services/common/getAfterLoadContent":"/services/common/getAfterLoadContent");
var showMobileHeader    = 0;

if($(document).width() <= 991 || 0 || g_is_mobile) {
    showMobileHeader = 1;
}

$.ajax({
    type: "POST",
    url: afterLoadContentUrl,
    data: {
        'catId'          : g_catId,
        controllerId     : g_controller_id,
        currentUrl       : '%2Fm%2Ffilter%2Foptions%2Flocation%2F8910',
        headerVersion    : g_headerVersion,
        showMobileHeader : showMobileHeader
    },
    dataType: "json",
    success: function(data){
        if(data.result === 1){
            // notification
            // populateNotificationHtml(data);
            refreshNotifications();

            $("body").append(data.discoveryHtml);
            // mobile level menu
            // change rendering depending on whether element in question exists or not
            if (showMobileHeader) {
                if ($("#mobile-header #nav .nav-menu.level-details").length) {
                    $("#nav .nav-menu.level-details").prepend(data.mobileMenu.level2.html);
                    $("#mobile-header").append(data.mobileFilterHtml);
                } else {
                    // VP-25709 $('#mobile-header') always exists, we try to renderMobileHeader() in _header before this but doesnt exist yet
                    if (false && $('#mobile-header').length) {
                        // is utilized now in frontend.views/layouts/_header if added as html attribute
                        $('#mobile-header').attr('data-nav-details', data.mobileMenu.level2.html);
                        $("#mobile-header").attr('data-mobile-filter-html', data.mobileFilterHtml);
                    } else {
                        $("#nav .nav-menu.level-details").prepend(data.mobileMenu.level2.html);
                        $("#mobile-header").append(data.mobileFilterHtml);
                    }
                }
            }

            if(g_is_mobile){
                $("#modal-container").append(data.modalContent);
                if (data.cartItemsCnt == 1) {
                    g_user_carted_items_cnt = data.cartItemsCnt;
                }

                $("#js-cart-item-cnt").text(data.cartItemsCnt);
            }else{

                //mini cart popUp
                populateCartPopupHtml(data.cartPopUp);

                if (data.cartItemsCnt > 0){
                    $("#top-welcome .shopping").addClass("filled");
                    $("#cart-item-count").text(data.cartItemsCnt);
                    $("#js-cart-item-cnt").text(data.cartItemsCnt);
                    g_user_carted_items_cnt = data.cartItemsCnt;
                    $("#cart-item-count").show();
                }

                // desktop navigation menu
                if (data.desktopMenu !== undefined) {
                    if (g_headerVersion==2) {
                        $.each(data.desktopMenu.level2, function(lvl2_parentId,lvl2_menus){
                            $.each(lvl2_menus, function(lvl2_menu_index, lvl2_menu){
                                var lvl2_menu_name = lvl2_menu.displayName;
                                var lvl2_menu_content = lvl2_menu.content;
                                var dropDown = $(".level-menu .l-menu.js-menu[data-navmenuid="+lvl2_parentId+"] .drop-down");

                                if (dropDown.length > 0) {
                                    var $lvl2_container = $("<div class='lvl2_container'></div>");
                                    $lvl2_container.append("<div class='lvl2_title sg-f-btn sg-text-transform sg-bg-1 sg-c-3'>" +lvl2_menu_name+ "</div>");
                                    $lvl2_container.append("<div class='lvl2_content'>" +lvl2_menu_content+ "</div>");
                                    dropDown.append($lvl2_container);
                                }
                            });
                        });
                    }
                    else{
                        $.each(data.desktopMenu.level2, function(key,value){
                            $.each(value, function(k,val){
                                if(val.displayName == null || val.displayName.trim() === ""){
                                    $(".level-menu .l-menu.js-menu[data-navmenuid="+key+"] .drop-down .level-2").addClass("hidden");
                                }
                                $(".level-menu .l-menu.js-menu[data-navmenuid="+key+"] .drop-down .level-2").append("<div class='io-col'><p class='fo-13-i-g co-ff'>"+val.displayName+"</p></div>");
                                $(".level-menu .l-menu.js-menu[data-navmenuid="+key+"] .drop-down .level-3").append("<div class='io-col'>"+val.content+"</div>");
                            });

                            $(".level-menu .l-menu").each(function(){
                                //var thisLeft = $(this).position().left;
                                $(this).siblings(".l-menu").children(".highlight-bar").hide();
                                $(this).siblings(".l-menu").children(".drop-down").hide();
                                //$(this).children(".highlight-bar").show();
                                // set the proper left
                                //$(this).children(".drop-down").css("left", thisLeft+"px");
                                // give enough width firstly
                                $(this).children(".drop-down").css('min-width', 900);
                                //$(this).children(".drop-down").show();
                                // adjust to the proper width
                                $(this).children(".drop-down").css('min-width', $(this).children(".drop-down").find(".level-2 .io-col").length * 160);
                            });
                        });
                    }
                }
                // desktop mega menu
                if(data.desktopMegaMenu !== undefined){
                    var menu_limit = 16;
                    for(var i=0; i<data.desktopMegaMenu.length; i++){
                        var menu_count = 0;
                        var has_hidden_items = false;
                        var lvl1_item = data.desktopMegaMenu[i];
                        var $lvl1_menu = $('.mega-menu .l-menu[data-navmenuid=' +lvl1_item.navMenuId+ ']');

                        if ($lvl1_menu.length <= 0) { continue; }

                        var $dropdown = $lvl1_menu.find('.drop-down');
                        var $list = $lvl1_menu.find('.mega-menu-list');
                        var $pics = $lvl1_menu.find('.mega-menu-pics');

                        var level2 = lvl1_item.children;
                        for (var j=0; j<level2.length; j++){
                            var lvl2_item = level2[j];

                            var hideable = menu_count>menu_limit?'hideable':'';
                            has_hidden_items = true;
                            $list.append("<div class='mega-menu-title sg-f-btn sg-c-grey-99 " +hideable+ "'>" +lvl2_item.navMenuName + '</div>');
                            menu_count++;

                            var level3 = lvl2_item.children;
                            for(var k=0; k<level3.length; k++){
                                var lvl3_item = level3[k];

                                hideable = menu_count>menu_limit?'hideable':'';
                                has_hidden_items = true;
                                var menu_item = $("<div class='mega-menu-item sg-f-btn " +hideable+"'>" +lvl3_item.navMenuName + '</div>');
                                menu_item.attr('data-menuid', lvl3_item.navMenuId);
                                menu_item.mouseenter(function(){
                                    //alert('ssss');
                                    select_mega_menu_item($(this))
                                    show_mega_menu_item_pics($(this));
                                });
                                $list.append(menu_item);
                                menu_count++;

                                //if(menu_count>2){continue;}

                                // get pics style
                                var menu_item_pics_style = '';
                                if(menu_count%3 === 0){
                                    menu_item_pics_style = 'pics9';
                                }
                                else if(menu_count%3 === 1) {
                                    menu_item_pics_style = 'pics6';
                                }else{
                                    menu_item_pics_style = 'pics3';
                                }

                                //get pics data
                                var pics_data = [];
                                var pics_num = 0;
                                if(menu_item_pics_style === 'pics9'){
                                    pics_num = 9;
                                } else if(menu_item_pics_style === 'pics6'){
                                    pics_num = 6;
                                } else {
                                    pics_num = 3;
                                }
                                for(var x=0; x<pics_num; x++){
                                    var collection = {title:'master a new skill', subtitle:'', collectionImageSrc:'/media/categories/5/05091900_1464127726.jpg', collectionUrl:'/p/4804'};
                                    collection.collectionImageSrc = getStaticFile('/images/fullfilment/Thank-You-digital-new.jpg');
                                    pics_data.push(collection);
                                }


                                var $pics_div = $("<div class='mega-menu-item-pics " +menu_item_pics_style+ " clearfix'></div>");
                                $pics_div.attr('data-menuid', lvl3_item.navMenuId);
                                for(var x =0; x<pics_data.length; x++){
                                    //var collection = pics_data[x];
                                    //var collection_html = get_collection_dom(collection, $('#collection_template'), true);
                                    //$pics_div.append(collection_html);

                                    var $pic = $("<a class='item-pic'><div class='gradient'></div><table><tr><td></td></tr></table></a>");
                                    $pic.attr('href', (g_is_mobile ? '/m' : '') + collection.collectionUrl);
                                    $pic.css('background-image', 'url("' + collection.collectionImageSrc + '")');
                                    $pic.find('td').html(collection.title);
                                    $pics_div.append($pic);
                                }
                                $pics.append($pics_div);
                            }
                        }

                        if(has_hidden_items){
                            var $morebtn = $("<div class='more-btn'></div>");
                            $morebtn.click(function(){
                                $(this).parents('.mega-menu-list').toggleClass('show-hideable');
                            });
                            $list.append($morebtn);
                        }
                    }
                }
                // mobile filter
                // for responsive
                if(typeof(checkSearchAppended) !== "undefined") {
                    checkSearchAppended();
                }
            }

            //
            if(data.hasWishlist){
                var $dWishlistImg = $("#top-welcome .wishlist img");
                if ($dWishlistImg.length > 0){
                    $dWishlistImg.attr("src", $dWishlistImg.attr("data-has-wishlist"));
                }

                var $mWishlistImg = $("#top .wishlist img");
                if ($mWishlistImg.length > 0){
                    $mWishlistImg.attr("src", $mWishlistImg.attr("data-has-wishlist"));
                }

            }


            // codes to exec after all common tasks

            if(g_is_mobile){

            }else{
                //getWishlistPopupHtml(false, false);

            }
        }else{

        }


    },error: function(data){

    }
});
// common layout ajax

//**********************************
//
//**********************************
function sawHowItWorks(){
    if (g_show_how_it_works) {
        $.ajax({
            type:  "POST",
            url: "/website/sawHowItWorks",
            data: { userId: g_is_guest ? 0 : g_userId },
            dataType: 'json'
        }).done(function ( data ) {

        });
    }
}

//**********************************
//
//**********************************
function registerDiscoveryWidget($obj, type, css, params){
    if($obj.siblings(".js-discovery-popup").length === 0){
        var $clone = $(".js-discovery-popup-base").clone().removeClass("js-discovery-popup-base discovery-popup-base");
        $obj.after($clone);
        var position = $obj.position();
        if(css !== undefined && css.top !== undefined){
            var top = css.top+"px";
        }else{
            var marginTop = $obj.css("padding-top");
            marginTop = parseFloat(marginTop.substr(0,marginTop.indexOf("px")));
            var marginBottom = $obj.css("padding-bottom");
            marginBottom = parseFloat(marginBottom.substr(0,marginBottom.indexOf("px")));
            var top = (position.top+$obj.height()+marginTop+marginBottom)+"px";
        }
        $clone.css({
            "left":position.left,
            "top":top
        });
        if(css !== undefined && css.width !== undefined){
            $clone.css("width", css.width+"px");
        }

        switch(type){
            case g_discovery_type.desktopNav:
                $clone.find(".js-more-items").hide();
                $clone.find(".js-disc-col").addClass("width-100-p");
                $clone.fadeIn("fast");
                break;
            case g_discovery_type.desktopWidget:
                var colCnt = $clone.find(".js-disc-col").length;
                var tempW  = 120;
                $clone.find(".js-disc-col").each(function(){
                    if($(this).width() > tempW){
                        tempW = $(this).width();
                    }
                });
                $clone.css("width",(colCnt*tempW+25)+"px");
                $clone.find(".js-view-less, .js-view-more, .js-disc-header").hide();
                break;
        }

        if(params !== undefined && params.callback !== undefined){
            params.callback();
        }
    }
}

ioReady(function() {
    /* Jun, Fred
        // moved to _common_inline_js.php
        // This object must be defined before the lazysizes script
        // config of lazySizes
        window.lazySizesConfig = window.lazySizesConfig || {};
        window.lazySizesConfig.lazyClass = 'js-lazyload';
        window.lazySizesConfig.loadMode = 1; // only load visible elements when page loaded - default is 2
    */
});

function discoveryViewMore($obj){
    if ($('.js-top-nav-search-disc').css('display') !== 'none') {
        $("#top-nav-search").focus();
    }
    $obj.hide();
    $obj.siblings(".js-more-items").slideDown();
}

function discoveryShowLess($obj){
    if ($('.js-top-nav-search-disc').css('display') !== 'none') {
        $("#top-nav-search").focus();
    }
    $obj.closest(".js-more-items").slideUp();
    $obj.closest(".js-disc-col").find(".js-view-more").show();
}

</script>

    <div id='popups_div'></div><!-- used to quickly locate the popups -->
        
    <script>
        var performanceMetrics = {};
    </script>
    <button id="ot-sdk-btn" class="ot-sdk-show-settings" style="display:none">Manage Cookies</button><script>    onScriptGlobal('_satellite', s => s.pageBottom());
    document.addEventListener('OneTrustGroupsUpdated', () => {
        Promise.resolve().then(() => {
            $('#onetrust-accept-btn-handler:visible').focus();
        });
    });</script><script type="text/javascript" src="/scripts/node_modules/moment/min/moment.min.js"></script>
<script type="text/javascript" src="/scripts/node_modules/slick-carousel/slick/slick.min.js"></script>
</body>
</html>
